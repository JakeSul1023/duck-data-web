/*! For license information please see main.b57b5df5.js.LICENSE.txt */
(()=>{var e={85:(e,t,n)=>{"use strict";var r=n(340),i=n(950),o=n(119);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var k=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var P=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case E:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return(e.displayName||"Context")+".Provider";case _:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var M=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},D=[],B=-1;function U(e){return{current:e}}function z(e){0>B||(e.current=D[B],D[B]=null,B--)}function $(e,t){B++,D[B]=e.current,e.current=t}var j=U(null),V=U(null),W=U(null),G=U(null);function H(e,t){switch($(W,t),$(V,e),$(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(j),$(j,e)}function X(){z(j),z(V),z(W)}function q(e){null!==e.memoizedState&&$(G,e);var t=j.current,n=od(t,e.type);t!==n&&($(V,e),$(j,n))}function K(e){V.current===e&&(z(j),z(V)),G.current===e&&(z(G),qd._currentValue=F)}var Y=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,Q=r.unstable_cancelCallback,J=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,se=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~o)?i=ve(r):0!==(s&=a)?i=ve(s):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~o)?i=ve(a):0!==s?i=ve(s):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function _e(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function Ee(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ke(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ie=Math.random().toString(36).slice(2),Le="__reactFiber$"+Ie,Me="__reactProps$"+Ie,Oe="__reactContainer$"+Ie,Ne="__reactEvents$"+Ie,Fe="__reactListeners$"+Ie,De="__reactHandles$"+Ie,Be="__reactResources$"+Ie,Ue="__reactMarker$"+Ie;function ze(e){delete e[Le],delete e[Me],delete e[Ne],delete e[Fe],delete e[De]}function $e(e){var t=e[Le];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Le]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Le])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function je(e){if(e=e[Le]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function We(e){var t=e[Be];return t||(t=e[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ue]=!0}var He=new Set,Xe={};function qe(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Xe[e]=t,e=0;e<t.length;e++)He.add(t[e])}var Ye,Ze,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Je,i)&&(Qe.test(i)?et[i]=!0:(Je[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Ze}var ot=!1;function st(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,o,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=n?vt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,o,s,a){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function _t(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(M(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&St(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&St(e,o,t[o])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return kt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Mt=null;function Ot(e){var t=je(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Me]||null;if(!i)throw Error(s(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":_t(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Nt=!1;function Ft(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return e(t)}finally{if(Nt=!1,(null!==Lt||null!==Mt)&&($c(),Lt&&(t=Lt,e=Mt,Mt=Lt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Me]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Bt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Bt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Mh){Ut=!1}var $t=null,jt=null,Vt=null;function Wt(){if(Vt)return Vt;var e,t,n=jt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Vt=i.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ht(){return!0}function Xt(){return!1}function qt(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Ht:Xt,this.isPropagationStopped=Xt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ht)},persist:function(){},isPersistent:Ht}),t}var Kt,Yt,Zt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=qt(Qt),en=h({},Qt,{view:0,detail:0}),tn=qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Kt=e.screenX-Zt.screenX,Yt=e.screenY-Zt.screenY):Yt=Kt=0,Zt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=qt(nn),on=qt(h({},nn,{dataTransfer:0})),sn=qt(h({},en,{relatedTarget:0})),an=qt(h({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=qt(h({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=qt(h({},Qt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var gn=qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=qt(h({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=qt(h({},Qt,{newState:0,oldState:0})),xn=[9,13,27,32],wn=Bt&&"CompositionEvent"in window,En=null;Bt&&"documentMode"in document&&(En=document.documentMode);var Sn=Bt&&"TextEvent"in window&&!En,Tn=Bt&&(!wn||En&&8<En&&11>=En),An=String.fromCharCode(32),Cn=!1;function kn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Mn(e,t,n,r){Lt?Mt?Mt.push(r):Mt=[r]:Lt=r,0<(t=Wu(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Nn=null;function Fn(e){Fu(e,0)}function Dn(e){if(ht(Ve(e)))return e}function Bn(e,t){if("change"===e)return t}var Un=!1;if(Bt){var zn;if(Bt){var $n="oninput"in document;if(!$n){var jn=document.createElement("div");jn.setAttribute("oninput","return;"),$n="function"===typeof jn.oninput}zn=$n}else zn=!1;Un=zn&&(!document.documentMode||9<document.documentMode)}function Vn(){On&&(On.detachEvent("onpropertychange",Wn),Nn=On=null)}function Wn(e){if("value"===e.propertyName&&Dn(Nn)){var t=[];Mn(t,Nn,e,It(e)),Ft(Fn,t)}}function Gn(e,t,n){"focusin"===e?(Vn(),Nn=n,(On=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Vn()}function Hn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(Nn)}function Xn(e,t){if("click"===e)return Dn(t)}function qn(e,t){if("input"===e||"change"===e)return Dn(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Kn(e[i],t[i]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Bt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,sr=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Yn(or,r)||(or=r,0<(r=Wu(ir,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Bt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),gr=hr("animationstart"),mr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),_r=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){_r.set(e,t),qe(t,[e])}xr.push("scrollEnd");var Er=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Er.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Tr=[],Ar=0,Cr=0;function kr(){for(var e=Ar,t=Cr=Ar=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var o=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==o&&Lr(n,i,o)}}function Pr(e,t,n,r){Tr[Ar++]=e,Tr[Ar++]=t,Tr[Ar++]=n,Tr[Ar++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Pr(e,t,n,r),Mr(e)}function Ir(e,t){return Pr(e,null,null,t),Mr(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Mr(e){if(50<Lc)throw Lc=0,Mc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Nr(e,t,n,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,i,o){var a=0;if(r=e,"function"===typeof e)Dr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,j.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fr(31,n,t,i)).elementType=C,e.lanes=o,e;case m:return $r(n.children,i,o,t);case y:a=8,i|=24;break;case v:return(e=Fr(12,n,t,2|i)).elementType=v,e.lanes=o,e;case E:return(e=Fr(13,n,t,i)).elementType=E,e.lanes=o,e;case S:return(e=Fr(19,n,t,i)).elementType=S,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case _:a=9;break e;case w:a=11;break e;case T:a=14;break e;case A:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function $r(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function jr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Vr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Gr=0,Hr=null,Xr=0,qr=[],Kr=0,Yr=null,Zr=1,Qr="";function Jr(e,t){Wr[Gr++]=Xr,Wr[Gr++]=Hr,Hr=e,Xr=t}function ei(e,t,n){qr[Kr++]=Zr,qr[Kr++]=Qr,qr[Kr++]=Yr,Yr=e;var r=Zr;e=Qr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var o=32-fe(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Zr=1<<32-fe(t)+i|n<<i|r,Qr=o+e}else Zr=1<<o|n<<i|r,Qr=e}function ti(e){null!==e.return&&(Jr(e,1),ei(e,1,0))}function ni(e){for(;e===Hr;)Hr=Wr[--Gr],Wr[Gr]=null,Xr=Wr[--Gr],Wr[Gr]=null;for(;e===Yr;)Yr=qr[--Kr],qr[Kr]=null,Qr=qr[--Kr],qr[Kr]=null,Zr=qr[--Kr],qr[Kr]=null}var ri=null,ii=null,oi=!1,si=null,ai=!1,li=Error(s(519));function ci(e){throw gi(Sr(Error(s(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Le]=e,t[Me]=r,n){case"dialog":Du("cancel",t),Du("close",t);break;case"iframe":case"object":case"embed":Du("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Du(Ou[n],t);break;case"source":Du("error",t);break;case"img":case"image":case"link":Du("error",t),Du("load",t);break;case"details":Du("toggle",t);break;case"input":Du("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Du("invalid",t);break;case"textarea":Du("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Du("beforetoggle",t),Du("toggle",t)),null!=r.onScroll&&Du("scroll",t),null!=r.onScrollEnd&&Du("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,oi=!1}function pi(){var e=si;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),si=null),e}function gi(e){null===si?si=[e]:si.push(e)}var mi=U(null),yi=null,vi=null;function bi(e,t,n){$(mi,t._currentValue),t._currentValue=n}function _i(e){e._currentValue=mi.current,z(mi)}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wi(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var a=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xi(o.return,n,e),r||(a=null);break e}o=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),xi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ei(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=i.type;Kn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(a=i.alternate))throw Error(s(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(qd):e=[qd])}i=i.return}null!==e&&wi(t,e,n,r),t.flags|=262144}function Si(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ai(e){return ki(yi,e)}function Ci(e,t){return null===yi&&Ti(e),ki(e,t)}function ki(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(s(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Pi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ri=r.unstable_scheduleCallback,Ii=r.unstable_NormalPriority,Li={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mi(){return{controller:new Pi,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Ri(Ii,(function(){e.controller.abort()}))}var Ni=null,Fi=0,Di=0,Bi=null;function Ui(){if(0===--Fi&&null!==Ni){null!==Bi&&(Bi.status="fulfilled");var e=Ni;Ni=null,Di=0,Bi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ni){var n=Ni=[];Fi=0,Di=Pu(),Bi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fi++,t.then(Ui,Ui)}(0,t),null!==zi&&zi(e,t)};var $i=U(null);function ji(){var e=$i.current;return null!==e?e:rc.pooledCache}function Vi(e,t){$($i,null===t?$i.current:t.pool)}function Wi(){var e=ji();return null===e?null:{parent:Li._currentValue,pool:e}}var Gi=Error(s(460)),Hi=Error(s(474)),Xi=Error(s(542)),qi={then:function(){}};function Ki(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Zi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Qi=t,Gi}}var Qi=null;function Ji(){if(null===Qi)throw Error(s(459));var e=Qi;return Qi=null,e}function eo(e){if(e===Gi||e===Xi)throw Error(s(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Mr(e),Lr(e,null,n),t}return Pr(e,r,t,n),Mr(e)}function so(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function ao(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Bi)throw Bi}}function uo(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(oc&f)===f:(r&f)===f){0!==f&&f===Di&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,d,f):g)||void 0===f)break e;d=h({},d,f);break e;case 2:to=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),fc|=s,e.lanes=s,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var po=U(null),go=U(0);function mo(e,t){$(go,e=dc),$(po,t),dc=e|t.baseLanes}function yo(){$(go,dc),$(po,po.current)}function vo(){dc=go.current,z(po),z(go)}var bo=0,_o=null,xo=null,wo=null,Eo=!1,So=!1,To=!1,Ao=0,Co=0,ko=null,Po=0;function Ro(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function Lo(e,t,n,r,i,o){return bo=o,_o=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Hs:Xs,To=!1,o=n(r,i),To=!1,So&&(o=Oo(t,n,r,i)),Mo(e),o}function Mo(e){O.H=Gs;var t=null!==xo&&null!==xo.next;if(bo=0,wo=xo=_o=null,Eo=!1,Co=0,ko=null,t)throw Error(s(300));null===e||Ca||null!==(e=e.dependencies)&&Si(e)&&(Ca=!0)}function Oo(e,t,n,r){_o=e;var i=0;do{if(So&&(ko=null),Co=0,So=!1,25<=i)throw Error(s(301));if(i+=1,wo=xo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}O.H=qs,o=t(n,r)}while(So);return o}function No(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?$o(t):t,e=e.useState()[0],(null!==xo?xo.memoizedState:null)!==e&&(_o.flags|=1024),t}function Fo(){var e=0!==Ao;return Ao=0,e}function Do(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Bo(e){if(Eo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Eo=!1}bo=0,wo=xo=_o=null,So=!1,Co=Ao=0,ko=null}function Uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wo?_o.memoizedState=wo=e:wo=wo.next=e,wo}function zo(){if(null===xo){var e=_o.alternate;e=null!==e?e.memoizedState:null}else e=xo.next;var t=null===wo?_o.memoizedState:wo.next;if(null!==t)wo=t,xo=e;else{if(null===e){if(null===_o.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(xo=e).memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},null===wo?_o.memoizedState=wo=e:wo=wo.next=e}return wo}function $o(e){var t=Co;return Co+=1,null===ko&&(ko=[]),e=Zi(ko,e,t),t=_o,null===(null===wo?t.memoizedState:wo.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Hs:Xs),e}function jo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return $o(e);if(e.$$typeof===x)return Ai(e)}throw Error(s(438,String(e)))}function Vo(e){var t=null,n=_o.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=_o.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_o.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=k;return t.index++,n}function Wo(e,t){return"function"===typeof t?t(e):t}function Go(e){return Ho(zo(),xo,e)}function Ho(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(bo&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Di&&(d=!0);else{if((bo&f)===f){u=u.next,f===Di&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=o):c=c.next=h,_o.lanes|=f,fc|=f}h=u.action,To&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=o):c=c.next=f,_o.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=o:c.next=l,!Kn(o,e.memoizedState)&&(Ca=!0,d&&null!==(n=Bi)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=c,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Xo(e){var t=zo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Kn(o,t.memoizedState)||(Ca=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function qo(e,t,n){var r=_o,i=zo(),o=oi;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Kn((xo||i).memoizedState,n);if(a&&(i.memoizedState=n,Ca=!0),i=i.queue,ys(2048,8,Zo.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==wo&&1&wo.memoizedState.tag){if(r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Yo.bind(null,r,i,n,t),null),null===rc)throw Error(s(349));o||0!==(124&bo)||Ko(r,t,n)}return n}function Ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_o.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_o.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yo(e,t,n,r){t.value=n,t.getSnapshot=r,Qo(t)&&Jo(e)}function Zo(e,t,n){return n((function(){Qo(t)&&Jo(e)}))}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(r){return!0}}function Jo(e){var t=Ir(e,2);null!==t&&Fc(t,e,2)}function es(e){var t=Uo();if("function"===typeof e){var n=e;if(e=n(),To){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:e},t}function ts(e,t,n,r){return e.baseState=n,Ho(e,xo,"function"===typeof r?r:Wo)}function ns(e,t,n,r,i){if(js(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==O.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,rs(t,o)):(o.next=n.next,t.pending=n.next=o)}}function rs(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=O.T,s={};O.T=s;try{var a=n(i,r),l=O.S;null!==l&&l(s,a),is(e,t,a)}catch(c){ss(e,t,c)}finally{O.T=o}}else try{is(e,t,o=n(i,r))}catch(u){ss(e,t,u)}}function is(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){os(e,t,n)}),(function(n){return ss(e,t,n)})):os(e,t,n)}function os(e,t,n){t.status="fulfilled",t.value=n,as(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,rs(e,n)))}function ss(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,as(t),t=t.next}while(t!==r)}e.action=null}function as(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ls(e,t){return t}function cs(e,t){if(oi){var n=rc.formState;if(null!==n){e:{var r=_o;if(oi){if(ii){t:{for(var i=ii,o=ai;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Uo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:t},n.queue=r,n=Us.bind(null,_o,r),r.dispatch=n,r=es(!1),o=$s.bind(null,_o,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Uo()).queue=i,n=ns.bind(null,_o,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function us(e){return ds(zo(),xo,e)}function ds(e,t,n){if(t=Ho(e,t,ls)[0],e=Go(Wo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=$o(t)}catch(s){if(s===Gi)throw Xi;throw s}else r=t;var i=(t=zo()).queue,o=i.dispatch;return n!==t.memoizedState&&(_o.flags|=2048,ps(9,{destroy:void 0,resource:void 0},hs.bind(null,i,n),null)),[r,o,e]}function hs(e,t){e.action=t}function fs(e){var t=zo(),n=xo;if(null!==n)return ds(t,n,e);zo(),t=t.memoizedState;var r=(n=zo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ps(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=_o.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_o.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gs(){return zo().memoizedState}function ms(e,t,n,r){var i=Uo();r=void 0===r?null:r,_o.flags|=e,i.memoizedState=ps(1|t,{destroy:void 0,resource:void 0},n,r)}function ys(e,t,n,r){var i=zo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==xo&&null!==r&&Io(r,xo.memoizedState.deps)?i.memoizedState=ps(t,o,n,r):(_o.flags|=e,i.memoizedState=ps(1|t,o,n,r))}function vs(e,t){ms(8390656,8,e,t)}function bs(e,t){ys(2048,8,e,t)}function _s(e,t){return ys(4,2,e,t)}function xs(e,t){return ys(4,4,e,t)}function ws(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Es(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ys(4,4,ws.bind(null,t,e),n)}function Ss(){}function Ts(e,t){var n=zo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function As(e,t){var n=zo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Io(t,r[1]))return r[0];if(r=e(),To){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Cs(e,t,n){return void 0===n||0!==(1073741824&bo)?e.memoizedState=t:(e.memoizedState=n,e=Nc(),_o.lanes|=e,fc|=e,n)}function ks(e,t,n,r){return Kn(n,t)?n:null!==po.current?(e=Cs(e,n,r),Kn(e,t)||(Ca=!0),e):0===(42&bo)?(Ca=!0,e.memoizedState=n):(e=Nc(),_o.lanes|=e,fc|=e,t)}function Ps(e,t,n,r,i){var o=N.p;N.p=0!==o&&8>o?o:8;var s=O.T,a={};O.T=a,$s(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)zs(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Oc());else zs(e,t,r,Oc())}catch(u){zs(e,t,{then:function(){},status:"rejected",reason:u},Oc())}finally{N.p=o,O.T=s}}function Rs(){}function Is(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=Ls(e).queue;Ps(e,i,t,F,null===n?Rs:function(){return Ms(e),n(r)})}function Ls(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ms(e){zs(e,Ls(e).next.queue,{},Oc())}function Os(){return Ai(qd)}function Ns(){return zo().memoizedState}function Fs(){return zo().memoizedState}function Ds(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=oo(t,e=io(n),n);return null!==r&&(Fc(r,t,n),so(r,t,n)),t={cache:Mi()},void(e.payload=t)}t=t.return}}function Bs(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},js(e)?Vs(t,n):null!==(n=Rr(e,t,n,r))&&(Fc(n,e,r),Ws(n,t,r))}function Us(e,t,n){zs(e,t,n,Oc())}function zs(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(js(e))Vs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Kn(a,s))return Pr(e,t,i,0),null===rc&&kr(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Fc(n,e,r),Ws(n,t,r),!0}return!1}function $s(e,t,n,r){if(r={lane:2,revertLane:Pu(),action:r,hasEagerState:!1,eagerState:null,next:null},js(e)){if(t)throw Error(s(479))}else null!==(t=Rr(e,n,r,2))&&Fc(t,e,2)}function js(e){var t=e.alternate;return e===_o||null!==t&&t===_o}function Vs(e,t){So=Eo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ws(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Gs={readContext:Ai,use:jo,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useLayoutEffect:Ro,useInsertionEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useDeferredValue:Ro,useTransition:Ro,useSyncExternalStore:Ro,useId:Ro,useHostTransitionStatus:Ro,useFormState:Ro,useActionState:Ro,useOptimistic:Ro,useMemoCache:Ro,useCacheRefresh:Ro},Hs={readContext:Ai,use:jo,useCallback:function(e,t){return Uo().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:vs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ms(4194308,4,ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ms(4194308,4,e,t)},useInsertionEffect:function(e,t){ms(4,2,e,t)},useMemo:function(e,t){var n=Uo();t=void 0===t?null:t;var r=e();if(To){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Uo();if(void 0!==n){var i=n(t);if(To){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Bs.bind(null,_o,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Uo().memoizedState=e},useState:function(e){var t=(e=es(e)).queue,n=Us.bind(null,_o,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ss,useDeferredValue:function(e,t){return Cs(Uo(),e,t)},useTransition:function(){var e=es(!1);return e=Ps.bind(null,_o,e.queue,!0,!1),Uo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=_o,i=Uo();if(oi){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===rc)throw Error(s(349));0!==(124&oc)||Ko(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,vs(Zo.bind(null,r,o,e),[e]),r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Yo.bind(null,r,o,n,t),null),n},useId:function(){var e=Uo(),t=rc.identifierPrefix;if(oi){var n=Qr;t="\xab"+t+"R"+(n=(Zr&~(1<<32-fe(Zr)-1)).toString(32)+n),0<(n=Ao++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Po++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Os,useFormState:cs,useActionState:cs,useOptimistic:function(e){var t=Uo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=$s.bind(null,_o,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vo,useCacheRefresh:function(){return Uo().memoizedState=Ds.bind(null,_o)}},Xs={readContext:Ai,use:jo,useCallback:Ts,useContext:Ai,useEffect:bs,useImperativeHandle:Es,useInsertionEffect:_s,useLayoutEffect:xs,useMemo:As,useReducer:Go,useRef:gs,useState:function(){return Go(Wo)},useDebugValue:Ss,useDeferredValue:function(e,t){return ks(zo(),xo.memoizedState,e,t)},useTransition:function(){var e=Go(Wo)[0],t=zo().memoizedState;return["boolean"===typeof e?e:$o(e),t]},useSyncExternalStore:qo,useId:Ns,useHostTransitionStatus:Os,useFormState:us,useActionState:us,useOptimistic:function(e,t){return ts(zo(),0,e,t)},useMemoCache:Vo,useCacheRefresh:Fs},qs={readContext:Ai,use:jo,useCallback:Ts,useContext:Ai,useEffect:bs,useImperativeHandle:Es,useInsertionEffect:_s,useLayoutEffect:xs,useMemo:As,useReducer:Xo,useRef:gs,useState:function(){return Xo(Wo)},useDebugValue:Ss,useDeferredValue:function(e,t){var n=zo();return null===xo?Cs(n,e,t):ks(n,xo.memoizedState,e,t)},useTransition:function(){var e=Xo(Wo)[0],t=zo().memoizedState;return["boolean"===typeof e?e:$o(e),t]},useSyncExternalStore:qo,useId:Ns,useHostTransitionStatus:Os,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){var n=zo();return null!==xo?ts(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Vo,useCacheRefresh:Fs},Ks=null,Ys=0;function Zs(e){var t=Ys;return Ys+=1,null===Ks&&(Ks=[]),Zi(Ks,e,t)}function Qs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Js(e,t){if(t.$$typeof===f)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&ea(o)===t.type)?(Qs(t=i(t,n.props),n),t.return=e,t):(Qs(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=$r(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=jr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Qs(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Vr(t,e.mode,n)).return=e,t;case A:return h(e,t=(0,t._init)(t._payload),n)}if(M(t)||R(t))return(t=$r(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Zs(t),n);if(t.$$typeof===x)return h(e,Ci(e,t),n);Js(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case A:return f(e,t,n=(i=n._init)(n._payload),r)}if(M(n)||R(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Zs(n),r);if(n.$$typeof===x)return f(e,t,Ci(e,n),r);Js(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(M(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Zs(r),i);if(r.$$typeof===x)return y(e,t,n,Ci(t,r),i);Js(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===m){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===A&&ea(b)===c.type){n(l,c.sibling),Qs(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((d=$r(u.props.children,l.mode,d,u.key)).return=l,l=d):(Qs(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Vr(u,l.mode,d)).return=l,l=d}return a(l);case A:return v(l,c,u=(b=u._init)(u._payload),d)}if(M(u))return function(i,s,a,l){for(var c=null,u=null,d=s,p=s=0,g=null;null!==d&&p<a.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(i,d,a[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),s=o(m,s,p),null===u?c=m:u.sibling=m,u=m,d=g}if(p===a.length)return n(i,d),oi&&Jr(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(s=o(d,s,p),null===u?c=d:u.sibling=d,u=d);return oi&&Jr(i,p),c}for(d=r(d);p<a.length;p++)null!==(g=y(d,i,p,a[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=o(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),oi&&Jr(i,p),c}(l,c,u,d);if(R(u)){if("function"!==typeof(b=R(u)))throw Error(s(150));return function(i,a,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,p=a,g=a=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(i,p,v.value,c);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,p=m}if(v.done)return n(i,p),oi&&Jr(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return oi&&Jr(i,g),u}for(p=r(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(i,e)})),oi&&Jr(i,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Zs(u),d);if(u.$$typeof===x)return v(l,c,Ci(l,u),d);Js(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=jr(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Ys=0;var i=v(e,t,n,r);return Ks=null,i}catch(s){if(s===Gi||s===Xi)throw s;var o=Fr(29,s,null,e.mode);return o.lanes=r,o.return=e,o}}}var na=ta(!0),ra=ta(!1),ia=U(null),oa=null;function sa(e){var t=e.alternate;$(ua,1&ua.current),$(ia,e),null===oa&&(null===t||null!==po.current||null!==t.memoizedState)&&(oa=e)}function aa(e){if(22===e.tag){if($(ua,ua.current),$(ia,e),null===oa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(oa=e)}}else la()}function la(){$(ua,ua.current),$(ia,ia.current)}function ca(e){z(ia),oa===e&&(oa=null),z(ua)}var ua=U(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||md(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Fc(t,e,r),so(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Fc(t,e,r),so(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Fc(t,e,n),so(t,e,n))}};function pa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(i,o))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ma(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function ba(e){console.error(e)}function _a(e){ya(e)}function xa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function wa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Ea(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){xa(e,t)},n}function Sa(e){return(e=io(e)).tag=3,e}function Ta(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){wa(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){wa(t,n,r),"function"!==typeof i&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Aa=Error(s(461)),Ca=!1;function ka(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Pa(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return Ti(t),r=Lo(e,t,n,s,o,i),a=Fo(),null===e||Ca?(oi&&a&&ti(t),t.flags|=1,ka(e,t,r,i),t.child):(Do(e,t,i),Ka(e,t,i))}function Ra(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Dr(o)||void 0!==o.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,!Ya(e,i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(s,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Br(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Yn(o,r)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=r=o,!Ya(e,i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(Ca=!0)}}return Na(e,t,n,r,i)}function La(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ma(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ma(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Vi(0,null!==o?o.cachePool:null),null!==o?mo(t,o):yo(),aa(t)}else null!==o?(Vi(0,o.cachePool),mo(t,o),la(),t.memoizedState=null):(null!==e&&Vi(0,null),yo(),la());return ka(e,t,i,n),t.child}function Ma(e,t,n,r){var i=ji();return i=null===i?null:{parent:Li._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Vi(0,null),yo(),aa(t),null!==e&&Ei(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Na(e,t,n,r,i){return Ti(t),n=Lo(e,t,n,r,void 0,i),r=Fo(),null===e||Ca?(oi&&r&&ti(t),t.flags|=1,ka(e,t,n,i),t.child):(Do(e,t,i),Ka(e,t,i))}function Fa(e,t,n,r,i,o){return Ti(t),t.updateQueue=null,n=Oo(t,r,n,i),Mo(e),r=Fo(),null===e||Ca?(oi&&r&&ti(t),t.flags|=1,ka(e,t,n,o),t.child):(Do(e,t,o),Ka(e,t,o))}function Da(e,t,n,r,i){if(Ti(t),null===t.stateNode){var o=Or,s=n.contextType;"object"===typeof s&&null!==s&&(o=Ai(s)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=fa,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),s=n.contextType,o.context="object"===typeof s&&null!==s?Ai(s):Or,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(ha(t,n,s,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&fa.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=ma(n,a);o.props=l;var c=o.context,u=n.contextType;s=Or,"object"===typeof u&&null!==u&&(s=Ai(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||c!==s)&&ga(t,o,r,s),to=!1;var h=t.memoizedState;o.state=h,uo(t,r,o,i),co(),c=t.memoizedState,a||h!==c||to?("function"===typeof d&&(ha(t,n,d,r),c=t.memoizedState),(l=to||pa(t,n,l,r,h,c,s))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=s,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=ma(n,s=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=Ai(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&ga(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,uo(t,r,o,i),co();var f=t.memoizedState;s!==d||h!==f||to||null!==e&&null!==e.dependencies&&Si(e.dependencies)?("function"===typeof a&&(ha(t,n,a,r),f=t.memoizedState),(u=to||pa(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Si(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Oa(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):ka(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ka(e,t,i),e}function Ba(e,t,n,r){return fi(),t.flags|=256,ka(e,t,n,r),t.child}var Ua={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function za(e){return{baseLanes:e,cachePool:Wi()}}function $a(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function ja(e,t,n){var r,i=t.pendingProps,o=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?sa(t):la(),oi){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Zr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},(l=Fr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return md(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,o?(la(),c=Wa({mode:"hidden",children:c},o=t.mode),i=$r(i,o,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(o=t.child).memoizedState=za(n),o.childLanes=$a(e,r,n),t.memoizedState=Ua,i):(sa(t),Va(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(sa(t),t.flags&=-257,t=Ga(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),o=i.fallback,c=t.mode,i=Wa({mode:"visible",children:i.children},c),(o=$r(o,c,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=za(n),i.childLanes=$a(e,r,n),t.memoizedState=Ua,t=o);else if(sa(t),md(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Ga(e,t,n)}else if(Ca||Ei(e,t,n,!1),r=0!==(n&e.childLanes),Ca||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:ke(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Ir(e,i),Fc(r,e,i),Aa;"$?"===c.data||Xc(),t=Ga(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,oi=!0,si=null,ai=!1,null!==e&&(qr[Kr++]=Zr,qr[Kr++]=Qr,qr[Kr++]=Yr,Zr=e.id,Qr=e.overflow,Yr=t),(t=Va(t,i.children)).flags|=4096);return t}return o?(la(),o=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Br(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Br(u,o):(o=$r(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(c=e.child.memoizedState)?c=za(n):(null!==(l=c.cachePool)?(u=Li._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Wi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=$a(e,r,n),t.memoizedState=Ua,i):(sa(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Va(e,t){return(t=Wa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wa(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,n){return na(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function Xa(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ka(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch($(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xa(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===da(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xa(t,!0,n,null,o);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ei(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Si(e))}function Za(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ca=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Ca=!1,function(e,t,n){switch(t.tag){case 3:H(t,t.stateNode.containerInfo),bi(0,Li,e.memoizedState.cache),fi();break;case 27:case 5:q(t);break;case 4:H(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(sa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(sa(t),null!==(e=Ka(e,t,n))?e.sibling:null);sa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ei(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,La(e,t,n);case 24:bi(0,Li,e.memoizedState.cache)}return Ka(e,t,n)}(e,t,n);Ca=0!==(131072&e.flags)}else Ca=!1,oi&&0!==(1048576&t.flags)&&ei(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===w){t.tag=11,t=Pa(null,t,r,e,n);break e}if(i===T){t.tag=14,t=Ra(null,t,r,e,n);break e}}throw t=L(r)||r,Error(s(306,t,""))}Dr(r)?(e=ma(r,e),t.tag=1,t=Da(null,t,r,e,n)):(t.tag=0,t=Na(null,t,r,e,n))}return t;case 0:return Na(e,t,t.type,t.pendingProps,n);case 1:return Da(e,t,r=t.type,i=ma(r,t.pendingProps),n);case 3:e:{if(H(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),uo(t,r,null,n);var a=t.memoizedState;if(r=a.cache,bi(0,Li,r),r!==o.cache&&wi(t,[Li],n,!0),co(),r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ba(e,t,r,n);break e}if(r!==i){gi(i=Sr(Error(s(424)),t)),t=Ba(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,oi=!0,si=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ka(e,t,n);break e}ka(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rd(W.current).createElement(n))[Le]=t,r[Me]=e,ed(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return q(t),null===e&&oi&&(r=t.stateNode=_d(t.type,t.pendingProps,W.current),ri=t,ai=!0,i=ii,fd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),ka(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),q(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,sd(i,o)?r=null:null!==a&&sd(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Lo(e,t,No,null,null,n),qd._currentValue=i),Oa(e,t),ka(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return ja(e,t,n);case 4:return H(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):ka(e,t,r,n),t.child;case 11:return Pa(e,t,t.type,t.pendingProps,n);case 7:return ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return ka(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),ka(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ti(t),r=r(i=Ai(i)),t.flags|=1,ka(e,t,r,n),t.child;case 14:return Ra(e,t,t.type,t.pendingProps,n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 19:return qa(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Wa(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Br(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return La(e,t,n);case 24:return Ti(t),r=Ai(Li),null===e?(null===(i=ji())&&(i=rc,o=Mi(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),bi(0,Li,i)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),co()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Li,r)):(r=o.cache,bi(0,Li,r),r!==i.cache&&wi(t,[Li],n,!0))),ka(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Qa(e){e.flags|=4}function Ja(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!$d(t)){if(null!==(t=ia.current)&&((4194048&oc)===oc?null!==oa:(62914560&oc)!==oc&&0===(536870912&oc)||t!==oa))throw Qi=qi,Hi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),_i(Li),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Qa(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Qa(t),null!==n?(nl(t),Ja(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qa(t),nl(t),Ja(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Qa(t),nl(t),t.flags&=-16777217),null;case 27:K(t),n=W.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Qa(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return nl(t),null}e=j.current,hi(t)?ui(t):(e=_d(i,r,n),t.stateNode=e,Qa(t))}return nl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Qa(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return nl(t),null}if(e=j.current,hi(t))ui(t);else{switch(i=rd(W.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Le]=t,e[Me]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qa(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Qa(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=W.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Le]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[Le]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Le]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return X(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return _i(t.type),nl(t),null;case 19:if(z(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=da(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return $(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>wc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,$(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z($i),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),_i(Li),nl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return _i(Li),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(ua),null;case 4:return X(),null;case 10:return _i(t.type),null;case 22:case 23:return ca(t),vo(),null!==e&&z($i),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return _i(Li),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:_i(Li),X();break;case 26:case 27:case 5:K(t);break;case 4:X();break;case 13:ca(t);break;case 19:z(ua);break;case 10:_i(t.type);break;case 22:case 23:ca(t),vo(),null!==e&&z($i);break;case 24:_i(Li)}}function sl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,s=n.inst;r=o(),s.destroy=r}n=n.next}while(n!==i)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==o)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fo(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ma(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){uu(e,t,o)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Qu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":o=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&Qu(e,t,f,p,r,h)}}return void mt(e,a,l,c,u,d,o,i);case"select":for(o in p=a=l=f=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(o)||Qu(e,t,o,null,r,c)}for(i in r)if(o=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=o||null!=c))switch(i){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&Qu(e,t,i,o,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Qu(e,t,l,null,r,i)}for(a in r)if(i=r[a],o=n[a],r.hasOwnProperty(a)&&(null!=i||null!=o))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==o&&Qu(e,t,a,i,r,o)}return void _t(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Qu(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Qu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Qu(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:Qu(e,t,u,f,r,p)}return;default:if(At(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Ju(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Ju(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Qu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Qu(e,t,h,f,r,p)}(r,e.type,n,t),r[Me]=t}catch(i){uu(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Le]=e,t[Me]=n}catch(o){uu(e,e.return,o)}}var bl=!1,_l=!1,xl=!1,wl="function"===typeof WeakSet?WeakSet:Set,El=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Dl(e,n),4&r&&sl(5,n);break;case 1:if(Dl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){uu(n,n.return,s)}else{var i=ma(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Dl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fo(e,t)}catch(s){uu(n,n.return,s)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Dl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Dl(e,n);break;case 13:Dl(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||_l,i=bl;var o=_l;bl=r,(_l=t)&&!o?Ul(e,n,0!==(8772&n.subtreeFlags)):Dl(e,n),bl=i,_l=o}break;case 30:break;default:Dl(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Al=null,Cl=!1;function kl(e,t,n){for(n=n.child;null!==n;)Pl(e,t,n),n=n.sibling}function Pl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(o){}switch(n.tag){case 26:_l||dl(n,t),kl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:_l||dl(n,t);var r=Al,i=Cl;fd(n.type)&&(Al=n.stateNode,Cl=!1),kl(e,t,n),xd(n.stateNode),Al=r,Cl=i;break;case 5:_l||dl(n,t);case 6:if(r=Al,i=Cl,Al=null,kl(e,t,n),Cl=i,null!==(Al=r))if(Cl)try{(9===Al.nodeType?Al.body:"HTML"===Al.nodeName?Al.ownerDocument.body:Al).removeChild(n.stateNode)}catch(s){uu(n,t,s)}else try{Al.removeChild(n.stateNode)}catch(s){uu(n,t,s)}break;case 18:null!==Al&&(Cl?(pd(9===(e=Al).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):pd(Al,n.stateNode));break;case 4:r=Al,i=Cl,Al=n.stateNode.containerInfo,Cl=!0,kl(e,t,n),Al=r,Cl=i;break;case 0:case 11:case 14:case 15:_l||al(2,n,t),_l||al(4,n,t),kl(e,t,n);break;case 1:_l||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),kl(e,t,n);break;case 21:kl(e,t,n);break;case 22:_l=(r=_l)||null!==n.memoizedState,kl(e,t,n),_l=r;break;default:kl(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){uu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Ll(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Al=l.stateNode,Cl=!1;break e}break;case 5:Al=l.stateNode,Cl=!1;break e;case 3:case 4:Al=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Al)throw Error(s(160));Pl(o,a,i),Al=null,Cl=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Ml=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),Nl(e),4&r&&(al(3,e,e.return),sl(3,e),al(5,e,e.return));break;case 1:Ll(t,e),Nl(e),512&r&&(_l||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ml;if(Ll(t,e),Nl(e),512&r&&(_l||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Ue]||o[Le]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),ed(o,r,n),o[Le]=e,Ge(o),r=o;break e;case"link":var a=Ud("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(a=Ud("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(s(468,r))}o[Le]=e,Ge(o),r=o}e.stateNode=r}else zd(i,e.type,e.stateNode);else e.stateNode=Od(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?zd(i,e.type,e.stateNode):Od(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ll(t,e),Nl(e),512&r&&(_l||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),Nl(e),512&r&&(_l||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{wt(i,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(xl=!0);break;case 6:if(Ll(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Bd=null,i=Ml,Ml=Sd(t.containerInfo),Ll(t,e),Ml=i,Nl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(p){uu(e,e.return,p)}xl&&(xl=!1,Fl(e));break;case 4:r=Ml,Ml=Sd(e.stateNode.containerInfo),Ll(t,e),Nl(e),Ml=r;break;case 12:default:Ll(t,e),Nl(e);break;case 13:Ll(t,e),Nl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=_l;if(bl=u||i,_l=d||c,Ll(t,e),_l=d,bl=u,Nl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||bl||_l||Bl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,i)"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Il(e,n))));break;case 19:Ll(t,e),Nl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));case 30:case 21:}}function Nl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(wt(o,""),n.flags&=-33),yl(e,gl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;ml(e,gl(e),a);break;default:throw Error(s(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Dl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Bl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Bl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),Bl(t);break;case 22:null===t.memoizedState&&Bl(t);break;default:Bl(t)}e=e.sibling}}function Ul(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:Ul(i,o,n),sl(4,o);break;case 1:if(Ul(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],a)}catch(c){uu(r,r.return,c)}}n&&64&s&&ll(o),ul(o,o.return);break;case 27:vl(o);case 26:case 5:Ul(i,o,n),n&&null===r&&4&s&&hl(o),ul(o,o.return);break;case 12:Ul(i,o,n);break;case 13:Ul(i,o,n),n&&4&s&&Rl(i,o);break;case 22:null===o.memoizedState&&Ul(i,o,n),ul(o,o.return);break;case 30:break;default:Ul(i,o,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Vl(e,t,n,r),t=t.sibling}function Vl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:jl(e,t,n,r),2048&i&&sl(9,t);break;case 1:case 13:default:jl(e,t,n,r);break;case 3:jl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){jl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else jl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,s=t.alternate,null!==t.memoizedState?2&o._visibility?jl(e,t,n,r):Gl(e,t):2&o._visibility?jl(e,t,n,r):(o._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&zl(s,t);break;case 24:jl(e,t,n,r),2048&i&&$l(t.alternate,t)}}function Wl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,s=t,a=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Wl(o,s,a,l,i),sl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?Wl(o,s,a,l,i):Gl(o,s):(u._visibility|=2,Wl(o,s,a,l,i)),i&&2048&c&&zl(s.alternate,s);break;case 24:Wl(o,s,a,l,i),i&&2048&c&&$l(s.alternate,s);break;default:Wl(o,s,a,l,i)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Gl(n,r),2048&i&&zl(r.alternate,r);break;case 24:Gl(n,r),2048&i&&$l(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Hl=8192;function Xl(e){if(e.subtreeFlags&Hl)for(e=e.child;null!==e;)ql(e),e=e.sibling}function ql(e){switch(e.tag){case 26:Xl(e),e.flags&Hl&&null!==e.memoizedState&&function(e,t,n){if(null===jd)throw Error(s(475));var r=jd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Pd(n.href),o=e.querySelector(Rd(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ge(o);o=e.ownerDocument||e,n=Id(n),(i=wd.get(i))&&Fd(n,i),Ge(o=o.createElement("link"));var a=o;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Ml;Ml=Sd(e.stateNode.containerInfo),Xl(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Hl,Hl=16777216,Xl(e),Hl=t):Xl(e))}}function Kl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Jl(r,e)}Kl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ql(e)):Yl(e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Jl(r,e)}Kl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Ql(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function Jl(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,o=r.return;if(Tl(r),r===n){El=null;break e}if(null!==i){i.return=o,El=i;break e}El=o}}}var ec={getCacheForType:function(e){var t=Ai(Li),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,oc=0,sc=0,ac=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,pc=0,gc=0,mc=0,yc=0,vc=null,bc=null,_c=!1,xc=0,wc=1/0,Ec=null,Sc=null,Tc=0,Ac=null,Cc=null,kc=0,Pc=0,Rc=null,Ic=null,Lc=0,Mc=null;function Oc(){if(0!==(2&nc)&&0!==oc)return oc&-oc;if(null!==O.T){return 0!==Di?Di:Pu()}return Re()}function Nc(){0===mc&&(mc=0===(536870912&oc)||oi?we():536870912);var e=ia.current;return null!==e&&(e.flags|=32),mc}function Fc(e,t,n){(e!==rc||2!==sc&&9!==sc)&&null===e.cancelPendingCommit||(Vc(e,0),zc(e,oc,mc,!1)),Te(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===hc&&zc(e,oc,mc,!1)),wu(e))}function Dc(e,t,n){if(0!==(6&nc))throw Error(s(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||_e(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Gc(),i=Hc();rc!==e||oc!==t?(Ec=null,wc=te()+500,Vc(e,t)):cc=_e(e,t);e:for(;;)try{if(0!==sc&&null!==ic){t=ic;var o=ac;t:switch(sc){case 1:sc=0,ac=null,Jc(e,t,o,1);break;case 2:case 9:if(Ki(o)){sc=0,ac=null,Qc(t);break}t=function(){2!==sc&&9!==sc||rc!==e||(sc=7),wu(e)},o.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:Ki(o)?(sc=0,ac=null,Qc(t)):(sc=0,ac=null,Jc(e,t,o,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||$d(a)){sc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}sc=0,ac=null,Jc(e,t,o,5);break;case 6:sc=0,ac=null,Jc(e,t,o,6);break;case 8:jc(),hc=6;break e;default:throw Error(s(462))}}Yc();break}catch(d){Wc(e,d)}return vi=yi=null,O.H=r,O.A=i,nc=n,null!==ic?0:(rc=null,oc=0,kr(),hc)}(e,t):qc(e,t,!0),o=r;;){if(0===i){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!o||Uc(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,a).flags|=256),2!==(a=qc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=o,pc|=o,i=4;break e}o=bc,bc=i,null!==o&&(null===bc?bc=o:bc.push.apply(bc,o))}i=a}if(o=!1,2!==i)continue}}if(1===i){Vc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,mc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=xc+300-te())){if(zc(r,t,mc,!lc),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Bc.bind(null,r,n,bc,Ec,_c,t,mc,pc,yc,lc,o,2,-0,0),i)}else Bc(r,n,bc,Ec,_c,t,mc,pc,yc,lc,o,0,-0,0)}break}i=qc(e,t,!1),o=!1}wu(e)}function Bc(e,t,n,r,i,o,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(jd={stylesheets:null,count:0,unsuspend:Vd},ql(t),null!==(h=function(){if(null===jd)throw Error(s(475));var e=jd;return e.stylesheets&&0===e.count&&Hd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Hd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,o,n,r,i,a,l,c,d,1,f,p)),void zc(e,o,a,!u);nu(e,t,o,n,r,i,a,l,c)}function Uc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Kn(o(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-fe(i),s=1<<o;r[o]=-1,i&=~s}0!==n&&Ae(e,n,t)}function $c(){return 0!==(6&nc)||(Eu(0,!1),!1)}function jc(){if(null!==ic){if(0===sc)var e=ic.return;else vi=yi=null,Bo(e=ic),Ks=null,Ys=0,e=ic;for(;null!==e;)ol(e.alternate,e),e=e.return;ic=null}}function Vc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),jc(),rc=e,ic=n=Br(e.current,null),oc=t,sc=0,ac=null,lc=!1,cc=_e(e,t),uc=!1,yc=mc=gc=pc=fc=hc=0,bc=vc=null,_c=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),o=1<<i;t|=e[i],r&=~o}return dc=t,kr(),n}function Wc(e,t){_o=null,O.H=Gs,t===Gi||t===Xi?(t=Ji(),sc=3):t===Hi?(t=Ji(),sc=4):sc=t===Aa?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(hc=1,xa(e,Sr(t,e.current)))}function Gc(){var e=O.H;return O.H=Gs,null===e?Gs:e}function Hc(){var e=O.A;return O.A=ec,e}function Xc(){hc=4,lc||(4194048&oc)!==oc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||zc(rc,oc,mc,!1)}function qc(e,t,n){var r=nc;nc|=2;var i=Gc(),o=Hc();rc===e&&oc===t||(Ec=null,Vc(e,t)),t=!1;var s=hc;e:for(;;)try{if(0!==sc&&null!==ic){var a=ic,l=ac;switch(sc){case 8:jc(),s=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=sc;if(sc=0,ac=null,Jc(e,a,l,c),n&&cc){s=0;break e}break;default:c=sc,sc=0,ac=null,Jc(e,a,l,c)}}Kc(),s=hc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,O.H=i,O.A=o,null===ic&&(rc=null,oc=0,kr()),s}function Kc(){for(;null!==ic;)Zc(ic)}function Yc(){for(;null!==ic&&!J();)Zc(ic)}function Zc(e){var t=Za(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Qc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fa(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Fa(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Bo(t);default:ol(n,t),t=Za(n,t=ic=Ur(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e,t,n,r){vi=yi=null,Bo(t),Ks=null,Ys=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ei(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===oa?Xc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(s(435,n.tag))}return du(e,r,i),Xc(),!1}if(oi)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(Sr(e=Error(s(422),{cause:r}),n))):(r!==li&&gi(Sr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Sr(r,n),ao(e,i=Ea(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var o=Error(s(520),{cause:r});if(o=Sr(o,n),null===vc?vc=[o]:vc.push(o),4!==hc&&(hc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ao(n,e=Ea(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Sc||!Sc.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Ta(i=Sa(i),e,n,r),ao(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,oc))return hc=1,xa(e,Sr(n,e.current)),void(ic=null)}catch(o){if(null!==i)throw ic=i,o;return hc=1,xa(e,Sr(n,e.current)),void(ic=null)}32768&t.flags?(oi||1===r?e=!0:cc||0!==(536870912&oc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,o,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Tc);if(0!==(6&nc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ae(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,n,o|=Cr,a,l,c),e===rc&&(ic=rc=null,oc=0),Cc=t,Ac=e,kc=n,Pc=o,Rc=i,Ic=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(oe,(function(){return lu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=N.p,N.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(m){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(o=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var g=ma(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{nc=a,N.p=i,O.T=r}}Tc=1,ru(),iu(),ou()}}function ru(){if(1===Tc){Tc=0;var e=Ac,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=N.p;N.p=2;var i=nc;nc|=4;try{Ol(t,e);var o=nd,s=er(e.containerInfo),a=o.focusedElem,l=o.selectionRange;if(s!==a&&a&&a.ownerDocument&&Jn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(s=m,m=g,g=s);var y=Qn(a,g),v=Qn(a,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var _=d[a];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}nh=!!td,nd=td=null}finally{nc=i,N.p=r,O.T=n}}e.current=t,Tc=2}}function iu(){if(2===Tc){Tc=0;var e=Ac,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=N.p;N.p=2;var i=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=i,N.p=r,O.T=n}}Tc=3}}function ou(){if(4===Tc||3===Tc){Tc=0,ee();var e=Ac,t=Cc,n=kc,r=Ic;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,Cc=Ac=null,su(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Sc=null),Pe(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=N.p,N.p=2,O.T=null;try{for(var o=e.onRecoverableError,s=0;s<r.length;s++){var a=r[s];o(a.value,{componentStack:a.stack})}}finally{O.T=t,N.p=i}}0!==(3&kc)&&au(),wu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Mc?Lc++:(Lc=0,Mc=e):Lc=0,Eu(0,!1)}}function su(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function au(e){return ru(),iu(),ou(),lu()}function lu(){if(5!==Tc)return!1;var e=Ac,t=Pc;Pc=0;var n=Pe(kc),r=O.T,i=N.p;try{N.p=32>n?32:n,O.T=null,n=Rc,Rc=null;var o=Ac,a=kc;if(Tc=0,Cc=Ac=null,kc=0,0!==(6&nc))throw Error(s(331));var l=nc;if(nc|=4,Zl(o.current),Vl(o,o.current,a,n),nc=l,Eu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{N.p=i,O.T=r,su(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=oo(e,t=Ea(e.stateNode,t,2),2))&&(Te(e,2),wu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=oo(t,n=Sa(2),2))&&(Ta(n,r,t,e),Te(r,2),wu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(oc&n)===n&&(4===hc||3===hc&&(62914560&oc)===oc&&300>te()-xc?0===(2&nc)&&Vc(e,0):gc|=n,yc===oc&&(yc=0)),wu(e)}function fu(e,t){0===t&&(t=Ee()),null!==(e=Ir(e,t))&&(Te(e,t),wu(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),fu(e,n)}var mu=null,yu=null,vu=!1,bu=!1,_u=!1,xu=0;function wu(e){e!==yu&&null===e.next&&(null===yu?mu=yu=e:yu=yu.next=e),bu=!0,vu||(vu=!0,dd((function(){0!==(6&nc)?Z(re,Su):Tu()})))}function Eu(e,t){if(!_u&&bu){_u=!0;do{for(var n=!1,r=mu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var s=r.suspendedLanes,a=r.pingedLanes;o=(1<<31-fe(42|e)+1)-1,o=201326741&(o&=i&~(s&~a))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,ku(r,o))}else o=oc,0===(3&(o=be(r,r===rc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||_e(r,o)||(n=!0,ku(r,o));r=r.next}}while(n);_u=!1}}function Su(){Tu()}function Tu(){bu=vu=!1;var e=0;0!==xu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=xu),xu=0);for(var t=te(),n=null,r=mu;null!==r;){var i=r.next,o=Au(r,t);0===o?(r.next=null,null===n?mu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&o))&&(bu=!0)),r=i}Eu(e,!1)}function Au(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-fe(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=xe(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=oc,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===sc||9===sc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Q(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||_e(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Q(r),Pe(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=ae}return r=Cu.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Q(r),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=be(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Dc(e,r,t),Au(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function ku(e,t){if(au())return null;Dc(e,t,!0)}function Pu(){return 0===xu&&(xu=we()),xu}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Lu=0;Lu<xr.length;Lu++){var Mu=xr[Lu];wr(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}wr(fr,"onAnimationEnd"),wr(pr,"onAnimationIteration"),wr(gr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(mr,"onTransitionRun"),wr(yr,"onTransitionStart"),wr(vr,"onTransitionCancel"),wr(br,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Fu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){ya(u)}i.currentTarget=null,o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){ya(u)}i.currentTarget=null,o=l}}}}function Du(e,t){var n=t[Ne];void 0===n&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||($u(t,e,2,!1),n.add(r))}function Bu(e,t,n){var r=0;t&&(r|=4),$u(n,e,r,t)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Uu]){e[Uu]=!0,He.forEach((function(t){"selectionchange"!==t&&(Nu.has(t)||Bu(t,!1,e),Bu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Uu]||(t[Uu]=!0,Bu("selectionchange",!1,t))}}function $u(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ju(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==a;){if(null===(s=$e(a)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Ft((function(){var r=o,i=It(n),s=[];e:{var a=_r.get(e);if(void 0!==a){var c=Jt,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=sn;break;case"focusout":u="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case gr:c=an;break;case br:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=_n}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Dt(g,f))&&d.push(Vu(g,m,p)),h)break;g=g.return}0<d.length&&(a=new c(a,u,null,n,i),s.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==c?a:Ve(c),p=null==u?a:Ve(u),(a=new d(m,g+"leave",c,n,i)).target=h,a.relatedTarget=p,m=null,$e(i)===r&&((d=new d(f,g+"enter",u,n,i)).target=p,d.relatedTarget=h,m=d),h=m,c&&u)e:{for(f=u,g=0,p=d=c;p;p=Gu(p))g++;for(p=0,m=f;m;m=Gu(m))p++;for(;0<g-p;)d=Gu(d),g--;for(;0<p-g;)f=Gu(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Hu(s,a,c,d,!1),null!==u&&null!==h&&Hu(s,h,u,d,!0)}if("select"===(c=(a=r?Ve(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Bn;else if(Ln(a))if(Un)y=qn;else{y=Hn;var v=Gn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&At(r.elementType)&&(y=Bn):y=Xn;switch(y&&(y=y(e,r))?Mn(s,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?Ve(r):window,e){case"focusin":(Ln(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ar(s,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(s,n,i)}var b;if(wn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Rn?kn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Rn&&(b=Wt()):(jt="value"in($t=i)?$t.value:$t.textContent,Rn=!0)),0<(v=Wu(r,_)).length&&(_=new cn(_,e,null,n,i),s.push({event:_,listeners:v}),b?_.data=b:null!==(b=Pn(n))&&(_.data=b))),(b=Sn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(Cn=!0,An);case"textInput":return(e=t.data)===An&&Cn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!wn&&kn(e,t)?(e=Wt(),Vt=jt=$t=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(_=Wu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),s.push({event:v,listeners:_}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Ru((i[Me]||null).action),s=r.submitter;s&&null!==(t=(t=s[Me]||null)?Ru(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new Jt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=s?Iu(i,s):new FormData(i);Is(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(a.preventDefault(),e=s?Iu(i,s):new FormData(i),Is(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}Fu(s,t)}))}function Vu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Dt(e,n))&&r.unshift(Vu(e,i,o)),null!=(i=Dt(e,t))&&r.push(Vu(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Hu(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Dt(n,o))&&s.unshift(Vu(n,c,l)):i||null!=(c=Dt(n,o))&&s.push(Vu(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xu=/\r\n?/g,qu=/\u0000|\uFFFD/g;function Ku(e){return("string"===typeof e?e:""+e).replace(Xu,"\n").replace(qu,"")}function Yu(e,t){return t=Ku(t),Ku(e)===t}function Zu(){}function Qu(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Tt(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Qu(e,t,"name",i.name,i,null),Qu(e,t,"formEncType",i.formEncType,i,null),Qu(e,t,"formMethod",i.formMethod,i,null),Qu(e,t,"formTarget",i.formTarget,i,null)):(Qu(e,t,"encType",i.encType,i,null),Qu(e,t,"method",i.method,i,null),Qu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Du("beforetoggle",e),Du("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function Ju(e,t,n,r,i,o){switch(n){case"style":Tt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Me]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Du("error",e),Du("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Qu(e,t,r,a,n,null)}}return o&&Qu(e,t,"srcSet",n.srcSet,n,null),void(i&&Qu(e,t,"src",n.src,n,null));case"input":Du("invalid",e);var l=r=a=o=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Qu(e,t,i,d,n,null)}}return yt(e,r,l,c,u,a,o,!1),void dt(e);case"select":for(o in Du("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Qu(e,t,o,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Du("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Qu(e,t,a,l,n,null)}return xt(e,i,o,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Qu(e,t,c,i,n,null);return;case"dialog":Du("beforetoggle",e),Du("toggle",e),Du("cancel",e),Du("close",e);break;case"iframe":case"object":Du("load",e);break;case"video":case"audio":for(i=0;i<Ou.length;i++)Du(Ou[i],e);break;case"image":Du("error",e),Du("load",e);break;case"details":Du("toggle",e);break;case"embed":case"source":case"link":Du("error",e),Du("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Qu(e,t,u,i,n,null)}return;default:if(At(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Ju(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Qu(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout((function(){throw e}))}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var s=e.ownerDocument;if(1&n&&xd(s.documentElement),2&n&&xd(s.body),4&n)for(xd(n=s.head),s=n.firstChild;s;){var a=s.nextSibling,l=s.nodeName;s[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}if(0===i)return e.removeChild(o),void Ch(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Ch(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function _d(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var wd=new Map,Ed=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Td=N.d;N.d={f:function(){var e=Td.f(),t=$c();return e||t},r:function(e){var t=je(e);null!==t&&5===t.tag&&"form"===t.type?Ms(t):Td.r(e)},D:function(e){Td.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){Td.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){Td.L(e,t,n);var r=Ad;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var o=i;switch(t){case"style":o=Pd(e);break;case"script":o=Ld(e)}wd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Rd(o))||"script"===t&&r.querySelector(Md(o))||(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Td.m(e,t);var n=Ad;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ld(e)}if(!wd.has(o)&&(e=h({rel:"modulepreload",href:e},t),wd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Md(o)))return}ed(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Td.X(e,t);var n=Ad;if(n&&e){var r=We(n).hoistableScripts,i=Ld(e),o=r.get(i);o||((o=n.querySelector(Md(i)))||(e=h({src:e,async:!0},t),(t=wd.get(i))&&Dd(e,t),Ge(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Td.S(e,t,n);var r=Ad;if(r&&e){var i=We(r).hoistableStyles,o=Pd(e);t=t||"default";var s=i.get(o);if(!s){var a={loading:0,preload:null};if(s=r.querySelector(Rd(o)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wd.get(o))&&Fd(e,n);var l=s=r.createElement("link");Ge(l),ed(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Nd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:a},i.set(o,s)}}},M:function(e,t){Td.M(e,t);var n=Ad;if(n&&e){var r=We(n).hoistableScripts,i=Ld(e),o=r.get(i);o||((o=n.querySelector(Md(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=wd.get(i))&&Dd(e,t),Ge(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Ad="undefined"===typeof document?null:document;function Cd(e,t,n){var r=Ad;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ed.has(i)||(Ed.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function kd(e,t,n,r){var i,o,a,l,c=(c=W.current)?Sd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Pd(n.href),(r=(n=We(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Pd(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),wd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wd.set(e,n),u||(i=c,o=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",(function(){return l.loading|=1})),o.addEventListener("error",(function(){return l.loading|=2})),ed(o,"link",a),Ge(o),i.head.appendChild(o))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ld(n),(r=(n=We(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Pd(e){return'href="'+gt(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Ld(e){return'[src="'+gt(e)+'"]'}function Md(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Nd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Pd(n.href);var o=e.querySelector(Rd(i));if(o)return t.state.loading|=4,t.instance=o,Ge(o),o;r=Id(n),(i=wd.get(i))&&Fd(r,i),Ge(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),ed(o,"link",r),t.state.loading|=4,Nd(o,n.precedence,e),t.instance=o;case"script":return o=Ld(n.src),(i=e.querySelector(Md(o)))?(t.instance=i,Ge(i),i):(r=n,(i=wd.get(o))&&Dd(r=h({},n),i),Ge(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Nd(r,n.precedence,e));return t.instance}function Nd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)o=a;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bd=null;function Ud(e,t,n){if(null===Bd){var r=new Map,i=Bd=new Map;i.set(n,r)}else(r=(i=Bd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Ue]||o[Le]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(o):r.set(s,[o])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function $d(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var jd=null;function Vd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Hd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Hd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Xd,e),Gd=null,Wd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var s=i[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(o=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=Wd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var qd={$$typeof:x,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Kd(e,t,n,r,i,o,s,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yd(e,t,n,r,i,o,s,a,l,c,u,d){return e=new Kd(e,t,n,s,a,l,c,d),t=1,!0===o&&(t|=24),o=Fr(3,null,null,t),e.current=o,o.stateNode=e,(t=Mi()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Zd(e){return e?e=Or:Or}function Qd(e,t,n,r,i,o){i=Zd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Fc(n,0,t),so(n,e,t))}function Jd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Jd(e,t),(e=e.alternate)&&Jd(e,t)}function th(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Fc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=O.T;O.T=null;var o=N.p;try{N.p=2,oh(e,t,n,r)}finally{N.p=o,O.T=i}}function ih(e,t,n,r){var i=O.T;O.T=null;var o=N.p;try{N.p=8,oh(e,t,n,r)}finally{N.p=o,O.T=i}}function oh(e,t,n,r){if(nh){var i=sh(r);if(null===i)ju(e,t,r,ah,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,i),!0;case"dragenter":return hh=bh(hh,e,t,n,r,i),!0;case"mouseover":return fh=bh(fh,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ph.set(o,bh(ph.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,gh.set(o,bh(gh.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var o=je(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=ve(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-fe(s);a.entanglements[1]|=l,s&=~l}wu(o),0===(6&nc)&&(wc=te()+500,Eu(0,!1))}}break;case 13:null!==(a=Ir(o,2))&&Fc(a,0,2),$c(),eh(o,2)}if(null===(o=sh(r))&&ju(e,t,r,ah,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else ju(e,t,r,null,n)}}function sh(e){return lh(e=It(e))}var ah=null;function lh(e){if(ah=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ah=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case se:return 32;case ae:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,gh=new Map,mh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function bh(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=je(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function _h(e){var t=$e(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}(e.priority,(function(){if(13===n.tag){var e=Oc();e=ke(e);var t=Ir(n,e);null!==t&&Fc(t,0,e),eh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sh(e.nativeEvent);if(null!==n)return null!==(t=je(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function wh(e,t,n){xh(e)&&n.delete(t)}function Eh(){uh=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==fh&&xh(fh)&&(fh=null),ph.forEach(wh),gh.forEach(wh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}var Th=null;function Ah(e){Th!==e&&(Th=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Th===e&&(Th=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var o=je(n);null!==o&&(e.splice(t,3),t-=3,Is(o,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function Ch(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==fh&&Sh(fh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)_h(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],s=i[Me]||null;if("function"===typeof o)s||Ah(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(i=o,s=o[Me]||null)a=s.formAction;else if(null!==lh(i))continue}else a=s.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ah(n)}}}function kh(e){this._internalRoot=e}function Ph(e){this._internalRoot=e}Ph.prototype.render=kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qd(t.current,Oc(),e,t,null,null)},Ph.prototype.unmount=kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Qd(e.current,2,null,e,null,null),$c(),t[Oe]=null}},Ph.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&_h(e)}};var Rh=i.version;if("19.1.0"!==Rh)throw Error(s(527,Rh,"19.1.0"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return u(i),e;if(o===r)return u(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{ue=Lh.inject(Ih),de=Lh}catch(Oh){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",i=va,o=ba,l=_a;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,i,o,l,0,null),e[Oe]=t.current,zu(e),new kh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,i="",o=va,l=ba,c=_a,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,r,i,o,l,c,0,u)).context=Zd(null),n=t.current,(i=io(r=ke(r=Oc()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Te(t,n),wu(t),e[Oe]=t.current,zu(e),new Ph(t)},t.version="19.1.0"},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(863)},138:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case g:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===g},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},t.typeOf=x},232:e=>{"use strict";function t(e,t,r){r=r||2;var o,s,a,l,d,h,p,g=t&&t.length,m=g?t[0]*r:e.length,y=n(e,0,m,r,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(e,t,r,i){var o,s,a,l=[];for(o=0,s=t.length;o<s;o++)(a=n(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(e,t,y,r)),e.length>80*r){o=a=e[0],s=l=e[1];for(var b=r;b<m;b+=r)(d=e[b])<o&&(o=d),(h=e[b+1])<s&&(s=h),d>a&&(a=d),h>l&&(l=h);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return i(y,v,r,o,s,p,0),v}function n(e,t,n,r,i){var o,s;if(i===A(e,t,n,r)>0)for(o=t;o<n;o+=r)s=E(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=E(o,e[o],e[o+1],s);return s&&y(s,s.next)&&(S(s),s=s.next),s}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(S(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,c,u,d,f){if(e){!f&&d&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=h(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(e,c,u,d);for(var p,g,m=e;e.prev!==e.next;)if(p=e.prev,g=e.next,d?s(e,c,u,d):o(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(g.i/n|0),S(e),e=g.next,m=g.next;else if((e=g)===m){f?1===f?i(e=a(r(e),t,n),t,n,c,u,d,2):2===f&&l(e,t,n,c,u,d):i(r(e),t,n,c,u,d,1);break}}}function o(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,s=r.x,a=t.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,h=i>o?i>s?i:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,g=r.next;g!==t;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=f&&p(i,a,o,l,s,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(e,t,n,r){var i=e.prev,o=e,s=e.next;if(m(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,f=s.y,g=a<l?a<c?a:c:l<c?l:c,y=u<d?u<f?u:f:d<f?d:f,v=a>l?a>c?a:c:l>c?l:c,b=u>d?u>f?u:f:d>f?d:f,_=h(g,y,t,n,r),x=h(v,b,t,n,r),w=e.prevZ,E=e.nextZ;w&&w.z>=_&&E&&E.z<=x;){if(w.x>=g&&w.x<=v&&w.y>=y&&w.y<=b&&w!==i&&w!==s&&p(a,u,l,d,c,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=g&&E.x<=v&&E.y>=y&&E.y<=b&&E!==i&&E!==s&&p(a,u,l,d,c,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=_;){if(w.x>=g&&w.x<=v&&w.y>=y&&w.y<=b&&w!==i&&w!==s&&p(a,u,l,d,c,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=x;){if(E.x>=g&&E.x<=v&&E.y>=y&&E.y<=b&&E!==i&&E!==s&&p(a,u,l,d,c,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function a(e,t,n){var i=e;do{var o=i.prev,s=i.next.next;!y(o,s)&&v(o,i,i.next,s)&&x(o,s)&&x(s,o)&&(t.push(o.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),S(i),S(i.next),i=e=s),i=i.next}while(i!==e);return r(i)}function l(e,t,n,o,s,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=w(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,t,n,o,s,a,0),void i(u,t,n,o,s,a,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(o<h?i:s,o,u,h,o<h?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var i=w(n,e);return r(i,i.next),r(n,n.next)}function d(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function h(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(r-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&v(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||y(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function v(e,t,n,r){var i=_(m(e,t,n)),o=_(m(e,t,r)),s=_(m(n,r,e)),a=_(m(n,r,t));return i!==o&&s!==a||(!(0!==i||!b(e,n,t))||(!(0!==o||!b(e,r,t))||(!(0!==s||!b(n,e,r))||!(0!==a||!b(n,t,r)))))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function x(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var n=new T(e.i,e.x,e.y),r=new T(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function E(e,t,n,r){var i=new T(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function T(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(A(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var c=t[a]*n,u=a<l-1?t[a+1]*n:e.length;s-=Math.abs(A(e,c,u,n))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;d+=Math.abs((e[h]-e[p])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[p+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},340:(e,t,n)=>{"use strict";e.exports=n(487)},352:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(85)},403:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},414:(e,t,n)=>{"use strict";e.exports=n(916)},487:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,S||(S=!0,E());else{var t=r(u);null!==t&&L(w,t.startTime-e)}}var E,S=!1,T=-1,A=5,C=-1;function k(){return!!y||!(t.unstable_now()-C<A)}function P(){if(y=!1,S){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,m&&(m=!1,b(T),T=-1),p=!0;var o=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&k());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&L(w,l.startTime-e),n=!1}}break e}finally{h=null,f=o,p=!1}n=void 0}}finally{n?E():S=!1}}}if("function"===typeof _)E=function(){_(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=P,E=function(){I.postMessage(null)}}else E=function(){v(P,0)};function L(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(b(T),T=-1):m=!0,L(w,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,S||(S=!0,E()))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},599:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},630:(e,t,n)=>{"use strict";e.exports=n(138)},732:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler");Symbol.for("react.provider");var a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case d:case p:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case h:case a:return e;default:return t}}case r:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===o||e===u||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===h||e.$$typeof===l||e.$$typeof===a||e.$$typeof===c||e.$$typeof===g||void 0!==e.getModuleId)}},863:(e,t,n)=>{"use strict";var r=n(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},876:(e,t,n)=>{"use strict";var r=n(630),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),g=l(n),m=0;m<s.length;++m){var y=s[m];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!a||!a[y])){var v=h(n,y);try{c(t,y,v)}catch(b){}}}}return t}},916:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},950:(e,t,n)=>{"use strict";e.exports=n(983)},983:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function S(e,t,r,i,o,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(){}function P(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return P((u=e._init)(e._payload),t,i,o,s)}}if(u)return s=s(e),u=""===o?"."+C(e,0):o,x(s)?(i="",null!=u&&(i=u.replace(A,"$&/")+"/"),P(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+u,s=S(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,p=""===o?".":o+":";if(x(e))for(var g=0;g<e.length;g++)u+=P(o=e[g],t,i,a=p+C(o,g),s);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(o=e.next()).done;)u+=P(o=o.value,t,i,a=p+C(o,g++),s);else if("object"===a){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(k,k):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!E.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),a=0;a<o;a++)s[a]=arguments[a+2];r.children=s}return S(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return S(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(M,L)}catch(o){L(o)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=w.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.0"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".e27f3084.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="duck-data-webpage:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/duck-data-web/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkduck_data_webpage=self.webpackChunkduck_data_webpage||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e=n(950),t=n.t(e,2),r=n(352),i=(n(599),"popstate");function o(){return h((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return c("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:u(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function a(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?d(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:a=!1}=r,d=o.history,h="POP",f=null,p=g();function g(){return(d.state||{idx:null}).idx}function m(){h="POP";let e=g(),t=null==e?null:e-p;p=e,f&&f({action:h,location:v.location,delta:t})}function y(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),s(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}null==p&&(p=0,d.replaceState({...d.state,idx:p},""));let v={get action(){return h},get location(){return e(o,d)},listen(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(i,m),f=e,()=>{o.removeEventListener(i,m),f=null}},createHref:e=>t(o,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h="PUSH";let r=c(v.location,e,t);n&&n(r,e),p=g()+1;let i=l(r,p),s=v.createHref(r);try{d.pushState(i,"",s)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(s)}a&&f&&f({action:h,location:v.location,delta:1})},replace:function(e,t){h="REPLACE";let r=c(v.location,e,t);n&&n(r,e),p=g();let i=l(r,p),o=v.createHref(r);d.replaceState(i,"",o),a&&f&&f({action:h,location:v.location,delta:0})},go:e=>d.go(e)};return v}new WeakMap;function f(e,t){return p(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function p(e,t,n,r){let i=k(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let o=g(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=C(i);s=T(o[a],e,r)}return s}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let l=M([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(s(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of m(e.path))i(e,t,n);else i(e,t)})),t}function m(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=m(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var y=/^:[\w-]+$/,v=3,b=2,_=1,x=10,w=-2,E=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=w),t&&(r+=b),n.filter((e=>!E(e))).reduce(((e,t)=>e+(y.test(t)?v:""===t?_:x)),r)}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:M([o,u.pathname]),pathnameBase:O(M([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=M([o,u.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=l[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const a=l[n];return e[r]=i&&!a?void 0:(a||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function C(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return a(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function k(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function I(e){let t=R(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function L(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=d(e):(r={...e},s(!r.pathname||!r.pathname.includes("?"),P("?","pathname","search",r)),s(!r.pathname||!r.pathname.includes("#"),P("#","pathname","hash",r)),s(!r.search||!r.search.includes("#"),P("#","search","hash",r)));let o,a=""===e||""===r.pathname,l=a?"/":r.pathname;if(null==l)o=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?d(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:N(r),hash:F(i)}}(r,o),u=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var M=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),N=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function D(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var B=["POST","PUT","PATCH","DELETE"],U=(new Set(B),["GET",...B]);new Set(U),Symbol("ResetLoaderData");var z=e.createContext(null);z.displayName="DataRouter";var $=e.createContext(null);$.displayName="DataRouterState";var j=e.createContext({isTransitioning:!1});j.displayName="ViewTransition";var V=e.createContext(new Map);V.displayName="Fetchers";var W=e.createContext(null);W.displayName="Await";var G=e.createContext(null);G.displayName="Navigation";var H=e.createContext(null);H.displayName="Location";var X=e.createContext({outlet:null,matches:[],isDataRoute:!1});X.displayName="Route";var q=e.createContext(null);q.displayName="RouteError";function K(){return null!=e.useContext(H)}function Y(){return s(K(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(H).location}var Z="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q(t){e.useContext(G).static||e.useLayoutEffect(t)}function J(){let{isDataRoute:t}=e.useContext(X);return t?function(){let{router:t}=le("useNavigate"),n=ue("useNavigate"),r=e.useRef(!1);Q((()=>{r.current=!0}));let i=e.useCallback((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(r.current,Z),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,{fromRouteId:n,...i}))}),[t,n]);return i}():function(){s(K(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(z),{basename:n,navigator:r}=e.useContext(G),{matches:i}=e.useContext(X),{pathname:o}=Y(),l=JSON.stringify(I(i)),c=e.useRef(!1);Q((()=>{c.current=!0}));let u=e.useCallback((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(c.current,Z),!c.current)return;if("number"===typeof e)return void r.go(e);let s=L(e,JSON.parse(l),o,"path"===i.relative);null==t&&"/"!==n&&(s.pathname="/"===s.pathname?n:M([n,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[n,r,l,o,t]);return u}()}e.createContext(null);function ee(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(X),{pathname:i}=Y(),o=JSON.stringify(I(r));return e.useMemo((()=>L(t,JSON.parse(o),i,"path"===n)),[t,o,i,n])}function te(t,n,r,i){s(K(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:l}=e.useContext(G),{matches:c}=e.useContext(X),u=c[c.length-1],h=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",m=u&&u.route;{let e=m&&m.path||"";fe(p,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let y,v=Y();if(n){let e="string"===typeof n?d(n):n;s("/"===g||e.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${e.pathname}" was given in the \`location\` prop.`),y=e}else y=v;let b=y.pathname||"/",_=b;if("/"!==g){let e=g.replace(/^\//,"").split("/");_="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=!l&&r&&r.matches&&r.matches.length>0?r.matches:f(t,{pathname:_});a(m||null!=x,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),a(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=se(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:M([g,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:M([g,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,r,i);return n&&w?e.createElement(H.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},w):w}function ne(){let t=de(),n=D(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:s},"ErrorBoundary")," or"," ",e.createElement("code",{style:s},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:o},r):null,a)}var re=e.createElement(ne,null),ie=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(X.Provider,{value:this.props.routeContext},e.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oe(t){let{routeContext:n,match:r,children:i}=t,o=e.useContext(z);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(X.Provider,{value:n},i)}function se(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let i=t,o=r?.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&void 0!==o?.[e.route.id]));s(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,l=-1;if(r)for(let e=0;e<i.length;e++){let t=i[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,o=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||o){a=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight(((t,s,c)=>{let u,d=!1,h=null,f=null;r&&(u=o&&s.route.id?o[s.route.id]:void 0,h=s.route.errorElement||re,a&&(l<0&&0===c?(fe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===c&&(d=!0,f=s.route.hydrateFallbackElement||null)));let p=n.concat(i.slice(0,c+1)),g=()=>{let n;return n=u?h:d?f:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(oe,{match:s,routeContext:{outlet:t,matches:p,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===c)?e.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}function ae(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function le(t){let n=e.useContext(z);return s(n,ae(t)),n}function ce(t){let n=e.useContext($);return s(n,ae(t)),n}function ue(t){let n=function(t){let n=e.useContext(X);return s(n,ae(t)),n}(t),r=n.matches[n.matches.length-1];return s(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function de(){let t=e.useContext(q),n=ce("useRouteError"),r=ue("useRouteError");return void 0!==t?t:n.errors?.[r]}var he={};function fe(e,t,n){t||he[e]||(he[e]=!0,a(!1,n))}e.memo((function(e){let{routes:t,future:n,state:r}=e;return te(t,void 0,r,n)}));function pe(e){s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ge(t){let{basename:n="/",children:r=null,location:i,navigationType:o="POP",navigator:l,static:c=!1}=t;s(!K(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=e.useMemo((()=>({basename:u,navigator:l,static:c,future:{}})),[u,l,c]);"string"===typeof i&&(i=d(i));let{pathname:f="/",search:p="",hash:g="",state:m=null,key:y="default"}=i,v=e.useMemo((()=>{let e=k(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:m,key:y},navigationType:o}}),[u,f,p,g,m,y,o]);return a(null!=v,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:e.createElement(G.Provider,{value:h},e.createElement(H.Provider,{children:r,value:v}))}function me(e){let{children:t,location:n}=e;return te(ye(t),n)}e.Component;function ye(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,((t,i)=>{if(!e.isValidElement(t))return;let o=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,ye(t.props.children,o));s(t.type===pe,`[${"string"===typeof t.type?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),s(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=ye(t.props.children,o)),r.push(a)})),r}var ve="get",be="application/x-www-form-urlencoded";function _e(e){return null!=e&&"string"===typeof e.tagName}var xe=null;var we=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ee(e){return null==e||we.has(e)?e:(a(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${be}"`),null)}function Se(e,t){let n,r,i,o,s;if(_e(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?k(s,t):null,n=e.getAttribute("method")||ve,i=Ee(e.getAttribute("enctype"))||be,o=new FormData(e)}else if(function(e){return _e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return _e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?k(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||ve,i=Ee(e.getAttribute("formenctype"))||Ee(s.getAttribute("enctype"))||be,o=new FormData(s,e),!function(){if(null===xe)try{new FormData(document.createElement("form"),0),xe=!1}catch(e){xe=!0}return xe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";o.append(`${e}x`,"0"),o.append(`${e}y`,"0")}else t&&o.append(t,r)}}else{if(_e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ve,r=null,i=be,s=e}var a;return o&&"text/plain"===i&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function Te(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ae(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Ce(e){return null!=e&&"string"===typeof e.page}function ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Pe(e,t,n,r,i,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===o?t.filter(((e,t)=>s(e,t)||a(e,t))):"data"===o?t.filter(((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Re(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i})).flat(1),[...new Set(r)];var r}function Ie(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,i)=>{if(t&&!Ce(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e}),[])}function Le(e){return{__html:e}}Symbol("SingleFetchRedirect");function Me(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===k(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}e.Component;function Oe(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let i,o=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(D(n))return e.createElement(Ne,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),o);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(Ne,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function Ne(t){let{title:n,renderScripts:r,isOutsideRemixApp:i,children:o}=t,{routeModules:s}=ze();return s.root?.Layout&&!i?o:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,n)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,r?e.createElement(Xe,null):null)))}function Fe(e){return!0===e}function De(){let t=e.useContext(z);return Te(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Be(){let t=e.useContext($);return Te(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ue=e.createContext(void 0);function ze(){let t=e.useContext(Ue);return Te(t,"You must render this element inside a <HydratedRouter> element"),t}function $e(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function je(e,t,n){if(n&&!He)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function Ve(t){let{page:n,...r}=t,{router:i}=De(),o=e.useMemo((()=>f(i.routes,n,i.basename)),[i.routes,n,i.basename]);return o?e.createElement(Ge,{page:n,matches:o,...r}):null}function We(t){let{manifest:n,routeModules:r}=ze(),[i,o]=e.useState([]);return e.useEffect((()=>{let e=!1;return async function(e,t,n){let r=await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Ae(r,n);return e.links?e.links():[]}return[]})));return Ie(r.flat(1).filter(ke).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(t,n,r).then((t=>{e||o(t)})),()=>{e=!0}}),[t,n,r]),i}function Ge(t){let{page:n,matches:r,...i}=t,o=Y(),{manifest:s,routeModules:a}=ze(),{basename:l}=De(),{loaderData:c,matches:u}=Be(),d=e.useMemo((()=>Pe(n,r,u,s,o,"data")),[n,r,u,s,o]),h=e.useMemo((()=>Pe(n,r,u,s,o,"assets")),[n,r,u,s,o]),f=e.useMemo((()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach((n=>{let r=s.routes[n.route.id];r&&r.hasLoader&&(!d.some((e=>e.route.id===n.route.id))&&n.route.id in c&&a[n.route.id]?.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let i=Me(n,l);return t&&e.size>0&&i.searchParams.set("_routes",r.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[i.pathname+i.search]}),[l,c,o,s,d,r,n,a]),p=e.useMemo((()=>Re(h,s)),[h,s]),g=We(h);return e.createElement(e.Fragment,null,f.map((t=>e.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...i}))),p.map((t=>e.createElement("link",{key:t,rel:"modulepreload",href:t,...i}))),g.map((t=>{let{key:n,link:r}=t;return e.createElement("link",{key:n,...r})})))}Ue.displayName="FrameworkContext";var He=!1;function Xe(t){let{manifest:n,serverHandoffString:r,isSpaMode:i,ssr:o,renderMeta:s}=ze(),{router:a,static:l,staticContext:c}=De(),{matches:u}=Be(),d=Fe(o);s&&(s.didRenderScripts=!0);let h=je(u,null,i);e.useEffect((()=>{0}),[]);let p=e.useMemo((()=>{let i=c?`window.__reactRouterContext = ${r};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",o=l?`${n.hmr?.runtime?`import ${JSON.stringify(n.hmr.runtime)};`:""}${d?"":`import ${JSON.stringify(n.url)}`};\n${h.map(((e,t)=>{let r=`route${t}`,i=n.routes[e.route.id];Te(i,`Route ${e.route.id} not found in manifest`);let{clientActionModule:o,clientLoaderModule:s,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...o?[{module:o,varName:`${r}_clientAction`}]:[],...s?[{module:s,varName:`${r}_clientLoader`}]:[],...a?[{module:a,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===u.length?`import * as ${r} from ${JSON.stringify(c)};`:[u.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${u.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${d?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,i=new Set(t.state.matches.map((e=>e.route.id))),o=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(o.pop();o.length>0;)s.push(`/${o.join("/")}`),o.pop();s.forEach((e=>{let n=f(t.routes,e,t.basename);n&&n.forEach((e=>i.add(e.route.id)))}));let a=[...i].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return{...r,routes:a,sri:!!n||void 0}}(n,a),null,2)};`:""}\n  window.__reactRouterRouteModules = {${h.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(n.entry.module)});`:" ";return e.createElement(e.Fragment,null,e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Le(i),type:void 0}),e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Le(o),type:"module",async:!0}))}),[]),g=He?[]:(n.entry.imports.concat(Re(h,n,{includeHydrateFallback:!0})),[...new Set(m)]);var m;let y="object"===typeof n.sri?n.sri:{};return He?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}}):null,d?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:y[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:y[n.entry.module],suppressHydrationWarning:!0}),g.map((n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:y[n],suppressHydrationWarning:!0}))),p)}function qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Ke&&(window.__reactRouterVersion="7.5.0")}catch(iF){}function Ye(t){let{basename:n,children:r,window:i}=t,s=e.useRef();null==s.current&&(s.current=o({window:i,v5Compat:!0}));let a=s.current,[l,c]=e.useState({action:a.action,location:a.location}),u=e.useCallback((t=>{e.startTransition((()=>c(t)))}),[c]);return e.useLayoutEffect((()=>a.listen(u)),[a,u]),e.createElement(ge,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:a})}var Ze=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=e.forwardRef((function(t,n){let r,{onClick:i,discover:o="render",prefetch:l="none",relative:c,reloadDocument:d,replace:h,state:f,target:p,to:g,preventScrollReset:m,viewTransition:y,...v}=t,{basename:b}=e.useContext(G),_="string"===typeof g&&Ze.test(g),x=!1;if("string"===typeof g&&_&&(r=g,Ke))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=k(t.pathname,b);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:x=!0}catch(iF){a(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(K(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=e.useContext(G),{hash:o,pathname:a,search:l}=ee(t,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:M([r,a])),i.createHref({pathname:c,search:l,hash:o})}(g,{relative:c}),[E,S,T]=function(t,n){let r=e.useContext(Ue),[i,o]=e.useState(!1),[s,a]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect((()=>{if("render"===t&&a(!0),"viewport"===t){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[t]),e.useEffect((()=>{if(i){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[i]);let p=()=>{o(!0)},g=()=>{o(!1),a(!1)};return r?"intent"!==t?[s,f,{}]:[s,f,{onFocus:$e(l,p),onBlur:$e(c,g),onMouseEnter:$e(u,p),onMouseLeave:$e(d,g),onTouchStart:$e(h,p)}]:[!1,f,{}]}(l,v),A=function(t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=J(),c=Y(),d=ee(t,{relative:s});return e.useCallback((e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==r?r:u(c)===u(d);l(t,{replace:n,state:i,preventScrollReset:o,relative:s,viewTransition:a})}}),[c,l,d,r,i,n,t,o,s,a])}(g,{replace:h,state:f,target:p,preventScrollReset:m,relative:c,viewTransition:y});let C=e.createElement("a",{...v,...T,href:r||w,onClick:x||d?i:function(e){i&&i(e),e.defaultPrevented||A(e)},ref:qe(n,S),target:p,"data-discover":_||"render"!==o?void 0:"true"});return E&&!_?e.createElement(e.Fragment,null,C,e.createElement(Ve,{page:w})):C}));Qe.displayName="Link";var Je=e.forwardRef((function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:l,to:c,viewTransition:u,children:d,...h}=t,f=ee(c,{relative:h.relative}),p=Y(),g=e.useContext($),{navigator:m,basename:y}=e.useContext(G),v=null!=g&&function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(j);s(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=nt("useViewTransitionState"),o=ee(t,{relative:n.relative});if(!r.isTransitioning)return!1;let a=k(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=k(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=A(o.pathname,l)||null!=A(o.pathname,a)}(f)&&!0===u,b=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,_=p.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(_=_.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&y&&(x=k(x,y)||x);const w="/"!==b&&b.endsWith("/")?b.length-1:b.length;let E,S=_===b||!a&&_.startsWith(b)&&"/"===_.charAt(w),T=null!=x&&(x===b||!a&&x.startsWith(b)&&"/"===x.charAt(b.length)),C={isActive:S,isPending:T,isTransitioning:v},P=S?r:void 0;E="function"===typeof o?o(C):[o,S?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof l?l(C):l;return e.createElement(Qe,{...h,"aria-current":P,className:E,ref:n,style:R,to:c,viewTransition:u},"function"===typeof d?d(C):d)}));Je.displayName="NavLink";var et=e.forwardRef(((t,n)=>{let{discover:r="render",fetcherKey:i,navigate:o,reloadDocument:a,replace:l,state:c,method:d=ve,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:m,...y}=t,v=ot(),b=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(G),i=e.useContext(X);s(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...ee(t||".",{relative:n})},l=Y();if(null==t){a.search=l.search;let e=new URLSearchParams(a.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?`?${n}`:""}}t&&"."!==t||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:M([r,a.pathname]));return u(a)}(h,{relative:p}),_="get"===d.toLowerCase()?"get":"post",x="string"===typeof h&&Ze.test(h);return e.createElement("form",{ref:n,method:_,action:b,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||d;v(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:m})},...y,"data-discover":x||"render"!==r?void 0:"true"})}));function tt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nt(t){let n=e.useContext(z);return s(n,tt(t)),n}et.displayName="Form";var rt=0,it=()=>`__${String(++rt)}__`;function ot(){let{router:t}=nt("useSubmit"),{basename:n}=e.useContext(G),r=ue("useRouteId");return e.useCallback((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:a,formData:l,body:c}=Se(e,n);if(!1===i.navigate){let e=i.fetcherKey||it();await t.fetch(e,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[t,n,r])}new TextEncoder;var st=function(){return st=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},st.apply(this,arguments)};Object.create;function at(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var lt=n(403),ct=n.n(lt),ut="-ms-",dt="-moz-",ht="-webkit-",ft="comm",pt="rule",gt="decl",mt="@keyframes",yt=Math.abs,vt=String.fromCharCode,bt=Object.assign;function _t(e){return e.trim()}function xt(e,t){return(e=t.exec(e))?e[0]:e}function wt(e,t,n){return e.replace(t,n)}function Et(e,t,n){return e.indexOf(t,n)}function St(e,t){return 0|e.charCodeAt(t)}function Tt(e,t,n){return e.slice(t,n)}function At(e){return e.length}function Ct(e){return e.length}function kt(e,t){return t.push(e),e}function Pt(e,t){return e.filter((function(e){return!xt(e,t)}))}var Rt=1,It=1,Lt=0,Mt=0,Ot=0,Nt="";function Ft(e,t,n,r,i,o,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Rt,column:It,length:s,return:"",siblings:a}}function Dt(e,t){return bt(Ft("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Bt(e){for(;e.root;)e=Dt(e.root,{children:[e]});kt(e,e.siblings)}function Ut(){return Ot=Mt>0?St(Nt,--Mt):0,It--,10===Ot&&(It=1,Rt--),Ot}function zt(){return Ot=Mt<Lt?St(Nt,Mt++):0,It++,10===Ot&&(It=1,Rt++),Ot}function $t(){return St(Nt,Mt)}function jt(){return Mt}function Vt(e,t){return Tt(Nt,e,t)}function Wt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Gt(e){return Rt=It=1,Lt=At(Nt=e),Mt=0,[]}function Ht(e){return Nt="",e}function Xt(e){return _t(Vt(Mt-1,Yt(91===e?e+2:40===e?e+1:e)))}function qt(e){for(;(Ot=$t())&&Ot<33;)zt();return Wt(e)>2||Wt(Ot)>3?"":" "}function Kt(e,t){for(;--t&&zt()&&!(Ot<48||Ot>102||Ot>57&&Ot<65||Ot>70&&Ot<97););return Vt(e,jt()+(t<6&&32==$t()&&32==zt()))}function Yt(e){for(;zt();)switch(Ot){case e:return Mt;case 34:case 39:34!==e&&39!==e&&Yt(Ot);break;case 40:41===e&&Yt(e);break;case 92:zt()}return Mt}function Zt(e,t){for(;zt()&&e+Ot!==57&&(e+Ot!==84||47!==$t()););return"/*"+Vt(t,Mt-1)+"*"+vt(47===e?e:zt())}function Qt(e){for(;!Wt($t());)zt();return Vt(e,Mt)}function Jt(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function en(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case gt:return e.return=e.return||e.value;case ft:return"";case mt:return e.return=e.value+"{"+Jt(e.children,r)+"}";case pt:if(!At(e.value=e.props.join(",")))return""}return At(n=Jt(e.children,r))?e.return=e.value+"{"+n+"}":""}function tn(e,t,n){switch(function(e,t){return 45^St(e,0)?(((t<<2^St(e,0))<<2^St(e,1))<<2^St(e,2))<<2^St(e,3):0}(e,t)){case 5103:return ht+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ht+e+e;case 4789:return dt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ht+e+dt+e+ut+e+e;case 5936:switch(St(e,t+11)){case 114:return ht+e+ut+wt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ht+e+ut+wt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ht+e+ut+wt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return ht+e+ut+e+e;case 6165:return ht+e+ut+"flex-"+e+e;case 5187:return ht+e+wt(e,/(\w+).+(:[^]+)/,ht+"box-$1$2"+ut+"flex-$1$2")+e;case 5443:return ht+e+ut+"flex-item-"+wt(e,/flex-|-self/g,"")+(xt(e,/flex-|baseline/)?"":ut+"grid-row-"+wt(e,/flex-|-self/g,""))+e;case 4675:return ht+e+ut+"flex-line-pack"+wt(e,/align-content|flex-|-self/g,"")+e;case 5548:return ht+e+ut+wt(e,"shrink","negative")+e;case 5292:return ht+e+ut+wt(e,"basis","preferred-size")+e;case 6060:return ht+"box-"+wt(e,"-grow","")+ht+e+ut+wt(e,"grow","positive")+e;case 4554:return ht+wt(e,/([^-])(transform)/g,"$1"+ht+"$2")+e;case 6187:return wt(wt(wt(e,/(zoom-|grab)/,ht+"$1"),/(image-set)/,ht+"$1"),e,"")+e;case 5495:case 3959:return wt(e,/(image-set\([^]*)/,ht+"$1$`$1");case 4968:return wt(wt(e,/(.+:)(flex-)?(.*)/,ht+"box-pack:$3"+ut+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ht+e+e;case 4200:if(!xt(e,/flex-|baseline/))return ut+"grid-column-align"+Tt(e,t)+e;break;case 2592:case 3360:return ut+wt(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,xt(e.props,/grid-\w+-end/)}))?~Et(e+(n=n[t].value),"span",0)?e:ut+wt(e,"-start","")+e+ut+"grid-row-span:"+(~Et(n,"span",0)?xt(n,/\d+/):+xt(n,/\d+/)-+xt(e,/\d+/))+";":ut+wt(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return xt(e.props,/grid-\w+-start/)}))?e:ut+wt(wt(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return wt(e,/(.+)-inline(.+)/,ht+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(At(e)-1-t>6)switch(St(e,t+1)){case 109:if(45!==St(e,t+4))break;case 102:return wt(e,/(.+:)(.+)-([^]+)/,"$1"+ht+"$2-$3$1"+dt+(108==St(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Et(e,"stretch",0)?tn(wt(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return wt(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,o,s,a){return ut+n+":"+r+a+(i?ut+n+"-span:"+(o?s:+s-+r)+a:"")+e}));case 4949:if(121===St(e,t+6))return wt(e,":",":"+ht)+e;break;case 6444:switch(St(e,45===St(e,14)?18:11)){case 120:return wt(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ht+(45===St(e,14)?"inline-":"")+"box$3$1"+ht+"$2$3$1"+ut+"$2box$3")+e;case 100:return wt(e,":",":"+ut)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return wt(e,"scroll-","scroll-snap-")+e}return e}function nn(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case gt:return void(e.return=tn(e.value,e.length,n));case mt:return Jt([Dt(e,{value:wt(e.value,"@","@"+ht)})],r);case pt:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(xt(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Bt(Dt(e,{props:[wt(t,/:(read-\w+)/,":-moz-$1")]})),Bt(Dt(e,{props:[t]})),bt(e,{props:Pt(n,r)});break;case"::placeholder":Bt(Dt(e,{props:[wt(t,/:(plac\w+)/,":"+ht+"input-$1")]})),Bt(Dt(e,{props:[wt(t,/:(plac\w+)/,":-moz-$1")]})),Bt(Dt(e,{props:[wt(t,/:(plac\w+)/,ut+"input-$1")]})),Bt(Dt(e,{props:[t]})),bt(e,{props:Pt(n,r)})}return""}))}}function rn(e){return Ht(on("",null,null,null,[""],e=Gt(e),0,[0],e))}function on(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,g=1,m=1,y=1,v=0,b="",_=i,x=o,w=r,E=b;m;)switch(p=v,v=zt()){case 40:if(108!=p&&58==St(E,d-1)){-1!=Et(E+=wt(Xt(v),"&","&\f"),"&\f",yt(c?a[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:E+=Xt(v);break;case 9:case 10:case 13:case 32:E+=qt(p);break;case 92:E+=Kt(jt()-1,7);continue;case 47:switch($t()){case 42:case 47:kt(an(Zt(zt(),jt()),t,n,l),l);break;default:E+="/"}break;case 123*g:a[c++]=At(E)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(E=wt(E,/\f/g,"")),f>0&&At(E)-d&&kt(f>32?ln(E+";",r,n,d-1,l):ln(wt(E," ","")+";",r,n,d-2,l),l);break;case 59:E+=";";default:if(kt(w=sn(E,t,n,c,u,i,a,b,_=[],x=[],d,o),o),123===v)if(0===u)on(E,t,w,w,_,o,d,a,x);else switch(99===h&&110===St(E,3)?100:h){case 100:case 108:case 109:case 115:on(e,w,w,r&&kt(sn(e,w,w,0,0,i,a,b,i,_=[],d,x),x),i,x,d,a,r?_:x);break;default:on(E,w,w,w,[""],x,0,a,x)}}c=u=f=0,g=y=1,b=E="",d=s;break;case 58:d=1+At(E),f=p;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==Ut())continue;switch(E+=vt(v),v*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(At(E)-1)*y,y=1;break;case 64:45===$t()&&(E+=Xt(zt())),h=$t(),u=d=At(b=E+=Qt(jt())),v++;break;case 45:45===p&&2==At(E)&&(g=0)}}return o}function sn(e,t,n,r,i,o,s,a,l,c,u,d){for(var h=i-1,f=0===i?o:[""],p=Ct(f),g=0,m=0,y=0;g<r;++g)for(var v=0,b=Tt(e,h+1,h=yt(m=s[g])),_=e;v<p;++v)(_=_t(m>0?f[v]+" "+b:wt(b,/&\f/g,f[v])))&&(l[y++]=_);return Ft(e,t,n,0===i?pt:a,l,c,u,d)}function an(e,t,n,r){return Ft(e,t,n,ft,vt(Ot),Tt(e,2,-2),0,r)}function ln(e,t,n,r,i){return Ft(e,t,n,gt,Tt(e,0,r),Tt(e,r+1,-1),r,i)}var cn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},un="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",dn="active",hn="data-styled-version",fn="6.1.17",pn="/*!sc*/\n",gn="undefined"!=typeof window&&"HTMLElement"in window,mn=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/duck-data-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),yn=(new Set,Object.freeze([])),vn=Object.freeze({});function bn(e,t,n){return void 0===n&&(n=vn),e.theme!==n.theme&&e.theme||t||n.theme}var _n=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),xn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,wn=/(^-|-$)/g;function En(e){return e.replace(xn,"-").replace(wn,"")}var Sn=/(a)(d)/gi,Tn=function(e){return String.fromCharCode(e+(e>25?39:97))};function An(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Tn(t%52)+n;return(Tn(t%52)+n).replace(Sn,"$1-$2")}var Cn,kn=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Pn=function(e){return kn(5381,e)};function Rn(e){return An(Pn(e)>>>0)}function In(e){return e.displayName||e.name||"Component"}function Ln(e){return"string"==typeof e&&!0}var Mn="function"==typeof Symbol&&Symbol.for,On=Mn?Symbol.for("react.memo"):60115,Nn=Mn?Symbol.for("react.forward_ref"):60112,Fn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Dn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Bn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Un=((Cn={})[Nn]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cn[On]=Bn,Cn);function zn(e){return("type"in(t=e)&&t.type.$$typeof)===On?Bn:"$$typeof"in e?Un[e.$$typeof]:Fn;var t}var $n=Object.defineProperty,jn=Object.getOwnPropertyNames,Vn=Object.getOwnPropertySymbols,Wn=Object.getOwnPropertyDescriptor,Gn=Object.getPrototypeOf,Hn=Object.prototype;function Xn(e,t,n){if("string"!=typeof t){if(Hn){var r=Gn(t);r&&r!==Hn&&Xn(e,r,n)}var i=jn(t);Vn&&(i=i.concat(Vn(t)));for(var o=zn(e),s=zn(t),a=0;a<i.length;++a){var l=i[a];if(!(l in Dn||n&&n[l]||s&&l in s||o&&l in o)){var c=Wn(t,l);try{$n(e,l,c)}catch(e){}}}}return e}function qn(e){return"function"==typeof e}function Kn(e){return"object"==typeof e&&"styledComponentId"in e}function Yn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Zn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function Qn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Jn(e,t,n){if(void 0===n&&(n=!1),!n&&!Qn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Jn(e[r],t[r]);else if(Qn(t))for(var r in t)e[r]=Jn(e[r],t[r]);return e}function er(e,t){Object.defineProperty(e,"toString",{value:t})}function tr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var nr=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw tr(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(pn);return t},e}(),rr=new Map,ir=new Map,or=1,sr=function(e){if(rr.has(e))return rr.get(e);for(;ir.has(or);)or++;var t=or++;return rr.set(e,t),ir.set(t,e),t},ar=function(e,t){or=t+1,rr.set(e,t),ir.set(t,e)},lr="style[".concat(un,"][").concat(hn,'="').concat(fn,'"]'),cr=new RegExp("^".concat(un,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),ur=function(e,t,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&e.registerName(t,r)},dr=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(pn),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var l=a.match(cr);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(ar(u,c),ur(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},hr=function(e){for(var t=document.querySelectorAll(lr),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(un)!==dn&&(dr(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function fr(){return n.nc}var pr=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(un,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(un,dn),r.setAttribute(hn,fn);var s=fr();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},gr=function(){function e(e){this.element=pr(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw tr(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),mr=function(){function e(e){this.element=pr(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),yr=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),vr=gn,br={isServer:!gn,useCSSOMInjection:!mn},_r=function(){function e(e,t,n){void 0===e&&(e=vn),void 0===t&&(t={});var r=this;this.options=st(st({},br),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&gn&&vr&&(vr=!1,hr(this)),er(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return ir.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(un,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),r+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(pn)},o=0;o<n;o++)i(o);return r}(r)}))}return e.registerId=function(e){return sr(e)},e.prototype.rehydrate=function(){!this.server&&gn&&hr(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(st(st({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new yr(n):t?new gr(n):new mr(n)}(this.options),new nr(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(sr(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(sr(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(sr(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),xr=/&/g,wr=/^\s*\/\/.*$/gm;function Er(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Er(e.children,t)),e}))}function Sr(e){var t,n,r,i=void 0===e?vn:e,o=i.options,s=void 0===o?vn:o,a=i.plugins,l=void 0===a?yn:a,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===pt&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(xr,n).replace(r,c))})),s.prefix&&u.push(nn),u.push(en);var d=function(e,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(wr,""),c=rn(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);s.namespace&&(c=Er(c,s.namespace));var d,h=[];return Jt(c,function(e){var t=Ct(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(u.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return d.hash=l.length?l.reduce((function(e,t){return t.name||tr(15),kn(e,t.name)}),5381).toString():"",d}var Tr=new _r,Ar=Sr(),Cr=e.createContext({shouldForwardProp:void 0,styleSheet:Tr,stylis:Ar}),kr=(Cr.Consumer,e.createContext(void 0));function Pr(){return(0,e.useContext)(Cr)}function Rr(t){var n=(0,e.useState)(t.stylisPlugins),r=n[0],i=n[1],o=Pr().styleSheet,s=(0,e.useMemo)((function(){var e=o;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target,o]),a=(0,e.useMemo)((function(){return Sr({options:{namespace:t.namespace,prefix:t.enableVendorPrefixes},plugins:r})}),[t.enableVendorPrefixes,t.namespace,r]);(0,e.useEffect)((function(){ct()(r,t.stylisPlugins)||i(t.stylisPlugins)}),[t.stylisPlugins]);var l=(0,e.useMemo)((function(){return{shouldForwardProp:t.shouldForwardProp,styleSheet:s,stylis:a}}),[t.shouldForwardProp,s,a]);return e.createElement(Cr.Provider,{value:l},e.createElement(kr.Provider,{value:a},t.children))}var Ir=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Ar);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,er(this,(function(){throw tr(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Ar),this.name+e.hash},e}(),Lr=function(e){return e>="A"&&e<="Z"};function Mr(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Lr(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Or=function(e){return null==e||!1===e||""===e},Nr=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!Or(o)&&(Array.isArray(o)&&o.isCss||qn(o)?r.push("".concat(Mr(i),":"),o,";"):Qn(o)?r.push.apply(r,at(at(["".concat(i," {")],Nr(o),!1),["}"],!1)):r.push("".concat(Mr(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in cn||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Fr(e,t,n,r){return Or(e)?[]:Kn(e)?[".".concat(e.styledComponentId)]:qn(e)?!qn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Fr(e(t),t,n,r):e instanceof Ir?n?(e.inject(n,r),[e.getName(r)]):[e]:Qn(e)?Nr(e):Array.isArray(e)?Array.prototype.concat.apply(yn,e.map((function(e){return Fr(e,t,n,r)}))):[e.toString()];var i}function Dr(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(qn(n)&&!Kn(n))return!1}return!0}var Br=Pn(fn),Ur=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Dr(e),this.componentId=t,this.baseHash=kn(Br,t),this.baseStyle=n,_r.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=Yn(r,this.staticRulesId);else{var i=Zn(Fr(this.rules,e,t,n)),o=An(kn(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}r=Yn(r,o),this.staticRulesId=o}else{for(var a=kn(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=Zn(Fr(u,e,t,n));a=kn(a,d+c),l+=d}}if(l){var h=An(a>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),r=Yn(r,h)}}return r},e}(),zr=e.createContext(void 0);zr.Consumer;var $r={};new Set;function jr(t,n,r){var i=Kn(t),o=t,s=!Ln(t),a=n.attrs,l=void 0===a?yn:a,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":En(e);$r[n]=($r[n]||0)+1;var r="".concat(n,"-").concat(Rn(fn+n+$r[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,d=n.displayName,h=void 0===d?function(e){return Ln(e)?"styled.".concat(e):"Styled(".concat(In(e),")")}(t):d,f=n.displayName&&n.componentId?"".concat(En(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=n.shouldForwardProp;if(i&&o.shouldForwardProp){var m=o.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;g=function(e,t){return m(e,t)&&y(e,t)}}else g=m}var v=new Ur(r,f,i?o.componentStyle:void 0);function b(t,n){return function(t,n,r){var i=t.attrs,o=t.componentStyle,s=t.defaultProps,a=t.foldedComponentIds,l=t.styledComponentId,c=t.target,u=e.useContext(zr),d=Pr(),h=t.shouldForwardProp||d.shouldForwardProp,f=bn(n,u,s)||vn,p=function(e,t,n){for(var r,i=st(st({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=qn(r=e[o])?r(i):r;for(var a in s)i[a]="className"===a?Yn(i[a],s[a]):"style"===a?st(st({},i[a]),s[a]):s[a]}return t.className&&(i.className=Yn(i.className,t.className)),i}(i,n,f),g=p.as||c,m={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?m.as=p.forwardedAs:h&&!h(y,g)||(m[y]=p[y]));var v=function(e,t){var n=Pr();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,p),b=Yn(a,l);return v&&(b+=" "+v),p.className&&(b+=" "+p.className),m[Ln(g)&&!_n.has(g)?"class":"className"]=b,r&&(m.ref=r),(0,e.createElement)(g,m)}(_,t,n)}b.displayName=h;var _=e.forwardRef(b);return _.attrs=p,_.componentStyle=v,_.displayName=h,_.shouldForwardProp=g,_.foldedComponentIds=i?Yn(o.foldedComponentIds,o.styledComponentId):"",_.styledComponentId=f,_.target=i?o.target:t,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)Jn(e,i[r],!0);return e}({},o.defaultProps,e):e}}),er(_,(function(){return".".concat(_.styledComponentId)})),s&&Xn(_,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function Vr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var Wr=function(e){return Object.assign(e,{isCss:!0})};function Gr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(qn(e)||Qn(e))return Wr(Fr(Vr(yn,at([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Fr(r):Wr(Fr(Vr(r,t)))}function Hr(e,t,n){if(void 0===n&&(n=vn),!t)throw tr(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,Gr.apply(void 0,at([r],i,!1)))};return r.attrs=function(r){return Hr(e,t,st(st({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return Hr(e,t,st(st({},n),r))},r}var Xr=function(e){return Hr(jr,e)},qr=Xr;_n.forEach((function(e){qr[e]=Xr(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Dr(e),_r.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(Zn(Fr(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&_r.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();(function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=fr(),r=Zn([n&&'nonce="'.concat(n,'"'),"".concat(un,'="true"'),"".concat(hn,'="').concat(fn,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(e,"</style>")},this.getStyleTags=function(){if(t.sealed)throw tr(2);return t._emitSheetCSS()},this.getStyleElement=function(){var n;if(t.sealed)throw tr(2);var r=t.instance.toString();if(!r)return[];var i=((n={})[un]="",n[hn]=fn,n.dangerouslySetInnerHTML={__html:r},n),o=fr();return o&&(i.nonce=o),[e.createElement("style",st({},i,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new _r({isServer:!0}),this.sealed=!1}t.prototype.collectStyles=function(t){if(this.sealed)throw tr(2);return e.createElement(Rr,{sheet:this.instance},t)},t.prototype.interleaveWithNodeStream=function(e){throw tr(3)}})(),"__sc-".concat(un,"__");var Kr=n(414);const Yr="60px",Zr="768px",Qr=qr.nav`
  background-color:rgb(38, 72, 4); /* Darker Forest Green */
  color: #fff; /* White text */
  height: ${Yr};
  width: 100%;
  position: fixed; /* Fixed at the top */
  top: 0;
  left: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: space-between; /* Space between logo/title and links */
  padding: 0 2rem; /* Horizontal padding */
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.25);
  font-family: 'Lato', sans-serif;
`,Jr=qr(Qe)` // Make it a link to home
  color: #fff;
  font-size: 1.5em;
  font-weight: 600; /* Slightly bolder */
  text-decoration: none;
  margin-right: auto; // Pushes links to the right
  font-family: 'Lato', sans-serif;
  letter-spacing: 0.5px; /* Add subtle letter spacing */

  @media (max-width: ${Zr}) {
     position: absolute;
     left: 15px;
     top: 50%;
     transform: translateY(-50%);
  }
`,ei=qr.div`
  display: flex; // Horizontal layout for links
  align-items: center;
  font-family: 'Lato', sans-serif;

  @media (max-width: ${Zr}) {
    display: ${e=>e.isOpen?"flex":"none"}; // Control visibility
    flex-direction: column; // Stack links vertically on mobile
    position: absolute;
    top: ${Yr}; // Position below navbar
    left: 0;
    width: 100%;
    background-color: #336600; /* Darker Forest Green */
    padding: 1rem 0; // Add padding for dropdown
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15); // Shadow for dropdown
    border-top: 1px solid rgba(255, 255, 255, 0.1); // Separator line - white
  }
`,ti=qr(Qe)`
  color: #fff; /* White text */
  text-decoration: none;
  font-weight: 500;
  font-size: 1.1rem; /* Slightly larger font */
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
  padding: 0.5rem 1rem; // Adjust padding for horizontal layout
  border-radius: 4px;
  margin: 0 0.5rem; // Horizontal margin between links
  display: inline-block; // Display links side-by-side
  font-family: 'Lato', sans-serif;

  &:hover {
    background-color: rgba(255, 255, 255, 0.2); /* Softer white hover */
    color: #fff;
  }

  @media (max-width: ${Zr}) {
    display: block; // Stack links in mobile dropdown
    width: 90%; // Make links take most of the dropdown width
    margin: 0.5rem auto; // Center links vertically
    text-align: center; // Center text
    padding: 0.8rem 1rem; // Adjust padding for vertical stacking
  }

  /* &.active { ... } */ // Optional active styling
`,ni=qr.button`
  display: none; // Hidden by default on larger screens
  background: none;
  border: none;
  padding: 10px;
  cursor: pointer;
  z-index: 1100; // Above potential dropdown content

  span {
    display: block;
    width: 25px;
    height: 3px;
    background-color: #fff; /* White hamburger */
    margin: 5px 0;
    transition: background-color 0.3s ease;
  }

  @media (max-width: ${Zr}) {
    display: block; // Show on mobile
    /* No fixed positioning needed, it's part of the flex layout */
  }
`,ri=()=>{const[t,n]=(0,e.useState)(!1),r=()=>n(!1);return(0,Kr.jsxs)(Qr,{children:[(0,Kr.jsx)(Jr,{to:"/",onClick:r,children:"moveduck."})," ",(0,Kr.jsxs)(ni,{onClick:()=>n(!t),"aria-label":"Toggle menu",children:[(0,Kr.jsx)("span",{}),(0,Kr.jsx)("span",{}),(0,Kr.jsx)("span",{})]}),(0,Kr.jsxs)(ei,{isOpen:t,children:[(0,Kr.jsx)(ti,{to:"/",onClick:r,children:"Home"}),(0,Kr.jsx)(ti,{to:"/about",onClick:r,children:"About Us"}),(0,Kr.jsx)(ti,{to:"/learnmore",onClick:r,children:"Learn More"})]})]})};let ii=1,oi=1;class si{time=0;channels=(()=>new Map)();animations=(()=>new Map)();playing=!1;lastEngineTime=-1;constructor(){}addChannel(e){const{delay:t=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=e,o=ii++,s={time:0,delay:t,duration:n,rate:r,repeat:i};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(e){this.channels.delete(e);for(const[t,n]of this.animations)n.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:e,channel:t}=r;e.setTime(this.getTime(t))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const n=oi++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}const ai={number:{type:"number",validate:(e,t)=>Number.isFinite(e)&&"object"===typeof t&&(void 0===t.max||e<=t.max)&&(void 0===t.min||e>=t.min)},array:{type:"array",validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function li(e){let t=ci(e);if("object"!==t)return{value:e,...ai[t],type:t};if("object"===typeof e)return e?void 0!==e.type?{...e,...ai[e.type],type:e.type}:void 0===e.value?{type:"object",value:e}:(t=ci(e.value),{...e,...ai[t],type:t}):{type:"object",value:null};throw new Error("props")}function ci(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const ui={vertex:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\n  fragColor = material_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  fragColor = lighting_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_FOG\n  fragColor = fog_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  fragColor = picking_filterHighlightColor(fragColor);\n  fragColor = picking_filterPickingColor(fragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},di=/void\s+main\s*\([^)]*\)\s*\{\n?/,hi=/}\n?[^{}]*$/,fi=[],pi="__LUMA_INJECT_DECLARATIONS__";function gi(e){const t={vertex:{},fragment:{}};for(const n in e){let r=e[n];"string"===typeof r&&(r={order:0,injection:r}),t[mi(n)][n]=r}return t}function mi(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function yi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i="vertex"===t;for(const o in n){const t=n[o];t.sort(((e,t)=>e.order-t.order)),fi.length=t.length;for(let e=0,n=t.length;e<n;++e)fi[e]=t[e].injection;const r=`${fi.join("\n")}\n`;switch(o){case"vs:#decl":i&&(e=e.replace(pi,r));break;case"vs:#main-start":i&&(e=e.replace(di,(e=>e+r)));break;case"vs:#main-end":i&&(e=e.replace(hi,(e=>r+e)));break;case"fs:#decl":i||(e=e.replace(pi,r));break;case"fs:#main-start":i||(e=e.replace(di,(e=>e+r)));break;case"fs:#main-end":i||(e=e.replace(hi,(e=>r+e)));break;default:e=e.replace(o,(e=>e+r))}}return e=e.replace(pi,""),r&&(e=e.replace(/\}\s*$/,(e=>e+ui[t]))),e}function vi(e){e.map((e=>bi(e)))}function bi(e){if(e.instance)return;vi(e.dependencies||[]);const{propTypes:t={},deprecations:n=[],inject:r={}}=e,i={normalizedInjections:gi(r),parsedDeprecations:xi(n)};t&&(i.propValidators=function(e){const t={};for(const[n,r]of Object.entries(e))t[n]=li(r);return t}(t)),e.instance=i;let o={};t&&(o=Object.entries(t).reduce(((e,t)=>{let[n,r]=t;const i=r?.value;return i&&(e[n]=i),e}),{})),e.defaultUniforms={...e.defaultUniforms,...o}}function _i(e,t,n){e.deprecations?.forEach((e=>{e.regex?.test(t)&&(e.deprecated?n.deprecated(e.old,e.new)():n.removed(e.old,e.new)())}))}function xi(e){return e.forEach((e=>{if("function"===e.type)e.regex=new RegExp(`\\b${e.old}\\(`);else e.regex=new RegExp(`${e.type} ${e.old};`)})),e}function wi(e){vi(e);const t={},n={};Ei({modules:e,level:0,moduleMap:t,moduleDepth:n});const r=Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]));return vi(r),r}function Ei(e){const{modules:t,level:n,moduleMap:r,moduleDepth:i}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)r[o.name]=o,(void 0===i[o.name]||i[o.name]<n)&&(i[o.name]=n);for(const o of t)o.dependencies&&Ei({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}const Si=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Ti=[...Si,[ki("attribute"),"in $1"],[ki("varying"),"out $1"]],Ai=[...Si,[ki("varying"),"in $1"]];function Ci(e,t){for(const[n,r]of t)e=e.replace(n,r);return e}function ki(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function Pi(e,t){let n="";for(const r in e){const i=e[r];if(n+=`void ${i.signature} {\n`,i.header&&(n+=`  ${i.header}`),t[r]){const e=t[r];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+=`  ${t.injection}\n`}i.footer&&(n+=`  ${i.footer}`),n+="}\n"}return n}function Ri(e){const t={vertex:{},fragment:{}};for(const n of e){let e,r;"string"!==typeof n?(e=n,r=e.hook):(e={},r=n),r=r.trim();const[i,o]=r.split(":"),s=r.replace(/\(.+/,""),a=Object.assign(e,{signature:o});switch(i){case"vs":t.vertex[s]=a;break;case"fs":t.fragment[s]=a;break;default:throw new Error(i)}}return t}function Ii(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}function Li(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return n?n[1]:t}function Mi(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}if(100!==t&&300!==t)throw new Error(`Invalid GLSL version ${t}`);return t}const Oi=`\n\n${pi}\n`;function Ni(e,t){const{source:n,stage:r,modules:i,hookFunctions:o=[],inject:s={},log:a}=t;Ii("string"===typeof n,"shader source must be a string");const l=n;let c="";const u=Ri(o),d={},h={},f={};for(const g in s){const e="string"===typeof s[g]?{injection:s[g],order:0}:s[g],t=/^(v|f)s:(#)?([\w-]+)$/.exec(g);if(t){const n=t[2],r=t[3];n?"decl"===r?h[g]=[e]:f[g]=[e]:d[g]=[e]}else f[g]=[e]}const p=i;for(const g of p){a&&_i(g,l,a);c+=Bi(g,"wgsl");const e=g.injections?.[r]||{};for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const r="decl"===n[2]?h:f;r[t]=r[t]||[],r[t].push(e[t])}else d[t]=d[t]||[],d[t].push(e[t])}}return c+=Oi,c=yi(c,r,h),c+=Pi(u[r],d),c+=l,c=yi(c,r,f),c}function Fi(e,t){const{id:n,source:r,stage:i,language:o="glsl",modules:s,defines:a={},hookFunctions:l=[],inject:c={},prologue:u=!0,log:d}=t;Ii("string"===typeof r,"shader source must be a string");const h="glsl"===o?function(e,t){return{name:Li(e,t),language:"glsl",version:Mi(e)}}(r).version:-1,f=e.shaderLanguageVersion,p=100===h?"#version 100":"#version 300 es",g=r.split("\n").slice(1).join("\n"),m={};s.forEach((e=>{Object.assign(m,e.defines)})),Object.assign(m,a);let y="";switch(o){case"wgsl":break;case"glsl":y=u?`${p}\n\n// ----- PROLOGUE -------------------------\n${function(e){const{id:t,source:n,stage:r}=e,i=t&&-1===n.indexOf("SHADER_NAME");return i?`\n#define SHADER_NAME ${t}_${r}`:""}({id:n,source:r,stage:i})}\n#define SHADER_TYPE_${i.toUpperCase()}\n\n${function(e){switch(e?.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n// Apple optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Headless Chrome's software shader 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// If the GPU doesn't have full 32 bits precision, will causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e)}\n${"fragment"===i?"precision highp float;\n":""}\n\n// ----- APPLICATION DEFINES -------------------------\n\n${function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(const n in e){const r=e[n];(r||Number.isFinite(r))&&(t+=`#define ${n.toUpperCase()} ${e[n]}\n`)}return t}(m)}\n\n`:`${p}\n`}const v=Ri(l),b={},_={},x={};for(const w in c){const e="string"===typeof c[w]?{injection:c[w],order:0}:c[w],t=/^(v|f)s:(#)?([\w-]+)$/.exec(w);if(t){const n=t[2],r=t[3];n?"decl"===r?_[w]=[e]:x[w]=[e]:b[w]=[e]}else x[w]=[e]}for(const w of s){d&&_i(w,g,d);y+=Bi(w,i);const e=w.instance?.normalizedInjections[i]||{};for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const r="decl"===n[2]?_:x;r[t]=r[t]||[],r[t].push(e[t])}else b[t]=b[t]||[],b[t].push(e[t])}}return y+="// ----- MAIN SHADER SOURCE -------------------------",y+=Oi,y=yi(y,i,_),y+=Pi(v[i],b),y+=g,y=yi(y,i,x),"glsl"===o&&h!==f&&(y=function(e,t){if(300!==Number(e.match(/^#version[ \t]+(\d+)/m)?.[1]||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return Ci(e,Ti);case"fragment":return Ci(e,Ai);default:throw new Error(t)}}(y,i)),y.trim()}function Di(e){return function(t){const n={};for(const r of e){const e=r.getUniforms?.(t,n);Object.assign(n,e)}return n}}function Bi(e,t){let n;switch(t){case"vertex":n=e.vs||"";break;case"fragment":n=e.fs||"";break;case"wgsl":n=e.source||"";break;default:Ii(!1)}if(!e.name)throw new Error("Shader module must have a name");const r=e.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let i=`// ----- MODULE ${e.name} ---------------\n\n`;return"wgsl"!==t&&(i+=`#define MODULE_${r}\n`),i+=`${n}\n`,i}const Ui=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,zi=/^\s*\#\s*endif\s*$/;class $i{static defaultShaderAssembler;_hookFunctions=[];_defaultModules=[];static getDefaultShaderAssembler(){return $i.defaultShaderAssembler=$i.defaultShaderAssembler||new $i,$i.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find((t=>t.name===("string"===typeof e?e:e.name)))||this._defaultModules.push(e)}removeDefaultModule(e){const t="string"===typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t))}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const t=this._getModuleList(e.modules),n=this._hookFunctions,{source:r,getUniforms:i}=function(e){const t=wi(e.modules||[]);return{source:Ni(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:Di(t)}}({...e,source:e.source,modules:t,hookFunctions:n}),o="wgsl"===e.platformInfo.shaderLanguage?function(e,t){const n=e.split("\n"),r=[];let i=!0,o=null;for(const s of n){const e=s.match(Ui),n=s.match(zi);e?(o=e[1],i=Boolean(t?.defines?.[o])):n?i=!0:i&&r.push(s)}return r.join("\n")}(r):r;return{source:o,getUniforms:i,modules:t}}assembleGLSLShaderPair(e){const t=this._getModuleList(e.modules),n=this._hookFunctions,r=function(e){const{vs:t,fs:n}=e,r=wi(e.modules||[]);return{vs:Fi(e.platformInfo,{...e,source:t,stage:"vertex",modules:r}),fs:Fi(e.platformInfo,{...e,source:n,stage:"fragment",modules:r}),getUniforms:Di(r)}}({...e,vs:e.vs,fs:e.fs,modules:t,hookFunctions:n});return{...r,modules:t}}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),n={};let r=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const e=this._defaultModules[i],o=e.name;t[r++]=e,n[o]=!0}for(let i=0,o=e.length;i<o;++i){const o=e[i],s=o.name;n[s]||(t[r++]=o,n[s]=!0)}return t.length=r,vi(t),t}}const ji="#define SMOOTH_EDGE_RADIUS 0.5",Vi={name:"geometry",source:"const SMOOTH_EDGE_RADIUS: f32 = 0.5;\n\nstruct VertexGeometry {\n  position: vec4<f32>,\n  worldPosition: vec3<f32>,\n  worldPositionAlt: vec3<f32>,\n  normal: vec3<f32>,\n  uv: vec2<f32>,\n  pickingColor: vec3<f32>,\n};\n\nvar<private> geometry_: VertexGeometry = VertexGeometry(\n  vec4<f32>(0.0, 0.0, 1.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec2<f32>(0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0)\n);\n\nstruct FragmentGeometry {\n  uv: vec2<f32>,\n};\n\nvar<private> fragmentGeometry: FragmentGeometry;\n\nfn smoothedge(edge: f32, x: f32) -> f32 {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n",vs:`${ji}\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n`,fs:`${ji}\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`},Wi=[Vi],Gi=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],Hi=[];function Xi(e){const t=$i.getDefaultShaderAssembler();for(const r of Wi)t.addDefaultModule(r);const n="glsl"===e?Gi:Hi;for(const r of n)t.addShaderHook(r);return t}const qi="uniform layerUniforms {\n  uniform float opacity;\n} layer;\n",Ki={name:"layer",vs:qi,fs:qi,getUniforms:e=>({opacity:Math.pow(e.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},Yi="Awaiting state",Zi="Matched. State transferred from previous layer",Qi="Initialized",Ji="Discarded. Awaiting garbage collection",eo="No longer matched. Awaiting garbage collection",to="Finalized! Awaiting garbage collection",no=Symbol.for("component"),ro=Symbol.for("propTypes"),io=Symbol.for("deprecatedProps"),oo=Symbol.for("asyncPropDefaults"),so=Symbol.for("asyncPropOriginal"),ao=Symbol.for("asyncPropResolved");function lo(e){if("undefined"!==typeof window&&"renderer"===window.process?.type)return!0;if("undefined"!==typeof process&&Boolean(process.versions?.electron))return!0;const t="undefined"!==typeof navigator&&navigator.userAgent,n=e||t;return Boolean(n&&n.indexOf("Electron")>=0)}function co(){return!("object"===typeof process&&"[object process]"===String(process)&&!process?.browser)||lo()}const uo="4.1.0";class ho{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(iF){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}var fo;!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(fo||(fo={}));function po(e){return"string"!==typeof e?e:(e=e.toUpperCase(),fo[e]||fo.WHITE)}function go(e,t){if(!e)throw new Error(t||"Assertion failed")}const mo=globalThis,yo=(globalThis.document,globalThis.process||{}),vo=(globalThis.console,globalThis.navigator||{});function bo(){let e;if(co()&&mo.performance)e=mo?.performance?.now?.();else if("hrtime"in yo){const t=yo?.hrtime?.();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const _o={debug:co()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},xo={enabled:!0,level:0};function wo(){}const Eo={},So={once:!0};class To{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.VERSION=uo,this._startTs=bo(),this._deltaTs=bo(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new ho(`__probe-${this.id}__`,xo),this.timeStamp(`${this.id} started`),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const o of r){const n=i[o];"function"===typeof n&&(t.find((e=>o===e))||(i[o]=n.bind(e)))}}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((bo()-this._startTs).toPrecision(10))}getDelta(){return Number((bo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){if(!e)throw new Error(t||"Assertion failed")}warn(e){return this._getLogFunction(0,e,_o.warn,arguments,So)}error(e){return this._getLogFunction(0,e,_o.error,arguments)}deprecated(e,t){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${t}\` instead`)}removed(e,t){return this.error(`\`${e}\` has been removed. Use \`${t}\` instead`)}probe(e,t){return this._getLogFunction(e,t,_o.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,_o.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,_o.debug||_o.info,arguments,So)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||wo,n&&[n],{tag:ko(t)}):wo}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||wo)}group(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Co({logLevel:e,message:t,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||wo)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Ao(e)}_getLogFunction(e,t,n,r,i){if(this._shouldLog(e)){i=Co({logLevel:e,message:t,args:r,opts:i}),go(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=bo();const o=i.tag||i.message;if(i.once&&o){if(Eo[o])return wo;Eo[o]=bo()}return t=function(e,t,n){if("string"===typeof t){const r=n.time?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}(function(e){let t;return t=e<10?`${e.toFixed(2)}ms`:e<100?`${e.toFixed(1)}ms`:e<1e3?`${e.toFixed(0)}ms`:`${(e/1e3).toFixed(2)}s`,t}(n.total)):"";t=function(e,t,n){co||"string"!==typeof e||(t&&(e=`\x1b[${po(t)}m${e}\x1b[39m`),n&&(e=`\x1b[${po(n)+10}m${e}\x1b[49m`));return e}(t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,n.color,n.background)}return t}(this.id,i.message,i),n.bind(console,t,...i.args)}return wo}}function Ao(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return go(Number.isFinite(t)&&t>=0),t}function Co(e){const{logLevel:t,message:n}=e;e.logLevel=Ao(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"===typeof e.message&&(e.message=e.message());const i=typeof e.message;return go("string"===i||"object"===i),Object.assign(e,{args:r},e.opts)}function ko(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}To.VERSION=uo;const Po=new To({id:"deck"});let Ro={};function Io(e){Ro=e}function Lo(e,t,n,r){Po.level>0&&Ro[e]&&Ro[e].call(null,t,n,r)}function Mo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(e)?Oo(e,t,[]):t(e)?[e]:[]}function Oo(e,t,n){let r=-1;for(;++r<e.length;){const i=e[r];Array.isArray(i)?Oo(i,t,n):t(i)&&n.push(i)}return n}function No(e){let{target:t,source:n,start:r=0,count:i=1}=e;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s);return t}function Fo(){let e;if("undefined"!==typeof window&&window.performance)e=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}class Do{constructor(e,t){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=t,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Fo(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Fo()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Bo{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const t of Object.values(this.stats))e(t)}getTable(){const e={};return this.forEach((t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>this._getOrCreate(e)))}_getOrCreate(e){const{name:t,type:n}=e;let r=this.stats[t];return r||(r=e instanceof Do?e:new Do(t,n),this.stats[t]=r),r}}const Uo=e=>"boolean"===typeof e,zo=e=>"function"===typeof e,$o=e=>null!==e&&"object"===typeof e,jo=e=>$o(e)&&e.constructor==={}.constructor,Vo=e=>"undefined"!==typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Wo=e=>"undefined"!==typeof Blob&&e instanceof Blob,Go=e=>(e=>"undefined"!==typeof ReadableStream&&e instanceof ReadableStream||$o(e)&&zo(e.tee)&&zo(e.cancel)&&zo(e.getReader))(e)||(e=>$o(e)&&zo(e.read)&&zo(e.pipe)&&Uo(e.readable))(e);function Ho(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function Xo(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(e?.extensions)}function qo(e){let t;return Ho(e,"null loader"),Ho(Xo(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e?.parseTextSync||e?.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}let Ko="";const Yo={};class Zo extends Error{constructor(e,t){super(e),this.reason=t.reason,this.url=t.url,this.response=t.response}reason;url;response}const Qo=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Jo=/^([-\w.]+\/[-\w.+]+)/;function es(e,t){return e.toLowerCase()===t.toLowerCase()}function ts(e){const t=Qo.exec(e);return t?t[1]:""}const ns=/\?.*/;function rs(e){return e.replace(ns,"")}function is(e){if(Vo(e)){return e.url}if(Wo(e)){return e.name||""}return"string"===typeof e?e:""}function os(e){if(Vo(e)){const t=e,n=t.headers.get("content-type")||"",r=rs(t.url);return function(e){const t=Jo.exec(e);return t?t[1]:e}(n)||ts(r)}if(Wo(e)){return e.type||""}return"string"===typeof e?ts(e):""}async function ss(e){if(Vo(e))return e;const t={},n=function(e){if(Vo(e))return e.headers["content-length"]||-1;if(Wo(e))return e.size;return"string"===typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const r=is(e),i=os(e);i&&(t["content-type"]=i);const o=await async function(e){const t=5;if("string"===typeof e)return`data:,${e.slice(0,t)}`;if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>e(t?.target?.result),n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){return`data:base64,${function(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}(e.slice(0,t))}`}return null}(e);o&&(t["x-first-bytes"]=o),"string"===typeof e&&(e=(new TextEncoder).encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function as(e){if(!e.ok){const t=await async function(e){const n=function(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}(e.url);let r=`Failed to fetch resource (${e.status}) ${e.statusText}: ${n}`;r=r.length>100?`${r.slice(0,100)}...`:r;const i={reason:e.statusText,url:e.url,response:e};try{const t=e.headers.get("Content-Type");i.reason=!e.bodyUsed&&t?.includes("application/json")?await e.json():await e.text()}catch(t){}return new Zo(r,i)}(e);throw t}}async function ls(e,t){if("string"===typeof e){const n=function(e){for(const t in Yo)if(e.startsWith(t)){const n=Yo[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e=`${Ko}${e}`),e}(e);return function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(n)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(n,t):await fetch(n,t)}return await ss(e)}const cs=new To({id:"loaders.gl"});class us{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const ds=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),hs="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),fs=(hs&&parseFloat(hs[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{console;constructor(){this.console=console}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:ds,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),ps={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function gs(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function ms(){const e=gs();return e.globalOptions=e.globalOptions||{...fs},e.globalOptions}function ys(e,t,n,r){return n=n||[],function(e,t){vs(e,null,fs,ps,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};vs(r,n.id,i,o,t)}}(e,n=Array.isArray(n)?n:[n]),_s(t,e,r)}function vs(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const l=!t&&$o(e[a]);if(!(a in n)&&!("baseUri"===a&&!t)&&!("workerUrl"===a&&t))if(a in r)cs.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const e=bs(a,i);cs.warn(`${o} loader option '${s}${a}' not recognized. ${e}`)()}}}function bs(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const t in i.options){if(e===t)return`Did you mean '${i.id}.${t}'?`;const o=t.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||`Did you mean '${i.id}.${t}'?`)}return r}function _s(e,t,n){const r={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(r,n),null===r.log&&(r.log=new us),xs(r,ms()),xs(r,t),r}function xs(e,t){for(const n in t)if(n in t){const r=t[n];jo(r)&&jo(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function ws(e,t){const n=ms(),r=e||n;return"function"===typeof r.fetch?r.fetch:$o(r.fetch)?e=>ls(e,r.fetch):t?.fetch?t?.fetch:ls}function Es(e,t){return Ss(e||{},t)}function Ss(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>3)return t;const r={...e};for(const[i,o]of Object.entries(t))o&&"object"===typeof o&&!Array.isArray(o)?r[i]=Ss(r[i]||{},t[i],n+1):r[i]=t[i];return r}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const Ts="object"!==typeof process||"[object process]"!==String(process)||process.browser,As="undefined"!==typeof window&&"undefined"!==typeof window.orientation,Cs="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);Cs&&parseFloat(Cs[1]);class ks{terminate(){}}function Ps(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Rs=new Map;function Is(e){Ps(e.source&&!e.url||!e.source&&e.url);let t=Rs.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return Ls((t=e,`try {\n  importScripts('${t}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var t}(e.url),Rs.set(e.url,t)),e.source&&(t=Ls(e.source),Rs.set(e.source,t))),Ps(t),t}function Ls(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Ms(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(e){if(Os(e))r.add(e);else if(Os(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===typeof e)for(const i in e)Ms(e[i],t,r)}else;return void 0===n?Array.from(r):[]}function Os(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&e instanceof MessagePort||("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const Ns=()=>{};class Fs{name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return"undefined"!==typeof Worker&&Ts||"undefined"!==typeof ks&&!Ts}constructor(e){const{name:t,source:n,url:r}=e;Ps(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=Ns,this.onError=e=>console.log(e),this.worker=Ts?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Ns,this.onError=Ns,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||Ms(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name} from ${this.url}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=Is({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new ks(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new ks(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class Ds{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(e,t){this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Ps(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ps(this.isRunning),this.isRunning=!1,this._reject(e)}}class Bs{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return Fs.isSupported()}constructor(e){this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t,n)=>e.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e.error(t);const r=new Promise((r=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const r=new Ds(t.name,e);e.onMessage=e=>t.onMessage(r,e.type,e.payload),e.onError=e=>t.onError(r,e),t.onStart(r);try{await r.result}catch(n){console.error(`Worker exception: ${n}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Ts||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new Fs({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return As?this.maxMobileConcurrency:this.maxConcurrency}}const Us={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class zs{props;workerPools=(()=>new Map)();static _workerFarm;static isSupported(){return Fs.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zs._workerFarm=zs._workerFarm||new zs({}),zs._workerFarm.setProps(e),zs._workerFarm}constructor(e){this.props={...Us},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:r}=e;let i=this.workerPools.get(t);return i||(i=new Bs({name:t,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}const $s=(globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.2"),globalThis._loadersgl_.version);async function js(e,t,n,r,i){const o=e.id,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t[e.id]||{},r=Ts?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(i||"compression"!==e.id||(i=t.workerUrl),"test"===t._workerType&&(i=Ts?`modules/${e.module}/dist/${r}`:`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let t=e.version;"latest"===t&&(t="latest");const n=t?`@${t}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${n}/dist/${r}`}return Ps(i),i}(e,n),a=zs.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",Vs.bind(null,i));l.postMessage("process",{input:t,options:n,context:r});const c=await l.result;return await c.result}async function Vs(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:o,input:s,options:a}=r;try{const n=await e(s,a);t.postMessage("done",{id:o,result:n})}catch(i){const e=i instanceof Error?i.message:"unknown error";t.postMessage("error",{id:o,error:e})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function Ws(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),n=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.byteLength;return r.buffer}(t)}const Gs=262144;function Hs(e){if((t=e)&&"object"===typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"===typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"===typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function Xs(e,t){return ds?async function*(e,t){const n=e.getReader();let r;try{for(;;){const e=r||n.read();t?._streamReadAhead&&(r=n.read());const{done:i,value:o}=await e;if(i)return;yield Hs(o)}}catch(i){n.releaseLock()}}(e,t):async function*(e){for await(const t of e)yield Hs(t)}(e)}function qs(e,t){if("string"===typeof e)return function*(e,t){const n=t?.chunkSize||262144;let r=0;const i=new TextEncoder;for(;r<e.length;){const t=Math.min(e.length-r,n),o=e.slice(r,r+t);r+=t,yield i.encode(o)}}(e,t);if(e instanceof ArrayBuffer)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Gs}=t;let r=0;for(;r<e.byteLength;){const t=Math.min(e.byteLength-r,n),i=new ArrayBuffer(t),o=new Uint8Array(e,r,t);new Uint8Array(i).set(o),r+=t,yield i}}()}(e,t);if(Wo(e))return async function*(e,t){const n=t?.chunkSize||1048576;let r=0;for(;r<e.size;){const t=r+n,i=await e.slice(r,t).arrayBuffer();r=t,yield i}}(e,t);if(Go(e))return Xs(e,t);if(Vo(e)){return Xs(e.body,t)}throw new Error("makeIterator")}const Ks="Cannot convert supplied data type";async function Ys(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"===typeof e||r)return function(e,t){if(t.text&&"string"===typeof e)return e;if((e=>e&&"object"===typeof e&&e.isBuffer)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const r=e.byteLength||e.length;return 0===e.byteOffset&&r===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+r)),n}throw new Error(Ks)}(e,t);if(Wo(e)&&(e=await ss(e)),Vo(e)){const n=e;return await as(n),t.binary?await n.arrayBuffer():await n.text()}if(Go(e)&&(e=qs(e,n)),(e=>Boolean(e)&&"function"===typeof e[Symbol.iterator])(e)||(e=>e&&"function"===typeof e[Symbol.asyncIterator])(e))return async function(e){const t=[];for await(const n of e)t.push(n);return Ws(...t)}(e);throw new Error(Ks)}function Zs(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function Qs(e,t,n){if(n)return n;const r={fetch:ws(t,e),...e};if(r.url){const e=rs(r.url);r.baseUrl=e,r.queryString=function(e){const t=e.match(ns);return t&&t[0]}(r.url),r.filename=Zs(e),r.baseUrl=function(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}(e)}return Array.isArray(r.loaders)||(r.loaders=null),r}const Js="4.3.2",ea=Js[0]>="0"&&Js[0]<="9"?`v${Js}`:"";const ta=function(){const e=new To({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=e,globalThis.loaders.version=ea,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=e,e}(),na=()=>{const e=gs();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};const ra=/\.([^.]+)$/;function ia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!oa(e))return null;if(t&&!Array.isArray(t))return qo(t);let i=[];t&&(i=i.concat(t)),n?.ignoreRegisteredLoaders||i.push(...na()),function(e){for(const t of e)qo(t)}(i);const o=function(e,t,n,r){const i=is(e),o=os(e),s=rs(i)||r?.url;let a=null,l="";n?.mimeType&&(a=aa(t,n?.mimeType),l=`match forced by supplied MIME type ${n?.mimeType}`);a=a||function(e,t){const n=t&&ra.exec(t),r=n&&n[1];return r?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,r):null}(t,s),l=l||(a?`matched url ${s}`:""),a=a||aa(t,o),l=l||(a?`matched MIME type ${o}`:""),a=a||function(e,t){if(!t)return null;for(const n of e)if("string"===typeof t){if(la(t,n))return n}else if(ArrayBuffer.isView(t)){if(ca(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(ca(t,0,n))return n}return null}(t,e),l=l||(a?`matched initial data ${ua(e)}`:""),n?.fallbackMimeType&&(a=a||aa(t,n?.fallbackMimeType),l=l||(a?`matched fallback MIME type ${o}`:""));l&&ta.log(1,`selectLoader selected ${a?.name}: ${l}.`);return a}(e,i,n,r);if(!o&&!n?.nothrow)throw new Error(sa(e));return o}function oa(e){return!(e instanceof Response&&204===e.status)}function sa(e){const t=is(e),n=os(e);let r="No valid loader found (";r+=t?`${Zs(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?ua(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function aa(e,t){for(const n of e){if(n.mimeTypes?.some((e=>es(t,e))))return n;if(es(t,`application/x.${n.id}`))return n}return null}function la(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function ca(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((n=>function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":return r===da(e,t,r.length);default:return!1}}(e,t,0,n)))}function ua(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return da(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return da(e,0,t)}return""}function da(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}async function ha(e,t,n,r){!t||Array.isArray(t)||Xo(t)||(r=void 0,n=t,t=void 0),n=n||{};const i=is(e=await e),o=function(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:void 0}(t,r),s=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!oa(e))return null;let i=ia(e,t,{...n,nothrow:!0},r);if(i)return i;if(Wo(e)&&(i=ia(e=await e.slice(0,10).arrayBuffer(),t,n,r)),!i&&!n?.nothrow)throw new Error(sa(e));return i}(e,o,n);return s?(r=Qs({url:i,_parse:ha,loaders:o},n=ys(n,s,o,i),r||null),await async function(e,t,n,r){if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$s;Ps(e,"no worker provided");const n=e.version}(e),n=Es(e.options,n),Vo(t)){const e=t,{ok:n,redirected:i,status:o,statusText:s,type:a,url:l}=e,c=Object.fromEntries(e.headers.entries());r.response={headers:c,ok:n,redirected:i,status:o,statusText:s,type:a,url:l}}t=await Ys(t,e,n);const i=e;if(i.parseTextSync&&"string"===typeof t)return i.parseTextSync(t,n,r);if(function(e,t){return!!zs.isSupported()&&!(!Ts&&!t?._nodeWorkers)&&e.worker&&t?.worker}(e,n))return await js(e,t,n,r,ha);if(i.parseText&&"string"===typeof t)return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw Ps(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}(s,e,n,r)):null}async function fa(e,t,n,r){let i,o;Array.isArray(t)||Xo(t)?(i=t,o=n):(i=[],o=t);const s=ws(o);let a=e;return"string"===typeof e&&(a=await s(e)),Wo(e)&&(a=await s(e)),Array.isArray(i),await ha(a,i,o)}class pa{constructor(e,t,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(e,t){if(e===this._data&&!t)return;this._data=e;const n=++this._loadCount;let r=e;"string"===typeof e&&(r=fa(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=e)})).catch((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=e||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class ga{constructor(e){this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:e.device?.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add(e){let{resourceId:t,data:n,forceUpdate:r=!1,persistent:i=!0}=e,o=this._resources[t];o?o.setData(n,r):(o=new pa(t,n,this._context),this._resources[t]=o),o.persistent=i}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe(e){let{consumerId:t}=e;const n=this._consumers[t];if(n){for(const e in n){const t=n[e],r=this._resources[t.resourceId];r&&r.unsubscribe(t)}delete this._consumers[t],this.prune()}}subscribe(e){let{resourceId:t,onChange:n,consumerId:r,requestId:i="default"}=e;const{_resources:o,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const a=o[t];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,n,r){const i=this._consumers,o=i[e]=i[e]||{};let s=o[t];const a=s&&s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(s?(s.onChange=r,s.resourceId=n.id):s={onChange:r,resourceId:n.id},o[t]=s,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];t.persistent||t.inUse()||(t.delete(),delete this._resources[e])}}}const ma=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,n){let{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=i||e&&e.constructor||Float32Array,u=t*r+o;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let d=1/0;l&&(d=l*r+o);const h=this._allocate(c,u,a,d);return e&&s?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,t,n,r){let i=Math.max(Math.ceil(t*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,s=e.BYTES_PER_ELEMENT*i,a=o.findIndex((e=>e.byteLength>=s));if(a>=0){const t=new e(o.splice(a,1)[0],0,i);return n&&t.fill(0),t}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:r}=n,i=t.findIndex((e=>e.byteLength>=r));i<0?t.push(n):(i>0||t.length<this.opts.poolSize)&&t.splice(i,0,n),t.length>this.opts.poolSize&&t.shift()}};Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const ya=globalThis.mathgl.config;function va(e){let{precision:t=ya.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=function(e){return Math.round(e/ya.EPSILON)*ya.EPSILON}(e),`${parseFloat(e.toPrecision(t))}`}function ba(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _a(e,t,n){return Ea(e,(e=>Math.max(t,Math.min(n,e))))}function xa(e,t,n){return ba(e)?e.map(((e,r)=>xa(e,t[r],n))):n*t+(1-n)*e}function wa(e,t,n){const r=ya.EPSILON;n&&(ya.EPSILON=n);try{if(e===t)return!0;if(ba(e)&&ba(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!wa(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):"number"===typeof e&&"number"===typeof t&&Math.abs(e-t)<=ya.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{ya.EPSILON=r}}function Ea(e,t,n){if(ba(e)){const r=e;n=n||function(e){return e.clone?e.clone():new Array(e.length)}(r);for(let i=0;i<n.length&&i<r.length;++i){const r="number"===typeof e?e:e[i];n[i]=t(r,i,n)}return n}return t(e)}class Sa extends Array{clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ba(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(ya)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+va(this[n],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!wa(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){if(void 0===n)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const i=e[r],o="number"===typeof t?t:t[r];this[r]=i+n*(o-i)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]+=r[e];return this.check()}subtract(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]-=r[e];return this.check()}scale(e){if("number"===typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(ya.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}get elements(){return this}}function Ta(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${JSON.stringify(e)}`);return e}function Aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(ya.debug&&!function(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return e}function Ca(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}class ka extends Sa{get x(){return this[0]}set x(e){this[0]=Ta(e)}get y(){return this[1]}set y(e){this[1]=Ta(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-e[n];t+=r*r}return Ta(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Ta(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=r[e];return this.check()}divide(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=r[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Ca(e>=0&&e<this.ELEMENTS,"index is out of range"),Ta(this[e])}setComponent(e,t){return Ca(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}const Pa=1e-6;let Ra="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Ia(){const e=new Ra(3);return Ra!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function La(e,t,n){const r=new Ra(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ma(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Oa(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}function Na(e,t,n){const r=t[0],i=t[1],o=t[2];let s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,e}function Fa(e,t,n){const r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function Da(e,t,n){const r=n[0],i=n[1],o=n[2],s=n[3],a=t[0],l=t[1],c=t[2];let u=i*c-o*l,d=o*a-r*c,h=r*l-i*a,f=i*h-o*d,p=o*u-r*h,g=r*d-i*u;const m=2*s;return u*=m,d*=m,h*=m,f*=2,p*=2,g*=2,e[0]=a+u+f,e[1]=l+d+p,e[2]=c+h+g,e}const Ba=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},Ua=function(e){const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},za=function(e){const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r};!function(){const e=Ia()}();function $a(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o||1;return e[0]=(n[0]*r+n[4]*i+n[8]*o)/s,e[1]=(n[1]*r+n[5]*i+n[9]*o)/s,e[2]=(n[2]*r+n[6]*i+n[10]*o)/s,e}function ja(e,t,n){const r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[3]*i+n[6]*o,e[1]=n[1]*r+n[4]*i+n[7]*o,e[2]=n[2]*r+n[5]*i+n[8]*o,e[3]=t[3],e}const Va=[0,0,0];let Wa;class Ga extends ka{static get ZERO(){return Wa||(Wa=new Ga(0,0,0),Object.freeze(Wa)),Wa}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&ba(e)?this.copy(e):(ya.debug&&(Ta(e),Ta(t),Ta(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return ya.debug&&(Ta(e.x),Ta(e.y),Ta(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Ta(e)}angle(e){return function(e,t){const n=e[0],r=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=Math.sqrt((n*n+r*r+i*i)*(o*o+s*s+a*a)),c=l&&Ma(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,e)}cross(e){return Oa(this,this,e),this.check()}rotateX(e){let{radians:t,origin:n=Va}=e;return function(e,t,n,r){const i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}rotateY(e){let{radians:t,origin:n=Va}=e;return function(e,t,n,r){const i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}rotateZ(e){let{radians:t,origin:n=Va}=e;return function(e,t,n,r){const i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Na(this,this,e),this.check()}transformAsVector(e){return $a(this,this,e),this.check()}transformByMatrix3(e){return Fa(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2]}(this,this,e),this.check()}transformByQuaternion(e){return Da(this,this,e),this.check()}}const Ha=new Ga;function Xa(e,t,n,r){Ha.set(e,t,n);const i=Ha.len();return{distance:r/i,normal:new Ga(-e/i,-t/i,-n/i)}}function qa(e){return e-Math.fround(e)}let Ka;function Ya(e,t){const{size:n=1,startIndex:r=0}=t,i=void 0!==t.endIndex?t.endIndex:e.length,o=(i-r)/n;Ka=ma.allocate(Ka,o,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<i;){for(let t=0;t<n;t++){const r=e[s++];Ka[a+t]=r,Ka[a+t+n]=qa(r)}a+=2*n}return Ka.subarray(0,o*n*2)}function Za(e){let t=null,n=!1;for(const r of e)r&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],r[0][0]),t[0][1]=Math.min(t[0][1],r[0][1]),t[1][0]=Math.max(t[1][0],r[1][0]),t[1][1]=Math.max(t[1][1],r[1][1])):t=r);return t}class Qa extends Sa{toString(){let e="[";if(ya.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=Ta(n),this}getColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[n+r];return t}setColumn(e,t){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}function Ja(e,t){const n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],y=t[15],v=n*a-r*s,b=n*l-i*s,_=n*c-o*s,x=r*l-i*a,w=r*c-o*a,E=i*c-o*l,S=u*g-d*p,T=u*m-h*p,A=u*y-f*p,C=d*m-h*g,k=d*y-f*g,P=h*y-f*m;let R=v*P-b*k+_*C+x*A-w*T+E*S;return R?(R=1/R,e[0]=(a*P-l*k+c*C)*R,e[1]=(i*k-r*P-o*C)*R,e[2]=(g*E-m*w+y*x)*R,e[3]=(h*w-d*E-f*x)*R,e[4]=(l*A-s*P-c*T)*R,e[5]=(n*P-i*A+o*T)*R,e[6]=(m*_-p*E-y*b)*R,e[7]=(u*E-h*_+f*b)*R,e[8]=(s*k-a*A+c*S)*R,e[9]=(r*A-n*k-o*S)*R,e[10]=(p*w-g*_+y*v)*R,e[11]=(d*_-u*w-f*v)*R,e[12]=(a*T-s*C-l*S)*R,e[13]=(n*C-r*T+i*S)*R,e[14]=(g*b-p*x-m*v)*R,e[15]=(u*x-d*b+h*v)*R,e):null}function el(e,t,n){const r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],g=t[12],m=t[13],y=t[14],v=t[15];let b=n[0],_=n[1],x=n[2],w=n[3];return e[0]=b*r+_*a+x*d+w*g,e[1]=b*i+_*l+x*h+w*m,e[2]=b*o+_*c+x*f+w*y,e[3]=b*s+_*u+x*p+w*v,b=n[4],_=n[5],x=n[6],w=n[7],e[4]=b*r+_*a+x*d+w*g,e[5]=b*i+_*l+x*h+w*m,e[6]=b*o+_*c+x*f+w*y,e[7]=b*s+_*u+x*p+w*v,b=n[8],_=n[9],x=n[10],w=n[11],e[8]=b*r+_*a+x*d+w*g,e[9]=b*i+_*l+x*h+w*m,e[10]=b*o+_*c+x*f+w*y,e[11]=b*s+_*u+x*p+w*v,b=n[12],_=n[13],x=n[14],w=n[15],e[12]=b*r+_*a+x*d+w*g,e[13]=b*i+_*l+x*h+w*m,e[14]=b*o+_*c+x*f+w*y,e[15]=b*s+_*u+x*p+w*v,e}function tl(e,t,n){const r=n[0],i=n[1],o=n[2];let s,a,l,c,u,d,h,f,p,g,m,y;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*o+t[12],e[13]=t[1]*r+t[5]*i+t[9]*o+t[13],e[14]=t[2]*r+t[6]*i+t[10]*o+t[14],e[15]=t[3]*r+t[7]*i+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],c=t[3],u=t[4],d=t[5],h=t[6],f=t[7],p=t[8],g=t[9],m=t[10],y=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=d,e[6]=h,e[7]=f,e[8]=p,e[9]=g,e[10]=m,e[11]=y,e[12]=s*r+u*i+p*o+t[12],e[13]=a*r+d*i+g*o+t[13],e[14]=l*r+h*i+m*o+t[14],e[15]=c*r+f*i+y*o+t[15]),e}function nl(e,t,n){const r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rl(e,t,n){const r=Math.sin(n),i=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=s*i+u*r,e[6]=a*i+d*r,e[7]=l*i+h*r,e[8]=c*i-o*r,e[9]=u*i-s*r,e[10]=d*i-a*r,e[11]=h*i-l*r,e}function il(e,t,n){const r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=s*i+u*r,e[2]=a*i+d*r,e[3]=l*i+h*r,e[4]=c*i-o*r,e[5]=u*i-s*r,e[6]=d*i-a*r,e[7]=h*i-l*r,e}function ol(e,t){const n=t[0],r=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(o*o+s*s+a*a),e[2]=Math.sqrt(l*l+c*c+u*u),e}const sl=function(e,t,n,r,i){const o=1/Math.tan(t/2);if(e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0){const t=1/(r-i);e[10]=(i+r)*t,e[14]=2*i*r*t}else e[10]=-1,e[14]=-2*r;return e};const al=function(e,t,n,r,i,o,s){const a=1/(t-n),l=1/(r-i),c=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(s+o)*c,e[15]=1,e};function ll(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function cl(e,t,n,r){const i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}!function(){const e=function(){const e=new Ra(2);return Ra!=Float32Array&&(e[0]=0,e[1]=0),e}()}();function ul(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function dl(e){const t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function hl(e){const t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function fl(e,t,n){const r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}!function(){const e=function(){const e=new Ra(4);return Ra!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();var pl;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(pl||(pl={}));const gl=45*Math.PI/180,ml=1,yl=.1,vl=500,bl=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class _l extends Qa{static get IDENTITY(){return function(){wl||(wl=new _l,Object.freeze(wl));return wl}()}static get ZERO(){return function(){xl||(xl=new _l([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(xl));return xl}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return pl}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p,g){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=d,this[12]=h,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p,g){return this[0]=e,this[1]=i,this[2]=l,this[3]=h,this[4]=t,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=p,this[12]=r,this[13]=a,this[14]=d,this[15]=g,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(bl)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){const n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,y=o*l;e[0]=1-d-p,e[1]=u+y,e[2]=h-m,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=f+g,e[7]=0,e[8]=h+m,e[9]=f-g,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:n,bottom:r,top:i,near:o=yl,far:s=vl}=e;return s===1/0?function(e,t,n,r,i,o){const s=2*o/(n-t),a=2*o/(i-r),l=(n+t)/(n-t),c=(i+r)/(i-r),u=-1,d=-1,h=-2*o;e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=c,e[10]=u,e[11]=d,e[12]=0,e[13]=0,e[14]=h,e[15]=0}(this,t,n,r,i,o):function(e,t,n,r,i,o,s){const a=1/(n-t),l=1/(i-r),c=1/(o-s);e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(i+r)*l,e[10]=(s+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*c,e[15]=0}(this,t,n,r,i,o,s),this.check()}lookAt(e){const{eye:t,center:n=[0,0,0],up:r=[0,1,0]}=e;return function(e,t,n,r){let i,o,s,a,l,c,u,d,h,f;const p=t[0],g=t[1],m=t[2],y=r[0],v=r[1],b=r[2],_=n[0],x=n[1],w=n[2];Math.abs(p-_)<Pa&&Math.abs(g-x)<Pa&&Math.abs(m-w)<Pa?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(d=p-_,h=g-x,f=m-w,i=1/Math.sqrt(d*d+h*h+f*f),d*=i,h*=i,f*=i,o=v*f-b*h,s=b*d-y*f,a=y*h-v*d,i=Math.sqrt(o*o+s*s+a*a),i?(i=1/i,o*=i,s*=i,a*=i):(o=0,s=0,a=0),l=h*a-f*s,c=f*o-d*a,u=d*s-h*o,i=Math.sqrt(l*l+c*c+u*u),i?(i=1/i,l*=i,c*=i,u*=i):(l=0,c=0,u=0),e[0]=o,e[1]=l,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=a,e[9]=u,e[10]=f,e[11]=0,e[12]=-(o*p+s*g+a*m),e[13]=-(l*p+c*g+u*m),e[14]=-(d*p+h*g+f*m),e[15]=1)}(this,t,n,r),this.check()}ortho(e){const{left:t,right:n,bottom:r,top:i,near:o=yl,far:s=vl}=e;return al(this,t,n,r,i,o,s),this.check()}orthographic(e){const{fovy:t=gl,aspect:n=ml,focalDistance:r=1,near:i=yl,far:o=vl}=e;El(t);const s=t/2,a=r*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=e;return El(t),sl(this,t,n,r,i),this.check()}determinant(){return function(e){const t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],g=e[14],m=t*s-n*o,y=t*a-r*o,v=n*a-r*s,b=c*p-u*f,_=c*g-d*f,x=u*g-d*p;return l*(t*x-n*_+r*b)-i*(o*x-s*_+a*b)+e[15]*(c*v-u*y+d*m)-h*(f*v-p*y+g*m)}(this)}getScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return function(e,t){if(e===t){const n=t[1],r=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return Ja(this,this),this.check()}multiplyLeft(e){return el(this,e,this),this.check()}multiplyRight(e){return el(this,this,e),this.check()}rotateX(e){return rl(this,this,e),this.check()}rotateY(e){return function(e,t,n){const r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=s*i-u*r,e[2]=a*i-d*r,e[3]=l*i-h*r,e[8]=o*r+c*i,e[9]=s*r+u*i,e[10]=a*r+d*i,e[11]=l*r+h*i}(this,this,e),this.check()}rotateZ(e){return il(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function(e,t,n,r){let i,o,s,a,l,c,u,d,h,f,p,g,m,y,v,b,_,x,w,E,S,T,A,C,k=r[0],P=r[1],R=r[2],I=Math.sqrt(k*k+P*P+R*R);I<Pa||(I=1/I,k*=I,P*=I,R*=I,o=Math.sin(n),i=Math.cos(n),s=1-i,a=t[0],l=t[1],c=t[2],u=t[3],d=t[4],h=t[5],f=t[6],p=t[7],g=t[8],m=t[9],y=t[10],v=t[11],b=k*k*s+i,_=P*k*s+R*o,x=R*k*s-P*o,w=k*P*s-R*o,E=P*P*s+i,S=R*P*s+k*o,T=k*R*s+P*o,A=P*R*s-k*o,C=R*R*s+i,e[0]=a*b+d*_+g*x,e[1]=l*b+h*_+m*x,e[2]=c*b+f*_+y*x,e[3]=u*b+p*_+v*x,e[4]=a*w+d*E+g*S,e[5]=l*w+h*E+m*S,e[6]=c*w+f*E+y*S,e[7]=u*w+p*E+v*S,e[8]=a*T+d*A+g*C,e[9]=l*T+h*A+m*C,e[10]=c*T+f*A+y*C,e[11]=u*T+p*A+v*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return nl(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return tl(this,this,e),this.check()}transform(e,t){return 4===e.length?(Aa(t=fl(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;let r;switch(n){case 2:r=function(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}(t||[-0,-0],e,this);break;case 3:r=Na(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Aa(r,e.length),r}transformAsVector(e,t){let n;switch(e.length){case 2:n=function(e,t,n){const r=t[0],i=t[1],o=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/o,e[1]=(n[1]*r+n[5]*i)/o,e}(t||[-0,-0],e,this);break;case 3:n=$a(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Aa(n,e.length),n}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}}let xl,wl;function El(e){if(e>2*Math.PI)throw Error("expected radians")}function Sl(e,t){const n=fl([],t,e);return ul(n,n,1/n[3]),n}function Tl(e,t){const n=e%t;return n<0?t+n:n}function Al(e,t,n){return e<t?t:e>n?n:e}const Cl=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function kl(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Pl=Math.PI,Rl=Pl/4,Il=Pl/180,Ll=180/Pl,Ml=512,Ol=4003e4,Nl=85.051129,Fl=1.5;function Dl(e){const[t,n]=e;kl(Number.isFinite(t)),kl(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*Il;return[Ml*(t*Il+Pl)/(2*Pl),Ml*(Pl+Math.log(Math.tan(Rl+.5*r)))/(2*Pl)]}function Bl(e){const[t,n]=e,r=t/Ml*(2*Pl)-Pl,i=2*(Math.atan(Math.exp(n/Ml*(2*Pl)-Pl))-Rl);return[r*Ll,i*Ll]}function Ul(e){const{latitude:t}=e;kl(Number.isFinite(t));const n=Math.cos(t*Il);return function(e){return Cl(e)}(Ol*n)-9}function zl(e){return 12790407194604047e-21/Math.cos(e*Il)}function $l(e){const{latitude:t,longitude:n,highPrecision:r=!1}=e;kl(Number.isFinite(t)&&Number.isFinite(n));const i=Ml,o=Math.cos(t*Il),s=i/360,a=s/o,l=12790407194604047e-21/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[.703125,1/a,1/l]};if(r){const e=Il*Math.tan(t*Il)/o,n=s*e/2,r=12790407194604047e-21*e,i=r/a*l;c.unitsPerDegree2=[0,n,r],c.unitsPerMeter2=[i,0,i]}return c}function jl(e,t){const[n,r,i]=e,[o,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:c}=$l({longitude:n,latitude:r,highPrecision:!0}),u=Dl(e);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const d=Bl(u),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],h]:d}function Vl(e){const{width:t,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=e;let{fovy:u=Wl(Fl)}=e;void 0!==r&&(u=Wl(r));const d=u*Il,h=i*Il,f=Gl(u);let p=f;s&&(p+=s[2]*a/Math.cos(h)/n);const g=d*(.5+(o?o[1]:0)/n),m=Math.sin(g)*p/Math.sin(Al(Math.PI/2-h-g,.01,Math.PI-.01)),y=Math.sin(h)*m+p,v=10*p;return{fov:d,aspect:t/n,focalDistance:f,near:l,far:Math.min(y*c,v)}}function Wl(e){return 2*Math.atan(.5/e)*Ll}function Gl(e){return.5/Math.tan(.5*e*Il)}function Hl(e,t){const[n,r,i=0]=e;return kl(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Sl(t,[n,r,i,1])}function Xl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,i,o]=e;if(kl(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return Sl(t,[r,i,o,1])}const s=Sl(t,[r,i,0,1]),a=Sl(t,[r,i,1,1]),l=s[2],c=a[2];return cl([],s,a,l===c?0:((n||0)-l)/(c-l))}function ql(e){const{width:t,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=e,[[a,l],[c,u]]=r,d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof e)return{top:e,bottom:e,left:e,right:e};return kl(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e}(e.padding),h=Dl([a,Al(u,-85.051129,Nl)]),f=Dl([c,Al(l,-85.051129,Nl)]),p=[Math.max(Math.abs(f[0]-h[0]),i),Math.max(Math.abs(f[1]-h[1]),i)],g=[t-d.left-d.right-2*Math.abs(s[0]),n-d.top-d.bottom-2*Math.abs(s[1])];kl(g[0]>0&&g[1]>0);const m=g[0]/p[0],y=g[1]/p[1],v=(d.right-d.left)/2/m,b=(d.top-d.bottom)/2/y,_=Bl([(f[0]+h[0])/2+v,(f[1]+h[1])/2+b]),x=Math.min(o,Cl(Math.abs(Math.min(m,y))));return kl(Number.isFinite(x)),{longitude:_[0],latitude:_[1],zoom:x}}const Kl=Math.PI/180;function Yl(e,t,n){const{pixelUnprojectionMatrix:r}=e,i=Sl(r,[t,0,1,1]),o=Sl(r,[t,e.height,1,1]),s=Bl(cl([],i,o,(n*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s.push(n),s}var Zl,Ql,Jl;!function(e){e[e.Start=1]="Start",e[e.Move=2]="Move",e[e.End=4]="End",e[e.Cancel=8]="Cancel"}(Zl||(Zl={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Up=4]="Up",e[e.Down=8]="Down",e[e.Horizontal=3]="Horizontal",e[e.Vertical=12]="Vertical",e[e.All=15]="All"}(Ql||(Ql={})),function(e){e[e.Possible=1]="Possible",e[e.Began=2]="Began",e[e.Changed=4]="Changed",e[e.Ended=8]="Ended",e[e.Recognized=8]="Recognized",e[e.Cancelled=16]="Cancelled",e[e.Failed=32]="Failed"}(Jl||(Jl={}));const ec="auto",tc="manipulation",nc="none",rc="pan-x",ic="pan-y";class oc{constructor(e,t){this.actions="",this.manager=e,this.set(t)}set(e){"compute"===e&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const t of this.manager.recognizers)t.options.enable&&(e=e.concat(t.getTouchAction()));return function(e){if(e.includes(nc))return nc;const t=e.includes(rc),n=e.includes(ic);return t&&n?nc:t||n?t?rc:ic:e.includes(tc)?tc:ec}(e.join(" "))}}function sc(e){return e.trim().split(/\s+/g)}function ac(e,t,n){if(e)for(const r of sc(t))e.addEventListener(r,n,!1)}function lc(e,t,n){if(e)for(const r of sc(t))e.removeEventListener(r,n,!1)}function cc(e){return(e.ownerDocument||e).defaultView}function uc(e){const t=e.length;if(1===t)return{x:Math.round(e[0].clientX),y:Math.round(e[0].clientY)};let n=0,r=0,i=0;for(;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:Math.round(n/t),y:Math.round(r/t)}}function dc(e){const t=[];let n=0;for(;n<e.pointers.length;)t[n]={clientX:Math.round(e.pointers[n].clientX),clientY:Math.round(e.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:t,center:uc(t),deltaX:e.deltaX,deltaY:e.deltaY}}function hc(e,t){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function fc(e,t){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function pc(e,t){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return 180*Math.atan2(r,n)/Math.PI}function gc(e,t){return e===t?Ql.None:Math.abs(e)>=Math.abs(t)?e<0?Ql.Left:Ql.Right:t<0?Ql.Up:Ql.Down}function mc(e,t,n){return{x:t/e||0,y:n/e||0}}function yc(e,t){const{session:n}=e,{pointers:r}=t,{length:i}=r;n.firstInput||(n.firstInput=dc(t)),i>1&&!n.firstMultiple?n.firstMultiple=dc(t):1===i&&(n.firstMultiple=!1);const{firstInput:o,firstMultiple:s}=n,a=s?s.center:o.center,l=t.center=uc(r);t.timeStamp=Date.now(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=function(e,t){const n=t.x-e.x,r=t.y-e.y;return 180*Math.atan2(r,n)/Math.PI}(a,l),t.distance=hc(a,l);const{deltaX:c,deltaY:u}=function(e,t){const n=t.center;let r=e.offsetDelta,i=e.prevDelta;const o=e.prevInput;return t.eventType!==Zl.Start&&o?.eventType!==Zl.End||(i=e.prevDelta={x:o?.deltaX||0,y:o?.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),{deltaX:i.x+(n.x-r.x),deltaY:i.y+(n.y-r.y)}}(n,t);t.deltaX=c,t.deltaY=u,t.offsetDirection=gc(t.deltaX,t.deltaY);const d=mc(t.deltaTime,t.deltaX,t.deltaY);var h,f;t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,t.scale=s?(h=s.pointers,fc((f=r)[0],f[1])/fc(h[0],h[1])):1,t.rotation=s?function(e,t){return pc(t[1],t[0])-pc(e[1],e[0])}(s.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length;let p=e.element;return function(e,t){let n=e;for(;n;){if(n===t)return!0;n=n.parentNode}return!1}(t.srcEvent.target,p)&&(p=t.srcEvent.target),t.target=p,function(e,t){const n=e.lastInterval||t,r=t.timeStamp-n.timeStamp;let i,o,s,a;if(t.eventType!==Zl.Cancel&&(r>25||void 0===n.velocity)){const l=t.deltaX-n.deltaX,c=t.deltaY-n.deltaY,u=mc(r,l,c);o=u.x,s=u.y,i=Math.abs(u.x)>Math.abs(u.y)?u.x:u.y,a=gc(l,c),e.lastInterval=t}else i=n.velocity,o=n.velocityX,s=n.velocityY,a=n.direction;t.velocity=i,t.velocityX=o,t.velocityY=s,t.direction=a}(n,t),t}class vc{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=e=>{this.manager.options.enable&&this.handler(e)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,t){!function(e,t,n){const r=n.pointers.length,i=n.changedPointers.length,o=t&Zl.Start&&r-i===0,s=t&(Zl.End|Zl.Cancel)&&r-i===0;n.isFirst=Boolean(o),n.isFinal=Boolean(s),o&&(e.session={}),n.eventType=t;const a=yc(e,n);e.emit("hammer.input",a),e.recognize(a),e.session.prevInput=a}(this.manager,e,t)}init(){ac(this.element,this.evEl,this.domHandler),ac(this.target,this.evTarget,this.domHandler),ac(cc(this.element),this.evWin,this.domHandler)}destroy(){lc(this.element,this.evEl,this.domHandler),lc(this.target,this.evTarget,this.domHandler),lc(cc(this.element),this.evWin,this.domHandler)}}const bc={pointerdown:Zl.Start,pointermove:Zl.Move,pointerup:Zl.End,pointercancel:Zl.Cancel,pointerout:Zl.Cancel};class _c extends vc{constructor(e){super(e),this.evEl="pointerdown",this.evWin="pointermove pointerup pointercancel",this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:t}=this;let n=!1;const r=bc[e.type],i=e.pointerType,o="touch"===i;let s=t.findIndex((t=>t.pointerId===e.pointerId));r&Zl.Start&&(e.buttons||o)?s<0&&(t.push(e),s=t.length-1):r&(Zl.End|Zl.Cancel)&&(n=!0),s<0||(t[s]=e,this.callback(r,{pointers:t,changedPointers:[e],eventType:r,pointerType:i,srcEvent:e}),n&&t.splice(s,1))}}const xc=["","webkit","Moz","MS","ms","o"];function wc(e,t){const n=t[0].toUpperCase()+t.slice(1);for(const r of xc){const i=r?r+n:t;if(i in e)return i}}const Ec={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class Sc{constructor(e,t){this.options={...Ec,...t,cssProps:{...Ec.cssProps,...t.cssProps},inputTarget:t.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new _c(this),this.touchAction=new oc(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?2:1}recognize(e){const{session:t}=this;if(t.stopped)return;let n;this.session.prevented&&e.srcEvent.preventDefault();const{recognizers:r}=this;let{curRecognizer:i}=t;(!i||i&&i.state&Jl.Recognized)&&(i=t.curRecognizer=null);let o=0;for(;o<r.length;)n=r[o],2===t.stopped||i&&n!==i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(Jl.Began|Jl.Changed|Jl.Ended)&&(i=t.curRecognizer=n),o++}get(e){const{recognizers:t}=this;for(let n=0;n<t.length;n++)if(t[n].options.event===e)return t[n];return null}add(e){if(Array.isArray(e)){for(const t of e)this.add(t);return this}const t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const t of e)this.remove(t);return this}const t="string"===typeof e?this.get(e):e;if(t){const{recognizers:e}=this,n=e.indexOf(t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this}on(e,t){if(!e||!t)return;const{handlers:n}=this;for(const r of sc(e))n[r]=n[r]||[],n[r].push(t)}off(e,t){if(!e)return;const{handlers:n}=this;for(const r of sc(e))t?n[r]&&n[r].splice(n[r].indexOf(t),1):delete n[r]}emit(e,t){const n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;const r=t;r.type=e,r.preventDefault=function(){t.srcEvent.preventDefault()};let i=0;for(;i<n.length;)n[i](r),i++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:t}=this;if(t){for(const[n,r]of Object.entries(this.options.cssProps)){const i=wc(t.style,n);e?(this.oldCssProps[i]=t.style[i],t.style[i]=r):t.style[i]=this.oldCssProps[i]||""}e||(this.oldCssProps={})}}}let Tc=1;function Ac(e){return e&Jl.Cancelled?"cancel":e&Jl.Ended?"end":e&Jl.Changed?"move":e&Jl.Began?"start":""}class Cc{constructor(e){this.options=e,this.id=Tc++,this.state=Jl.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const t of e)this.recognizeWith(t);return this}let t;if("string"===typeof e){if(t=this.manager.get(e),!t)throw new Error(`Cannot find recognizer ${e}`)}else t=e;const{simultaneous:n}=this;return n[t.id]||(n[t.id]=t,t.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const t of e)this.dropRecognizeWith(t);return this}let t;return t="string"===typeof e?this.manager.get(e):e,t&&delete this.simultaneous[t.id],this}requireFailure(e){if(Array.isArray(e)){for(const t of e)this.requireFailure(t);return this}let t;if("string"===typeof e){if(t=this.manager.get(e),!t)throw new Error(`Cannot find recognizer ${e}`)}else t=e;const{requireFail:n}=this;return-1===n.indexOf(t)&&(n.push(t),t.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const t of e)this.dropRequireFailure(t);return this}let t;if(t="string"===typeof e?this.manager.get(e):e,t){const e=this.requireFail.indexOf(t);e>-1&&this.requireFail.splice(e,1)}return this}hasRequireFailures(){return Boolean(this.requireFail.find((e=>e.options.enable)))}canRecognizeWith(e){return Boolean(this.simultaneous[e.id])}emit(e){if(!e)return;const{state:t}=this;t<Jl.Ended&&this.manager.emit(this.options.event+Ac(t),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),t>=Jl.Ended&&this.manager.emit(this.options.event+Ac(t),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=Jl.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Jl.Failed|Jl.Possible)))return!1;e++}return!0}recognize(e){const t={...e};if(!this.options.enable)return this.reset(),void(this.state=Jl.Failed);this.state&(Jl.Recognized|Jl.Cancelled|Jl.Failed)&&(this.state=Jl.Possible),this.state=this.process(t),this.state&(Jl.Began|Jl.Changed|Jl.Ended|Jl.Cancelled)&&this.tryEmit(t)}getEventNames(){return[this.options.event]}reset(){}}class kc extends Cc{attrTest(e){const t=this.options.pointers;return 0===t||e.pointers.length===t}process(e){const{state:t}=this,{eventType:n}=e,r=t&(Jl.Began|Jl.Changed),i=this.attrTest(e);return r&&(n&Zl.Cancel||!i)?t|Jl.Cancelled:r||i?n&Zl.End?t|Jl.Ended:t&Jl.Began?t|Jl.Changed:Jl.Began:Jl.Failed}}class Pc extends Cc{constructor(){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[tc]}process(e){const{options:t}=this,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&Zl.Start&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!==Zl.End)return this.failTimeout();const n=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||hc(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,r&&n?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=setTimeout((()=>{this.state=Jl.Recognized,this.tryEmit(this._input)}),t.interval),Jl.Began):Jl.Recognized}return Jl.Failed}failTimeout(){return this._timer=setTimeout((()=>{this.state=Jl.Failed}),this.options.interval),Jl.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===Jl.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const Rc=["","start","move","end","cancel","up","down","left","right"];class Ic extends kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({enable:!0,pointers:1,event:"pan",threshold:10,direction:Ql.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,t=[];return e&Ql.Horizontal&&t.push(ic),e&Ql.Vertical&&t.push(rc),t}getEventNames(){return Rc.map((e=>this.options.event+e))}directionTest(e){const{options:t}=this;let n=!0,{distance:r}=e,{direction:i}=e;const o=e.deltaX,s=e.deltaY;return i&t.direction||(t.direction&Ql.Horizontal?(i=0===o?Ql.None:o<0?Ql.Left:Ql.Right,n=o!==this.pX,r=Math.abs(e.deltaX)):(i=0===s?Ql.None:s<0?Ql.Up:Ql.Down,n=s!==this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&Boolean(i&t.direction)}attrTest(e){return super.attrTest(e)&&(Boolean(this.state&Jl.Began)||!(this.state&Jl.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const t=Ql[e.direction].toLowerCase();t&&(e.additionalEvent=this.options.event+t),super.emit(e)}}const Lc=["","start","move","end","cancel","in","out"];class Mc{constructor(e,t,n){this.element=e,this.callback=t,this.options=n}}const Oc="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Nc=("undefined"!==typeof window?window:global,"undefined"!==typeof global?global:window,"undefined"!==typeof document&&document,-1!==Oc.indexOf("firefox")),Fc=4.000244140625;class Dc extends Mc{constructor(e,t,n){super(e,t,{enable:!0,...n}),this.handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;globalThis.WheelEvent&&(Nc&&e.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(t/=globalThis.devicePixelRatio),e.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%Fc===0&&(t=Math.floor(t/Fc)),e.shiftKey&&t&&(t*=.25),this.callback({type:"wheel",center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const Bc=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class Uc extends Mc{constructor(e,t,n){super(e,t,{enable:!0,...n}),this.handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,Bc.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){Bc.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){switch(e){case"pointermove":this.enableMoveEvent=t;break;case"pointerover":this.enableOverEvent=t;break;case"pointerout":this.enableOutEvent=t;break;case"pointerenter":this.enableEnterEvent=t;break;case"pointerleave":this.enableLeaveEvent=t}}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.buttons&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const zc=["keydown","keyup"];class $c extends Mc{constructor(e,t,n){super(e,t,{enable:!0,tabIndex:0,...n}),this.handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",zc.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){zc.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}class jc extends Mc{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){"contextmenu"===e&&(this.options.enable=t)}}const Vc={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Wc(e){const t=Vc[e.srcEvent.type];if(!t)return null;const{buttons:n,button:r}=e.srcEvent;let i=!1,o=!1,s=!1;return 2===t?(i=Boolean(1&n),o=Boolean(4&n),s=Boolean(2&n)):(i=0===r,o=1===r,s=2===r),{leftButton:i,middleButton:o,rightButton:s}}function Gc(e,t){const n=e.center;if(!n)return null;const r=t.getBoundingClientRect(),i=r.width/t.offsetWidth||1,o=r.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-t.clientLeft)/i,y:(n.y-r.top-t.clientTop)/o}}}const Hc={srcElement:"root",priority:0};class Xc{constructor(e,t){this.handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")},this.eventManager=e,this.recognizerName=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this,a={...Hc,...n};let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:e,handler:t,srcElement:a.srcElement,priority:a.priority};r&&(c.once=!0),i&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,t){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===e&&o.handler===t){n.splice(i,1);const e=r.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&r.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const r=()=>{e.handled=!0},i=()=>{e.handled=!0,t=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...e,type:a,stopPropagation:r,stopImmediatePropagation:i}),c&&o.push(n[s]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...Wc(e),...Gc(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}function qc(e){if("recognizer"in e)return e;let t;const n=Array.isArray(e)?[...e]:[e];if("function"===typeof n[0]){t=new(n.shift())(n.shift()||{})}else t=n.shift();return{recognizer:t,recognizeWith:"string"===typeof n[0]?[n[0]]:n[0],requireFailure:"string"===typeof n[1]?[n[1]]:n[1]}}class Kc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._onBasicInput=e=>{this.manager.emit(e.srcEvent.type,e)},this._onOtherEvent=e=>{this.manager.emit(e.type,e)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...t},this.events=new Map,this.element=e,e){this.manager=new Sc(e,this.options);for(const e of this.options.recognizers){const{recognizer:t,recognizeWith:n,requireFailure:r}=qc(e);this.manager.add(t),n&&t.recognizeWith(n),r&&t.requireFailure(r)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new Dc(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Uc(e,this._onOtherEvent,{enable:!1}),this.keyInput=new $c(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new jc(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const r=n.get(e);r&&(r.set({enable:t}),n.touchAction.update()),this.wheelInput?.enableEventType(e,t),this.moveInput?.enableEventType(e,t),this.keyInput?.enableEventType(e,t),this.contextmenuInput?.enableEventType(e,t)}_addEventHandler(e,t,n,r,i){if("string"!==typeof e){n=t;for(const[t,o]of Object.entries(e))this._addEventHandler(t,o,n,r,i);return}const{manager:o,events:s}=this;if(!o)return;let a=s.get(e);if(!a){const t=this._getRecognizerName(e)||e;a=new Xc(this,t),s.set(e,a),o&&o.on(e,a.handleEvent)}a.add(e,t,n,r,i),a.isEmpty()||this._toggleRecognizer(a.recognizerName,!0)}_removeEventHandler(e,t){if("string"!==typeof e){for(const[t,n]of Object.entries(e))this._removeEventHandler(t,n);return}const{events:n}=this,r=n.get(e);if(r&&(r.remove(e,t),r.isEmpty())){const{recognizerName:e}=r;let t=!1;for(const r of n.values())if(r.recognizerName===e&&!r.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}_getRecognizerName(e){return this.manager.recognizers.find((t=>t.getEventNames().includes(e)))?.options.event}}const Yc={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Yc,"IDENTITY",{get:()=>(Po.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Zc={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Qc={common:0,meters:1,pixels:2},Jc={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},eu={multipan:[Ic,{threshold:10,direction:Ql.Vertical,pointers:2}],pinch:[class extends kc{constructor(){super({enable:!0,event:"pinch",threshold:0,pointers:2,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}getTouchAction(){return[nc]}getEventNames(){return Lc.map((e=>this.options.event+e))}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||Boolean(this.state&Jl.Began))}emit(e){if(1!==e.scale){const t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}super.emit(e)}},{},null,["multipan"]],pan:[Ic,{threshold:1},["pinch"],["multipan"]],dblclick:[Pc,{event:"dblclick",taps:2}],click:[Pc,{event:"click"},null,["dblclick"]]},tu=Math.PI/180,nu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ru=[0,0,0],iu={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||iu,this.focalDistance=e.focalDistance||1,this.position=e.position||ru,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Zc.WEB_MERCATOR:Zc.WEB_MERCATOR_AUTO_OFFSET:Zc.IDENTITY}equals(e){return e instanceof ou&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&wa(e.projectionMatrix,this.projectionMatrix)&&wa(e.viewMatrix,this.viewMatrix))}project(e){let{topLeft:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Hl(this.projectPosition(e),this.pixelProjectionMatrix),[r,i]=n,o=t?i:this.height-i;return 2===e.length?[r,o]:[r,o,n[2]]}unproject(e){let{topLeft:t=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=e,s=t?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=Xl([r,s,o],this.pixelUnprojectionMatrix,a),[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=Dl(e);return t[1]=_a(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Bl(e):e}getBounds(){const e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,0],e),n=this.unproject([this.width,0],e),r=this.unproject([0,this.height],e),i=this.unproject([this.width,this.height],e);return[Math.min(t[0],n[0],r[0],i[0]),Math.min(t[1],n[1],r[1],i[1]),Math.max(t[0],n[0],r[0],i[0]),Math.max(t[1],n[1],r[1],i[1])]}getDistanceScales(e){return e&&this.isGeospatial?$l({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel(e){let{x:t,y:n,width:r=1,height:i=1}=e;return t<this.x+this.width&&this.x<t+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:Xa((e=this.viewProjectionMatrix)[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Xa(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Xa(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Xa(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Xa(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Xa(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}),this._frustumPlanes;var e}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=Ul({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||$l({latitude:n,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=e;let s=ru;if(i&&(s=o?new _l(o).transformAsVector(i,[]):i),this.isGeospatial){const e=this.projectPosition([t,n,0]);this.center=new Ga(s).scale(this.distanceScales.unitsPerMeter).add(e)}else this.center=this.projectPosition(s)}_initMatrices(e){const{viewMatrix:t=nu,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new _l).multiplyRight(t).translate(new Ga(this.center).negate()),this.projectionMatrix=n||function(e){let{width:t,height:n,orthographic:r,fovyRadians:i,focalDistance:o,padding:s,near:a,far:l}=e;const c=t/n,u=r?(new _l).orthographic({fovy:i,aspect:c,focalDistance:o,near:a,far:l}):(new _l).perspective({fovy:i,aspect:c,near:a,far:l});if(s){const{left:e=0,right:r=0,top:i=0,bottom:o=0}=s,a=_a((e+t-r)/2,0,t)-t/2,l=_a((i+n-o)/2,0,n)-n/2;u[8]-=2*a/t,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*tu,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var d;el(u,u,this.projectionMatrix),el(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=Ja([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(d=this.viewMatrixInverse)[12],d[13],d[14]];const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];nl(h,h,[this.width/2,-this.height/2,1]),tl(h,h,[1,-1,0]),el(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=Ja([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Po.warn("Pixel project matrix not invertible")()}}ou.displayName="Viewport";const su=ou;class au{constructor(e,t){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=e=>{Lo("layerManager.activateViewport",this,e),e&&(this.context.viewport=e)};const{deck:n,stats:r,viewport:i,timeline:o}=t||{};this.layers=[],this.resourceManager=new ga({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e?.gl,deck:n,shaderAssembler:Xi(e?.info?.shadingLanguage||"glsl"),defaultShaderModules:[Ki],renderPass:void 0,stats:r||new Bo({id:"deck.gl"}),viewport:i||new su({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new si,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers(){let{layerIds:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?this.layers.filter((t=>e.find((e=>0===t.id.indexOf(e))))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Lo("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const n=Mo(e,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:t}=this.context;t.find((t=>t.name===e.name))||(t.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:t}=this.context,n=t.findIndex((t=>t.name===e.name));n>=0&&(t.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,t,n){n.raiseError(t,`${e} of ${n}`)}_updateLayers(e,t){const n={};for(const o of e)n[o.id]?Po.warn(`Multiple old layers with same id ${o.id}`)():n[o.id]=o;if(this._defaultShaderModulesChanged){for(const t of e)t.setNeedsUpdate(),t.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const r=[];this._updateSublayersRecursively(t,n,r),this._finalizeOldLayers(n);let i=!1;for(const o of r)if(o.hasUniformTransition()){i=`Uniform transition in ${o}`;break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(e,t,n){for(const i of e){i.context=this.context;const e=t[i.id];null===e&&Po.warn(`Multiple new layers with same id ${i.id}`)(),t[i.id]=null;let o=null;try{this._debug&&e!==i&&i.validateProps(),e?(this._transferLayerState(e,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}o&&this._updateSublayersRecursively(o,t,n)}}_finalizeOldLayers(e){for(const t in e){const n=e[t];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Qi}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=Zi,t!==e&&(e.lifecycle=Ji)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=eo;try{e._finalize(),e.lifecycle=to}catch(t){this._handleError("finalization",t,e)}}}function lu(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!lu(e[r],t[r],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const o of r){if(!t.hasOwnProperty(o))return!1;if(!lu(e[o],t[o],n-1))return!1}return!0}return!1}class cu{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter((t=>t.containsPixel(e))):this._viewports}getViews(){const e={};return this.views.forEach((t=>{e[t.id]=t})),e}getView(e){return this.views.find((t=>t.id===e))}getViewState(e){const t="string"===typeof e?this.getView(e):e,n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,t){const n=this.getViewports(),r={x:e[0],y:e[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=e.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Mo(e,Boolean);this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){if(e){!lu(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e}else Po.warn("missing `viewState` or `initialViewState`")()}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>this.getView(e.id)?.makeViewport({viewState:t,width:this.width,height:this.height})})}_updateController(e,t,n,r){const i=e.controller;if(i&&n){const o={...t,...i,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=e.length;r--;){const i=e[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height});let a=t[i.id];const l=Boolean(i.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),s&&this._viewports.unshift(s)}for(const r in t){const e=t[r];e&&!this.controllers[r]&&e.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)}))}_diffViews(e,t){return e.length!==t.length||e.some(((n,r)=>!e[r].equals(t[r])))}}const uu=/([0-9]+\.?[0-9]*)(%|px)/;function du(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=uu.exec(e);if(t&&t.length>=3){const e="%"===t[2],n=parseFloat(t[1]);return{position:e?n/100:n,relative:e}}default:throw new Error(`Could not parse position string ${e}`)}}function hu(e,t){return e.relative?Math.round(e.position*t):e.position}class fu{constructor(e){const{id:t,x:n=0,y:r=0,width:i="100%",height:o="100%",padding:s=null}=e;this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=du(n),this._y=du(r),this._width=du(i),this._height=du(o),this._padding=s&&{left:du(s.left||0),right:du(s.right||0),top:du(s.top||0),bottom:du(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||this.constructor===e.constructor&&lu(this.props,e.props,2)}makeViewport(e){let{width:t,height:n,viewState:r}=e;r=this.filterViewState(r);const i=this.getDimensions({width:t,height:n});if(!i.height||!i.width)return null;return new(this.getViewportType(r))({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return"string"===typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const e in this.props.viewState)"id"!==e&&(t[e]=this.props.viewState[e]);return t}return e}getDimensions(e){let{width:t,height:n}=e;const r={x:hu(this._x,t),y:hu(this._y,n),width:hu(this._width,t),height:hu(this._height,n)};return this._padding&&(r.padding={left:hu(this._padding.left,t),top:hu(this._padding.top,n),right:hu(this._padding.right,t),bottom:hu(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"===typeof e?{type:e}:{type:this.ControllerType,...e}:null}}class pu extends su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:t=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,nearZ:l,farZ:c,orthographic:u=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,position:p,padding:g,legacyMeterSizes:m=!1}=e;let{width:y,height:v,altitude:b=1.5}=e;const _=Math.pow(2,r);let x;y=y||1,v=v||1;let w=null;if(d)b=d[5]/2,x=Wl(b);else{let n;if(e.fovy?(x=e.fovy,b=Gl(x)):x=Wl(b),g){const{top:e=0,bottom:t=0}=g;n=[0,_a((e+v-t)/2,0,v)-v/2]}w=Vl({width:y,height:v,scale:_,center:p&&[0,0,p[2]*zl(t)],offset:n,pitch:i,fovy:x,nearZMultiplier:s,farZMultiplier:a}),Number.isFinite(l)&&(w.near=l),Number.isFinite(c)&&(w.far=c)}let E=function(e){const{height:t,pitch:n,bearing:r,altitude:i,scale:o,center:s}=e,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];tl(a,a,[0,0,-i]),rl(a,a,-n*Il),il(a,a,r*Il);const l=o/t;return nl(a,a,[l,l,l]),s&&tl(a,a,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],s)),a}({height:v,pitch:i,bearing:o,scale:_,altitude:b});if(f){E=(new _l).translate([512*f,0,0]).multiplyLeft(E)}super({...e,width:y,height:v,viewMatrix:E,longitude:n,latitude:t,zoom:r,...w,fovy:x,focalDistance:b}),this.latitude=t,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=b,this.fovy=x,this.orthographic=u,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let r=t;r<=n;r++){const e=r?new pu({...this,worldOffset:r}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*zl(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)/zl(n)]}addMetersToLngLat(e,t){return jl(e,t)}panByPosition(e,t){const n=Xl(t,this.pixelUnprojectionMatrix),r=ll([],this.projectFlat(e),function(e,t){return e[0]=-t[0],e[1]=-t[1],e}([],n)),i=ll([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:i}=e,o={targetZ:t},s=i([0,r],o),a=i([n,r],o);let l,c;return(e.fovy?.5*e.fovy*Kl:Math.atan(.5/e.altitude))>(90-e.pitch)*Kl-.01?(l=Yl(e,0,t),c=Yl(e,n,t)):(l=i([0,0],o),c=i([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=ql({width:n,height:r,bounds:e,...t});return new pu({width:n,height:r,longitude:i,latitude:o,zoom:s})}}pu.displayName="WebMercatorViewport";const gu=pu;class mu{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=e,this._inProgress=!0,this.settings.onStart?.(this)}end(){this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd?.(this))}cancel(){this._inProgress&&(this.settings.onInterrupt?.(this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate?.(this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const yu=()=>{},vu=2,bu=3,_u=e=>e,xu=1;class wu{constructor(e){this._onTransitionUpdate=e=>{const{time:t,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=e,a=s(t/o),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new mu(e.timeline),this.onViewStateChange=e.onViewStateChange||yu,this.onStateChange=e.onStateChange||yu}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let r=n;if(this.transition.inProgress){const{interruption:e,endProps:t}=this.transition.settings;r={...n,...e===vu?t:this.propsInTransition||n}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:n}=e;return(t>0||"auto"===t)&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){if(this.transition.inProgress){return this.transition.settings.interruption===bu||this._isUpdateDueToCurrentTransition(t)}return!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const n=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator,o=i.getDuration?i.getDuration(e,t):t.transitionDuration;if(0===o)return;const s=i.initializeProps(e,r);this.propsInTransition={};const a={duration:o,easing:t.transitionEasing||_u,interpolator:i,interruption:t.transitionInterruption||xu,startProps:s.start,endProps:s.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}function Eu(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class Su{constructor(e){const{compare:t,extract:n,required:r}=e;this._propsToCompare=t,this._propsToExtract=n||t,this._requiredProps=r}arePropsEqual(e,t){for(const n of this._propsToCompare)if(!(n in e)||!(n in t)||!wa(e[n],t[n]))return!1;return!0}initializeProps(e,t){const n={},r={};for(const i of this._propsToExtract)(i in e||i in t)&&(n[i]=e[i],r[i]=t[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach((t=>{const n=e[t];Eu(Number.isFinite(n)||Array.isArray(n),`${t} is required for transition`)}))}}const Tu=["longitude","latitude","zoom","bearing","pitch"],Au=["longitude","latitude","zoom"];class Cu extends Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:Tu,required:Au},super(n.transitionProps),this.opts=n}initializeProps(e,t){const n=super.initializeProps(e,t),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(e),s=r(t),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:t.width,height:t.height})}return n}interpolateProps(e,t,n){const r={};for(const i of this._propsToExtract)r[i]=xa(e[i]||0,t[i]||0,n);if(t.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...t,...r});Object.assign(r,i.panByPosition(t.aroundPosition,xa(e.around,t.around,n)))}return r}}const ku={transitionDuration:0},Pu=e=>1-(1-e)*(1-e),Ru=["wheel"],Iu=["panstart","panmove","panend"],Lu=["pinchstart","pinchmove","pinchend"],Mu=["multipanstart","multipanmove","multipanend"],Ou=["dblclick"],Nu=["keydown"],Fu={};class Du{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new wu({...e,getControllerState:e=>new this.ControllerState(e),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager?.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return!t&&this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:n}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-n]}isPointInBounds(e,t){const{width:n,height:r}=this.props;if(t&&t.handled)return!1;const i=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r;return i&&t&&t.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout((()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)}),e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(Ru,c&&n),this.toggleEvents(Iu,c),this.toggleEvents(Lu,c&&(s||a)),this.toggleEvents(Mu,c&&a),this.toggleEvents(Ou,c&&o),this.toggleEvents(Nu,c&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach((e=>{this._events[e]!==t&&(this._events[e]=t,t?this.eventManager.on(e,this.handleEvent):this.eventManager.off(e,this.handleEvent))}))}updateViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={...e.getViewportProps(),...t},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),i){const e=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:e,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(r,ku,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,ku,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Pu},{isDragging:!1,isPanning:!0})}else{const e=this.controllerState.panEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,ku,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Pu},{isDragging:!1,isRotating:!0})}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=e;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,ku,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const n=this.controllerState.rotate({pos:t});return this.updateViewport(n,ku,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*t/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Pu},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Fu._startPinchRotation=e.rotation,Fu._lastPinchEvent=e,this.updateViewport(n,ku,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:n}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=e;t=t.rotate({deltaAngleX:Fu._startPinchRotation-n})}return this.updateViewport(t,ku,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Fu._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:n}=Fu;if(this.touchZoom&&t&&n&&e.scale!==n.scale){const r=this.getCenter(e);let i=this.controllerState.rotateEnd();const o=Math.log2(e.scale),s=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),a=Math.pow(2,o+s*t/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:Pu},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const e=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Fu._startPinchRotation=null,Fu._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(e.srcEvent.code){case"Minus":a=t?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=t?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":t?(a=s.rotateLeft(i),l.isRotating=!0):(a=s.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(a=s.rotateRight(i),l.isRotating=!0):(a=s.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new Cu({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:ku}}class Bu{constructor(e,t){this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class Uu extends Bu{constructor(e){const{width:t,height:n,latitude:r,longitude:i,zoom:o,bearing:s=0,pitch:a=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:u=20,minZoom:d=0,maxPitch:h=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:v,startZoom:b,normalize:_=!0}=e;Eu(Number.isFinite(i)),Eu(Number.isFinite(r)),Eu(Number.isFinite(o)),super({width:t,height:n,latitude:r,longitude:i,zoom:o,bearing:s,pitch:a,altitude:l,maxZoom:u,minZoom:d,maxPitch:h,minPitch:f,normalize:_,position:c},{startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:v,startZoom:b}),this.makeViewport=e.makeViewport}panStart(e){let{pos:t}=e;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan(e){let{pos:t,startPos:n}=e;const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(e){let{pos:t}=e;return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(e){let{pos:t,deltaAngleX:n=0,deltaAngleY:r=0}=e;const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||void 0===o||void 0===s)return this;let a;return a=t?this._getNewRotation(t,i,s,o):{bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(e){let{pos:t}=e;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom(e){let{pos:t,startPos:n,scale:r}=e,{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(t)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=_a(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(e)}zoomOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/e)}moveLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([e,0])}moveRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-e,0])}moveUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,e])}moveDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-e])}rotateLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:r}=e;e.zoom=_a(r,n,t);const{maxPitch:i,minPitch:o,pitch:s}=e;e.pitch=_a(s,o,i);const{normalize:a=!0}=e;return a&&Object.assign(e,function(e){const{width:t,height:n,pitch:r=0}=e;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=e;(i<-180||i>180)&&(i=Tl(i+180,360)-180),(a<-180||a>180)&&(a=Tl(a+180,360)-180);const l=Cl(n/512);if(s<=l)s=l,o=0;else{const e=n/2/Math.pow(2,s),t=Bl([0,e])[1];if(o<t)o=t;else{const t=Bl([0,512-e])[1];o>t&&(o=t)}}return{width:t,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.zoom({pos:[t/2,n/2],scale:e})}_panFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.pan({startPos:[t/2,n/2],pos:[t/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,n,r){const i=e[0]-t[0],o=e[1]-t[1],s=e[1],a=t[1],{width:l,height:c}=this.getViewportProps(),u=i/l;let d=0;o>0?Math.abs(c-a)>5&&(d=o/(a-c)*1.2):o<0&&a>5&&(d=1-s/a),d=_a(d,-1,1);const{minPitch:h,maxPitch:f}=this.getViewportProps();let p=n;return d>0?p=n+d*(f-n):d<0&&(p=n-d*(h-n)),{pitch:p,bearing:r+180*u}}}class zu extends Du{constructor(){super(...arguments),this.ControllerState=Uu,this.transition={transitionDuration:300,transitionInterpolator:new Cu({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e);(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class $u extends fu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getViewportType(){return gu}get ControllerType(){return zu}}$u.displayName="MapView";const ju=$u,Vu=[255,255,255],Wu=1;let Gu=0;class Hu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="ambient";const{color:t=Vu}=e,{intensity:n=Wu}=e;this.id=e.id||"ambient-"+Gu++,this.color=t,this.intensity=n}}const Xu=[255,255,255],qu=1,Ku=[0,0,-1];let Yu=0;class Zu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="directional";const{color:t=Xu}=e,{intensity:n=qu}=e,{direction:r=Ku}=e,{_shadow:i=!1}=e;this.id=e.id||"directional-"+Yu++,this.color=t,this.intensity=n,this.type="directional",this.direction=new Ga(r).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}class Qu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};const{id:n}=t;this.id=n,this.device=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Ju extends Qu{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[t,n]=this.device.canvasContext.getDrawingBufferSize(),r=e.clearCanvas??!0,i=e.clearColor??(!!r&&[0,0,0,0]),o=!!r&&1,s=!!r&&0,a=e.colorMask??15,l={viewport:[0,0,t,n]};e.colorMask&&(l.colorMask=a),e.scissorRect&&(l.scissorRect=e.scissorRect);const c=this.device.beginRenderPass({framebuffer:e.target,parameters:l,clearColor:i,clearDepth:o,clearStencil:s});try{return this._drawLayers(c,e)}finally{c.end(),this.device.submit()}}_drawLayers(e,t){const{target:n,shaderModuleProps:r,viewports:i,views:o,onViewportActive:s,clearStack:a=!0}=t;t.pass=t.pass||"unknown",a&&(this._lastRenderIndex=-1);const l=[];for(const c of i){const i=o&&o[c.id];s?.(c);const a=this._getDrawLayerParams(c,t),u=c.subViewports||[c];for(const o of u){const s=this._drawLayersInViewport(e,{target:n,shaderModuleProps:r,viewport:o,view:i,pass:t.pass,layers:t.layers},a);l.push(s)}}return l}_getDrawLayerParams(e,t){let{layers:n,pass:r,isPicking:i=!1,layerFilter:o,cullRect:s,effects:a,shaderModuleProps:l}=t,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=ed(this._lastRenderIndex+1),h={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:s},f={};for(let p=0;p<n.length;p++){const t=n[p],i=this._shouldDrawLayer(t,h,o,f),s={shouldDrawLayer:i};i&&!c&&(s.shouldDrawLayer=!0,s.layerRenderIndex=d(t,i),s.shaderModuleProps=this._getShaderModuleProps(t,a,r,l),s.layerParameters={...t.context.deck?.props.parameters,...this.getLayerParameters(t,p,e)}),u[p]=s}return u}_drawLayersInViewport(e,t,n){let{layers:r,shaderModuleProps:i,pass:o,target:s,viewport:a,view:l}=t;const c=function(e,t){let{shaderModuleProps:n,target:r,viewport:i}=t;const o=n?.project?.devicePixelRatio??e.canvasContext.cssToDeviceRatio(),[,s]=e.canvasContext.getDrawingBufferSize(),a=r?r.height:s,l=i;return[l.x*o,a-(l.y+l.height)*o,l.width*o,l.height*o]}(this.device,{shaderModuleProps:i,target:s,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;this.device.beginRenderPass({framebuffer:s,parameters:{viewport:c,scissorRect:c},clearColor:!!e.color&&[0,0,0,0],clearDepth:!!e.depth&&1}).end()}const u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:c});for(let h=0;h<r.length;h++){const t=r[h],i=n[h],{shouldDrawLayer:s}=i;if(s&&t.props.pickable&&u.pickableCount++,t.isComposite&&u.compositeCount++,t.isDrawable&&i.shouldDrawLayer){const{layerRenderIndex:n,shaderModuleProps:r,layerParameters:s}=i;u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,n),r.project&&(r.project.viewport=a),t.context.renderPass=e;try{t._drawLayer({renderPass:e,shaderModuleProps:r,uniforms:{layerIndex:n},parameters:s})}catch(d){t.raiseError(d,`drawing ${t} to ${o}`)}}}return u}shouldDrawLayer(e){return!0}getShaderModuleProps(e,t,n){return null}getLayerParameters(e,t,n){return e.props.parameters}_shouldDrawLayer(e,t,n,r){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;t.layer=e;let i=e.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(t))return!1;t.layer=i,i=i.parent}if(n){const e=t.layer.id;if(e in r||(r[e]=n(t)),!r[e])return!1}return e.activateViewport(t.viewport),!0}_getShaderModuleProps(e,t,n,r){const i=this.device.canvasContext.cssToDeviceRatio(),o=e.internalState?.propsInTransition||e.props,s={layer:o,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:i,modelMatrix:o.modelMatrix,coordinateSystem:o.coordinateSystem,coordinateOrigin:o.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(t)for(const a of t)td(s,a.getShaderModuleProps?.(e,s));return td(s,this.getShaderModuleProps(e,t,s),r)}}function ed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in t)&&r(i.parent,!1),l in n){const e=n[l]=n[l]||ed(t[l],t);c=e(i,o),n[a]=e}else Number.isFinite(s)?(c=s+(t[l]||0),n[a]=null):c=e;return o&&c>=e&&(e=c+1),t[a]=c,c};return r}function td(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)if(i)for(const t in i)e[t]?Object.assign(e[t],i[t]):e[t]=i[t];return e}class nd extends Ju{constructor(e,t){super(e,t);const n=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),r=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[n],depthStencilAttachment:r})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const t=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),r=e.viewports[0],i=r.width*n,o=r.height*n;i===t.width&&o===t.height||t.resize({width:i,height:o}),super.render({...e,clearColor:[1,1,1,1],target:t,pass:"shadow"})}getLayerParameters(e,t,n){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getShaderModuleProps(e,t,n){return{shadow:{project:n.project,drawToShadowMap:!0}}}}const rd={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n"};function id(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function od(e){let t,n={};return r=>{for(const i in r)if(!id(r[i],n[i])){t=e(r),n=r;break}return t}}const sd=[0,0,0,0],ad=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ld=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],cd=[0,0,0],ud=[0,0,0],dd=od((function(e){let{viewport:t,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=e;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(e,t,n){const{viewMatrixUncentered:r,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=sd,l=sd,c=e.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=hd(e,t,n);h&&(l=e.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=fl([],l,s),o=r||o,s=el([],i,o),s=el([],s,ad));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}(t,r,i),d=t.getDistanceScales(),h=[t.width*n,t.height*n],f=fl([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,p={coordinateSystem:r,projectionMode:t.projectionMode,coordinateOrigin:c,commonOrigin:a.slice(0,3),center:o,pseudoMeters:Boolean(t._pseudoMeters),viewportSize:h,devicePixelRatio:n,focalDistance:f,commonUnitsPerMeter:d.unitsPerMeter,commonUnitsPerWorldUnit:d.unitsPerMeter,commonUnitsPerWorldUnit2:cd,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:s,modelMatrix:ld,cameraPosition:l};if(u){const e=t.getDistanceScales(u);switch(r){case Yc.METER_OFFSETS:p.commonUnitsPerWorldUnit=e.unitsPerMeter,p.commonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case Yc.LNGLAT:case Yc.LNGLAT_OFFSETS:t._pseudoMeters||(p.commonUnitsPerMeter=e.unitsPerMeter),p.commonUnitsPerWorldUnit=e.unitsPerDegree,p.commonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case Yc.CARTESIAN:p.commonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],p.commonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return p}));function hd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ud;n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=t===Yc.LNGLAT_OFFSETS||t===Yc.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Zc.WEB_MERCATOR:t!==Yc.LNGLAT&&t!==Yc.CARTESIAN||(r=[0,0,0],o=!1);break;case Zc.WEB_MERCATOR_AUTO_OFFSET:t===Yc.LNGLAT?i=r:t===Yc.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],r=e.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Zc.IDENTITY:i=e.position.map(Math.fround),i[2]=i[2]||0;break;case Zc.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}const fd=`${`${Object.keys(Yc).map((e=>`const COORDINATE_SYSTEM_${e}: i32 = ${Yc[e]};`)).join("")}\n${Object.keys(Zc).map((e=>`const PROJECTION_MODE_${e}: i32 = ${Zc[e]};`)).join("")}\n${Object.keys(Qc).map((e=>`const UNIT_${e.toUpperCase()}: i32 = ${Qc[e]};`)).join("")}\n\nconst TILE_SIZE: f32 = 512.0;\nconst PI: f32 = 3.1415926536;\nconst WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);\nconst ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);\nconst EARTH_RADIUS: f32 = 6370972.0; // meters\nconst GLOBE_RADIUS: f32 = 256.0;\n\n// -----------------------------------------------------------------------------\n// Uniform block (converted from GLSL uniform block)\n// -----------------------------------------------------------------------------\nstruct ProjectUniforms {\n  wrapLongitude: i32,\n  coordinateSystem: i32,\n  commonUnitsPerMeter: vec3<f32>,\n  projectionMode: i32,\n  scale: f32,\n  commonUnitsPerWorldUnit: vec3<f32>,\n  commonUnitsPerWorldUnit2: vec3<f32>,\n  center: vec4<f32>,\n  modelMatrix: mat4x4<f32>,\n  viewProjectionMatrix: mat4x4<f32>,\n  viewportSize: vec2<f32>,\n  devicePixelRatio: f32,\n  focalDistance: f32,\n  cameraPosition: vec3<f32>,\n  coordinateOrigin: vec3<f32>,\n  commonOrigin: vec3<f32>,\n  pseudoMeters: i32,\n};\n\n@group(0) @binding(0)\nvar<uniform> project: ProjectUniforms;\n\n// -----------------------------------------------------------------------------\n// Geometry data\n// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,\n// you might supply this via vertex attributes or a uniform. Here we define a\n// uniform struct for demonstration.)\n// -----------------------------------------------------------------------------\n\n// Structure to carry additional geometry data used by deck.gl filters.\nstruct Geometry {\n  worldPosition: vec3<f32>,\n  worldPositionAlt: vec3<f32>,\n  position: vec4<f32>,\n  uv: vec2<f32>,\n  pickingColor: vec3<f32>,\n};\n\n// @group(0) @binding(1)\nvar<private> geometry: Geometry;\n`}\n\n// -----------------------------------------------------------------------------\n// Functions\n// -----------------------------------------------------------------------------\n\n// Returns an adjustment factor for commonUnitsPerMeter\nfn _project_size_at_latitude(lat: f32) -> f32 {\n  let y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\n// Overloaded version: scales a value in meters at a given latitude.\nfn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {\n  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);\n}\n\n// Computes a non-linear scale factor based on geometry.\n// (Note: This function relies on "geometry" being provided.)\nfn project_size() -> f32 {\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n      project.pseudoMeters == 0) {\n    if (geometry.position.w == 0.0) {\n      return _project_size_at_latitude(geometry.worldPosition.y);\n    }\n    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    let y2 = y * y;\n    let y4 = y2 * y2;\n    let y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\n// Overloads to scale offsets (meters to world units)\nfn project_size_float(meters: f32) -> f32 {\n  return meters * project.commonUnitsPerMeter.z * project_size();\n}\n\nfn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {\n  return meters * project.commonUnitsPerMeter.xy * project_size();\n}\n\nfn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {\n  return meters * project.commonUnitsPerMeter * project_size();\n}\n\nfn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {\n  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);\n}\n\n// Returns a rotation matrix aligning the z\u2011axis with the given up vector.\nfn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {\n  let uz = normalize(up);\n  let ux = select(\n    vec3<f32>(1.0, 0.0, 0.0),\n    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),\n    abs(uz.z) == 1.0\n  );\n  let uy = cross(uz, ux);\n  return mat3x3<f32>(ux, uy, uz);\n}\n\n// Since WGSL does not support "out" parameters, we return a struct.\nstruct RotationResult {\n  needsRotation: bool,\n  transform: mat3x3<f32>,\n};\n\nfn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {\n  if (project.projectionMode == PROJECTION_MODE_GLOBE) {\n    return RotationResult(true, project_get_orientation_matrix(commonPosition));\n  } else {\n    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed\n  };\n}\n\n// Projects a normal vector from the current coordinate system to world space.\nfn project_normal(vector: vec3<f32>) -> vec3<f32> {\n  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);\n  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);\n  let rotResult = project_needs_rotation(geometry.position.xyz);\n  if (rotResult.needsRotation) {\n    n = rotResult.transform * n;\n  }\n  return n;\n}\n\n// Applies a scale offset based on y-offset (dy)\nfn project_offset_(offset: vec4<f32>) -> vec4<f32> {\n  let dy: f32 = offset.y;\n  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;\n  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n// Projects lng/lat coordinates to a unit tile [0,1]\nfn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {\n  var x = lnglat.x;\n  if (project.wrapLongitude != 0) {\n    x = ((x + 180.0) % 360.0) - 180.0;\n  }\n  let y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2<f32>(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// Projects lng/lat/z coordinates for a globe projection.\nfn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {\n  let lambda = radians(lnglatz.x);\n  let phi = radians(lnglatz.y);\n  let cosPhi = cos(phi);\n  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n  return vec3<f32>(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n// Projects positions (with an optional 64-bit low part) from the input\n// coordinate system to the common space.\nfn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {\n  var position_world = project.modelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug:\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4<f32>(\n        project_mercator_(position_world.xy),\n        _project_size_at_latitude_m(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_GLOBE) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4<f32>(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {\n        return vec4<f32>(\n          project_mercator_(position_world.xy) - project.commonOrigin.xy,\n          project_size_float(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||\n      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);\n  }\n\n  return project_offset_(position_world) +\n         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));\n}\n\n// Overloaded versions for different input types.\nfn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {\n  return project_position_vec4_f64(position, ZERO_64_LOW);\n}\n\nfn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nfn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nfn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\n// Transforms a common space position to clip space.\nfn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {\n  return viewProjectionMatrix * position + center;\n}\n\n// Uses the project viewProjectionMatrix and center.\nfn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {\n  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);\n}\n\n// Returns a clip space offset corresponding to a given number of screen pixels.\nfn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {\n  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;\n  return offset * project.focalDistance;\n}\n\nfn project_meter_size_to_pixel(meters: f32) -> f32 {\n  return project_size_float(meters) * project.scale;\n}\n\nfn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {\n  if (unit == UNIT_METERS) {\n    return project_meter_size_to_pixel(size);\n  } else if (unit == UNIT_COMMON) {\n    return size * project.scale;\n  }\n  // UNIT_PIXELS: no scaling applied.\n  return size;\n}\n\nfn project_pixel_size_float(pixels: f32) -> f32 {\n  return pixels / project.scale;\n}\n\nfn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {\n  return pixels / project.scale;\n}\n`,pd=Object.keys(Yc).map((e=>`const int COORDINATE_SYSTEM_${e} = ${Yc[e]};`)).join(""),gd=Object.keys(Zc).map((e=>`const int PROJECTION_MODE_${e} = ${Zc[e]};`)).join(""),md=Object.keys(Qc).map((e=>`const int UNIT_${e.toUpperCase()} = ${Qc[e]};`)).join(""),yd={};const vd={name:"project",dependencies:[rd,Vi],source:fd,vs:`${pd}\n${gd}\n${md}\nuniform projectUniforms {\nbool wrapLongitude;\nint coordinateSystem;\nvec3 commonUnitsPerMeter;\nint projectionMode;\nfloat scale;\nvec3 commonUnitsPerWorldUnit;\nvec3 commonUnitsPerWorldUnit2;\nvec4 center;\nmat4 modelMatrix;\nmat4 viewProjectionMatrix;\nvec2 viewportSize;\nfloat devicePixelRatio;\nfloat focalDistance;\nvec3 cameraPosition;\nvec3 coordinateOrigin;\nvec3 commonOrigin;\nbool pseudoMeters;\n} project;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject.pseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project.commonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project.commonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project.commonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project.projectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project.wrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project.modelMatrix * position;\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project.coordinateOrigin;\n}\n}\nif (project.projectionMode == PROJECTION_MODE_GLOBE) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project.commonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project.projectionMode == PROJECTION_MODE_IDENTITY ||\n(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project.coordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;\nreturn offset * project.focalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project.scale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project.scale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project.scale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project.scale;\n}\n`,getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yd;return"viewport"in e?function(e){let{viewport:t,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:i=Yc.DEFAULT,coordinateOrigin:o=ud,autoWrapLongitude:s=!1}=e;i===Yc.DEFAULT&&(i=t.isGeospatial?Yc.LNGLAT:Yc.CARTESIAN);const a=dd({viewport:t,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:o});return a.wrapLongitude=s,a.modelMatrix=r||ld,a}(e):{}},uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},bd="\nuniform shadowUniforms {\n  bool drawShadowMap;\n  bool useShadowMap;\n  vec4 color;\n  highp int lightId;\n  float lightCount;\n  mat4 viewProjectionMatrix0;\n  mat4 viewProjectionMatrix1;\n  vec4 projectCenter0;\n  vec4 projectCenter1;\n} shadow;\n",_d=`\n${bd}\n\nconst int max_lights = 2;\n\nout vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  mat4 viewProjectionMatrices[max_lights];\n  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;\n  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;\n  vec4 projectCenters[max_lights];\n  projectCenters[0] = shadow.projectCenter0;\n  projectCenters[1] = shadow.projectCenter1;\n\n  if (shadow.drawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);\n  }\n  if (shadow.useShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow.lightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n\n`,xd=`\n${bd}\n\nconst int max_lights = 2;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\n\nin vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow.drawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow.useShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow.lightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow.color.a / shadow.lightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n\n`,wd=od((function(e){let{viewport:t,center:n}=e;return new _l(t.viewProjectionMatrix).invert().transform(n)})),Ed=od((function(e){let{viewport:t,shadowMatrices:n}=e;const r=[],i=t.pixelUnprojectionMatrix,o=t.isGeospatial?void 0:1,s=[[0,0,o],[t.width,0,o],[0,t.height,o],[t.width,t.height,o],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((e=>function(e,t){const[n,r,i]=e,o=Xl([n,r,i],t);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(e,i)));for(const a of n){const e=a.clone().translate(new Ga(t.center).negate()),n=s.map((t=>e.transform(t))),i=(new _l).ortho({left:Math.min(...n.map((e=>e[0]))),right:Math.max(...n.map((e=>e[0]))),bottom:Math.min(...n.map((e=>e[1]))),top:Math.max(...n.map((e=>e[1]))),near:Math.min(...n.map((e=>-e[2]))),far:Math.max(...n.map((e=>-e[2])))});r.push(i.multiplyRight(a))}return r})),Sd=[0,0,0,1],Td=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const Ad={name:"shadow",dependencies:[vd],vs:_d,fs:xd,inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(e){const{shadowEnabled:t=!0,project:n}=e;if(!t||!n||!e.shadowMatrices||!e.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};const r=vd.getUniforms(n),i=wd({viewport:n.viewport,center:r.center}),o=[],s=Ed({shadowMatrices:e.shadowMatrices,viewport:n.viewport}).slice();for(let l=0;l<e.shadowMatrices.length;l++){const e=s[l],t=e.clone().translate(new Ga(n.viewport.center).negate());r.coordinateSystem===Yc.LNGLAT&&r.projectionMode===Zc.WEB_MERCATOR?(s[l]=t,o[l]=i):(s[l]=e.clone().multiplyRight(Td),o[l]=t.transform(i))}const a={drawShadowMap:Boolean(e.drawToShadowMap),useShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,color:e.shadowColor||Sd,lightId:e.shadowLightId||0,lightCount:e.shadowMatrices.length,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};for(let l=0;l<s.length;l++)a[`viewProjectionMatrix${l}`]=s[l],a[`projectCenter${l}`]=o[l];for(let l=0;l<2;l++)a[`shadow_uShadowMap${l}`]=e.shadowMaps&&e.shadowMaps[l]||e.dummyShadowMap;return a},uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},Cd={color:[255,255,255],intensity:1},kd=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Pd=[0,0,0,200/255];class Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id="lighting-effect",this.shadowColor=Pd,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:t,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(t),n._addDefaultShaderModule(Ad),this.dummyShadowMap=t.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const t in e){const n=e[t];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((e=>e.shadow)),this.context&&this.setup(this.context),this.props=e}preRender(e){let{layers:t,layerFilter:n,viewports:r,onViewportActive:i,views:o}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let e=0;e<this.shadowPasses.length;e++){this.shadowPasses[e].render({layers:t,layerFilter:n,viewports:r,onViewportActive:i,views:o,shaderModuleProps:{shadow:{shadowLightId:e,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}}getShaderModuleProps(e,t){const n=this.shadow?{project:t.project,shadowMaps:this.shadowPasses.map((e=>e.getShadowMap())),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},r={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((t=>t.getProjectedLight({layer:e}))),pointLights:this.pointLights.map((t=>t.getProjectedLight({layer:e})))},i=e.props.material;return{shadow:n,lighting:r,phongMaterial:i,gouraudMaterial:i}}cleanup(e){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(Ad))}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const n=(new _l).lookAt({eye:new Ga(t.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const n=new nd(e);this.shadowPasses[t]=n}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:n}=this;e||0!==t.length||0!==n.length||(this.ambientLight=new Hu(Cd),this.directionalLights.push(new Zu(kd[0]),new Zu(kd[1])))}}const Id=new Rd;class Ld{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find((t=>t.id===e.id))){const n=t.findIndex((t=>{return n=e,(t.order??1/0)-(n.order??1/0)>0;var n}));n<0?t.push(e):t.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(lu(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const r of this.effects)t[r.id]=r;const n=[];for(const r of e){const e=t[r.id];let i=r;e&&e!==r?e.setProps?(e.setProps(r.props),i=e):e.cleanup(this._context):e||r.setup(this._context),n.push(i),delete t[r.id]}for(const r in t)t[r].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some((e=>e instanceof Rd))||this._resolvedEffects.push(Id),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Md extends Ju{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const Od={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class Nd extends Ju{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer(e){let{layers:t,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,shaderModuleProps:g}=e;this.pickZ=p;const m=this._resetColorEncoder(p),y=[a,l,c,u],v=super.render({target:s,layers:t,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:d,effects:h?.filter((e=>e.useInPicking)),pass:f,isPicking:!0,shaderModuleProps:g,clearColor:[0,0,0,0],colorMask:15,scissorRect:y});this._colorEncoderState=null;return{decodePickingColor:m&&Fd.bind(null,m),stats:v}}shouldDrawLayer(e){const{pickable:t,operation:n}=e.props;return t&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getShaderModuleProps(e,t,n){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,t,n){const r={...e.props.parameters},{pickable:i,operation:o}=e.props;return!this._colorEncoderState||o.includes("terrain")?r.blend=!1:i&&o.includes("draw")&&(Object.assign(r,Od),r.blend=!0,r.blendColor=function(e,t,n){const{byLayer:r,byAlpha:i}=e;let o,s=r.get(t);s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:t,viewports:[n]},r.set(t,s),i[o]=s):(Po.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,e,n)),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function Fd(e,t){const n=e.byAlpha[t[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(t)}}class Dd{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Md(e),this.pickLayersPass=new Nd(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const i=t.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,Lo("deckRenderer.renderLayers",this,i,e)}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const n of e)t.preRenderStats[n.id]=n.preRender(t),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,t=this.device.canvasContext.getDrawingBufferSize();0===e.length&&[0,1].map((t=>{const n=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${t}`,colorAttachments:[n]}))}));for(const n of e)n.resize(t)}_postRender(e,t){const{renderBuffers:n}=this,r={...t,inputBuffer:n[0],swapBuffer:n[1]};for(const i of e)if(i.postRender){r.target=i.id===this.lastPostProcessEffect?t.target:void 0;const e=i.postRender(r);r.inputBuffer=e,r.swapBuffer=e===n[0]?n[1]:n[0]}}}const Bd={pickedColor:null,pickedObjectIndex:-1};function Ud(e){let{pickedColors:t,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:o,deviceRect:s}=e;const{x:a,y:l,width:c,height:u}=s;let d=o*o,h=-1,f=0;for(let p=0;p<u;p++){const e=p+l-i,n=e*e;if(n>d)f+=4*c;else for(let i=0;i<c;i++){if(t[f+3]-1>=0){const e=i+a-r,t=e*e+n;t<=d&&(d=t,h=f)}f+=4}}if(h>=0){const e=t.slice(h,h+4),r=n(e);if(r){const t=Math.floor(h/4/c),n=h/4-t*c;return{...r,pickedColor:e,pickedX:a+n,pickedY:l+t}}Po.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Bd}function zd(e){let t,{pickInfo:n,viewports:r,pixelRatio:i,x:o,y:s,z:a}=e,l=r[0];if(r.length>1&&(l=function(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.containsPixel(t))return r}return e[0]}(n?.pickedViewports||r,{x:o,y:s})),l){const e=[o-l.x,s-l.y];void 0!==a&&(e[2]=a),t=l.unproject(e)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:t,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:i}}function $d(e){const{pickInfo:t,lastPickedInfo:n,mode:r,layers:i}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,l=s?[s]:[];if("hover"===r){const e=n.index,t=n.layerId,r=s?s.props.id:null;if(r!==t||a!==e){if(r!==t){const e=i.find((e=>e.props.id===t));e&&l.unshift(e)}n.layerId=r,n.index=a,n.info=null}}const c=zd(e),u=new Map;return u.set(null,c),l.forEach((e=>{let t={...c};e===s&&(t.color=o,t.index=a,t.picked=!0),t=jd({layer:e,info:t,mode:r});const i=t.layer;e===s&&"hover"===r&&(n.info=t),u.set(i.id,t),"hover"===r&&i.updateAutoHighlight(t)})),u}function jd(e){let{layer:t,info:n,mode:r}=e;for(;t&&n;){const e=n.layer||null;n.sourceLayer=e,n.layer=t,n=t.getPickingInfo({info:n,mode:r,sourceLayer:e}),t=t.parent}return n}class Vd{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new Nd(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject(e){let{x:t,y:n,layers:r,viewports:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?r.find((e=>e.id===s)):null,c=a&&i.find((e=>e.id===a))||i[0],u=c&&c.unproject([t-c.x,n-c.y]),d={x:t,y:n,viewport:c,coordinate:u,layer:l};return{...o,...d}}_resizeBuffer(){if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const e=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=e}const{canvas:e}=this.device.getDefaultCanvasContext();this.pickingFBO?.resize({width:e.width,height:e.height}),this.depthFBO?.resize({width:e.width,height:e.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter((e=>this.pickLayersPass.shouldDrawLayer(e)&&!e.isComposite));return t.length?t:null}_pickClosestObject(e){let{layers:t,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}=e;const h=this.device.canvasContext.cssToDeviceRatio(),f=this._getPickable(t);if(!f||0===r.length)return{result:[],emptyInfo:zd({viewports:r,x:i,y:o,pixelRatio:h})};this._resizeBuffer();const p=this.device.canvasContext.cssToDevicePixels([i,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*h),{width:y,height:v}=this.pickingFBO,b=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:y,deviceHeight:v}),_={x:i-s,y:o-s,width:2*s+1,height:2*s+1};let x;const w=[],E=new Set;for(let S=0;S<a;S++){let e,t;if(b){e=Ud({...this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:_,effects:d,pass:`picking:${l}`}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:b})}else e={pickedColor:null,pickedObjectIndex:-1};if(e.pickedLayer&&c&&this.depthFBO){const{pickedColors:i}=this._drawAndSample({layers:[e.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:e.pickedX,y:e.pickedY,width:1,height:1},cullRect:_,effects:d,pass:`picking:${l}:z`},!0);i[3]&&(t=i[0])}e.pickedLayer&&S+1<a&&(E.add(e.pickedLayer),e.pickedLayer.disablePickingIndex(e.pickedObjectIndex)),x=$d({pickInfo:e,lastPickedInfo:this.lastPickedInfo,mode:l,layers:f,viewports:r,x:i,y:o,z:t,pixelRatio:h});for(const n of x.values())n.layer&&w.push(n);if(!e.pickedColor)break}for(const S of E)S.restorePickingColors();return{result:w,emptyInfo:x.get(null)}}_pickVisibleObjects(e){let{layers:t,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}=e;const h=this._getPickable(t);if(!h||0===r.length)return[];this._resizeBuffer();const f=this.device.canvasContext.cssToDeviceRatio(),p=this.device.canvasContext.cssToDevicePixels([i,o],!0),g=p.x,m=p.y+p.height,y=this.device.canvasContext.cssToDevicePixels([i+s,o+a],!0),v=y.x+y.width,b=y.y,_={x:g,y:b,width:v-g,height:m-b},x=function(e){let{pickedColors:t,decodePickingColor:n}=e;const r=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const e=t.slice(i,i+4),o=e.join(",");if(!r.has(o)){const t=n(e);t?r.set(o,{...t,color:e}):Po.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:_,cullRect:{x:i,y:o,width:s,height:a},effects:d,pass:`picking:${l}`})),w=new Map,E=[],S=Number.isFinite(c);for(let T=0;T<x.length&&!(S&&E.length>=c);T++){const e=x[T];let t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:f};t=jd({layer:e.pickedLayer,info:t,mode:l});const n=t.layer.id;w.has(n)||w.set(n,new Set);const r=w.get(n),s=t.object??t.index;r.has(s)||(r.add(s),E.push(t))}return E}_drawAndSample(e){let{layers:t,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l}=e,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,d={layers:t,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c,preRenderStats:{},isPicking:!0};for(const v of a)v.useInPicking&&(d.preRenderStats[v.id]=v.preRender(d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:g,height:m}=o,y=new(c?Float32Array:Uint8Array)(g*m*4);return this.device.readPixelsToArrayWebGL(u,{sourceX:f,sourceY:p,sourceWidth:g,sourceHeight:m,target:y}),{pickedColors:y,decodePickingColor:h}}_getPickingRect(e){let{deviceX:t,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}=e;const s=Math.max(0,t-r),a=Math.max(0,n-r),l=Math.min(i,t+r+1)-s,c=Math.min(o,n+r+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const Wd={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},Gd="top-left",Hd="__root";class Xd{constructor(e){let{deck:t,parentElement:n}=e;this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=t,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!lu(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find((t=>t.id===e.id))||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const t={};for(const n of this.resolvedWidgets)t[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)t[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){const e=t[n.id];e?e.viewId!==n.viewId||e.placement!==n.placement?(this._remove(e),this._add(n)):n!==e&&(e.setProps(n.props),n=e):this._add(n),t[n.id]=null,this.resolvedWidgets.push(n)}for(const n in t){const e=t[n];e&&this._remove(e)}this.widgets=e}_add(e){const{viewId:t=null,placement:n=Gd}=e,r=e.onAdd({deck:this.deck,viewId:t});r&&this._getContainer(t,n).append(r),e._element=r}_remove(e){e.onRemove?.(),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,t){const n=e||Hd;let r=this.containers[n];r||(r=document.createElement("div"),r.style.pointerEvents="none",r.style.position="absolute",r.style.overflow="hidden",this.parentElement?.append(r),this.containers[n]=r);let i=r.querySelector(`.${t}`);return i||(i=document.createElement("div"),i.className=t,i.style.position="absolute",i.style.zIndex="2",Object.assign(i.style,Wd[t]),r.append(i)),i}_updateContainers(){const e=this.deck.width,t=this.deck.height;for(const n in this.containers){const r=this.lastViewports[n]||null,i=n===Hd||r,o=this.containers[n];i?(o.style.display="block",o.style.left=`${r?r.x:0}px`,o.style.top=`${r?r.y:0}px`,o.style.width=`${r?r.width:e}px`,o.style.height=`${r?r.height:t}px`):o.style.display="none"}}onRedraw(e){let{viewports:t,layers:n}=e;const r=t.reduce(((e,t)=>(e[t.id]=t,e)),{});for(const i of this.getWidgets()){const{viewId:e}=i;if(e){const t=r[e];t&&(i.onViewportChange&&i.onViewportChange(t),i.onRedraw?.({viewports:[t],layers:n}))}else{if(i.onViewportChange)for(const e of t)i.onViewportChange(e);i.onRedraw?.({viewports:t,layers:n})}}this.lastViewports=r,this._updateContainers()}onHover(e,t){for(const n of this.getWidgets()){const{viewId:r}=n;r&&r!==e.viewport?.id||n.onHover?.(e,t)}}onEvent(e,t){const n=Jc[t.type];if(n)for(const r of this.getWidgets()){const{viewId:i}=r;i&&i!==e.viewport?.id||r[n]?.(e,t)}}}const qd={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Kd{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd(e){let{deck:t}=e;const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,qd),this.deck=t,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){this.isVisible&&e.id===this.lastViewport?.id&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:t}=this,n=t&&t.props.getTooltip;if(!n)return;const r=n(e);this.lastViewport=e.viewport,this.setTooltip(r,e.x,e.y)}setTooltip(e,t,n){const r=this.element;if(r){if("string"===typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform=`translate(${t}px, ${n}px)`,e&&"object"===typeof e&&"style"in e&&Object.assign(r.style,e.style)}}}const Yd=globalThis.loaders?.parseImageNode,Zd="undefined"!==typeof Image,Qd="undefined"!==typeof ImageBitmap,Jd=Boolean(Yd),eh=!!ds||Jd;function th(e){const t=rh(e);if(!t)throw new Error("Not an image");return t}function nh(e){switch(th(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function rh(e){return"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&e instanceof Image?"image":e&&"object"===typeof e&&e.data&&e.width&&e.height?"data":null}const ih=/^data:image\/svg\+xml/,oh=/\.svg((\?|#).*)?$/;function sh(e){return e&&(ih.test(e)||oh.test(e))}function ah(e,t){if(sh(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function lh(e,t,n){const r=function(e,t){if(sh(t)){let t=(new TextDecoder).decode(e);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(n){throw new Error(n.message)}return`data:image/svg+xml;base64,${btoa(t)}`}return ah(e,t)}(e,n),i=self.URL||self.webkitURL,o="string"!==typeof r&&i.createObjectURL(r);try{return await async function(e,t){const n=new Image;if(n.src=e,t.image&&t.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,t)=>{try{n.onload=()=>e(n),n.onerror=e=>{const n=e instanceof Error?e.message:"error";t(new Error(n))}}catch(r){t(r)}}))}(o||r,t)}finally{o&&i.revokeObjectURL(o)}}const ch={};let uh=!0;async function dh(e,t,n){let r;if(sh(n)){r=await lh(e,t,n)}else r=ah(e,n);const i=t&&t.imagebitmap;return await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e){for(const t in e||ch)return!1;return!0}(t)&&uh||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(n){console.warn(n),uh=!1}return await createImageBitmap(e)}(r,i)}function hh(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=(i=t,[...i].map((e=>e.charCodeAt(0))));var i;for(let o=0;o<r.length;++o)if(r[o]!==e[o+n])return!1;return!0}(e,"ftyp",4)?0===(96&e[8])?null:function(e){switch((t=e,n=8,r=12,String.fromCharCode(...t.slice(n,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,n,r}(e):null}const fh=!1,ph=!0;function gh(e){const t=mh(e);return function(e){const t=mh(e),n=t.byteLength>=24&&2303741511===t.getUint32(0,fh);if(!n)return null;return{mimeType:"image/png",width:t.getUint32(16,fh),height:t.getUint32(20,fh)}}(t)||function(e){const t=mh(e),n=t.byteLength>=3&&65496===t.getUint16(0,fh)&&255===t.getUint8(2);if(!n)return null;const{tableMarkers:r,sofMarkers:i}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)e.add(n);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let o=2;for(;o+9<t.byteLength;){const e=t.getUint16(o,fh);if(i.has(e))return{mimeType:"image/jpeg",height:t.getUint16(o+5,fh),width:t.getUint16(o+7,fh)};if(!r.has(e))return null;o+=2,o+=t.getUint16(o,fh)}return null}(t)||function(e){const t=mh(e),n=t.byteLength>=10&&1195984440===t.getUint32(0,fh);if(!n)return null;return{mimeType:"image/gif",width:t.getUint16(6,ph),height:t.getUint16(8,ph)}}(t)||function(e){const t=mh(e),n=t.byteLength>=14&&16973===t.getUint16(0,fh)&&t.getUint32(2,ph)===t.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:t.getUint32(18,ph),height:t.getUint32(22,ph)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),n=hh(t);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(t)}function mh(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}const yh={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.3.2",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,n){const r=((t=t||{}).image||{}).type||"auto",{url:i}=n||{};let o;switch(function(e){switch(e){case"auto":case"data":return function(){if(Qd)return"imagebitmap";if(Zd)return"image";if(eh)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return Qd||Zd||eh;case"imagebitmap":return Qd;case"image":return Zd;case"data":return eh;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}(e),e}}(r)){case"imagebitmap":o=await dh(e,t,i);break;case"image":o=await lh(e,t,i);break;case"data":o=await async function(e){const{mimeType:t}=gh(e)||{},n=globalThis.loaders?.parseImageNode;return Ho(n),await n(e,t)}(e);break;default:Ho(!1)}return"data"===r&&(o=nh(o)),o},tests:[e=>Boolean(gh(new DataView(e)))],options:{image:{type:"auto",decode:!0}}};const vh={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){const t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse};const bh=function(){const e="9.1.8",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error(`deck.gl - multiple versions detected: ${t} vs ${e}`);return t||(Po.log(1,`deck.gl ${e}`)(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:Po,_registerLoggers:Io},function(e){const t=na();e=Array.isArray(e)?e:[e];for(const n of e){const e=qo(n);t.find((t=>e===t))||t.unshift(e)}}([vh,[yh,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}();const _h=new class{stats=(()=>new Map)();getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Bo({id:e})),this.stats.get(e)}},xh=new To({id:"luma.gl"}),wh={};function Eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";wh[e]=wh[e]||1;return`${e}-${wh[e]++}`}class Sh{static defaultProps={id:"undefined",handle:void 0,userData:void 0};toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}id;props;userData={};_device;destroyed=!1;allocatedBytes=0;_attachedResources=(()=>new Set)();constructor(e,t,n){if(!e)throw new Error("no device");this._device=e,this.props=function(e,t){const n={...t};for(const r in e)void 0!==e[r]&&(n[r]=e[r]);return n}(t,n);const r="undefined"!==this.props.id?this.props.id:Eh(this[Symbol.toStringTag]);this.props.id=r,this.id=r,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get(`${t}s Active`).decrementCount()}trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get(`${t} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const t=this._device.statsManager.getStats("Resource Counts");t.get("GPU Memory").subtractCount(this.allocatedBytes),t.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${t}s Created`).incrementCount(),e.get(`${t}s Active`).incrementCount()}}class Th extends Sh{static defaultProps={...Sh.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1};static MAP_READ=1;static MAP_WRITE=2;static COPY_SRC=4;static COPY_DST=8;static INDEX=16;static VERTEX=32;static UNIFORM=64;static STORAGE=128;static INDIRECT=256;static QUERY_RESOLVE=512;get[Symbol.toStringTag](){return"Buffer"}usage;indexType;updateTimestamp;constructor(e,t){const n={...t};(t.usage||0)&Th.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?n.indexType="uint32":t.data instanceof Uint16Array&&(n.indexType="uint16")),delete n.data,super(e,n,Th.defaultProps),this.usage=n.usage||0,this.indexType=n.indexType,this.updateTimestamp=e.incrementTimestamp()}clone(e){return this.device.createBuffer({...this.props,...e})}readSyncWebGL(e,t){throw new Error("not implemented")}static DEBUG_DATA_MAX_LENGTH=32;debugData=(()=>new ArrayBuffer(0))();_setDebugData(e,t,n){const r=ArrayBuffer.isView(e)?e.buffer:e,i=Math.min(e?e.byteLength:n,Th.DEBUG_DATA_MAX_LENGTH);null===r?this.debugData=new ArrayBuffer(i):0===t&&n===r.byteLength?this.debugData=r.slice(0,i):this.debugData=r.slice(t,t+i)}}function Ah(e){const t=function(e){const t=kh[e];return t}(Ch[e]),n=e.includes("norm"),r=!n&&!e.startsWith("float"),i=e.startsWith("s");return{dataType:Ch[e],byteLength:t,integer:r,signed:i,normalized:n}}const Ch={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},kh={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},Ph="texture-compression-bc",Rh="texture-compression-astc",Ih="texture-compression-etc2",Lh="texture-compression-pvrtc-webgl",Mh="texture-compression-atc-webgl",Oh="float32-renderable-webgl",Nh="float16-renderable-webgl",Fh="snorm8-renderable-webgl",Dh="norm16-renderable-webgl",Bh="snorm16-renderable-webgl",Uh="float32-filterable",zh="float16-filterable-webgl";function $h(e){const t=jh[e];if(!t)throw new Error(`Unsupported texture format ${e}`);return t}const jh={r8unorm:{},r8snorm:{render:Fh},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:Fh},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:Nh,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:Dh},"r16snorm-webgl":{f:Bh},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:Fh},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:Nh,filter:zh},"rg16unorm-webgl":{render:Dh},"rg16snorm-webgl":{render:Bh},r32uint:{},r32sint:{},r32float:{render:Oh,filter:Uh},rgb9e5ufloat:{channels:"rgb",packed:!0,render:"rgb9e5ufloat-renderable-webgl"},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:Oh},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:Dh},"rgb16snorm-webgl":{f:Dh},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:Uh},rgba16uint:{},rgba16sint:{},rgba16float:{render:Nh,filter:zh},"rgba16unorm-webgl":{render:Dh},"rgba16snorm-webgl":{render:Bh},"rgb32float-webgl":{render:Oh,filter:Uh},rgba32uint:{},rgba32sint:{},rgba32float:{render:Oh,filter:Uh},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:Ph},"bc1-rgb-unorm-srgb-webgl":{f:Ph},"bc1-rgba-unorm":{f:Ph},"bc1-rgba-unorm-srgb":{f:Ph},"bc2-rgba-unorm":{f:Ph},"bc2-rgba-unorm-srgb":{f:Ph},"bc3-rgba-unorm":{f:Ph},"bc3-rgba-unorm-srgb":{f:Ph},"bc4-r-unorm":{f:Ph},"bc4-r-snorm":{f:Ph},"bc5-rg-unorm":{f:Ph},"bc5-rg-snorm":{f:Ph},"bc6h-rgb-ufloat":{f:Ph},"bc6h-rgb-float":{f:Ph},"bc7-rgba-unorm":{f:Ph},"bc7-rgba-unorm-srgb":{f:Ph},"etc2-rgb8unorm":{f:Ih},"etc2-rgb8unorm-srgb":{f:Ih},"etc2-rgb8a1unorm":{f:Ih},"etc2-rgb8a1unorm-srgb":{f:Ih},"etc2-rgba8unorm":{f:Ih},"etc2-rgba8unorm-srgb":{f:Ih},"eac-r11unorm":{f:Ih},"eac-r11snorm":{f:Ih},"eac-rg11unorm":{f:Ih},"eac-rg11snorm":{f:Ih},"astc-4x4-unorm":{f:Rh},"astc-4x4-unorm-srgb":{f:Rh},"astc-5x4-unorm":{f:Rh},"astc-5x4-unorm-srgb":{f:Rh},"astc-5x5-unorm":{f:Rh},"astc-5x5-unorm-srgb":{f:Rh},"astc-6x5-unorm":{f:Rh},"astc-6x5-unorm-srgb":{f:Rh},"astc-6x6-unorm":{f:Rh},"astc-6x6-unorm-srgb":{f:Rh},"astc-8x5-unorm":{f:Rh},"astc-8x5-unorm-srgb":{f:Rh},"astc-8x6-unorm":{f:Rh},"astc-8x6-unorm-srgb":{f:Rh},"astc-8x8-unorm":{f:Rh},"astc-8x8-unorm-srgb":{f:Rh},"astc-10x5-unorm":{f:Rh},"astc-10x5-unorm-srgb":{f:Rh},"astc-10x6-unorm":{f:Rh},"astc-10x6-unorm-srgb":{f:Rh},"astc-10x8-unorm":{f:Rh},"astc-10x8-unorm-srgb":{f:Rh},"astc-10x10-unorm":{f:Rh},"astc-10x10-unorm-srgb":{f:Rh},"astc-12x10-unorm":{f:Rh},"astc-12x10-unorm-srgb":{f:Rh},"astc-12x12-unorm":{f:Rh},"astc-12x12-unorm-srgb":{f:Rh},"pvrtc-rgb4unorm-webgl":{f:Lh},"pvrtc-rgba4unorm-webgl":{f:Lh},"pvrtc-rbg2unorm-webgl":{f:Lh},"pvrtc-rgba2unorm-webgl":{f:Lh},"etc1-rbg-unorm-webgl":{f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{f:Mh},"atc-rgba-unorm-webgl":{f:Mh},"atc-rgbai-unorm-webgl":{f:Mh}},Vh=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],Wh=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function Gh(e){return Vh.some((t=>e.startsWith(t)))}function Hh(e){let t=function(e){const t=$h(e),n=t.bytesPerPixel||1,r=t.bitsPerChannel||[8,8,8,8];delete t.bitsPerChannel,delete t.bytesPerPixel,delete t.f,delete t.render,delete t.filter,delete t.blend,delete t.store;const i={...t,format:e,attachment:t.attachment||"color",channels:t.channels||"r",components:t.components||t.channels?.length||1,bytesPerPixel:n,bitsPerChannel:r,dataType:t.dataType||"uint8",srgb:t.srgb??!1,packed:t.packed??!1,webgl:t.webgl??!1,integer:t.integer??!1,signed:t.signed??!1,normalized:t.normalized??!1,compressed:t.compressed??!1};return i}(e);if(Gh(e)){t.channels="rgb",t.components=3,t.bytesPerPixel=1,t.srgb=!1,t.compressed=!0;const n=function(e){const t=/.*-(\d+)x(\d+)-.*/.exec(e);if(t){const[,e,n]=t;return{blockWidth:Number(e),blockHeight:Number(n)}}return null}(e);n&&(t.blockWidth=n.blockWidth,t.blockHeight=n.blockHeight)}const n=Wh.exec(e);if(n){const[,r,i,o,s,a]=n,l=Ah(`${o}${i}`),c=8*l.byteLength,u=r.length,d=[c,u>=2?c:0,u>=3?c:0,u>=4?c:0];t={format:e,attachment:t.attachment,dataType:l.dataType,components:u,channels:r,integer:l.integer,signed:l.signed,normalized:l.normalized,bitsPerChannel:d,bytesPerPixel:l.byteLength*r.length,packed:t.packed,srgb:t.srgb},"-webgl"===a&&(t.webgl=!0),"-srgb"===s&&(t.srgb=!0)}return e.endsWith("-webgl")&&(t.webgl=!0),e.endsWith("-srgb")&&(t.srgb=!0),t}class Xh{}class qh{features;disabledFeatures;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.features=new Set(e),this.disabledFeatures=t||{}}*[Symbol.iterator](){yield*this.features}has(e){return!this.disabledFeatures?.[e]&&this.features.has(e)}}class Kh{static defaultProps=(()=>({id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>xh.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:xh.get("debug")||void 0,debugShaders:xh.get("debug-shaders")||void 0,debugFramebuffers:Boolean(xh.get("debug-framebuffers")),debugWebGL:Boolean(xh.get("debug-webgl")),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0}))();get[Symbol.toStringTag](){return"Device"}constructor(e){this.props={...Kh.defaultProps,...e},this.id=this.props.id||Eh(this[Symbol.toStringTag].toLowerCase())}id;props;userData={};statsManager=(()=>_h)();timestamp=0;_reused=!1;_lumaData={};getTextureFormatCapabilities(e){const t=function(e){const t=$h(e),n={format:e,create:t.f??!0,render:t.render??!0,filter:t.filter??!0,blend:t.blend??!0,store:t.store??!0},r=Hh(e),i=e.startsWith("depth")||e.startsWith("stencil"),o=r?.signed,s=r?.integer,a=r?.webgl;return n.render&&=!o,n.filter&&=!i&&!o&&!s&&!a,n}(e),n=e=>("string"===typeof e?this.features.has(e):e)??!0,r=n(t.create),i={format:e,create:r,render:r&&n(t.render),filter:r&&n(t.filter),blend:r&&n(t.blend),store:r&&n(t.store)};return this._getDeviceSpecificTextureFormatCapabilities(i)}isTextureFormatSupported(e,t){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return Gh(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,t){throw new Error("not implemented")}readPixelsToBufferWebGL(e,t){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,t){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return!0===e.createCanvasContext?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t={...e};return(e.usage||0)&Th.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?t.indexType="uint32":e.data instanceof Uint16Array?t.indexType="uint16":xh.warn("indices buffer content must be of integer type")()),t}}const Yh=co()&&"undefined"!==typeof document,Zh="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.";class Qh{static defaultProps=(()=>({...Kh.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}))();static pageLoaded=(()=>function(){if(Yh&&"complete"===document.readyState||"undefined"===typeof window)return Promise.resolve();return new Promise((e=>{window.addEventListener("load",(()=>e()))}))}().then((()=>{xh.probe(2,"DOM is loaded")()})))();stats=(()=>_h)();log=(()=>xh)();VERSION="9.1.7";spector;preregisteredAdapters=(()=>new Map)();constructor(){if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw xh.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),xh.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");xh.error("This version of luma.gl has already been initialized")()}xh.log(1,`${this.VERSION} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=this}registerAdapters(e){for(const t of e)this.preregisteredAdapters.set(t.type,t)}getSupportedAdapters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.getAdapterMap(e);return Array.from(t).map((e=>{let[,t]=e;return t})).filter((e=>e.isSupported?.())).map((e=>e.type))}getBestAvailableAdapter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.getAdapterMap(e);return t.get("webgpu")?.isSupported?.()?"webgpu":t.get("webgl")?.isSupported?.()?"webgl":null}setDefaultDeviceProps(e){Object.assign(Qh.defaultProps,e)}async createDevice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e={...Qh.defaultProps,...e},e.waitForPageLoad&&await Qh.pageLoaded;const t=this.getAdapterMap(e.adapters);let n=e.type||"";"best-available"===n&&(n=this.getBestAvailableAdapter(e.adapters)||n);const r=(this.getAdapterMap(e.adapters)||t).get(n),i=await(r?.create?.(e));if(i)return i;throw new Error(Zh)}async attachDevice(e){const t=this.getAdapterMap(e.adapters);let n="";e.handle instanceof WebGL2RenderingContext&&(n="webgl"),e.createCanvasContext&&await Qh.pageLoaded,null===e.handle&&(n="unknown");const r=t.get(n),i=await(r?.attach?.(null));if(i)return i;throw new Error(Zh)}enforceWebGL2(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=this.getAdapterMap(t).get("webgl");n||xh.warn("enforceWebGL2: webgl adapter not found")(),n?.enforceWebGL2?.(e)}getAdapterMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Map(this.preregisteredAdapters);for(const n of e)t.set(n.type,n);return t}registerDevices(e){xh.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const t of e){const e=t.adapter;e&&this.preregisteredAdapters.set(e.type,e)}}}const Jh=new Qh;class ef{}const tf={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},nf=(e,t,n)=>t?e.enable(n):e.disable(n),rf=(e,t,n)=>e.hint(n,t),of=(e,t,n)=>e.pixelStorei(n,t),sf=(e,t,n)=>{const r=36006===n?36009:36008;return e.bindFramebuffer(r,t)},af=(e,t,n)=>{const r={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];e.bindBuffer(r,t)};function lf(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}const cf={3042:nf,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:nf,2885:(e,t)=>e.cullFace(t),2929:nf,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:nf,35723:rf,35725:(e,t)=>e.useProgram(t),36007:(e,t)=>e.bindRenderbuffer(36161,t),36389:(e,t)=>e.bindTransformFeedback?.(36386,t),34229:(e,t)=>e.bindVertexArray(t),36006:sf,36010:sf,34964:af,36662:af,36663:af,35053:af,35055:af,2886:(e,t)=>e.frontFace(t),33170:rf,2849:(e,t)=>e.lineWidth(t),32823:nf,32824:"polygonOffset",10752:"polygonOffset",35977:nf,32926:nf,32928:nf,32938:"sampleCoverage",32939:"sampleCoverage",3089:nf,3088:(e,t)=>e.scissor(...t),2960:nf,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),34383:nf,10754:nf,12288:nf,12289:nf,12290:nf,12291:nf,12292:nf,12293:nf,12294:nf,12295:nf,3333:of,3317:of,37440:of,37441:of,37443:of,3330:of,3332:of,3331:of,3314:of,32878:of,3316:of,3315:of,32877:of,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{const n="number"===typeof t?[t,t]:t;e.blendEquationSeparate(...n)},blendFunc:(e,t)=>{const n=2===t?.length?[...t,...t]:t;e.blendFuncSeparate(...n)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(t[0],t[1]||!1),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=lf(t)?t:[t,t];const[n,r]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,r)},stencilFunc:(e,t)=>{t=lf(t)&&3===t.length?[...t,...t]:t;const[n,r,i,o,s,a]=t;e.stencilFuncSeparate(1028,n,r,i),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=lf(t)&&3===t.length?[...t,...t]:t;const[n,r,i,o,s,a]=t;e.stencilOpSeparate(1028,n,r,i),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function uf(e,t,n){return void 0!==t[e]?t[e]:n[e]}const df={blendEquation:(e,t,n)=>e.blendEquationSeparate(uf(32777,t,n),uf(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(uf(32969,t,n),uf(32968,t,n),uf(32971,t,n),uf(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(uf(32824,t,n),uf(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(uf(32938,t,n),uf(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,uf(2962,t,n),uf(2967,t,n),uf(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,uf(34816,t,n),uf(36003,t,n),uf(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,uf(2964,t,n),uf(2965,t,n),uf(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,uf(34817,t,n),uf(34818,t,n),uf(34819,t,n))},hf={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),useProgram:(e,t)=>e({35725:t}),bindRenderbuffer:(e,t,n)=>e({36007:n}),bindTransformFeedback:(e,t,n)=>e({36389:n}),bindVertexArray:(e,t)=>e({34229:t}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},bindBuffer:(e,t,n)=>{const r={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[t];return r?e({[r]:n}):{valueChanged:!0}},blendColor:(e,t,n,r,i)=>e({32773:new Float32Array([t,n,r,i])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,r,i)=>e({32969:t,32968:n,32971:r,32970:i}),clearColor:(e,t,n,r,i)=>e({3106:new Float32Array([t,n,r,i])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,r,i)=>e({3107:[t,n,r,i]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,r,i)=>e({3088:new Int32Array([t,n,r,i])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[1028===t?2968:36005]:n}),stencilFunc:(e,t,n,r)=>e({2962:t,2967:n,2963:r,34816:t,36003:n,36004:r}),stencilFuncSeparate:(e,t,n,r,i)=>e({[1028===t?2962:34816]:n,[1028===t?2967:36003]:r,[1028===t?2963:36004]:i}),stencilOp:(e,t,n,r)=>e({2964:t,2965:n,2966:r,34817:t,34818:n,34819:r}),stencilOpSeparate:(e,t,n,r,i)=>e({[1028===t?2964:34817]:n,[1028===t?2965:34818]:r,[1028===t?2966:34819]:i}),viewport:(e,t,n,r,i)=>e({2978:[t,n,r,i]})},ff=(e,t)=>e.isEnabled(t),pf={3042:ff,2884:ff,2929:ff,3024:ff,32823:ff,32926:ff,32928:ff,3089:ff,2960:ff,35977:ff},gf=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function mf(e,t){if(function(e){for(const t in e)return!1;return!0}(t))return;const n={};for(const i in t){const r=Number(i),o=cf[i];o&&("string"===typeof o?n[o]=!0:o(e,t[i],r))}const r=e.state&&e.state.cache;if(r)for(const i in n){(0,df[i])(e,t,r)}}function yf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tf;if("number"===typeof t){const n=t,r=pf[n];return r?r(e,n):e.getParameter(n)}const n=Array.isArray(t)?t:Object.keys(t),r={};for(const i of n){const t=pf[i];r[i]=t?t(e,Number(i)):e.getParameter(Number(i))}return r}function vf(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}class bf{static get(e){return e.state}gl;program=null;stateStack=[];enable=!0;cache=null;log;initialized=!1;constructor(e,t){this.gl=e,this.log=t?.log||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];mf(this.gl,e),this.stateStack.pop()}trackState(e,t){if(this.cache=t.copyState?yf(e):Object.assign({},tf),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,function(e){const t=e.useProgram.bind(e);e.useProgram=function(n){const r=bf.get(e);r.program!==n&&(t(n),r.program=n)}}(e);for(const n in hf){xf(e,n,hf[n])}_f(e,"getParameter"),_f(e,"isEnabled")}_updateCache(e){let t,n=!1;const r=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const i in e){const o=e[i],s=this.cache[i];vf(o,s)||(n=!0,t=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:t}}}function _f(e,t){const n=e[t].bind(e);e[t]=function(t){if(void 0===t||gf.has(t))return n(t);const r=bf.get(e);return t in r.cache||(r.cache[t]=n(t)),r.enable?r.cache[t]:n(t)},Object.defineProperty(e[t],"name",{value:`${t}-from-cache`,configurable:!1})}function xf(e,t,n){if(!e[t])return;const r=e[t].bind(e);e[t]=function(){const t=bf.get(e);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const{valueChanged:a,oldValue:l}=n(t._updateCache,...o);return a&&r(...o),l},Object.defineProperty(e[t],"name",{value:`${t}-to-cache`,configurable:!1})}function wf(e,t,n){return void 0===n[t]&&(n[t]=e.getExtension(t)||null),n[t]}function Ef(e,t){const n=e.getParameter(7936),r=e.getParameter(7937);wf(e,"WEBGL_debug_renderer_info",t);const i=t.WEBGL_debug_renderer_info,o=e.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936)||n,s=e.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937)||r,a=e.getParameter(7938),l=Sf(o,s),c=function(e,t){if(/Metal/i.exec(e)||/Metal/i.exec(t))return"metal";if(/ANGLE/i.exec(e)||/ANGLE/i.exec(t))return"opengl";return"unknown"}(o,s),u=function(e,t){if(/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t))return"cpu";switch(Sf(e,t)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}(o,s);return{type:"webgl",gpu:l,gpuType:u,gpuBackend:c,vendor:o,renderer:s,version:a,shadingLanguage:"glsl",shadingLanguageVersion:300}}function Sf(e,t){return/NVIDIA/i.exec(e)||/NVIDIA/i.exec(t)?"nvidia":/INTEL/i.exec(e)||/INTEL/i.exec(t)?"intel":/Apple/i.exec(e)||/Apple/i.exec(t)?"apple":/AMD/i.exec(e)||/AMD/i.exec(t)||/ATI/i.exec(e)||/ATI/i.exec(t)?"amd":/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t)?"software":"unknown"}function Tf(e){switch(e){case"uint8":case"unorm8":return 5121;case"sint8":case"snorm8":return 5120;case"uint16":case"unorm16":return 5123;case"sint16":case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(e))}const Af="WEBGL_compressed_texture_s3tc",Cf="WEBGL_compressed_texture_s3tc_srgb",kf="EXT_texture_compression_rgtc",Pf="EXT_texture_compression_bptc",Rf="EXT_texture_norm16",If="EXT_render_snorm",Lf={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[If],"norm16-renderable-webgl":[Rf],"snorm16-renderable-webgl":[Rf,If],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[Af,Cf,kf,Pf],"texture-compression-bc5-webgl":[kf],"texture-compression-bc7-webgl":[Pf],"texture-compression-etc2":["WEBGL_compressed_texture_etc"],"texture-compression-astc":["WEBGL_compressed_texture_astc"],"texture-compression-etc1-webgl":["WEBGL_compressed_texture_etc1"],"texture-compression-pvrtc-webgl":["WEBGL_compressed_texture_pvrtc"],"texture-compression-atc-webgl":["WEBGL_compressed_texture_atc"]};const Mf={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:"EXT_color_buffer_float",dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:Af},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:Cf},"bc1-rgba-unorm":{gl:33777,x:Af},"bc1-rgba-unorm-srgb":{gl:35916,x:Cf},"bc2-rgba-unorm":{gl:33778,x:Af},"bc2-rgba-unorm-srgb":{gl:35918,x:Cf},"bc3-rgba-unorm":{gl:33779,x:Af},"bc3-rgba-unorm-srgb":{gl:35919,x:Cf},"bc4-r-unorm":{gl:36283,x:kf},"bc4-r-snorm":{gl:36284,x:kf},"bc5-rg-unorm":{gl:36285,x:kf},"bc5-rg-snorm":{gl:36286,x:kf},"bc6h-rgb-ufloat":{gl:36495,x:Pf},"bc6h-rgb-float":{gl:36494,x:Pf},"bc7-rgba-unorm":{gl:36492,x:Pf},"bc7-rgba-unorm-srgb":{gl:36493,x:Pf},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function Of(e){const t=Mf[e],n=function(e){const t=Mf[e],n=t?.gl;if(void 0===n)throw new Error(`Unsupported texture format ${e}`);return n}(e),r=Hh(e);return{internalFormat:n,format:t?.dataFormat||Nf(r.channels,r.integer,r.normalized,n),type:r.dataType?Tf(r.dataType):t?.types?.[0]||5121,compressed:r.compressed||!1}}function Nf(e,t,n,r){if(6408===r||6407===r)return r;switch(e){case"r":return t&&!n?36244:6403;case"rg":return t&&!n?33320:33319;case"rgb":return t&&!n?36248:6407;case"rgba":return t&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}const Ff={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Df extends qh{gl;extensions;testedFeatures=(()=>new Set)();constructor(e,t,n){super([],n),this.gl=e,this.extensions=t,wf(e,"EXT_color_buffer_float",t)}*[Symbol.iterator](){const e=this.getFeatures();for(const t of e)this.has(t)&&(yield t);return[]}has(e){return!this.disabledFeatures?.[e]&&(this.testedFeatures.has(e)||(this.testedFeatures.add(e),function(e){return e in Lf}(e)&&function(e,t,n){return(Lf[t]||[]).every((t=>wf(e,t,n)))}(this.gl,e,this.extensions)&&this.features.add(e),this.getWebGLFeature(e)&&this.features.add(e)),this.features.has(e))}initializeFeatures(){const e=this.getFeatures().filter((e=>"polygon-mode-webgl"!==e));for(const t of e)this.has(t)}getFeatures(){return[...Object.keys(Ff),...Object.keys(Lf)]}getWebGLFeature(e){const t=Ff[e];return"string"===typeof t?Boolean(wf(this.gl,t,this.extensions)):Boolean(t)}}class Bf extends Xh{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}gl;limits={};constructor(e){super(),this.gl=e}getParameter(e){return void 0===this.limits[e]&&(this.limits[e]=this.gl.getParameter(e)),this.limits[e]||0}}class Uf{static defaultProps={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"};id;props;canvas;htmlCanvas;offscreenCanvas;type;width=1;height=1;resizeObserver;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};toString(){return`${this[Symbol.toStringTag]}(${this.id})`}constructor(e){if(this.props={...Uf.defaultProps,...e},e=this.props,!co())return this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,void(this.canvas=null);if(e.canvas)"string"===typeof e.canvas?this.canvas=function(e){const t=document.getElementById(e);if(!(t instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return t}(e.canvas):this.canvas=e.canvas;else{const t=function(e){const{width:t,height:n}=e,r=document.createElement("canvas");return r.id=Eh("lumagl-auto-created-canvas"),r.width=t||1,r.height=n||1,r.style.width=Number.isFinite(t)?`${t}px`:"100%",r.style.height=Number.isFinite(n)?`${n}px`:"100%",r}(e),n=function(e){if("string"===typeof e){const t=document.getElementById(e);if(!t)throw new Error(`${e} is not an HTML element`);return t}if(e)return e;return document.body}(e?.container||null);n.insertBefore(t,n.firstChild),this.canvas=t,e?.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver((e=>{for(const t of e)t.target===this.canvas&&this.update()})),this.resizeObserver.observe(this.canvas))}getDevicePixelRatio(e){if("undefined"!==typeof OffscreenCanvas&&this.canvas instanceof OffscreenCanvas)return 1;if(!(e=void 0===e?this.props.useDevicePixels:e)||e<=0)return 1;if(!0===e){return"undefined"!==typeof window&&window.devicePixelRatio||1}return e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),t=this.canvas;return t.parentElement?[t.clientWidth*e,t.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,t]=this.getPixelSize();return e/t}cssToDeviceRatio(){try{const[e]=this.getDrawingBufferSize(),t=this._canvasSizeInfo.clientWidth||this.htmlCanvas?.clientWidth;return t?e/t:1}catch{return 1}}cssToDevicePixels(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.cssToDeviceRatio(),[r,i]=this.getDrawingBufferSize();return function(e,t,n,r,i){const o=e,s=zf(o[0],t,n);let a=$f(o[1],t,r,i),l=zf(o[0]+1,t,n);const c=l===n-1?l:l-1;let u;l=$f(o[1]+1,t,r,i),i?(l=0===l?l:l+1,u=a,a=l):u=l===r-1?l:l-1;return{x:s,y:a,width:Math.max(c-s+1,1),height:Math.max(u-a+1,1)}}(e,n,r,i,t)}setDevicePixelRatio(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.htmlCanvas)return;let n="width"in t?t.width:this.htmlCanvas.clientWidth,r="height"in t?t.height:this.htmlCanvas.clientHeight;n&&r||(xh.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=this.htmlCanvas.width||1,r=this.htmlCanvas.height||1);const i=this._canvasSizeInfo;if(i.clientWidth!==n||i.clientHeight!==r||i.devicePixelRatio!==e){let t=e;const i=Math.floor(n*t),o=Math.floor(r*t);this.htmlCanvas.width=i,this.htmlCanvas.height=o;if(this.device.gl){const[s,a]=this.getDrawingBufferSize();s===i&&a===o||(t=Math.min(s/n,a/r),this.htmlCanvas.width=Math.floor(n*t),this.htmlCanvas.height=Math.floor(r*t),xh.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=r,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){"lumagl-auto-created-canvas"===this.htmlCanvas?.id&&(this.htmlCanvas.id=e)}}function zf(e,t,n){return Math.min(Math.round(e*t),n-1)}function $f(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}class jf extends Sh{static COPY_SRC=1;static COPY_DST=2;static TEXTURE=4;static STORAGE=8;static RENDER_ATTACHMENT=16;static CubeFaces=["+X","-X","+Y","-Y","+Z","-Z"];static defaultProps=(()=>({...Sh.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}))();get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}dimension;format;width;height;depth;mipLevels;updateTimestamp;constructor(e,t){if(super(e,t=jf.normalizeProps(e,t),jf.defaultProps),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,void 0===this.props.width||void 0===this.props.height){const e=jf.getTextureDataSize(this.props.data);this.width=e?.width||1,this.height=e?.height||1}this.props.mipmaps&&void 0===this.props.mipLevels&&(this.props.mipLevels="pyramid"),this.mipLevels="pyramid"===this.props.mipLevels?jf.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=e.incrementTimestamp()}clone(e){return this.device.createTexture({...this.props,...e})}static isExternalImage(e){return"undefined"!==typeof ImageData&&e instanceof ImageData||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas}static getExternalImageSize(e){if("undefined"!==typeof ImageData&&e instanceof ImageData||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height};if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)return{width:e.naturalWidth,height:e.naturalHeight};if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)return{width:e.videoWidth,height:e.videoHeight};if("undefined"!==typeof VideoFrame&&e instanceof VideoFrame)return{width:e.displayWidth,height:e.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(e){const t=e?.data;return ArrayBuffer.isView(t)}static getTextureDataSize(e){if(!e)return null;if(ArrayBuffer.isView(e))return null;if(Array.isArray(e))return jf.getTextureDataSize(e[0]);if(jf.isExternalImage(e))return jf.getExternalImageSize(e);if(e&&"object"===typeof e&&e.constructor===Object){const t=Object.values(e)[0];return{width:t.width,height:t.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(e,t){let n;return n=ArrayBuffer.isView(e)?[{data:e,width:t.width,height:t.height}]:Array.isArray(e)?e:[e],n}static getMipLevelCount(e,t){return Math.floor(Math.log2(Math.max(e,t)))+1}static getCubeFaceDepth(e){switch(e){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(e)}}static defaultCopyExternalImageOptions={image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1};static normalizeProps(e,t){const n={...t},r=e?.props?._resourceDefaults?.texture||{};Object.assign(n,r);const{width:i,height:o}=n;return"number"===typeof i&&(n.width=Math.max(1,Math.ceil(i))),"number"===typeof o&&(n.height=Math.max(1,Math.ceil(o))),n}}class Vf extends Sh{static defaultProps={...Sh.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null};get[Symbol.toStringTag](){return"Framebuffer"}width;height;constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Vf.defaultProps),this.width=this.props.width,this.height=this.props.height}clone(e){const t=this.colorAttachments.map((t=>t.texture.clone(e))),n=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(e);return this.device.createFramebuffer({...this.props,colorAttachments:t,depthStencilAttachment:n})}resize(e){let t=!e;if(e){const[n,r]=Array.isArray(e)?e:[e.width,e.height];t=t||r!==this.height||n!==this.width,this.width=n,this.height=r}t&&(xh.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map(((e,t)=>{if("string"===typeof e){const n=this.createColorTexture(e,t);return this.attachResource(n),n.view}return e instanceof jf?e.view:e}));const e=this.props.depthStencilAttachment;if(e)if("string"===typeof e){const t=this.createDepthStencilTexture(e);this.attachResource(t),this.depthStencilAttachment=t.view}else this.depthStencilAttachment=e instanceof jf?e.view:e}createColorTexture(e,t){return this.device.createTexture({id:`${this.id}-color-attachment-${t}`,usage:jf.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(e){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:jf.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(e,t){for(let n=0;n<this.colorAttachments.length;++n)if(this.colorAttachments[n]){const r=this.colorAttachments[n].texture.clone({width:e,height:t});this.destroyAttachedResource(this.colorAttachments[n]),this.colorAttachments[n]=r.view,this.attachResource(r.view)}if(this.depthStencilAttachment){const n=this.depthStencilAttachment.texture.clone({width:e,height:t});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=n.view,this.attachResource(n)}this.updateAttachments()}}class Wf extends Vf{device;gl;handle;colorAttachments=[];depthStencilAttachment=null;constructor(e,t){super(e,t);const n=null===t.handle;this.device=e,this.gl=e.gl,this.handle=this.props.handle||n?this.props.handle:this.gl.createFramebuffer(),n||(e.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),this.destroyed||null===this.handle||this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const e=this.gl.bindFramebuffer(36160,this.handle);for(let t=0;t<this.colorAttachments.length;++t){const e=this.colorAttachments[t];if(e){const n=36064+t;this._attachTextureView(n,e)}}if(this.depthStencilAttachment){const e=function(e){switch(Hh(e).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${e}`)}}(this.depthStencilAttachment.props.format);this._attachTextureView(e,this.depthStencilAttachment)}if(this.device.props.debug){const e=this.gl.checkFramebufferStatus(36160);if(36053!==e)throw new Error(`Framebuffer ${function(e){switch(e){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${e}`}}(e)}`)}this.gl.bindFramebuffer(36160,e)}_attachTextureView(e,t){const{gl:n}=this.device,{texture:r}=t,i=t.props.baseMipLevel,o=t.props.baseArrayLayer;switch(n.bindTexture(r.glTarget,r.handle),r.glTarget){case 35866:case 32879:n.framebufferTextureLayer(36160,e,r.handle,i,o);break;case 34067:const t=function(e){return e<34069?e+34069:e}(o);n.framebufferTexture2D(36160,e,t,r.handle,i);break;case 3553:n.framebufferTexture2D(36160,e,3553,r.handle,i);break;default:throw new Error("Illegal texture type")}n.bindTexture(r.glTarget,null)}}class Gf extends Uf{device;format="rgba8unorm";depthStencilFormat="depth24plus";presentationSize;_framebuffer=null;get[Symbol.toStringTag](){return"WebGLCanvasContext"}constructor(e,t){super(t),this.device=e,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Wf(this.device,{handle:null}),this._framebuffer}update(){const e=this.getPixelSize();(e[0]!==this.presentationSize[0]||e[1]!==this.presentationSize[1])&&(this.presentationSize=e,this.resize())}resize(e){if(this.device.gl)if(this.canvas){const t=this.getDevicePixelRatio(e?.useDevicePixels);this.setDevicePixelRatio(t,e)}else;}commit(){}}async function Hf(e,t){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("src",e),t&&(r.id=t),new Promise(((t,i)=>{r.onload=t,r.onerror=t=>i(new Error(`Unable to load script '${e}': ${t}`)),n.appendChild(r)}))}let Xf=null,qf=!1;const Kf={debugSpectorJS:xh.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};var Yf;!function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.R16_EXT=33322]="R16_EXT",e[e.RG16_EXT=33324]="RG16_EXT",e[e.RGB16_EXT=32852]="RGB16_EXT",e[e.RGBA16_EXT=32859]="RGBA16_EXT",e[e.R16_SNORM_EXT=36760]="R16_SNORM_EXT",e[e.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",e[e.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",e[e.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",e[e.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",e[e.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",e[e.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",e[e.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",e[e.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",e[e.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",e[e.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",e[e.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",e[e.LINE_WEBGL=6913]="LINE_WEBGL",e[e.FILL_WEBGL=6914]="FILL_WEBGL",e[e.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",e[e.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",e[e.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",e[e.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",e[e.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",e[e.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",e[e.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",e[e.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",e[e.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",e[e.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",e[e.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",e[e.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",e[e.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",e[e.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",e[e.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",e[e.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",e[e.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",e[e.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",e[e.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",e[e.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",e[e.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",e[e.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",e[e.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",e[e.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"}(Yf||(Yf={}));function Zf(e){return e.luma=e.luma||{},e.luma}function Qf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.debugWebGL||t.traceWebGL?function(e,t){if(!globalThis.WebGLDebugUtils)return xh.warn("webgl-debug not loaded")(),e;const n=Zf(e);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...Yf,...e});const r=globalThis.WebGLDebugUtils.makeDebugContext(e,ep.bind(null,t),tp.bind(null,t));for(const s in Yf)s in r||"number"!==typeof Yf[s]||(r[s]=Yf[s]);class i{}Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.setPrototypeOf(i,r);const o=Object.create(i);return n.realContext=e,n.debugContext=o,o.debug=!0,o}(e,t):function(e){const t=Zf(e);return t.realContext?t.realContext:e}(e)}function Jf(e,t){t=Array.from(t).map((e=>void 0===e?"undefined":e));let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(e,t);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${e}(${n})`}function ep(e,t,n,r){r=Array.from(r).map((e=>void 0===e?"undefined":e));const i=`${globalThis.WebGLDebugUtils.glEnumToString(t)} in gl.${n}(${globalThis.WebGLDebugUtils.glFunctionArgsToString(n,r)})`;xh.error(i)()}function tp(e,t,n){let r="";xh.level>=1&&(r=Jf(t,n),e.traceWebGL&&xh.log(1,r)());for(const i of n)void 0===i&&(r=r||Jf(t,n))}const np={};function rp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";np[e]=np[e]||1;return`${e}-${np[e]++}`}class ip extends Th{device;gl;handle;glTarget;glUsage;glIndexType=5123;byteLength;bytesUsed;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.device=e,this.gl=this.device.gl;const n="object"===typeof t?t.handle:void 0;this.handle=n||this.gl.createBuffer(),e.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=function(e){if(e&Th.INDEX)return 34963;if(e&Th.VERTEX)return 34962;if(e&Th.UNIFORM)return 35345;return 34962}(this.props.usage),this.glUsage=function(e){if(e&Th.INDEX)return 35044;if(e&Th.VERTEX)return 35044;if(e&Th.UNIFORM)return 35048;return 35044}(this.props.usage),this.glIndexType="uint32"===this.props.indexType?5125:5123,t.data?this._initWithData(t.data,t.byteOffset,t.byteLength):this._initWithByteLength(t.byteLength||0)}_initWithData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;const r=this.glTarget;this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.glUsage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(e,t,n),this.trackAllocatedMemory(n)}_initWithByteLength(e){let t=e;0===e&&(t=new Float32Array(0));const n=this.glTarget;return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,t,this.glUsage),this.gl.bindBuffer(n,null),this.bytesUsed=e,this.byteLength=e,this._setDebugData(null,0,e),this.trackAllocatedMemory(e),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=36663;this.gl.bindBuffer(n,this.handle),this.gl.bufferSubData(n,t,e),this.gl.bindBuffer(n,null),this._setDebugData(e,t,e.byteLength)}async readAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.readSyncWebGL(e,t)}readSyncWebGL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;t=t??this.byteLength-e;const n=new Uint8Array(t);return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,n,0,t),this.gl.bindBuffer(36662,null),this._setDebugData(n,e,t),n}}function op(e,t,n,r){if(r?.inlineSource){const r=function(e,t,n){let r="";for(let i=t-2;i<=t;i++){const o=e[i-1];void 0!==o&&(r+=sp(o,t,n))}return r}(t,n);return`\n${r}${e.linePos>0?`${" ".repeat(e.linePos+5)}^^^\n`:""}${e.type.toUpperCase()}: ${e.message}\n\n`}const i="error"===e.type?"red":"#8B4000";return r?.html?`<div class='luma-compiler-log-error' style="color:${i};"><b> ${e.type.toUpperCase()}: ${e.message}</b></div>`:`${e.type.toUpperCase()}: ${e.message}`}function sp(e,t,n){const r=n?.html?e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):e;return`${function(e,t){let n="";for(let r=e.length;r<t;++r)n+=" ";return n+e}(String(t),4)}: ${r}${n?.html?"<br/>":"\n"}`}class ap extends Sh{static defaultProps=(()=>({...Sh.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0}))();get[Symbol.toStringTag](){return"Shader"}stage;source;compilationStatus="pending";constructor(e,t){super(e,{id:lp(t={...t,debugShaders:t.debugShaders||e.props.debugShaders||"errors"}),...t},ap.defaultProps),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const e=this.props.debugShaders;switch(e){case"never":return;case"errors":if("success"===this.compilationStatus)return}const t=await this.getCompilationInfo();"warnings"===e&&0===t?.length||this._displayShaderLog(t)}_displayShaderLog(e){if("undefined"===typeof document||!document?.createElement)return;const t=cp(this.source),n=`${this.stage} ${t}`;let r=function(e,t,n){let r="";const i=t.split(/\r?\n/),o=e.slice().sort(((e,t)=>e.lineNum-t.lineNum));switch(n?.showSourceCode||"no"){case"all":let t=0;for(let e=1;e<=i.length;e++)for(r+=sp(i[e-1],e,n);o.length>t&&o[t].lineNum===e;){const e=o[t++];r+=op(e,i,e.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const o of e)r+=op(o,i,o.lineNum,{inlineSource:"no"!==n?.showSourceCode});return r}}(e,this.source,{showSourceCode:"all",html:!0});const i=this.getTranslatedSource();i&&(r+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${i}</pre></code>`);const o=document.createElement("Button");o.innerHTML=`\n<h1>Shader Compilation Error in ${n}</h1><br /><br />\n<code style="user-select:text;"><pre>\n${r}\n</pre></code>`,o.style.top="10px",o.style.left="10px",o.style.position="absolute",o.style.zIndex="9999",o.style.width="100%",o.style.textAlign="left",document.body.appendChild(o);const s=document.getElementsByClassName("luma-compiler-log-error");s[0]?.scrollIntoView(),o.onclick=()=>{const e=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(e)}}}function lp(e){return cp(e.source)||e.id||Eh(`unnamed ${e.stage}-shader`)}function cp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}function up(e){const t=e.toLowerCase();return["warning","error","info"].includes(t)?t:"info"}class dp extends ap{device;handle;constructor(e,t){switch(super(e,t),this.device=e,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then((()=>this.compilationStatus))}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const e=this.device.gl.getShaderInfoLog(this.handle);return e?function(e){const t=e.split(/\r?\n/),n=[];for(const r of t){if(r.length<=1)continue;const e=r.split(":");if(2===e.length){const[t,r]=e;n.push({message:r.trim(),type:up(t),lineNum:0,linePos:0});continue}const[t,i,o,...s]=e;let a=parseInt(o,10);isNaN(a)&&(a=0);let l=parseInt(i,10);isNaN(l)&&(l=0),n.push({message:s.join(":").trim(),type:up(t),lineNum:a,linePos:l})}return n}(e):[]}getTranslatedSource(){const e=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return e?.getTranslatedShaderSource(this.handle)||null}async _compile(e){e=e.startsWith("#version ")?e:`#version 300 es\n${e}`;const{gl:t}=this.device;if(t.shaderSource(this.handle,e),t.compileShader(this.handle),this.device.props.debug){if(this.device.features.has("compilation-status-async-webgl"))xh.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),xh.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader();else if(this._getCompilationStatus(),this.debugShader(),"error"===this.compilationStatus)throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`)}else this.compilationStatus="pending"}async _waitForCompilationComplete(){const e=async e=>await new Promise((t=>setTimeout(t,e)));if(!this.device.features.has("compilation-status-async-webgl"))return void await e(10);const{gl:t}=this.device;for(;;){if(t.getShaderParameter(this.handle,37297))return;await e(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}class hp extends Sh{static defaultProps={...Sh.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1};get[Symbol.toStringTag](){return"Sampler"}constructor(e,t){super(e,t=hp.normalizeProps(e,t),hp.defaultProps)}static normalizeProps(e,t){return{...t,...e?.props?._resourceDefaults?.sampler||{}}}}function fp(e,t){const n=e,{gl:r}=n;if(t.cullMode)switch(t.cullMode){case"none":r.disable(2884);break;case"front":r.enable(2884),r.cullFace(1028);break;case"back":r.enable(2884),r.cullFace(1029)}if(t.frontFace&&r.frontFace(vp("frontFace",t.frontFace,{ccw:2305,cw:2304})),t.unclippedDepth&&e.features.has("depth-clip-control")&&r.enable(34383),void 0!==t.depthBias&&(r.enable(32823),r.polygonOffset(t.depthBias,t.depthBiasSlopeScale||0)),t.provokingVertex&&e.features.has("provoking-vertex-webgl")){const e=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,r=vp("provokingVertex",t.provokingVertex,{first:36429,last:36430});e?.provokingVertexWEBGL(r)}if((t.polygonMode||t.polygonOffsetLine)&&e.features.has("polygon-mode-webgl")){if(t.polygonMode){const e=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,r=vp("polygonMode",t.polygonMode,{fill:6914,line:6913});e?.polygonModeWEBGL(1028,r),e?.polygonModeWEBGL(1029,r)}t.polygonOffsetLine&&r.enable(10754)}if(e.features.has("shader-clip-cull-distance-webgl")&&(t.clipDistance0&&r.enable(12288),t.clipDistance1&&r.enable(12289),t.clipDistance2&&r.enable(12290),t.clipDistance3&&r.enable(12291),t.clipDistance4&&r.enable(12292),t.clipDistance5&&r.enable(12293),t.clipDistance6&&r.enable(12294),t.clipDistance7&&r.enable(12295)),void 0!==t.depthWriteEnabled&&r.depthMask(t.depthWriteEnabled),t.depthCompare&&("always"!==t.depthCompare?r.enable(2929):r.disable(2929),r.depthFunc(pp("depthCompare",t.depthCompare))),t.stencilWriteMask){const e=t.stencilWriteMask;r.stencilMaskSeparate(1028,e),r.stencilMaskSeparate(1029,e)}if(t.stencilReadMask&&xh.warn("stencilReadMask not supported under WebGL"),t.stencilCompare){const e=t.stencilReadMask||4294967295,n=pp("depthCompare",t.stencilCompare);"always"!==t.stencilCompare?r.enable(2960):r.disable(2960),r.stencilFuncSeparate(1028,n,0,e),r.stencilFuncSeparate(1029,n,0,e)}if(t.stencilPassOperation&&t.stencilFailOperation&&t.stencilDepthFailOperation){const e=gp("stencilPassOperation",t.stencilPassOperation),n=gp("stencilFailOperation",t.stencilFailOperation),i=gp("stencilDepthFailOperation",t.stencilDepthFailOperation);r.stencilOpSeparate(1028,n,i,e),r.stencilOpSeparate(1029,n,i,e)}switch(t.blend){case!0:r.enable(3042);break;case!1:r.disable(3042)}if(t.blendColorOperation||t.blendAlphaOperation){const e=mp("blendColorOperation",t.blendColorOperation||"add"),n=mp("blendAlphaOperation",t.blendAlphaOperation||"add");r.blendEquationSeparate(e,n);const i=yp("blendColorSrcFactor",t.blendColorSrcFactor||"one"),o=yp("blendColorDstFactor",t.blendColorDstFactor||"zero"),s=yp("blendAlphaSrcFactor",t.blendAlphaSrcFactor||"one"),a=yp("blendAlphaDstFactor",t.blendAlphaDstFactor||"zero");r.blendFuncSeparate(i,o,s,a)}}function pp(e,t){return vp(e,t,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function gp(e,t){return vp(e,t,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function mp(e,t){return vp(e,t,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function yp(e,t){return vp(e,t,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function vp(e,t,n){if(!(t in n))throw new Error(function(e,t){return`Illegal parameter ${t} for ${e}`}(e,t));return n[t]}function bp(e){let t=!0;for(const n in e){t=!1;break}return t}function _p(e){const t={};return e.addressModeU&&(t[10242]=xp(e.addressModeU)),e.addressModeV&&(t[10243]=xp(e.addressModeV)),e.addressModeW&&(t[32882]=xp(e.addressModeW)),e.magFilter&&(t[10240]=wp(e.magFilter)),(e.minFilter||e.mipmapFilter)&&(t[10241]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";if(!t)return wp(e);switch(t){case"none":return wp(e);case"nearest":return"nearest"===e?9984:9986;case"linear":return"nearest"===e?9985:9987}}(e.minFilter||"linear",e.mipmapFilter)),void 0!==e.lodMinClamp&&(t[33082]=e.lodMinClamp),void 0!==e.lodMaxClamp&&(t[33083]=e.lodMaxClamp),"comparison-sampler"===e.type&&(t[34892]=34894),e.compare&&(t[34893]=pp("compare",e.compare)),e.maxAnisotropy&&(t[34046]=e.maxAnisotropy),t}function xp(e){switch(e){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function wp(e){switch(e){case"nearest":return 9728;case"linear":return 9729}}class Ep extends hp{device;handle;parameters;constructor(e,t){super(e,t),this.device=e,this.parameters=_p(t),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(e){for(const[t,n]of Object.entries(e)){const e=Number(t);switch(e){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,e,n);break;default:this.device.gl.samplerParameteri(this.handle,e,n)}}}}class Sp extends Sh{static defaultProps=(()=>({...Sh.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0}))();get[Symbol.toStringTag](){return"TextureView"}constructor(e,t){super(e,t,Sp.defaultProps)}}class Tp extends Sp{device;gl;handle;texture;constructor(e,t){super(e,{...jf.defaultProps,...t}),this.device=e,this.gl=this.device.gl,this.handle=null,this.texture=t.texture}}function Ap(e){switch(e){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function Cp(e,t,n){if(function(e){for(const t in e)return!1;return!0}(t))return n(e);const{nocatch:r=!0}=t,i=bf.get(e);let o;if(i.push(),mf(e,t),r)o=n(e),i.pop();else try{o=n(e)}finally{i.pop()}return o}function kp(e,t,n,r){const{width:i,height:o}=r,{dimension:s,depth:a=0,mipLevel:l=0}=r,{x:c=0,y:u=0,z:d=0}=r,{glFormat:h,glType:f}=r,p=Rp(r.glTarget,s,a),g=r.flipY?{37440:!0}:{};Cp(e,g,(()=>{switch(s){case"2d-array":case"3d":e.bindTexture(p,t),e.texSubImage3D(p,l,c,u,d,i,o,a,h,f,n),e.bindTexture(p,null);break;case"2d":case"cube":e.bindTexture(p,t),e.texSubImage2D(p,l,c,u,i,o,h,f,n),e.bindTexture(p,null);break;default:throw new Error(s)}}))}function Pp(e,t,n){const{dimension:r,width:i,height:o,depth:s=0,mipLevel:a=0,byteOffset:l=0}=n,{x:c=0,y:u=0,z:d=0}=n,{glFormat:h,glType:f,compressed:p}=n,g=Rp(n.glTarget,r,s);switch(r){case"2d-array":case"3d":p?e.compressedTexSubImage3D(g,a,c,u,d,i,o,s,h,t,l):e.texSubImage3D(g,a,c,u,d,i,o,s,h,f,t,l);break;case"2d":case"cube":p?e.compressedTexSubImage2D(g,a,c,u,i,o,h,t,l):e.texSubImage2D(g,a,c,u,i,o,h,f,t,l);break;default:throw new Error(r)}}function Rp(e,t,n){return"cube"===t?34069+n:e}function Ip(e,t){const{sourceX:n=0,sourceY:r=0,sourceAttachment:i=0}=t||{};let{target:o=null,sourceWidth:s,sourceHeight:a,sourceDepth:l,sourceFormat:c,sourceType:u}=t||{};const{framebuffer:d,deleteFramebuffer:h}=Lp(e),{gl:f,handle:p}=d;s||=d.width,a||=d.height;const g=d.colorAttachments[i]?.texture;if(!g)throw new Error(`Invalid framebuffer attachment ${i}`);l=g?.depth||1,c||=g?.glFormat||6408,u||=g?.glType||5121,o=function(e,t,n,r,i){if(e)return e;t||=5121;const o=function(e,t){const{clamped:n=!0}=t||{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}(t,{clamped:!1}),s=Ap(n);return new o(r*i*s)}(o,u,c,s,a),u=u||function(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}(o);const m=f.bindFramebuffer(36160,p);return f.readBuffer(36064+i),f.readPixels(n,r,s,a,c,u,o),f.readBuffer(36064),f.bindFramebuffer(36160,m||null),h&&d.destroy(),o}function Lp(e){return e instanceof Vf?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Mp(e),deleteFramebuffer:!0}}function Mp(e,t){const{device:n,width:r,height:i,id:o}=e;return n.createFramebuffer({...t,id:`framebuffer-for-${o}`,width:r,height:i,colorAttachments:[e]})}class Op extends jf{device;gl;handle;sampler=void 0;view=void 0;mipmaps;compressed;glTarget;glFormat;glType;glInternalFormat;textureUnit=0;constructor(e,t){super(e,t);const n={...this.props};n.data=t.data,this.device=e,this.gl=this.device.gl,this.glTarget=function(e){switch(e){case"1d":case"cube-array":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(e)}(this.props.dimension);const r=Of(this.props.format);this.glInternalFormat=r.internalFormat,this.glFormat=r.format,this.glType=r.type,this.compressed=r.compressed,this.mipmaps=Boolean(this.props.mipmaps),this._initialize(n),Object.seal(this)}_initialize(e){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:e.data});let{width:t,height:n}=e;if(!t||!n){const r=jf.getTextureDataSize(e.data);t=r?.width||1,n=r?.height||1}if(this.width=t,this.height=n,this.depth=e.depth,this.setSampler(e.sampler),this.view=new Tp(this.device,{...this.props,texture:this}),this.bind(),function(e,t,n){const{dimension:r,width:i,height:o,depth:s=0}=n,{glInternalFormat:a}=n,l=n.glTarget;switch(r){case"2d-array":case"3d":e.texStorage3D(l,t,a,i,o,s);break;default:e.texStorage2D(l,t,a,i,o)}}(this.gl,this.mipLevels,this),e.data)switch(e.dimension){case"1d":this.setTexture1DData(e.data);break;case"2d":this.setTexture2DData(e.data);break;case"3d":this.setTexture3DData(e.data);break;case"cube":this.setTextureCubeData(e.data);break;case"2d-array":this.setTextureArrayData(e.data);break;case"cube-array":this.setTextureCubeArrayData(e.data);break;default:throw new Error(e.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(e){return new Tp(this.device,{...e,texture:this})}setSampler(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t instanceof Ep?(this.sampler=t,e=t.props):(this.sampler=new Ep(this.device,t),e=t);const n=_p(e);this._setSamplerParameters(n)}generateMipmap(e){if(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format)||(xh.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),e?.force))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(t){xh.warn(`Error generating mipmap for ${this}: ${t.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(e){const t=jf.getExternalImageSize(e.image),n={...jf.defaultCopyExternalImageOptions,...t,...e},{image:r,depth:i,mipLevel:o,x:s,y:a,z:l,flipY:c}=n;let{width:u,height:d}=n;const{dimension:h,glTarget:f,glFormat:p,glInternalFormat:g,glType:m}=this;if(u=Math.min(u,this.width-s),d=Math.min(d,this.height-a),e.sourceX||e.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return kp(this.device.gl,this.handle,r,{dimension:h,mipLevel:o,x:s,y:a,z:l,width:u,height:d,depth:i,glFormat:p,glInternalFormat:g,glType:m,glTarget:f,flipY:c}),{width:n.width,height:n.height}}setTexture1DData(e){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.bind();const n=jf.normalizeTextureData(e,this);n.length>1&&!1!==this.props.mipmaps&&xh.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let r=0;r<n.length;r++){const e=n[r];this._setMipLevel(t,r,e)}this.unbind()}setTexture3DData(e){if("3d"!==this.props.dimension)throw new Error(this.id);ArrayBuffer.isView(e)&&(this.bind(),Pp(this.device.gl,e,this),this.unbind())}setTextureCubeData(e){if("cube"!==this.props.dimension)throw new Error(this.id);for(const t of jf.CubeFaces)this.setTextureCubeFaceData(e[t],t)}setTextureArrayData(e){if("2d-array"!==this.props.dimension)throw new Error(this.id);throw new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(e){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(e,t){Array.isArray(e)&&e.length>1&&!1!==this.props.mipmaps&&xh.warn(`${this.id} has mipmap and multiple LODs.`)();const n=jf.CubeFaces.indexOf(t);this.setTexture2DData(e,n)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(e){const{face:t,width:n,height:r,pixels:i,data:o,format:s=6408,type:a=5121}=e,{gl:l}=this,c=i||o;this.bind(),c instanceof Promise?c.then((n=>this.setImageDataForFace(Object.assign({},e,{face:t,data:n,pixels:n})))):this.width||this.height?l.texImage2D(t,0,s,n,r,0,s,a,c):l.texImage2D(t,0,s,s,a,c)}_getImageDataMap(e){for(let t=0;t<jf.CubeFaces.length;++t){const n=jf.CubeFaces[t];e[n]&&(e[34069+t]=e[n],delete e[n])}return e}_setSamplerParameters(e){xh.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(e))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[t,n]of Object.entries(e)){const e=Number(t),r=n;switch(e){case 33082:case 33083:this.gl.texParameterf(this.glTarget,e,r);break;case 10241:case 10242:case 10243:default:this.gl.texParameteri(this.glTarget,e,r);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,e,r)}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.glTarget;if(jf.isExternalImage(n))kp(this.device.gl,this.handle,n,{...this,depth:e,mipLevel:t,glTarget:r,flipY:this.props.flipY});else{if(!jf.isTextureLevelData(n))throw new Error("Texture: invalid image data");Pp(this.device.gl,n.data,{...this,depth:e,mipLevel:t,glTarget:r})}}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.glTarget,this.handle),e}unbind(e){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.glTarget,null),e}}class Np extends Sh{static defaultClearColor=[0,0,0,1];static defaultClearDepth=1;static defaultClearStencil=0;static defaultProps=(()=>({...Sh.defaultProps,framebuffer:null,parameters:void 0,clearColor:Np.defaultClearColor,clearColors:void 0,clearDepth:Np.defaultClearDepth,clearStencil:Np.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0}))();get[Symbol.toStringTag](){return"RenderPass"}constructor(e,t){super(e,t=Np.normalizeProps(e,t),Np.defaultProps)}static normalizeProps(e,t){const n=e.props._resourceDefaults?.renderPass;return{...n,...t}}}const Fp=[1,2,4,8];class Dp extends Np{device;glParameters;constructor(e,t){let n;if(super(e,t),this.device=e,!t?.parameters?.viewport)if(t?.framebuffer){const{width:e,height:r}=t.framebuffer;n=[0,0,e,r]}else{const[t,r]=e.getCanvasContext().getDrawingBufferSize();n=[0,0,t,r]}this.device.pushState(),this.setParameters({viewport:n,...this.props.parameters});const r=this.props.framebuffer;if(r?.handle)if(this.props.framebuffer){const e=this.props.framebuffer.colorAttachments.map(((e,t)=>36064+t));this.device.gl.drawBuffers(e)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(e){}popDebugGroup(){}insertDebugMarker(e){}setParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...this.glParameters};t.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(t.depthMask=!this.props.depthReadOnly),t.stencilMask=this.props.stencilReadOnly?0:1,t[35977]=this.props.discard,e.viewport&&(e.viewport.length>=6?(t.viewport=e.viewport.slice(0,4),t.depthRange=[e.viewport[4],e.viewport[5]]):t.viewport=e.viewport),e.scissorRect&&(t.scissorTest=!0,t.scissor=e.scissorRect),e.blendConstant&&(t.blendColor=e.blendConstant),e.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),e[2967]=e.stencilReference),e.colorMask&&(t.colorMask=Fp.map((t=>Boolean(t&e.colorMask)))),this.glParameters=t,mf(this.device.gl,t)}beginOcclusionQuery(e){const t=this.props.occlusionQuerySet;t?.beginOcclusionQuery()}endOcclusionQuery(){const e=this.props.occlusionQuerySet;e?.endOcclusionQuery()}clear(){const e={...this.glParameters};let t=0;this.props.clearColors&&this.props.clearColors.forEach(((e,t)=>{e&&this.clearColorBuffer(t,e)})),!1!==this.props.clearColor&&void 0===this.props.clearColors&&(t|=16384,e.clearColor=this.props.clearColor),!1!==this.props.clearDepth&&(t|=256,e.clearDepth=this.props.clearDepth),!1!==this.props.clearStencil&&(t|=1024,e.clearStencil=this.props.clearStencil),0!==t&&Cp(this.device.gl,e,(()=>{this.device.gl.clear(t)}))}clearColorBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];Cp(this.device.gl,{framebuffer:this.props.framebuffer},(()=>{switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,e,t);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,e,t);break;case Float32Array:this.device.gl.clearBufferfv(6144,e,t);break;default:throw new Error("clearColorBuffer: color must be typed array")}}))}}class Bp extends Sh{static defaultProps={...Sh.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}};get[Symbol.toStringTag](){return"RenderPipeline"}shaderLayout;bufferLayout;linkStatus="pending";hash="";constructor(e,t){super(e,t,Bp.defaultProps),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(e){throw new Error("Use uniform blocks")}}const Up=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],zp={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function $p(e){const t=zp[e];if(!t)throw new Error("uniform");const[n,r,,i]=t;return{format:i,components:r,glType:n}}function jp(e){const t=zp[e];if(!t)throw new Error("attribute");const[,n,,r,i]=t;return{attributeType:r,vertexFormat:i,components:n}}function Vp(e,t){const n={attributes:[],bindings:[]};n.attributes=function(e,t){const n=[],r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i);if(!r)throw new Error("activeInfo");const{name:o,type:s}=r,a=e.getAttribLocation(t,o);if(a>=0){const{attributeType:e}=jp(s),t=/instance/i.test(o)?"instance":"vertex";n.push({name:o,location:a,stepMode:t,type:e})}}return n.sort(((e,t)=>e.location-t.location)),n}(e,t);const r=function(e,t){const n=(n,r)=>e.getActiveUniformBlockParameter(t,n,r),r=[],i=e.getProgramParameter(t,35382);for(let o=0;o<i;o++){const i={name:e.getActiveUniformBlockName(t,o)||"",location:n(o,35391),byteLength:n(o,35392),vertex:n(o,35396),fragment:n(o,35398),uniformCount:n(o,35394),uniforms:[]},s=n(o,35395)||[],a=e.getActiveUniforms(t,s,35383),l=e.getActiveUniforms(t,s,35384),c=e.getActiveUniforms(t,s,35387),u=e.getActiveUniforms(t,s,35388);for(let n=0;n<i.uniformCount;++n){const r=e.getActiveUniform(t,s[n]);if(!r)throw new Error("activeInfo");i.uniforms.push({name:r.name,format:$p(a[n]).format,type:a[n],arrayLength:l[n],byteOffset:c[n],byteStride:u[n]})}r.push(i)}return r.sort(((e,t)=>e.location-t.location)),r}(e,t);for(const l of r){const e=l.uniforms.map((e=>({name:e.name,format:e.format,byteOffset:e.byteOffset,byteStride:e.byteStride,arrayLength:e.arrayLength})));n.bindings.push({type:"uniform",name:l.name,group:0,location:l.location,visibility:(l.vertex?1:0)&(l.fragment?2:0),minBindingSize:l.byteLength,uniforms:e})}const i=function(e,t){const n=[],r=e.getProgramParameter(t,35718);for(let i=0;i<r;i++){const r=e.getActiveUniform(t,i);if(!r)throw new Error("activeInfo");const{name:o,size:s,type:a}=r,{name:l,isArray:c}=Hp(o);let u=e.getUniformLocation(t,l);const d={location:u,name:l,size:s,type:a,isArray:c};if(n.push(d),d.size>1)for(let i=0;i<d.size;i++){const r=`${l}[${i}]`;u=e.getUniformLocation(t,r);const o={...d,name:r,location:u};n.push(o)}}return n}(e,t);let o=0;for(const l of i)if(s=l.type,Up.includes(s)){const{viewDimension:e,sampleType:t}=Gp(l.type);n.bindings.push({type:"texture",name:l.name,group:0,location:o,viewDimension:e,sampleType:t}),l.textureUnit=o,o+=1}var s;i.length&&(n.uniforms=i);const a=function(e,t){const n=[],r=e.getProgramParameter(t,35971);for(let i=0;i<r;i++){const r=e.getTransformFeedbackVarying(t,i);if(!r)throw new Error("activeInfo");const{name:o,type:s,size:a}=r,{glType:l,components:c}=$p(s),u={location:i,name:o,type:l,size:a*c};n.push(u)}return n.sort(((e,t)=>e.location-t.location)),n}(e,t);return a?.length&&(n.varyings=a),n}const Wp={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function Gp(e){const t=Wp[e];if(!t)throw new Error("sampler");const[n,r]=t;return{viewDimension:n,sampleType:r}}function Hp(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/.exec(e);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${e}`);return{name:t[1],length:t[2]?1:0,isArray:Boolean(t[2])}}function Xp(e,t,n,r){const i=e;let o=r;!0===o&&(o=1),!1===o&&(o=0);const s="number"===typeof o?[o]:o;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if("number"!==typeof r)throw new Error("samplers must be set to integers");return e.uniform1i(t,r);case 5126:return e.uniform1fv(t,s);case 35664:return e.uniform2fv(t,s);case 35665:return e.uniform3fv(t,s);case 35666:return e.uniform4fv(t,s);case 5124:case 35670:return e.uniform1iv(t,s);case 35667:case 35671:return e.uniform2iv(t,s);case 35668:case 35672:return e.uniform3iv(t,s);case 35669:case 35673:return e.uniform4iv(t,s);case 5125:return i.uniform1uiv(t,s,1);case 36294:return i.uniform2uiv(t,s,2);case 36295:return i.uniform3uiv(t,s,3);case 36296:return i.uniform4uiv(t,s,4);case 35674:return e.uniformMatrix2fv(t,!1,s);case 35675:return e.uniformMatrix3fv(t,!1,s);case 35676:return e.uniformMatrix4fv(t,!1,s);case 35685:return i.uniformMatrix2x3fv(t,!1,s);case 35686:return i.uniformMatrix2x4fv(t,!1,s);case 35687:return i.uniformMatrix3x2fv(t,!1,s);case 35688:return i.uniformMatrix3x4fv(t,!1,s);case 35689:return i.uniformMatrix4x2fv(t,!1,s);case 35690:return i.uniformMatrix4x3fv(t,!1,s)}throw new Error("Illegal uniform")}function qp(e){return function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(e)||function(e){return!!Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}(e)}function Kp(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach((n=>{const r=e[n];var i;null!==qp(i=r)||"number"===typeof i||"boolean"===typeof i?t.uniforms[n]=r:t.bindings[n]=r})),t}class Yp extends Bp{device;handle;vs;fs;introspectedLayout;uniforms={};bindings={};varyings=null;_uniformCount=0;_uniformSetters={};constructor(e,t){super(e,t),this.device=e,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=t.vs,this.fs=t.fs;const{varyings:n,bufferMode:r=35981}=t;n&&n.length>0&&(this.varyings=n,this.device.gl.transformFeedbackVaryings(this.handle,n,r)),this._linkShaders(),xh.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=Vp(this.device.gl,this.handle),xh.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=function(e,t){const n={...e,attributes:e.attributes.map((e=>({...e})))};for(const r of t?.attributes||[]){const e=n.attributes.find((e=>e.name===r.name));e?(e.type=r.type||e.type,e.stepMode=r.stepMode||e.stepMode):xh.warn(`shader layout attribute ${r.name} not present in shader`)}return n}(this.introspectedLayout,t.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(e,t){for(const[n,r]of Object.entries(e)){const e=this.shaderLayout.bindings.find((e=>e.name===n))||this.shaderLayout.bindings.find((e=>e.name===`${n}Uniforms`));if(e){switch(r||xh.warn(`Unsetting binding "${n}" in render pipeline "${this.id}"`)(),e.type){case"uniform":if(!(r instanceof ip)&&!(r.buffer instanceof ip))throw new Error("buffer value");break;case"texture":if(!(r instanceof Tp||r instanceof Op||r instanceof Wf))throw new Error("texture value");break;case"sampler":xh.warn(`Ignoring sampler ${n}`)();break;default:throw new Error(e.type)}this.bindings[n]=r}else{const e=this.shaderLayout.bindings.map((e=>`"${e.name}"`)).join(", ");t?.disableWarnings||xh.warn(`No binding "${n}" in render pipeline "${this.id}", expected one of ${e}`,r)()}}}draw(e){const{renderPass:t,parameters:n=this.props.parameters,topology:r=this.props.topology,vertexArray:i,vertexCount:o,instanceCount:s,isInstanced:a=!1,firstVertex:l=0,transformFeedback:c}=e,u=function(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(e)}}(r),d=Boolean(i.indexBuffer),h=i.indexBuffer?.glIndexType;if("success"!==this.linkStatus)return xh.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return xh.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),i.bindBeforeRender(t),c&&c.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const f=t;return function(e,t,n,r){if(bp(t))return r(e);const i=e;i.pushState();try{return fp(e,t),mf(i.gl,n),r(e)}finally{i.popState()}}(this.device,n,f.glParameters,(()=>{d&&a?this.device.gl.drawElementsInstanced(u,o||0,h,l,s||0):d?this.device.gl.drawElements(u,o||0,h,l):a?this.device.gl.drawArraysInstanced(u,l,o||0,s||0):this.device.gl.drawArrays(u,l,o||0),c&&c.end()})),i.unbindAfterRender(t),!0}setUniformsWebGL(e){const{bindings:t}=Kp(e);Object.keys(t).forEach((e=>{xh.warn(`Unsupported value "${JSON.stringify(t[e])}" used in setUniforms() for key ${e}. Use setBindings() instead?`)()})),Object.assign(this.uniforms,e)}async _linkShaders(){const{gl:e}=this.device;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),xh.time(4,`linkProgram for ${this.id}`)(),e.linkProgram(this.handle),xh.timeEnd(4,`linkProgram for ${this.id}`)(),xh.level,!this.device.features.has("compilation-status-async-webgl")){const e=this._getLinkStatus();return void this._reportLinkStatus(e)}xh.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),xh.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const t=this._getLinkStatus();this._reportLinkStatus(t)}async _reportLinkStatus(e){if("success"!==e){switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then((()=>this.vs.debugShader()))}switch(this.fs?.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then((()=>this.fs.debugShader()))}const t=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${e}: ${t}`)}}_getLinkStatus(){const{gl:e}=this.device;if(!e.getProgramParameter(this.handle,35714))return this.linkStatus="error","linking";e.validateProgram(this.handle);return e.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")}async _waitForLinkComplete(){const e=async e=>await new Promise((t=>setTimeout(t,e)));if(!this.device.features.has("compilation-status-async-webgl"))return void await e(10);const{gl:t}=this.device;for(;;){if(t.getProgramParameter(this.handle,37297))return;await e(10)}}_areTexturesRenderable(){let e=!0;for(const t of this.shaderLayout.bindings)this.bindings[t.name]||this.bindings[t.name.replace(/Uniforms$/,"")]||(xh.warn(`Binding ${t.name} not found in ${this.id}`)(),e=!1);return e}_applyBindings(){if("success"!==this.linkStatus)return;const{gl:e}=this.device;e.useProgram(this.handle);let t=0,n=0;for(const r of this.shaderLayout.bindings){const i=this.bindings[r.name]||this.bindings[r.name.replace(/Uniforms$/,"")];if(!i)throw new Error(`No value for binding ${r.name} in ${this.id}`);switch(r.type){case"uniform":const{name:o}=r,s=e.getUniformBlockIndex(this.handle,o);if(4294967295===s)throw new Error(`Invalid uniform block name ${o}`);e.uniformBlockBinding(this.handle,n,s),i instanceof ip?e.bindBufferBase(35345,n,i.handle):e.bindBufferRange(35345,n,i.buffer.handle,i.offset||0,i.size||i.buffer.byteLength-i.offset),n+=1;break;case"texture":if(!(i instanceof Tp||i instanceof Op||i instanceof Wf))throw new Error("texture");let a;if(i instanceof Tp)a=i.texture;else if(i instanceof Op)a=i;else{if(!(i instanceof Wf&&i.colorAttachments[0]instanceof Tp))throw new Error("No texture");xh.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),a=i.colorAttachments[0].texture}e.activeTexture(33984+t),e.bindTexture(a.glTarget,a.handle),t+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${r.type}' not supported in WebGL`)}}}_applyUniforms(){for(const e of this.shaderLayout.uniforms||[]){const{name:t,location:n,type:r,textureUnit:i}=e,o=this.uniforms[t]??i;void 0!==o&&Xp(this.device.gl,n,r,o)}}}class Zp extends Sh{static defaultProps=(()=>({...Sh.defaultProps,measureExecutionTime:void 0}))();get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,t){super(e,t,Zp.defaultProps)}}class Qp extends Sh{static defaultProps={...Sh.defaultProps};get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,t){super(e,t,Qp.defaultProps)}}class Jp extends Qp{device;commands=[];constructor(e){super(e,{}),this.device=e}submitCommands(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.commands;for(const t of e)switch(t.name){case"copy-buffer-to-buffer":eg(this.device,t.options);break;case"copy-buffer-to-texture":tg(this.device,t.options);break;case"copy-texture-to-buffer":ng(this.device,t.options);break;case"copy-texture-to-texture":rg(this.device,t.options);break;default:throw new Error(t.name)}}}function eg(e,t){const n=t.sourceBuffer,r=t.destinationBuffer;e.gl.bindBuffer(36662,n.handle),e.gl.bindBuffer(36663,r.handle),e.gl.copyBufferSubData(36662,36663,t.sourceOffset??0,t.destinationOffset??0,t.size),e.gl.bindBuffer(36662,null),e.gl.bindBuffer(36663,null)}function tg(e,t){throw new Error("Not implemented")}function ng(e,t){const{sourceTexture:n,mipLevel:r=0,aspect:i="all",width:o=t.sourceTexture.width,height:s=t.sourceTexture.height,depthOrArrayLayers:a=0,origin:l=[0,0],destinationBuffer:c,byteOffset:u=0,bytesPerRow:d,rowsPerImage:h}=t;if("all"!==i)throw new Error("aspect not supported in WebGL");if(0!==r||0!==a||d||h)throw new Error("not implemented");const{framebuffer:f,destroyFramebuffer:p}=ig(n);let g;try{const t=c,n=o||f.width,r=s||f.height,i=Of(f.colorAttachments[0].texture.props.format),a=i.format,d=i.type;e.gl.bindBuffer(35051,t.handle),g=e.gl.bindFramebuffer(36160,f.handle),e.gl.readPixels(l[0],l[1],n,r,a,d,u)}finally{e.gl.bindBuffer(35051,null),void 0!==g&&e.gl.bindFramebuffer(36160,g),p&&f.destroy()}}function rg(e,t){const{sourceTexture:n,destinationMipLevel:r=0,origin:i=[0,0],destinationOrigin:o=[0,0],destinationTexture:s}=t;let{width:a=t.destinationTexture.width,height:l=t.destinationTexture.height}=t;const{framebuffer:c,destroyFramebuffer:u}=ig(n),[d,h]=i,[f,p,g]=o,m=e.gl.bindFramebuffer(36160,c.handle);let y,v=null;if(!(s instanceof Op))throw new Error("invalid destination");switch(v=s,a=Number.isFinite(a)?a:v.width,l=Number.isFinite(l)?l:v.height,v.bind(0),y=v.glTarget,y){case 3553:case 34067:e.gl.copyTexSubImage2D(y,r,f,p,d,h,a,l);break;case 35866:case 32879:e.gl.copyTexSubImage3D(y,r,f,p,g,d,h,a,l)}v&&v.unbind(),e.gl.bindFramebuffer(36160,m),u&&c.destroy()}function ig(e){if(e instanceof jf){const{width:t,height:n,id:r}=e;return{framebuffer:e.device.createFramebuffer({id:`framebuffer-for-${r}`,width:t,height:n,colorAttachments:[e]}),destroyFramebuffer:!0}}return{framebuffer:e,destroyFramebuffer:!1}}class og extends Zp{device;commandBuffer;constructor(e,t){super(e,t),this.device=e,this.commandBuffer=new Jp(e)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(e){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:e})}copyBufferToTexture(e){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:e})}copyTextureToBuffer(e){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:e})}copyTextureToTexture(e){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:e})}pushDebugGroup(e){}popDebugGroup(){}insertDebugMarker(e){}resolveQuerySet(e,t,n){}}const sg={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},ag={f32:4,f16:2,i32:4,u32:4};function lg(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[n,r]=e.split("x"),i=n,o=r?parseInt(r):1,s=Ah(i),a={type:i,components:o,byteLength:s.byteLength*o,integer:s.integer,signed:s.signed,normalized:s.normalized};return t&&(a.webglOnly=!0),a}function cg(e,t){const n={};for(const r of e.attributes){const i=ug(e,t,r.name);i&&(n[r.name]=i)}return n}function ug(e,t,n){const r=function(e,t){const n=e.attributes.find((e=>e.name===t));n||xh.warn(`shader layout attribute "${t}" not present in shader`);return n||null}(e,n),i=function(e,t){dg(e);let n=function(e,t){for(const n of e)if(n.format&&n.name===t)return{attributeName:n.name,bufferName:t,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}(e,t);if(n)return n;if(n=function(e,t){for(const n of e){let e=n.byteStride;if("number"!==typeof n.byteStride)for(const t of n.attributes||[]){e+=lg(t.format).byteLength}const r=n.attributes?.find((e=>e.attribute===t));if(r)return{attributeName:r.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:r.format,byteOffset:r.byteOffset,byteStride:e}}return null}(e,t),n)return n;return xh.warn(`layout for attribute "${t}" not present in buffer layout`),null}(t,n);if(!r)return null;const o=function(e){const[t,n]=sg[e],r="i32"===t||"u32"===t,i="u32"!==t,o=ag[t]*n,s=function(e,t){let n;switch(e){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return t<=2?"float16x2":"float16x4"}return 1===t?n:`${n}x${t}`}(t,n);return{dataType:t,components:n,defaultVertexFormat:s,byteLength:o,integer:r,signed:i}}(r.type),s=i?.vertexFormat||o.defaultVertexFormat,a=lg(s);return{attributeName:i?.attributeName||r.name,bufferName:i?.bufferName||r.name,location:r.location,shaderType:r.type,shaderDataType:o.dataType,shaderComponents:o.components,vertexFormat:s,bufferDataType:a.type,bufferComponents:a.components,normalized:a.normalized,integer:o.integer,stepMode:i?.stepMode||r.stepMode||"vertex",byteOffset:i?.byteOffset||0,byteStride:i?.byteStride||0}}function dg(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&xh.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}class hg extends Sh{static defaultProps={...Sh.defaultProps,renderPipeline:null};get[Symbol.toStringTag](){return"VertexArray"}maxVertexAttributes;attributeInfos;indexBuffer=null;attributes;constructor(e,t){super(e,t,hg.defaultProps),this.maxVertexAttributes=e.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:n,bufferLayout:r}=t.renderPipeline||{};if(!n||!r)throw new Error("VertexArray");this.attributeInfos=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const r=cg(e,t),i=new Array(n).fill(null);for(const o of Object.values(r))i[o.location]=o;return i}(n,r,this.maxVertexAttributes)}setConstantWebGL(e,t){this.device.reportError(new Error("constant attributes not supported"))}}let fg;function pg(e){return(!fg||fg.byteLength<e)&&(fg=new ArrayBuffer(e)),fg}class gg extends hg{get[Symbol.toStringTag](){return"VertexArray"}device;handle;buffer=null;bufferValue=null;static isConstantAttributeZeroSupported(e){return"Chrome"===(t||co()?lo(t)?"Electron":(t||vo.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node");var t}constructor(e,t){super(e,t),this.device=e,this.handle=this.device.gl.createVertexArray()}destroy(){super.destroy(),this.buffer&&this.buffer?.destroy(),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(e){const t=e;if(t&&34963!==t.glTarget)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,t?t.handle:null),this.indexBuffer=t,this.device.gl.bindVertexArray(null)}setBuffer(e,t){const n=t;if(34963===n.glTarget)throw new Error("Use .setIndexBuffer()");const{size:r,type:i,stride:o,offset:s,normalized:a,integer:l,divisor:c}=this._getAccessor(e);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,n.handle),l?this.device.gl.vertexAttribIPointer(e,r,i,o,s):this.device.gl.vertexAttribPointer(e,r,i,a,o,s),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(e),this.device.gl.vertexAttribDivisor(e,c||0),this.attributes[e]=n,this.device.gl.bindVertexArray(null)}setConstantWebGL(e,t){this._enable(e,!1),this.attributes[e]=t}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let e=0;e<this.maxVertexAttributes;++e){const t=this.attributes[e];ArrayBuffer.isView(t)&&this.device.setConstantAttributeWebGL(e,t)}}_getAccessor(e){const t=this.attributeInfos[e];if(!t)throw new Error(`Unknown attribute location ${e}`);const n=Tf(t.bufferDataType);return{size:t.bufferComponents,type:n,stride:t.byteStride,offset:t.byteOffset,normalized:t.normalized,integer:t.integer,divisor:"instance"===t.stepMode?1:0}}_enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=gg.isConstantAttributeZeroSupported(this.device);(t||(n||0!==e))&&(e=Number(e),this.device.gl.bindVertexArray(this.handle),t?this.device.gl.enableVertexAttribArray(e):this.device.gl.disableVertexAttribArray(e),this.device.gl.bindVertexArray(null))}getConstantBuffer(e,t){const n=function(e){if(Array.isArray(e))return new Float32Array(e);return e}(t),r=n.byteLength*e,i=n.length*e;if(this.buffer&&r!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${r} !== ${this.buffer.byteLength}.`);let o=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:r}),o=o||!function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(n,this.bufferValue),o){const e=function(e,t){return new e(pg(e.BYTES_PER_ELEMENT*t),0,t)}(t.constructor,i);!function(e){const{target:t,source:n,start:r=0,count:i=1}=e,o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s);e.target}({target:e,source:n,start:0,count:i}),this.buffer.write(e),this.bufferValue=t}return this.buffer}}class mg extends Sh{static defaultProps=(()=>({...Sh.defaultProps,layout:void 0,buffers:{}}))();get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,t){super(e,t,mg.defaultProps)}}class yg extends mg{device;gl;handle;layout;buffers={};unusedBuffers={};bindOnUse=!0;_bound=!1;constructor(e,t){super(e,t),this.device=e,this.gl=e.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,t.buffers&&this.setBuffers(t.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"point-list";this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(function(e){switch(e){case"point-list":return 0;case"line-list":case"line-strip":return 1;case"triangle-list":case"triangle-strip":return 4;default:throw new Error(e)}}(e))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(e){this.buffers={},this.unusedBuffers={},this.bind((()=>{for(const t in e)this.setBuffer(t,e[t])}))}setBuffer(e,t){const n=this._getVaryingIndex(e),{buffer:r,byteLength:i,byteOffset:o}=this._getBufferRange(t);if(n<0)return this.unusedBuffers[e]=r,void xh.warn(`${this.id} unusedBuffers varying buffer ${e}`)();this.buffers[n]={buffer:r,byteLength:i,byteOffset:o},this.bindOnUse||this._bindBuffer(n,r,o,i)}getBuffer(e){if(vg(e))return this.buffers[e]||null;const t=this._getVaryingIndex(e);return t>=0?this.buffers[t]:null}bind(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof t?(this.gl.bindTransformFeedback(36386,t),this):(this._bound?e=t():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,e=t(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),e)}unbind(){this.bind(null)}_getBufferRange(e){if(e instanceof ip)return{buffer:e,byteOffset:0,byteLength:e.byteLength};const{buffer:t,byteOffset:n=0,byteLength:r=e.buffer.byteLength}=e;return{buffer:t,byteOffset:n,byteLength:r}}_getVaryingIndex(e){if(vg(e))return Number(e);for(const t of this.layout.varyings)if(e===t.name)return t.location;return-1}_bindBuffers(){for(const e in this.buffers){const{buffer:t,byteLength:n,byteOffset:r}=this._getBufferRange(this.buffers[e]);this._bindBuffer(Number(e),t,r,n)}}_unbindBuffers(){for(const e in this.buffers)this.gl.bindBufferBase(35982,Number(e),null)}_bindBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=t&&t.handle;i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i)}}function vg(e){return"number"===typeof e?Number.isInteger(e):/^\d+$/.test(e)}class bg extends Sh{static defaultProps=(()=>({...Sh.defaultProps,type:void 0,count:void 0}))();get[Symbol.toStringTag](){return"QuerySet"}constructor(e,t){super(e,t,bg.defaultProps)}}class _g extends bg{device;handle;target=null;_queryPending=!1;_pollingPromise=null;get[Symbol.toStringTag](){return"Query"}constructor(e,t){if(super(e,t),this.device=e,t.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(e){return this._begin(e?.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(e){this._queryPending||(this.target=e,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.device.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}}class xg extends Kh{type="webgl";handle;features;limits;info;canvasContext;lost;_resolveContextLost;gl;debug=!1;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};_extensions={};_polyfilled=!1;spectorJS;constructor(e){super({...e,id:e.id||rp("webgl-device")});const t=Kh._getCanvasContextProps(e);if(!t)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let n=t.canvas?.gl?.device;if(n)throw new Error(`WebGL context already attached to device ${n.id}`);this.canvasContext=new Gf(this,t),this.lost=new Promise((e=>{this._resolveContextLost=e}));const r={...e.webgl};"premultiplied"===t.alphaMode&&(r.premultipliedAlpha=!0),void 0!==e.powerPreference&&(r.powerPreference=e.powerPreference);const i=this.props._handle||function(e,t,n){let r="";const i={preserveDrawingBuffer:!0,...n};let o=null;if(o||=e.getContext("webgl2",i),i.failIfMajorPerformanceCaveat&&(r||="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow."),o||n.failIfMajorPerformanceCaveat||(i.failIfMajorPerformanceCaveat=!1,o=e.getContext("webgl2",i),o.luma||={},o.luma.softwareRenderer=!0),o||(o=e.getContext("webgl",{}),o&&(o=null,r||="Your browser only supports WebGL1")),!o)throw r||="Your browser does not support WebGL",new Error(`Failed to create WebGL context: ${r}`);const{onContextLost:s,onContextRestored:a}=t;return e.addEventListener("webglcontextlost",(e=>s(e)),!1),e.addEventListener("webglcontextrestored",(e=>a(e)),!1),o.luma||={},o}(this.canvasContext.canvas,{onContextLost:e=>this._resolveContextLost?.({reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."}),onContextRestored:e=>console.log("WebGL context restored")},r);if(!i)throw new Error("WebGL context creation failed");if(n=i.device,n){if(e._reuseDevices)return xh.log(1,`Not creating a new Device, instead returning a reference to Device ${n.id} already attached to WebGL context`,n)(),n._reused=!0,n;throw new Error(`WebGL context already attached to device ${n.id}`)}this.handle=i,this.gl=i,this.spectorJS=function(e){if(!(e={...Kf,...e}).debugSpectorJS)return null;if(!Xf&&globalThis.SPECTOR&&!globalThis.luma?.spector){xh.probe(1,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:e}=globalThis.SPECTOR;Xf=new e,globalThis.luma&&(globalThis.luma.spector=Xf)}if(!Xf)return null;if(qf||(qf=!0,Xf.spyCanvases(),Xf?.onCaptureStarted.add((e=>xh.info("Spector capture started:",e)())),Xf?.onCapture.add((e=>{xh.info("Spector capture complete:",e)(),Xf?.getResultUI(),Xf?.resultView.display(),Xf?.resultView.addCapture(e)}))),e.gl){const t=e.gl,n=t.device;Xf?.startCapture(e.gl,500),t.device=n,new Promise((e=>setTimeout(e,2e3))).then((e=>{xh.info("Spector capture stopped after 2 seconds")(),Xf?.stopCapture()}))}return Xf}({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=Ef(this.gl,this._extensions),this.limits=new Bf(this.gl),this.features=new Df(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),!1!==t.autoResize&&this.canvasContext.resize();const o=new bf(this.gl,{log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xh.log(1,...t)()}});o.trackState(this.gl,{copyState:!1});const s=e.debugWebGL||e.debug,a=e.debugWebGL;s&&(this.gl=Qf(this.gl,{debugWebGL:s,traceWebGL:a}),xh.warn("WebGL debug mode activated. Performance reduced.")(),e.debugWebGL&&(xh.level=Math.max(xh.level,1)))}destroy(){this.props._reuseDevices||this._reused||delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(e){throw new Error("WebGL only supports a single canvas")}createBuffer(e){const t=this._normalizeBufferProps(e);return new ip(this,t)}createTexture(e){return new Op(this,e)}createExternalTexture(e){throw new Error("createExternalTexture() not implemented")}createSampler(e){return new Ep(this,e)}createShader(e){return new dp(this,e)}createFramebuffer(e){return new Wf(this,e)}createVertexArray(e){return new gg(this,e)}createTransformFeedback(e){return new yg(this,e)}createQuerySet(e){return new _g(this,e)}createRenderPipeline(e){return new Yp(this,e)}beginRenderPass(e){return new Dp(this,e)}createComputePipeline(e){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(e){throw new Error("ComputePass not supported in WebGL")}renderPass=null;createCommandEncoder(){return new og(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}submit(){this.renderPass?.end(),this.renderPass=null}readPixelsToArrayWebGL(e,t){return Ip(e,t)}readPixelsToBufferWebGL(e,t){return function(e,t){const{target:n,sourceX:r=0,sourceY:i=0,sourceFormat:o=6408,targetByteOffset:s=0}=t||{};let{sourceWidth:a,sourceHeight:l,sourceType:c}=t||{};const{framebuffer:u,deleteFramebuffer:d}=Lp(e);a=a||u.width,l=l||u.height;const h=u;c=c||5121;let f=n;if(!f){const e=s+a*l*Ap(o)*function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}(c);f=h.device.createBuffer({byteLength:e})}const p=e.device.createCommandEncoder();return p.copyTextureToBuffer({sourceTexture:e,width:a,height:l,origin:[r,i],destinationBuffer:f,byteOffset:s}),p.destroy(),d&&u.destroy(),f}(e,t)}setParametersWebGL(e){mf(this.gl,e)}getParametersWebGL(e){return yf(this.gl,e)}withParametersWebGL(e,t){return Cp(this.gl,e,t)}resetWebGL(){xh.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),mf(this.gl,tf)}_getDeviceSpecificTextureFormatCapabilities(e){return function(e,t,n){let r=t.create;const i=Mf[t.format];return void 0===i?.gl&&(r=!1),i?.x&&(r=r&&Boolean(wf(e,i.x,n))),{format:t.format,create:r&&t.create,render:r&&t.render,filter:r&&t.filter,blend:r&&t.blend,store:r&&t.store}}(this.gl,e,this._extensions)}loseDevice(){let e=!1;const t=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return t&&(e=!0,t.loseContext()),this._resolveContextLost?.({reason:"destroyed",message:"Application triggered context loss"}),e}pushState(){bf.get(this.gl).push()}popState(){bf.get(this.gl).pop()}setSpectorMetadata(e,t){e.__SPECTOR_Metadata=t}getGLKey(e,t){const n=Number(e);for(const r in this.gl)if(this.gl[r]===n)return`GL.${r}`;return t?.emptyIfUnknown?"":String(e)}getGLKeys(e){const t={emptyIfUnknown:!0};return Object.entries(e).reduce(((e,n)=>{let[r,i]=n;return e[`${r}:${this.getGLKey(r,t)}`]=`${i}:${this.getGLKey(i,t)}`,e}),{})}_constants;setConstantAttributeWebGL(e,t){const n=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(n).fill(null);const r=this._constants[e];switch(r&&function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(r,t)&&xh.info(1,`setConstantAttributeWebGL(${e}) could have been skipped, value unchanged`)(),this._constants[e]=t,t.constructor){case Float32Array:!function(e,t,n){switch(n.length){case 1:e.gl.vertexAttrib1fv(t,n);break;case 2:e.gl.vertexAttrib2fv(t,n);break;case 3:e.gl.vertexAttrib3fv(t,n);break;case 4:e.gl.vertexAttrib4fv(t,n)}}(this,e,t);break;case Int32Array:!function(e,t,n){e.gl.vertexAttribI4iv(t,n)}(this,e,t);break;case Uint32Array:!function(e,t,n){e.gl.vertexAttribI4uiv(t,n)}(this,e,t);break;default:throw new Error("constant")}}getExtension(e){return wf(this.gl,e,this._extensions),this._extensions}}const wg={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},Eg=e=>({drawBuffersWEBGL:t=>e.drawBuffers(t),COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),Sg=e=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES:()=>e.createVertexArray(),deleteVertexArrayOES:t=>e.deleteVertexArray(t),isVertexArrayOES:t=>e.isVertexArray(t),bindVertexArrayOES:t=>e.bindVertexArray(t)}),Tg=e=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(){return e.drawArraysInstanced(...arguments)},drawElementsInstancedANGLE(){return e.drawElementsInstanced(...arguments)},vertexAttribDivisorANGLE(){return e.vertexAttribDivisor(...arguments)}});function Ag(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=HTMLCanvasElement.prototype;if(!e&&t.originalGetContext)return t.getContext=t.originalGetContext,void(t.originalGetContext=void 0);t.originalGetContext=t.getContext,t.getContext=function(e,t){if("webgl"===e||"experimental-webgl"===e){const e=this.originalGetContext("webgl2",t);return e instanceof HTMLElement&&function(e){e.getExtension("EXT_color_buffer_float");const t={...wg,WEBGL_disjoint_timer_query:e.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:Eg(e),OES_vertex_array_object:Sg(e),ANGLE_instanced_arrays:Tg(e)},n=e.getExtension;e.getExtension=function(r){const i=n.call(e,r);return i||(r in t?t[r]:null)};const r=e.getSupportedExtensions;e.getSupportedExtensions=function(){const n=r.apply(e)||[];return n?.concat(Object.keys(t))}}(e),e}return this.originalGetContext(e,t)}}const Cg=new class extends ef{type="webgl";constructor(){super(),Kh.defaultProps={...Kh.defaultProps,...Kf},xg.adapter=this}isSupported(){return"undefined"!==typeof WebGL2RenderingContext}enforceWebGL2(e){Ag(e)}async attach(e){if(e instanceof xg)return e;if(e?.device instanceof Kh)return e.device;if(!function(e){if("undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)return!0;return Boolean(e&&Number.isFinite(e._version))}(e))throw new Error("Invalid WebGL2RenderingContext");return new xg({_handle:e,createCanvasContext:{canvas:e.canvas,autoResize:!1}})}async create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xh.groupCollapsed(1,"WebGLDevice created")();const t=[];(e.debugWebGL||e.debug)&&t.push(async function(){co()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await Hf("https://unpkg.com/webgl-debug@2.0.1/index.js"))}()),e.debugSpectorJS&&t.push(async function(e){if(!globalThis.SPECTOR)try{await Hf(e.debugSpectorJSUrl||Kf.debugSpectorJSUrl)}catch(t){xh.warn(String(t))}}(e));const n=await Promise.allSettled(t);for(const o of n)"rejected"===o.status&&xh.error(`Failed to initialize debug libraries ${o.reason}`)();const r=new xg(e),i=`${r._reused?"Reusing":"Created"} device with WebGL2 ${r.debug?"debug ":""}context: ${r.info.vendor}, ${r.info.renderer} for canvas: ${r.canvasContext.id}`;return xh.probe(1,i)(),xh.table(1,r.info)(),xh.groupEnd(1)(),r}};let kg=0;const Pg={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:e=>console.error(e),stats:Jh.stats.get("animation-loop-"+kg++),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class Rg{device=null;canvas=null;props;animationProps=null;timeline=null;stats;cpuTime;gpuTime;frameRate;display;needsRedraw="initialized";_initialized=!1;_running=!1;_animationFrameId=null;_nextFramePromise=null;_resolveNextFrame=null;_cpuStartTime=0;_error=null;constructor(e){if(this.props={...Pg,...e},!(e=this.props).device)throw new Error("No device provided");const{useDevicePixels:t=!0}=this.props;this.stats=e.stats||new Bo({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:t}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){this.props.onError(e),this._error=Error();const t=this.device?.canvasContext?.canvas;if(t instanceof HTMLCanvasElement){const t=document.createElement("h1");t.innerHTML=e.message,t.style.position="absolute",t.style.top="20%",t.style.left="10px",t.style.color="black",t.style.backgroundColor="red",document.body.appendChild(t)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(!1!==e&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const t=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(t),t}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){return this.device?.isLost||this._error||(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers()),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((e=>{this._resolveNextFrame=e}))),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){var e;this._running&&(this._animationFrameId=(e=this._animationFrame.bind(this),"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)))}_cancelAnimationFrame(){var e;null!==this._animationFrameId&&(e=this._animationFrameId,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){this.display?this.display._renderFrame(e):(this.props.onRender(this._getAnimationProps()),this.device?.submit())}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){const e=this.device?.canvasContext?.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:t,aspect:n}=this._getSizeAndAspect();e===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=this.device.canvasContext?.canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(t);const n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}_getSizeAndAspect(){if(!this.device)return{width:1,height:1,aspect:1};const[e,t]=this.device?.canvasContext?.getPixelSize()||[1,1];let n=1;const r=this.device?.canvasContext?.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.props.autoResizeDrawingBuffer&&this.device?.canvasContext?.resize({useDevicePixels:this.props.useDevicePixels})}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}function Ig(){}const Lg={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:Ig,onWebGLInitialized:Ig,onResize:Ig,onViewStateChange:Ig,onInteractionStateChange:Ig,onBeforeRender:Ig,onAfterRender:Ig,onLoad:Ig,onError:e=>Po.error(e.message,e.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:e=>{let{isDragging:t}=e;return t?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class Mg{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Bo({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=e=>{const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e},this._onEvent=e=>{const t=Jc[e.type],n=e.offsetCenter;if(!t||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[t]||o.props[t]),a=this.props[t];let l=!1;s&&(l=s.call(o,i,e)),l||(a?.(i,e),this.widgetManager.onEvent(i,e))},this._onPointerDown=e=>{if("webgpu"===this.device?.type)return;const t=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:t.x,y:t.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo},this.props={...Lg,...e},(e=this.props).viewState&&e.initialViewState&&Po.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let t=this.device;!t&&e.gl&&(e.gl instanceof WebGLRenderingContext&&Po.error("WebGL1 context not supported.")(),t=Cg.attach(e.gl)),t||(t=Jh.createDevice({type:"best-available",_reuseDevices:!0,adapters:[Cg],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(t,e),this.setProps(e),e._typedArrayManagerProps&&ma.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop?.stop(),this.animationLoop?.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager?.finalize(),this.layerManager=null,this.viewManager?.finalize(),this.viewManager=null,this.effectManager?.finalize(),this.effectManager=null,this.deckRenderer?.finalize(),this.deckRenderer=null,this.deckPicker?.finalize(),this.deckPicker=null,this.eventManager?.destroy(),this.eventManager=null,this.widgetManager?.finalize(),this.widgetManager=null,this.props.canvas||this.props.device||this.props.gl||!this.canvas||(this.canvas.parentElement?.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Po.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Po.removed("onLayerClick","onClick")(),e.initialViewState&&!lu(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop?.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t),this.widgetManager.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return Eu(this.viewManager),this.viewManager.views}getViewports(e){return Eu(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){this.layerManager?.removeDefaultShaderModule(e)}_pick(e,t,n){Eu(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(t).timeEnd(),i}_createCanvas(e){let t=e.canvas;if("string"===typeof t&&(t=document.getElementById(t),Eu(t)),!t){t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay";(e.parent||document.body).appendChild(t)}return Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:n}=e;if(t||0===t){const e=Number.isFinite(t)?`${t}px`:t;this.canvas.style.width=e}if(n||0===n){const t=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=e.style?.position||"absolute",this.canvas.style.height=t}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth??e.width,n=e.clientHeight??e.height;t===this.width&&n===this.height||(this.width=t,this.height=n,this.viewManager?.setProps({width:t,height:n}),this.layerManager?.activateViewport(this.getViewports()[0]),this.props.onResize({width:t,height:n}))}_createAnimationLoop(e,t){const{gl:n,onError:r,useDevicePixels:i}=t;return new Rg({device:e,useDevicePixels:i,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:e=>this._setDevice(e.device),onRender:this._onRenderFrame.bind(this),onError:r})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,t=Array.isArray(e)?e:e?[e]:[new ju({id:"default-view"})];return t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){if("webgpu"===this.device?.type)return;const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:n}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=t.length>0;let r=n,i=!1;for(const o of t)r=o,i=o.layer?.onHover(o,e.event)||i;i||(this.props.onHover?.(r,e.event),this.widgetManager.onHover(r,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=this.device.canvasContext?.canvas),"webgl"===this.device.type&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),"webgl"===this.device.type&&this.props.onWebGLInitialized(this.device.gl);const t=new si;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Kc(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(eu).map((e=>{const[t,n,r,i]=eu[e],o=this.props.eventRecognizerOptions?.[e];return{recognizer:new t({...n,...o,event:e}),recognizeWith:r,requestFailure:i}})),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in Jc)this.eventManager.on(r,this._onEvent);this.viewManager=new cu({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new au(this.device,{deck:this,stats:this.stats,viewport:n,timeline:t}),this.effectManager=new Ld({deck:this,device:this.device}),this.deckRenderer=new Dd(this.device),this.deckPicker=new Vd(this.device),this.widgetManager=new Xd({deck:this,parentElement:this.canvas?.parentElement}),this.widgetManager.addDefault(new Kd),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{device:n,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:r});const i={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t};this.deckRenderer?.renderLayers(i),"screen"===i.pass&&this.widgetManager.onRedraw({viewports:i.viewports,layers:i.layers}),this.props.onAfterRender({device:n,gl:r})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Po.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),"webgpu"!==this.device?.type&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const n=Jh.stats.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}Mg.defaultProps=Lg,Mg.VERSION=bh;const Og=Mg,Ng="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;function Fg(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function Dg(e){const t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(t.constructor.name)}}function Bg(e){switch(e){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(e)}}function Ug(e,t,n){if(!t||t>4)throw new Error(`size ${t}`);const r=t;let i=Dg(e);if("uint8"===i&&n&&1===r)return"unorm8-webgl";if("uint8"===i&&n&&3===r)return"unorm8x3-webgl";if("uint8"===i||"sint8"===i){if(1===r||3===r)throw new Error(`size: ${t}`);return n&&(i=i.replace("int","norm")),`${i}x${r}`}if("uint16"===i||"sint16"===i){if(1===r||3===r)throw new Error(`size: ${t}`);return n&&(i=i.replace("int","norm")),`${i}x${r}`}return 1===r?i:`${i}x${r}`}const zg=Dg;function $g(e,t,n){const r="webgpu"===n&&"uint8"===t.type?"unorm8":t.type;return{attribute:e,format:t.size>1?`${r}x${t.size}`:t.type,byteOffset:t.offset||0}}function jg(e){return e.stride||e.size*e.bytesPerElement}function Vg(e,t){t.offset&&Po.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=jg(e),r=(void 0!==t.vertexOffset?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:n}}class Wg{constructor(e,t,n){this._buffer=null,this.device=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,i="float64"===r;let o,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),o=i?"float32":!r&&t.isIndexed?"uint32":r||"float32";let a=function(e){switch(e){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return Bg(e)}}(r||o);this.doublePrecision=i,i&&!1===t.fp64&&(a=Float32Array),this.value=null,this.settings={...t,defaultType:a,defaultValue:s,logicalType:r,type:o,normalized:o.includes("norm"),size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*jg(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ma.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={};if(this.state.constant){const r=this.value;if(t){const i=Vg(this.getAccessor(),t),o=i.offset/r.BYTES_PER_ELEMENT,s=i.size||this.size;n[e]=r.subarray(o,o+s)}else n[e]=r}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${e}64Low`]=n[e]:n[`${e}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getAccessor(),r=[],i={name:this.id,byteStride:jg(n),attributes:r};if(this.doublePrecision){const i=function(e,t){const n=Vg(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(n,t||{});r.push($g(e,{...n,...i.high},this.device.type),$g(`${e}64Low`,{...n,...i.low},this.device.type))}else if(t){const i=Vg(n,t);r.push($g(e,{...n,...i},this.device.type))}else r.push($g(e,n,this.device.type));return i}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:n,size:r}=this,i=n*r;if(t&&i&&t.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let e=0;e<i;)for(let i=0;i<r;i++){const r=t[e++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}e=[n,o]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let n;n=ArrayBuffer.isView(e)?{value:e}:e instanceof Th?{buffer:e}:e;const r={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type){if(this.doublePrecision&&n.value instanceof Float64Array)r.type="float32";else{const e=zg(n.value);r.type=r.normalized?e.replace("int","norm"):e}}r.bytesPerElement=n.value.BYTES_PER_ELEMENT,r.stride=jg(r)}if(t.bounds=null,n.constant){let e=n.value;e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this.normalizeConstant(e));if(!(!t.constant||!this._areValuesEqual(e,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=ArrayBuffer.isView(e)?e:new Float32Array(e)}else if(n.buffer){const e=n.buffer;t.externalBuffer=e,t.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let e=n.value;t.externalBuffer=null,t.constant=!1,this.value=e;let{buffer:i}=this;const o=jg(r),s=(r.vertexOffset||0)*o;if(this.doublePrecision&&e instanceof Float64Array&&(e=Ya(e,r)),this.settings.isIndexed){const t=this.settings.defaultType;e.constructor!==t&&(e=new t(e))}const a=e.byteLength+s+2*o;(!i||i.byteLength<a)&&(i=this._createBuffer(a)),i.write(e,s)}return this.setAccessor(r),!0}updateSubBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const t=this.value,{startOffset:n=0,endOffset:r}=e;this.buffer.write(this.doublePrecision&&t instanceof Float64Array?Ya(t,{size:this.size,startIndex:n,endIndex:r}):t.subarray(n,r),n*t.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,i=ma.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=i;const{byteOffset:o}=this;let{buffer:s}=this;return(!s||s.byteLength<i.byteLength+o)&&(s=this._createBuffer(i.byteLength+o),t&&r&&s.write(r instanceof Float64Array?Ya(r,this):r,o)),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error(`Attribute ${this.id} does not support ${t.constructor.name}`);t instanceof n||!this.settings.normalized||"normalized"in e||Po.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map((e=>(e+128)/255*2-1));case"snorm16":return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case"unorm8":return new Float32Array(e).map((e=>e/255));case"unorm16":return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e){let e=i;for(;--e>=0;)t[n+e]=r[e];return t}switch(i){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=i;for(;--o>=0;)t[n+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}_createBuffer(e){this._buffer&&this._buffer.destroy();const{isIndexed:t,type:n}=this.settings;return this._buffer=this.device.createBuffer({...this._buffer?.props,id:this.id,usage:(t?Th.INDEX:Th.VERTEX)|Th.COPY_DST,indexType:t?n:void 0,byteLength:e}),this._buffer}}const Gg=[],Hg=[];function Xg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=Gg;const i={index:-1,data:e,target:[]};return e?"function"===typeof e[Symbol.iterator]?r=e:e.length>0&&(Hg.length=e.length,r=Hg):r=Gg,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}function qg(e){return e&&e[Symbol.asyncIterator]}function Kg(e,t){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((e.length-c)/l);return(t,r)=>{let{index:i,target:a}=r;if(!o){const t=i*l+c;for(let r=0;r<n;r++)a[r]=e[t+r];return a}const d=o[i],h=o[i+1]||u;let f;if(s){f=new Array(h-d);for(let t=d;t<h;t++){const r=t*l+c;a=new Array(n);for(let t=0;t<n;t++)a[t]=e[r+t];f[t-d]=a}}else if(l===n)f=e.subarray(d*n+c,h*n+c);else{f=new e.constructor((h-d)*n);let t=0;for(let r=d;r<h;r++){const i=r*l+c;for(let r=0;r<n;r++)f[t++]=e[i+r]}}return f}}const Yg=[],Zg=[[0,1/0]];const Qg={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function Jg(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...Qg[n],...t,...e,type:n}}class em extends Wg{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Zg}),this.constant=!1,this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var t,n,r;(t=this.state).layoutChanged||(t.layoutChanged=(n=e,r=this.getAccessor(),!(n.type===r.type&&n.size===r.size&&jg(n)===jg(r)&&(n.offset||0)===(r.offset||0)))),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!==typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition,r=Array.isArray(t)?e[t.find((t=>e[t]))]:e[t];return Jg(r,n)}setNeedsUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===Zg)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],r=e.length;let i=0;for(let o=0;o<r;o++){const r=e[o];r[1]<t[0]?(n.push(r),i=o+1):r[0]>t[1]?n.push(r):t=[Math.min(r[0],t[0]),Math.max(r[1],t[1])]}return n.splice(i,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=Zg}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Yg}setNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(e,t.updateRanges!==Zg),!0))}updateBuffer(e){let{numInstances:t,data:n,props:r,context:i}=e;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[e,a]of o)s.call(i,this,{data:n,startRow:e,endRow:a,props:r,numInstances:t});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of o){const r=Number.isFinite(e)?this.getVertexOffset(e):0,i=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){if("webgpu"===this.device.type||void 0===e||"function"===typeof e)return!1;return this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw();if(r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const i=e;Eu(ArrayBuffer.isView(i.value),`invalid ${r.accessor}`);const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=Kg(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:t,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,t=super.getValue();if(!e)return t;for(const n in e)Object.assign(t,super.getValue(n,e[n]));return t}getBufferLayout(e){this.state.layoutChanged=!1;const t=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:r}=this.settings;if(n.stepMode="dynamic"===r?e?e.isInstanced?"instance":"vertex":"instance":r??"vertex",!t)return n;for(const i in t){const e=super._getBufferLayout(i,t[i]);n.attributes.push(...e.attributes)}return n}_autoUpdater(e,t){let{data:n,startRow:r,endRow:i,props:o,numInstances:s}=t;if(e.constant&&"webgpu"!==this.context.device.type)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=e,{accessor:h,transform:f}=a;let p=l.binaryAccessor||("function"===typeof h?h:o[h]);"function"!==typeof p&&(p=()=>p),Eu("function"===typeof p,`accessor "${h}" is not a function`);let g=e.getVertexOffset(r);const{iterable:m,objectInfo:y}=Xg(n,r,i);for(const v of m){y.index++;let t=p(v,y);if(f&&(t=f.call(this,t)),d){const n=(y.index<d.length-1?d[y.index+1]:s)-d[y.index];if(t&&Array.isArray(t[0])){let n=g;for(const r of t)e._normalizeValue(r,c,n),n+=u}else t&&t.length>u?c.set(t,g):(e._normalizeValue(t,y.target,0),No({target:c,source:y.target,start:g,count:n}));g+=n*u}else e._normalizeValue(t,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||"function"===typeof e.update))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function tm(e){const{input:t,inputChannels:n,output:r}=e||{};if(!t)return"#version 300 es\nout vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}";if(!n)throw new Error("inputChannels");return`#version 300 es\nin ${function(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${e}`)}}(n)} ${t};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${function(e,t){switch(t){case 1:return`vec4(${e}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${e}, 0.0, 1.0)`;case 3:return`vec4(${e}, 1.0)`;case 4:return e;default:throw new Error(`invalid channels: ${t}`)}}(t,n)};\n}`}class nm{bufferLayouts;constructor(e){this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find((t=>t.name===e))||null}getAttributeNamesForBuffer(e){return e.attributes?e.attributes?.map((e=>e.attribute)):[e.name]}mergeBufferLayouts(e,t){const n=[...e];for(const r of t){const e=n.findIndex((e=>e.name===r.name));e<0?n.push(r):n[e]=r}return n}}function rm(e){return Array.isArray(e)?0===e.length||"number"===typeof e[0]:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(e)}class im{name;uniforms={};modifiedUniforms={};modified=!0;bindingLayout={};needsRedraw="initialized";constructor(e){if(this.name=e?.name||"unnamed",e?.name&&e?.shaderLayout){const t=e?.shaderLayout.bindings?.find((t=>"uniform"===t.type&&t.name===e?.name));if(!t)throw new Error(e?.name);const n=t;for(const e of n.uniforms||[])this.bindingLayout[e.name]=e}}setUniforms(e){for(const[t,n]of Object.entries(e))this._setUniform(t,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${t}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,t){(function(e,t){if(e!==t)return!1;const n=e,r=t;if(!rm(n))return!1;if(rm(r)&&n.length===r.length)for(let i=0;i<n.length;++i)if(r[i]!==n[i])return!1;return!0})(this.uniforms[e],t)||(this.uniforms[e]=function(e){return rm(e)?e.slice():e}(t),this.modifiedUniforms[e]=!0,this.modified=!0)}}const om={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function sm(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}class am{layout={};byteLength;constructor(e){let t=0;for(const[r,i]of Object.entries(e)){const e=om[i],{type:n,components:o}=e;t=sm(t,o);const s=t;t+=o,this.layout[r]={type:n,size:o,offset:s}}t+=(4-t%4)%4;const n=4*t;this.byteLength=Math.max(n,1024)}getData(e){const t=pg(Math.max(this.byteLength,1024)),n={i32:new Int32Array(t),u32:new Uint32Array(t),f32:new Float32Array(t),f16:new Uint16Array(t)};for(const[r,i]of Object.entries(e)){const e=this.layout[r];if(!e){xh.warn(`Supplied uniform value ${r} not present in uniform block layout`)();continue}const{type:t,size:o,offset:s}=e,a=n[t];if(1===o){if("number"!==typeof i&&"boolean"!==typeof i){xh.warn(`Supplied value for single component uniform ${r} is not a number: ${i}`)();continue}a[s]=Number(i)}else{if(!rm(i)){xh.warn(`Supplied value for multi component / array uniform ${r} is not a numeric array: ${i}`)();continue}a.set(i,s)}}return new Uint8Array(t)}has(e){return Boolean(this.layout[e])}get(e){return this.layout[e]}}class lm{uniformBlocks=(()=>new Map)();uniformBufferLayouts=(()=>new Map)();uniformBuffers=(()=>new Map)();constructor(e){for(const[t,n]of Object.entries(e)){const e=t,r=new am(n.uniformTypes||{});this.uniformBufferLayouts.set(e,r);const i=new im({name:t});i.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(e,i)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(const[t,n]of Object.entries(e))this.uniformBlocks.get(t)?.setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e)?.byteLength||0}getUniformBufferData(e){const t=this.uniformBlocks.get(e)?.getAllUniforms()||{};return this.uniformBufferLayouts.get(e)?.getData(t)}createUniformBuffer(e,t,n){n&&this.setUniforms(n);const r=this.getUniformBufferByteLength(t),i=e.createBuffer({usage:Th.UNIFORM|Th.COPY_DST,byteLength:r}),o=this.getUniformBufferData(t);return i.write(o),i}getManagedUniformBuffer(e,t){if(!this.uniformBuffers.get(t)){const n=this.getUniformBufferByteLength(t),r=e.createBuffer({usage:Th.UNIFORM|Th.COPY_DST,byteLength:n});this.uniformBuffers.set(t,r)}return this.uniformBuffers.get(t)}updateUniformBuffers(){let e=!1;for(const t of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(t);e||=n}return e&&xh.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){const t=this.uniformBlocks.get(e);let n=this.uniformBuffers.get(e),r=!1;if(n&&t?.needsRedraw){r||=t.needsRedraw;const i=this.getUniformBufferData(e);n=this.uniformBuffers.get(e),n?.write(i);const o=this.uniformBlocks.get(e)?.getAllUniforms();xh.log(4,`Writing to uniform buffer ${String(e)}`,i,o)()}return r}}class cm{constructor(e,t){this.name=e,this.attributes=t,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}getTypeName(){return this.name}}class um{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class dm extends cm{constructor(e,t){super(e,t),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class hm extends cm{constructor(e,t){super(e,t),this.count=0,this.stride=0}get isArray(){return!0}}class fm extends cm{constructor(e,t,n,r){super(e,n),this.format=t,this.access=r}get isTemplate(){return!0}getTypeName(){let e=this.name;if(null!==this.format){if("vec2"===e||"vec3"===e||"vec4"===e||"mat2x2"===e||"mat2x3"===e||"mat2x4"===e||"mat3x2"===e||"mat3x3"===e||"mat3x4"===e||"mat4x2"===e||"mat4x3"===e||"mat4x4"===e){if("f32"===this.format.name)return e+="f",e;if("i32"===this.format.name)return e+="i",e;if("u32"===this.format.name)return e+="u",e;if("bool"===this.format.name)return e+="b",e;if("f16"===this.format.name)return e+="h",e}e+=`<${this.format.name}>`}else if("vec2"===e||"vec3"===e||"vec4"===e)return e;return e}}var pm;(e=>{e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"})(pm||(pm={}));class gm{constructor(e,t,n,r,i,o,s){this.name=e,this.type=t,this.group=n,this.binding=r,this.attributes=i,this.resourceType=o,this.access=s}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class mm{constructor(e,t){this.name=e,this.type=t}}class ym{constructor(e,t,n,r){this.name=e,this.type=t,this.locationType=n,this.location=r,this.interpolation=null}}class vm{constructor(e,t,n,r){this.name=e,this.type=t,this.locationType=n,this.location=r}}class bm{constructor(e,t,n,r){this.name=e,this.type=t,this.attributes=n,this.id=r}}class _m{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n}}class xm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=t,this.attributes=n}}class wm{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}const Em=new Float32Array(1),Sm=new Int32Array(Em.buffer),Tm=new Uint16Array(1);function Am(e){Em[0]=e;const t=Sm[0],n=t>>31&1;let r=t>>23&255,i=8388607&t;if(255===r)return Tm[0]=n<<15|31744|(0!==i?512:0),Tm[0];if(0===r){if(0===i)return Tm[0]=n<<15,Tm[0];i|=8388608;let e=113;for(;!(8388608&i);)i<<=1,e--;return r=127-e,i&=8388607,r>0?(i=(i>>126-r)+(i>>127-r&1),Tm[0]=n<<15|r<<10|i>>13,Tm[0]):(Tm[0]=n<<15,Tm[0])}return r=r-127+15,r>=31?(Tm[0]=n<<15|31744,Tm[0]):r<=0?r<-10?(Tm[0]=n<<15,Tm[0]):(i=(8388608|i)>>1-r,Tm[0]=n<<15|i>>13,Tm[0]):(i>>=13,Tm[0]=n<<15|r<<10|i,Tm[0])}const Cm=new Uint32Array(1),km=new Float32Array(Cm.buffer,0,1);function Pm(e){const t=112+(e>>6&31)<<23|(63&e)<<17;return Cm[0]=t,km[0]}function Rm(e,t,n,r){const i=[0,0,0,0];for(let c=0;c<r;++c)switch(n){case"8unorm":i[c]=e[t]/255,t++;break;case"8snorm":i[c]=e[t]/255*2-1,t++;break;case"8uint":i[c]=e[t],t++;break;case"8sint":i[c]=e[t]-127,t++;break;case"16uint":i[c]=e[t]|e[t+1]<<8,t+=2;break;case"16sint":i[c]=(e[t]|e[t+1]<<8)-32768,t+=2;break;case"16float":i[c]=(void 0,void 0,void 0,s=(32768&(o=e[t]|e[t+1]<<8))>>15,l=1023&o,0==(a=(31744&o)>>10)?(s?-1:1)*Math.pow(2,-14)*(l/Math.pow(2,10)):31==a?l?NaN:1/0*(s?-1:1):(s?-1:1)*Math.pow(2,a-15)*(1+l/Math.pow(2,10))),t+=2;break;case"32uint":case"32sint":i[c]=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,t+=4;break;case"32float":i[c]=new Float32Array(e.buffer,t,1)[0],t+=4}var o,s,a,l;return i}function Im(e,t,n,r,i){for(let o=0;o<r;++o)switch(n){case"8unorm":e[t]=255*i[o],t++;break;case"8snorm":e[t]=.5*(i[o]+1)*255,t++;break;case"8uint":e[t]=i[o],t++;break;case"8sint":e[t]=i[o]+127,t++;break;case"16uint":new Uint16Array(e.buffer,t,1)[0]=i[o],t+=2;break;case"16sint":new Int16Array(e.buffer,t,1)[0]=i[o],t+=2;break;case"16float":{const n=Am(i[o]);new Uint16Array(e.buffer,t,1)[0]=n,t+=2;break}case"32uint":new Uint32Array(e.buffer,t,1)[0]=i[o],t+=4;break;case"32sint":new Int32Array(e.buffer,t,1)[0]=i[o],t+=4;break;case"32float":new Float32Array(e.buffer,t,1)[0]=i[o],t+=4}return i}const Lm={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class Mm{constructor(){this.id=Mm._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,t){if(e){t(Om.instance);for(const n of e)n instanceof Array?this.searchBlock(n,t):n.search(t);t(Nm.instance)}}constEvaluate(e,t){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}Mm._id=0;class Om extends Mm{}Om.instance=new Om;class Nm extends Mm{}Nm.instance=new Nm;const Fm=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class Dm extends Mm{constructor(){super()}}class Bm extends Dm{constructor(e,t,n,r,i,o){super(),this.calls=new Set,this.name=e,this.args=t,this.returnType=n,this.body=r,this.startLine=i,this.endLine=o}get astNodeType(){return"function"}search(e){if(this.attributes)for(const t of this.attributes)e(t);e(this);for(const t of this.args)e(t);this.searchBlock(this.body,e)}}class Um extends Dm{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class zm extends Dm{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class $m extends Dm{constructor(e,t){super(),this.body=e,this.loopId=t}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class jm extends Dm{constructor(e,t,n,r){super(),this.init=e,this.condition=t,this.increment=n,this.body=r}get astNodeType(){return"for"}search(e){var t,n,r;null===(t=this.init)||void 0===t||t.search(e),null===(n=this.condition)||void 0===n||n.search(e),null===(r=this.increment)||void 0===r||r.search(e),this.searchBlock(this.body,e)}}class Vm extends Dm{constructor(e,t,n,r,i){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=r,this.value=i}get astNodeType(){return"var"}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}class Wm extends Dm{constructor(e,t,n){super(),this.attributes=null,this.name=e,this.type=t,this.value=n}get astNodeType(){return"override"}search(e){var t;null===(t=this.value)||void 0===t||t.search(e)}}class Gm extends Dm{constructor(e,t,n,r,i){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=r,this.value=i}get astNodeType(){return"let"}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}class Hm extends Dm{constructor(e,t,n,r,i){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=r,this.value=i}get astNodeType(){return"const"}constEvaluate(e,t){return this.value.constEvaluate(e,t)}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}var Xm,qm,Km,Ym;(e=>{e.increment="++",e.decrement="--"})(Xm||(Xm={})),(e=>{e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for IncrementOperator");return e[n]}})(Xm||(Xm={}));class Zm extends Dm{constructor(e,t){super(),this.operator=e,this.variable=t}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}(e=>{e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="})(qm||(qm={})),(e=>{e.parse=function(e){const t=e;if("parse"==t)throw new Error("Invalid value for AssignOperator");return t}})(qm||(qm={}));class Qm extends Dm{constructor(e,t,n){super(),this.operator=e,this.variable=t,this.value=n}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class Jm extends Dm{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"call"}isBuiltin(){return Fm.has(this.name)}search(e){for(const t of this.args)t.search(e);e(this)}}class ey extends Dm{constructor(e,t){super(),this.body=e,this.continuing=t}get astNodeType(){return"loop"}}class ty extends Dm{constructor(e,t){super(),this.condition=e,this.cases=t}get astNodeType(){return"switch"}}class ny extends Dm{constructor(e,t,n,r){super(),this.condition=e,this.body=t,this.elseif=n,this.else=r}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class ry extends Dm{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var t;null===(t=this.value)||void 0===t||t.search(e)}}class iy extends Dm{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class oy extends Dm{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class sy extends Dm{constructor(e,t){super(),this.severity=e,this.rule=t}get astNodeType(){return"diagnostic"}}class ay extends Dm{constructor(e,t){super(),this.name=e,this.type=t}get astNodeType(){return"alias"}}class ly extends Dm{constructor(){super()}get astNodeType(){return"discard"}}class cy extends Dm{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}class uy extends Dm{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}}class dy extends Dm{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let t=e[0];if("f32"===t.name)return t;for(let n=1;n<e.length;++n){const r=dy._priority.get(t.name);dy._priority.get(e[n].name)<r&&(t=e[n])}return"x32"===t.name?dy.i32:t}getTypeName(){return this.name}}dy.x32=new dy("x32"),dy.f32=new dy("f32"),dy.i32=new dy("i32"),dy.u32=new dy("u32"),dy.f16=new dy("f16"),dy.bool=new dy("bool"),dy.void=new dy("void"),dy._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class hy extends dy{constructor(e){super(e)}}class fy extends dy{constructor(e,t,n,r){super(e),this.members=t,this.startLine=n,this.endLine=r}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let t=0;t<this.members.length;t++)if(this.members[t].name==e)return t;return-1}search(e){for(const t of this.members)e(t)}}class py extends dy{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(null!==this.format){if("vec2"===e||"vec3"===e||"vec4"===e||"mat2x2"===e||"mat2x3"===e||"mat2x4"===e||"mat3x2"===e||"mat3x3"===e||"mat3x4"===e||"mat4x2"===e||"mat4x3"===e||"mat4x4"===e){if("f32"===this.format.name)return e+="f",e;if("i32"===this.format.name)return e+="i",e;if("u32"===this.format.name)return e+="u",e;if("bool"===this.format.name)return e+="b",e;if("f16"===this.format.name)return e+="h",e}e+=`<${this.format.name}>`}else if("vec2"===e||"vec3"===e||"vec4"===e)return e;return e}}py.vec2f=new py("vec2",dy.f32,null),py.vec3f=new py("vec3",dy.f32,null),py.vec4f=new py("vec4",dy.f32,null),py.vec2i=new py("vec2",dy.i32,null),py.vec3i=new py("vec3",dy.i32,null),py.vec4i=new py("vec4",dy.i32,null),py.vec2u=new py("vec2",dy.u32,null),py.vec3u=new py("vec3",dy.u32,null),py.vec4u=new py("vec4",dy.u32,null),py.vec2h=new py("vec2",dy.f16,null),py.vec3h=new py("vec3",dy.f16,null),py.vec4h=new py("vec4",dy.f16,null),py.vec2b=new py("vec2",dy.bool,null),py.vec3b=new py("vec3",dy.bool,null),py.vec4b=new py("vec4",dy.bool,null),py.mat2x2f=new py("mat2x2",dy.f32,null),py.mat2x3f=new py("mat2x3",dy.f32,null),py.mat2x4f=new py("mat2x4",dy.f32,null),py.mat3x2f=new py("mat3x2",dy.f32,null),py.mat3x3f=new py("mat3x3",dy.f32,null),py.mat3x4f=new py("mat3x4",dy.f32,null),py.mat4x2f=new py("mat4x2",dy.f32,null),py.mat4x3f=new py("mat4x3",dy.f32,null),py.mat4x4f=new py("mat4x4",dy.f32,null),py.mat2x2h=new py("mat2x2",dy.f16,null),py.mat2x3h=new py("mat2x3",dy.f16,null),py.mat2x4h=new py("mat2x4",dy.f16,null),py.mat3x2h=new py("mat3x2",dy.f16,null),py.mat3x3h=new py("mat3x3",dy.f16,null),py.mat3x4h=new py("mat3x4",dy.f16,null),py.mat4x2h=new py("mat4x2",dy.f16,null),py.mat4x3h=new py("mat4x3",dy.f16,null),py.mat4x4h=new py("mat4x4",dy.f16,null),py.mat2x2i=new py("mat2x2",dy.i32,null),py.mat2x3i=new py("mat2x3",dy.i32,null),py.mat2x4i=new py("mat2x4",dy.i32,null),py.mat3x2i=new py("mat3x2",dy.i32,null),py.mat3x3i=new py("mat3x3",dy.i32,null),py.mat3x4i=new py("mat3x4",dy.i32,null),py.mat4x2i=new py("mat4x2",dy.i32,null),py.mat4x3i=new py("mat4x3",dy.i32,null),py.mat4x4i=new py("mat4x4",dy.i32,null),py.mat2x2u=new py("mat2x2",dy.u32,null),py.mat2x3u=new py("mat2x3",dy.u32,null),py.mat2x4u=new py("mat2x4",dy.u32,null),py.mat3x2u=new py("mat3x2",dy.u32,null),py.mat3x3u=new py("mat3x3",dy.u32,null),py.mat3x4u=new py("mat3x4",dy.u32,null),py.mat4x2u=new py("mat4x2",dy.u32,null),py.mat4x3u=new py("mat4x3",dy.u32,null),py.mat4x4u=new py("mat4x4",dy.u32,null);class gy extends dy{constructor(e,t,n,r){super(e),this.storage=t,this.type=n,this.access=r}get astNodeType(){return"pointer"}}class my extends dy{constructor(e,t,n,r){super(e),this.attributes=t,this.format=n,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}}class yy extends dy{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"sampler"}}class vy extends Mm{constructor(){super(),this.postfix=null}}class by extends vy{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class _y extends vy{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const t of this.args)t.search(e)}constEvaluate(e,t){return t&&(t[0]=this.type),e.evalExpression(this,e.context)}}class xy extends vy{constructor(e,t){super(),this.cachedReturnValue=null,this.name=e,this.args=t}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return Fm.has(this.name)}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){for(const t of this.args)t.search(e);e(this)}}class wy extends vy{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,t){return e.evalExpression(this,e.context)}}class Ey extends vy{constructor(e,t){super(),this.name=e,this.initializer=t}get astNodeType(){return"constExpr"}constEvaluate(e,t){if(this.initializer){const t=e.evalExpression(this.initializer,e.context);return null!==t&&this.postfix?t.getSubData(e,this.postfix,e.context):t}return null}search(e){this.initializer.search(e)}}class Sy extends vy{constructor(e,t){super(),this.value=e,this.type=t}get astNodeType(){return"literalExpr"}constEvaluate(e,t){return void 0!==t&&(t[0]=this.type),this.value}get isScalar(){return this.value instanceof $y}get isVector(){return this.value instanceof Vy||this.value instanceof Wy}get scalarValue(){return this.value instanceof $y?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof Vy||this.value instanceof Wy?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class Ty extends vy{constructor(e,t){super(),this.type=e,this.value=t}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class Ay extends vy{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class Cy extends vy{constructor(){super()}}class ky extends Cy{constructor(e,t){super(),this.operator=e,this.right=t}get astNodeType(){return"unaryOp"}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class Py extends Cy{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}get astNodeType(){return"binaryOp"}_getPromotedType(e,t){return e.name===t.name?e:"f32"===e.name||"f32"===t.name?dy.f32:"u32"===e.name||"u32"===t.name?dy.u32:dy.i32}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class Ry extends Mm{constructor(e){super(),this.body=e}}class Iy extends vy{constructor(){super()}get astNodeType(){return"default"}}class Ly extends Ry{constructor(e,t){super(t),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class My extends Ry{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class Oy extends Mm{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"argument"}}class Ny extends Mm{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class Fy extends Mm{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"member"}}class Dy extends Mm{constructor(e,t){super(),this.name=e,this.value=t}get astNodeType(){return"attribute"}}class By{constructor(e,t){this.parent=null,this.typeInfo=e,this.parent=t,this.id=By._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,t,n,r){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,t,n){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.name}>`}}By._id=0;class Uy extends By{constructor(){super(new cm("void",null),null)}toString(){return"void"}}Uy.void=new Uy;class zy extends By{constructor(e){super(new cm("pointer",null),null),this.reference=e}clone(){return this}setDataValue(e,t,n,r){this.reference.setDataValue(e,t,n,r)}getSubData(e,t,n){return t?this.reference.getSubData(e,t,n):this}}class $y extends By{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:"x32"===this.typeInfo.name?e-Math.floor(e)!=0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):"i32"===this.typeInfo.name||"bool"===this.typeInfo.name?this.data=new Int32Array([e]):"u32"===this.typeInfo.name?this.data=new Uint32Array([e]):"f32"===this.typeInfo.name||"f16"===this.typeInfo.name?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",t)}clone(){if(this.data instanceof Float32Array)return new $y(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new $y(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new $y(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,t,n,r){if(n)return void console.error("SetDataValue: Scalar data does not support postfix",n);if(!(t instanceof $y))return void console.error("SetDataValue: Invalid value",t);let i=t.data[0];"i32"===this.typeInfo.name||"u32"===this.typeInfo.name?i=Math.floor(i):"bool"===this.typeInfo.name&&(i=i?1:0),this.data[0]=i}getSubData(e,t,n){return t?(console.error("getSubData: Scalar data does not support postfix",t),null):this}toString(){return`${this.value}`}}function jy(e,t,n){const r=t.length;return 2===r?"f32"===n?new Vy(new Float32Array(t),e.getTypeInfo("vec2f")):"i32"===n||"bool"===n?new Vy(new Int32Array(t),e.getTypeInfo("vec2i")):"u32"===n?new Vy(new Uint32Array(t),e.getTypeInfo("vec2u")):"f16"===n?new Vy(new Float32Array(t),e.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):3===r?"f32"===n?new Vy(new Float32Array(t),e.getTypeInfo("vec3f")):"i32"===n||"bool"===n?new Vy(new Int32Array(t),e.getTypeInfo("vec3i")):"u32"===n?new Vy(new Uint32Array(t),e.getTypeInfo("vec3u")):"f16"===n?new Vy(new Float32Array(t),e.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):4===r?"f32"===n?new Vy(new Float32Array(t),e.getTypeInfo("vec4f")):"i32"===n||"bool"===n?new Vy(new Int32Array(t),e.getTypeInfo("vec4i")):"u32"===n?new Vy(new Uint32Array(t),e.getTypeInfo("vec4u")):"f16"===n?new Vy(new Float32Array(t),e.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${t.length}`),null)}class Vy extends By{constructor(e,t){if(super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const t=this.typeInfo.name;"vec2f"===t||"vec3f"===t||"vec4f"===t?this.data=new Float32Array(e):"vec2i"===t||"vec3i"===t||"vec4i"===t?this.data=new Int32Array(e):"vec2u"===t||"vec3u"===t||"vec4u"===t?this.data=new Uint32Array(e):"vec2h"===t||"vec3h"===t||"vec4h"===t?this.data=new Float32Array(e):"vec2b"===t||"vec3b"===t||"vec4b"===t?this.data=new Int32Array(e):"vec2"===t||"vec3"===t||"vec4"===t?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${t}`)}}clone(){if(this.data instanceof Float32Array)return new Vy(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new Vy(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new Vy(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,t,n,r){n instanceof by?console.error("TODO: Set vector postfix"):t instanceof Vy?this.data=t.data:console.error("SetDataValue: Invalid value",t)}getSubData(e,t,n){if(null===t)return this;let r=e.getTypeInfo("f32");if(this.typeInfo instanceof fm)r=this.typeInfo.format||r;else{const t=this.typeInfo.name;"vec2f"===t||"vec3f"===t||"vec4f"===t?r=e.getTypeInfo("f32"):"vec2i"===t||"vec3i"===t||"vec4i"===t?r=e.getTypeInfo("i32"):"vec2b"===t||"vec3b"===t||"vec4b"===t?r=e.getTypeInfo("bool"):"vec2u"===t||"vec3u"===t||"vec4u"===t?r=e.getTypeInfo("u32"):"vec2h"===t||"vec3h"===t||"vec4h"===t?r=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${t}`)}let i=this;for(;null!==t&&null!==i;){if(t instanceof Ay){const o=t.index;let s=-1;if(o instanceof Sy){if(!(o.value instanceof $y))return console.error(`GetSubData: Invalid array index ${o.value}`),null;s=o.value.value}else{const t=e.evalExpression(o,n);if(!(t instanceof $y))return console.error("GetSubData: Unknown index type",o),null;s=t.value}if(s<0||s>=i.data.length)return console.error("GetSubData: Index out of range",s),null;if(i.data instanceof Float32Array){const e=new Float32Array(i.data.buffer,i.data.byteOffset+4*s,1);return new $y(e,r)}if(i.data instanceof Int32Array){const e=new Int32Array(i.data.buffer,i.data.byteOffset+4*s,1);return new $y(e,r)}if(i.data instanceof Uint32Array){const e=new Uint32Array(i.data.buffer,i.data.byteOffset+4*s,1);return new $y(e,r)}throw"GetSubData: Invalid data type"}if(!(t instanceof by))return console.error("GetSubData: Unknown postfix",t),null;{const n=t.value.toLowerCase();if(1===n.length){let e=0;if("x"===n||"r"===n)e=0;else if("y"===n||"g"===n)e=1;else if("z"===n||"b"===n)e=2;else{if("w"!==n&&"a"!==n)return console.error(`GetSubData: Unknown member ${n}`),null;e=3}if(this.data instanceof Float32Array){let t=new Float32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new $y(t,r,this)}if(this.data instanceof Int32Array){let t=new Int32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new $y(t,r,this)}if(this.data instanceof Uint32Array){let t=new Uint32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new $y(t,r,this)}}const o=[];for(const e of n)"x"===e||"r"===e?o.push(this.data[0]):"y"===e||"g"===e?o.push(this.data[1]):"z"===e||"b"===e?o.push(this.data[2]):"w"===e||"a"===e?o.push(this.data[3]):console.error(`GetDataValue: Unknown member ${e}`);i=jy(e,o,r.name)}t=t.postfix}return i}toString(){let e=`${this.data[0]}`;for(let t=1;t<this.data.length;++t)e+=`, ${this.data[t]}`;return e}}class Wy extends By{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new Wy(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,t,n,r){n instanceof by?console.error("TODO: Set matrix postfix"):t instanceof Wy?this.data=t.data:console.error("SetDataValue: Invalid value",t)}getSubData(e,t,n){if(null===t)return this;const r=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof fm)this.typeInfo.format;else if(r.endsWith("f"))e.getTypeInfo("f32");else if(r.endsWith("i"))e.getTypeInfo("i32");else if(r.endsWith("u"))e.getTypeInfo("u32");else{if(!r.endsWith("h"))return console.error(`GetDataValue: Unknown type ${r}`),null;e.getTypeInfo("f16")}if(t instanceof Ay){const i=t.index;let o=-1;if(i instanceof Sy){if(!(i.value instanceof $y))return console.error(`GetDataValue: Invalid array index ${i.value}`),null;o=i.value.value}else{const t=e.evalExpression(i,n);if(!(t instanceof $y))return console.error("GetDataValue: Unknown index type",i),null;o=t.value}if(o<0||o>=this.data.length)return console.error("GetDataValue: Index out of range",o),null;const s=r.endsWith("h")?"h":"f";let a;if("mat2x2"===r||"mat2x2f"===r||"mat2x2h"===r||"mat3x2"===r||"mat3x2f"===r||"mat3x2h"===r||"mat4x2"===r||"mat4x2f"===r||"mat4x2h"===r)a=new Vy(new Float32Array(this.data.buffer,this.data.byteOffset+2*o*4,2),e.getTypeInfo(`vec2${s}`));else if("mat2x3"===r||"mat2x3f"===r||"mat2x3h"===r||"mat3x3"===r||"mat3x3f"===r||"mat3x3h"===r||"mat4x3"===r||"mat4x3f"===r||"mat4x3h"===r)a=new Vy(new Float32Array(this.data.buffer,this.data.byteOffset+3*o*4,3),e.getTypeInfo(`vec3${s}`));else{if("mat2x4"!==r&&"mat2x4f"!==r&&"mat2x4h"!==r&&"mat3x4"!==r&&"mat3x4f"!==r&&"mat3x4h"!==r&&"mat4x4"!==r&&"mat4x4f"!==r&&"mat4x4h"!==r)return console.error(`GetDataValue: Unknown type ${r}`),null;a=new Vy(new Float32Array(this.data.buffer,this.data.byteOffset+4*o*4,4),e.getTypeInfo(`vec4${s}`))}return t.postfix?a.getSubData(e,t.postfix,n):a}return console.error("GetDataValue: Invalid postfix",t),null}toString(){let e=`${this.data[0]}`;for(let t=1;t<this.data.length;++t)e+=`, ${this.data[t]}`;return e}}class Gy extends By{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=n}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Gy(e.buffer,this.typeInfo,0,null)}setDataValue(e,t,n,r){if(null===t)return void console.log("setDataValue: NULL data.");let i=this.offset,o=this.typeInfo;for(;n;){if(n instanceof Ay)if(o instanceof hm){const t=n.index;if(t instanceof Sy){if(!(t.value instanceof $y))return void console.error(`SetDataValue: Invalid index type ${t.value}`);i+=t.value.value*o.stride}else{const n=e.evalExpression(t,r);if(!(n instanceof $y))return void console.error("SetDataValue: Unknown index type",t);i+=n.value*o.stride}o=o.format}else console.error(`SetDataValue: Type ${o.getTypeName()} is not an array`);else{if(!(n instanceof by))return void console.error("SetDataValue: Unknown postfix type",n);{const e=n.value;if(o instanceof dm){let t=!1;for(const n of o.members)if(n.name===e){i+=n.offset,o=n.type,t=!0;break}if(!t)return void console.error(`SetDataValue: Member ${e} not found`)}else if(o instanceof cm){const n=o.getTypeName();let r=0;if("x"===e||"r"===e)r=0;else if("y"===e||"g"===e)r=1;else if("z"===e||"b"===e)r=2;else{if("w"!==e&&"a"!==e)return void console.error(`SetDataValue: Unknown member ${e}`);r=3}if(!(t instanceof $y))return void console.error("SetDataValue: Invalid value",t);const s=t.value;return"vec2f"===n?void(new Float32Array(this.buffer,i,2)[r]=s):"vec3f"===n?void(new Float32Array(this.buffer,i,3)[r]=s):"vec4f"===n?void(new Float32Array(this.buffer,i,4)[r]=s):"vec2i"===n?void(new Int32Array(this.buffer,i,2)[r]=s):"vec3i"===n?void(new Int32Array(this.buffer,i,3)[r]=s):"vec4i"===n?void(new Int32Array(this.buffer,i,4)[r]=s):"vec2u"===n?void(new Uint32Array(this.buffer,i,2)[r]=s):"vec3u"===n?void(new Uint32Array(this.buffer,i,3)[r]=s):"vec4u"===n?void(new Uint32Array(this.buffer,i,4)[r]=s):void console.error(`SetDataValue: Type ${n} is not a struct`)}}}n=n.postfix}this.setData(e,t,o,i,r)}setData(e,t,n,r,i){const o=n.getTypeName();if("f32"!==o&&"f16"!==o)if("i32"!==o&&"atomic<i32>"!==o&&"x32"!==o)if("u32"!==o&&"atomic<u32>"!==o)if("bool"!==o)if("vec2f"!==o&&"vec2h"!==o)if("vec3f"!==o&&"vec3h"!==o)if("vec4f"!==o&&"vec4h"!==o)if("vec2i"!==o)if("vec3i"!==o)if("vec4i"!==o)if("vec2u"!==o)if("vec3u"!==o)if("vec4u"!==o)if("vec2b"!==o)if("vec3b"!==o)if("vec4b"!==o)if("mat2x2f"!==o&&"mat2x2h"!==o)if("mat2x3f"!==o&&"mat2x3h"!==o)if("mat2x4f"!==o&&"mat2x4h"!==o)if("mat3x2f"!==o&&"mat3x2h"!==o)if("mat3x3f"!==o&&"mat3x3h"!==o)if("mat3x4f"!==o&&"mat3x4h"!==o)if("mat4x2f"!==o&&"mat4x2h"!==o)if("mat4x3f"!==o&&"mat4x3h"!==o)if("mat4x4f"!==o&&"mat4x4h"!==o)if(t instanceof Gy){if(n===t.typeInfo)return void new Uint8Array(this.buffer,r,t.buffer.byteLength).set(new Uint8Array(t.buffer));console.error("SetDataValue: Type mismatch",o,t.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${o}`);else{const e=new Float32Array(this.buffer,r,16);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11],e[12]=t.data[12],e[13]=t.data[13],e[14]=t.data[14],e[15]=t.data[15]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}else{const e=new Float32Array(this.buffer,r,12);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11])}else{const e=new Float32Array(this.buffer,r,8);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7])}else{const e=new Float32Array(this.buffer,r,12);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11])}else{const e=new Float32Array(this.buffer,r,9);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8])}else{const e=new Float32Array(this.buffer,r,6);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5])}else{const e=new Float32Array(this.buffer,r,8);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7])}else{const e=new Float32Array(this.buffer,r,6);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5])}else{const e=new Float32Array(this.buffer,r,4);t instanceof Wy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3])}else{const e=new Uint32Array(this.buffer,r,4);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3])}else{const e=new Uint32Array(this.buffer,r,3);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2])}else{const e=new Uint32Array(this.buffer,r,2);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1])}else{const e=new Uint32Array(this.buffer,r,4);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3])}else{const e=new Uint32Array(this.buffer,r,3);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2])}else{const e=new Uint32Array(this.buffer,r,2);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1])}else{const e=new Int32Array(this.buffer,r,4);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3])}else{const e=new Int32Array(this.buffer,r,3);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2])}else{const e=new Int32Array(this.buffer,r,2);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1])}else{const e=new Float32Array(this.buffer,r,4);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3])}else{const e=new Float32Array(this.buffer,r,3);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2])}else{const e=new Float32Array(this.buffer,r,2);t instanceof Vy?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1])}else t instanceof $y&&(new Int32Array(this.buffer,r,1)[0]=t.value);else t instanceof $y&&(new Uint32Array(this.buffer,r,1)[0]=t.value);else t instanceof $y&&(new Int32Array(this.buffer,r,1)[0]=t.value);else t instanceof $y&&(new Float32Array(this.buffer,r,1)[0]=t.value)}getSubData(e,t,n){var r,i,o;if(null===t)return this;let s=this.offset,a=this.typeInfo;for(;t;){if(t instanceof Ay){const r=t.index,i=e.evalExpression(r,n);let o=0;if(i instanceof $y?o=i.value:console.error("GetDataValue: Invalid index type",r),a instanceof hm)s+=o*a.stride,a=a.format;else{const t=a.getTypeName();"mat4x4"===t||"mat4x4f"===t||"mat4x4h"===t?(s+=16*o,a=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${a.getTypeName()} is not an array`)}}else{if(!(t instanceof by))return console.error("GetDataValue: Unknown postfix type",t),null;{const n=t.value;if(a instanceof dm){let e=!1;for(const t of a.members)if(t.name===n){s+=t.offset,a=t.type,e=!0;break}if(!e)return console.error(`GetDataValue: Member ${n} not found`),null}else if(a instanceof cm){const t=a.getTypeName();if("vec2f"===t||"vec3f"===t||"vec4f"===t||"vec2i"===t||"vec3i"===t||"vec4i"===t||"vec2u"===t||"vec3u"===t||"vec4u"===t||"vec2b"===t||"vec3b"===t||"vec4b"===t||"vec2h"===t||"vec3h"===t||"vec4h"===t||"vec2"===t||"vec3"===t||"vec4"===t){if(n.length>0&&n.length<5){let r="f";const i=[];for(let o=0;o<n.length;++o){const a=n[o].toLowerCase();let l=0;if("x"===a||"r"===a)l=0;else if("y"===a||"g"===a)l=1;else if("z"===a||"b"===a)l=2;else{if("w"!==a&&"a"!==a)return console.error(`Unknown member ${n}`),null;l=3}if(1===n.length){if(t.endsWith("f"))return this.buffer.byteLength<s+4*l+4?(console.log("Insufficient buffer data"),null):new $y(new Float32Array(this.buffer,s+4*l,1),e.getTypeInfo("f32"),this);if(t.endsWith("h"))return new $y(new Float32Array(this.buffer,s+4*l,1),e.getTypeInfo("f16"),this);if(t.endsWith("i"))return new $y(new Int32Array(this.buffer,s+4*l,1),e.getTypeInfo("i32"),this);if(t.endsWith("b"))return new $y(new Int32Array(this.buffer,s+4*l,1),e.getTypeInfo("bool"),this);if(t.endsWith("u"))return new $y(new Uint32Array(this.buffer,s+4*l,1),e.getTypeInfo("i32"),this)}if("vec2f"===t)i.push(new Float32Array(this.buffer,s,2)[l]);else if("vec3f"===t){if(s+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const e=new Float32Array(this.buffer,s,3);i.push(e[l])}else if("vec4f"===t)i.push(new Float32Array(this.buffer,s,4)[l]);else if("vec2i"===t)r="i",i.push(new Int32Array(this.buffer,s,2)[l]);else if("vec3i"===t)r="i",i.push(new Int32Array(this.buffer,s,3)[l]);else if("vec4i"===t)r="i",i.push(new Int32Array(this.buffer,s,4)[l]);else if("vec2u"===t){r="u";const e=new Uint32Array(this.buffer,s,2);i.push(e[l])}else"vec3u"===t?(r="u",i.push(new Uint32Array(this.buffer,s,3)[l])):"vec4u"===t&&(r="u",i.push(new Uint32Array(this.buffer,s,4)[l]))}return 2===i.length?a=e.getTypeInfo(`vec2${r}`):3===i.length?a=e.getTypeInfo(`vec3${r}`):4===i.length?a=e.getTypeInfo(`vec4${r}`):console.error(`GetDataValue: Invalid vector length ${i.length}`),new Vy(i,a,null)}return console.error(`GetDataValue: Unknown member ${n}`),null}return console.error(`GetDataValue: Type ${t} is not a struct`),null}}}t=t.postfix}const l=a.getTypeName();return"f32"===l?new $y(new Float32Array(this.buffer,s,1),a,this):"i32"===l?new $y(new Int32Array(this.buffer,s,1),a,this):"u32"===l?new $y(new Uint32Array(this.buffer,s,1),a,this):"vec2f"===l?new Vy(new Float32Array(this.buffer,s,2),a,this):"vec3f"===l?new Vy(new Float32Array(this.buffer,s,3),a,this):"vec4f"===l?new Vy(new Float32Array(this.buffer,s,4),a,this):"vec2i"===l?new Vy(new Int32Array(this.buffer,s,2),a,this):"vec3i"===l?new Vy(new Int32Array(this.buffer,s,3),a,this):"vec4i"===l?new Vy(new Int32Array(this.buffer,s,4),a,this):"vec2u"===l?new Vy(new Uint32Array(this.buffer,s,2),a,this):"vec3u"===l?new Vy(new Uint32Array(this.buffer,s,3),a,this):"vec4u"===l?new Vy(new Uint32Array(this.buffer,s,4),a,this):a instanceof fm&&"atomic"===a.name?"u32"===(null===(r=a.format)||void 0===r?void 0:r.name)?new $y(new Uint32Array(this.buffer,s,1)[0],a.format,this):"i32"===(null===(i=a.format)||void 0===i?void 0:i.name)?new $y(new Int32Array(this.buffer,s,1)[0],a.format,this):(console.error(`GetDataValue: Invalid atomic format ${null===(o=a.format)||void 0===o?void 0:o.name}`),null):new Gy(this.buffer,a,s,this)}toString(){let e="";if(this.typeInfo instanceof hm)if("f32"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if("i32"===this.typeInfo.format.name){const t=new Int32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if("u32"===this.typeInfo.format.name){const t=new Uint32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if("vec2f"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}]`;for(let n=1;n<t.length/2;++n)e+=`, [${t[2*n]}, ${t[2*n+1]}]`}else if("vec3f"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}, ${t[2]}]`;for(let n=4;n<t.length;n+=4)e+=`, [${t[n]}, ${t[n+1]}, ${t[n+2]}]`}else if("vec4f"===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}, ${t[2]}, ${t[3]}]`;for(let n=4;n<t.length;n+=4)e+=`, [${t[n]}, ${t[n+1]}, ${t[n+2]}, ${t[n+3]}]`}else e="[...]";else this.typeInfo instanceof dm?e+="{...}":e="[...]";return e}}class Hy extends By{constructor(e,t,n,r){super(t,null),this.data=e,this.descriptor=n,this.view=r}clone(){return new Hy(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>0?null!==(e=n[0])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.width)&&void 0!==t?t:0}get height(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>1?null!==(e=n[1])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.height)&&void 0!==t?t:0}get depthOrArrayLayers(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>2?null!==(e=n[2])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.depthOrArrayLayers)&&void 0!==t?t:0}get format(){var e;return this.descriptor&&null!==(e=this.descriptor.format)&&void 0!==e?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&null!==(e=this.descriptor.sampleCount)&&void 0!==e?e:1}get mipLevelCount(){var e;return this.descriptor&&null!==(e=this.descriptor.mipLevelCount)&&void 0!==e?e:1}get dimension(){var e;return this.descriptor&&null!==(e=this.descriptor.dimension)&&void 0!==e?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const t=[this.width,this.height,this.depthOrArrayLayers];for(let n=0;n<t.length;++n)t[n]=Math.max(1,t[n]>>e);return t}get texelByteSize(){const e=this.format,t=Lm[e];return t?t.isDepthStencil?4:t.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,t=Lm[e];return!!t&&t.isDepthStencil}getGpuSize(){const e=this.format,t=Lm[e],n=this.width;if(!e||n<=0||!t)return-1;const r=this.height,i=this.depthOrArrayLayers,o=this.dimension;return n/t.blockWidth*("1d"===o?1:r/t.blockHeight)*t.bytesPerBlock*i}getPixel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=this.texelByteSize,o=this.bytesPerRow,s=this.height,a=this.data[r];return function(e,t,n,r,i,o,s,a,l){const c=r*(s>>=i)*(o>>=i)+n*s+t*a;switch(l){case"r8unorm":return[Rm(e,c,"8unorm",1)[0]];case"r8snorm":return[Rm(e,c,"8snorm",1)[0]];case"r8uint":return[Rm(e,c,"8uint",1)[0]];case"r8sint":return[Rm(e,c,"8sint",1)[0]];case"rg8unorm":{const t=Rm(e,c,"8unorm",2);return[t[0],t[1]]}case"rg8snorm":{const t=Rm(e,c,"8snorm",2);return[t[0],t[1]]}case"rg8uint":{const t=Rm(e,c,"8uint",2);return[t[0],t[1]]}case"rg8sint":{const t=Rm(e,c,"8sint",2);return[t[0],t[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const t=Rm(e,c,"8unorm",4);return[t[0],t[1],t[2],t[3]]}case"rgba8snorm":{const t=Rm(e,c,"8snorm",4);return[t[0],t[1],t[2],t[3]]}case"rgba8uint":{const t=Rm(e,c,"8uint",4);return[t[0],t[1],t[2],t[3]]}case"rgba8sint":{const t=Rm(e,c,"8sint",4);return[t[0],t[1],t[2],t[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const t=Rm(e,c,"8unorm",4);return[t[2],t[1],t[0],t[3]]}case"r16uint":return[Rm(e,c,"16uint",1)[0]];case"r16sint":return[Rm(e,c,"16sint",1)[0]];case"r16float":return[Rm(e,c,"16float",1)[0]];case"rg16uint":{const t=Rm(e,c,"16uint",2);return[t[0],t[1]]}case"rg16sint":{const t=Rm(e,c,"16sint",2);return[t[0],t[1]]}case"rg16float":{const t=Rm(e,c,"16float",2);return[t[0],t[1]]}case"rgba16uint":{const t=Rm(e,c,"16uint",4);return[t[0],t[1],t[2],t[3]]}case"rgba16sint":{const t=Rm(e,c,"16sint",4);return[t[0],t[1],t[2],t[3]]}case"rgba16float":{const t=Rm(e,c,"16float",4);return[t[0],t[1],t[2],t[3]]}case"r32uint":return[Rm(e,c,"32uint",1)[0]];case"r32sint":return[Rm(e,c,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[Rm(e,c,"32float",1)[0]];case"rg32uint":{const t=Rm(e,c,"32uint",2);return[t[0],t[1]]}case"rg32sint":{const t=Rm(e,c,"32sint",2);return[t[0],t[1]]}case"rg32float":{const t=Rm(e,c,"32float",2);return[t[0],t[1]]}case"rgba32uint":{const t=Rm(e,c,"32uint",4);return[t[0],t[1],t[2],t[3]]}case"rgba32sint":{const t=Rm(e,c,"32sint",4);return[t[0],t[1],t[2],t[3]]}case"rgba32float":{const t=Rm(e,c,"32float",4);return[t[0],t[1],t[2],t[3]]}case"rg11b10ufloat":{const t=new Uint32Array(e.buffer,c,1)[0],n=(4192256&t)>>11,r=(4290772992&t)>>22;return[Pm(2047&t),Pm(n),function(e){const t=112+(e>>5&31)<<23|(31&e)<<18;return Cm[0]=t,km[0]}(r),1]}}return null}(new Uint8Array(a),e,t,n,r,s,o,i,this.format)}setPixel(e,t,n,r,i){const o=this.texelByteSize,s=this.bytesPerRow,a=this.height,l=this.data[r];!function(e,t,n,r,i,o,s,a,l,c){const u=r*(s>>=i)*(o>>=i)+n*s+t*a;switch(l){case"r8unorm":return void Im(e,u,"8unorm",1,c);case"r8snorm":return void Im(e,u,"8snorm",1,c);case"r8uint":return void Im(e,u,"8uint",1,c);case"r8sint":return void Im(e,u,"8sint",1,c);case"rg8unorm":return void Im(e,u,"8unorm",2,c);case"rg8snorm":return void Im(e,u,"8snorm",2,c);case"rg8uint":return void Im(e,u,"8uint",2,c);case"rg8sint":return void Im(e,u,"8sint",2,c);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void Im(e,u,"8unorm",4,c);case"rgba8snorm":return void Im(e,u,"8snorm",4,c);case"rgba8uint":return void Im(e,u,"8uint",4,c);case"rgba8sint":return void Im(e,u,"8sint",4,c);case"r16uint":return void Im(e,u,"16uint",1,c);case"r16sint":return void Im(e,u,"16sint",1,c);case"r16float":return void Im(e,u,"16float",1,c);case"rg16uint":return void Im(e,u,"16uint",2,c);case"rg16sint":return void Im(e,u,"16sint",2,c);case"rg16float":return void Im(e,u,"16float",2,c);case"rgba16uint":return void Im(e,u,"16uint",4,c);case"rgba16sint":return void Im(e,u,"16sint",4,c);case"rgba16float":return void Im(e,u,"16float",4,c);case"r32uint":return void Im(e,u,"32uint",1,c);case"r32sint":return void Im(e,u,"32sint",1,c);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void Im(e,u,"32float",1,c);case"rg32uint":return void Im(e,u,"32uint",2,c);case"rg32sint":return void Im(e,u,"32sint",2,c);case"rg32float":return void Im(e,u,"32float",2,c);case"rgba32uint":return void Im(e,u,"32uint",4,c);case"rgba32sint":return void Im(e,u,"32sint",4,c);case"rgba32float":return void Im(e,u,"32float",4,c);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}}(new Uint8Array(l),e,t,n,r,a,s,o,this.format,i)}}(e=>{e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"})(Ym||(Ym={}));class Xy{constructor(e,t,n){this.name=e,this.type=t,this.rule=n}toString(){return this.name}}class qy{}Km=qy,qy.none=new Xy("",Ym.reserved,""),qy.eof=new Xy("EOF",Ym.token,""),qy.reserved={asm:new Xy("asm",Ym.reserved,"asm"),bf16:new Xy("bf16",Ym.reserved,"bf16"),do:new Xy("do",Ym.reserved,"do"),enum:new Xy("enum",Ym.reserved,"enum"),f16:new Xy("f16",Ym.reserved,"f16"),f64:new Xy("f64",Ym.reserved,"f64"),handle:new Xy("handle",Ym.reserved,"handle"),i8:new Xy("i8",Ym.reserved,"i8"),i16:new Xy("i16",Ym.reserved,"i16"),i64:new Xy("i64",Ym.reserved,"i64"),mat:new Xy("mat",Ym.reserved,"mat"),premerge:new Xy("premerge",Ym.reserved,"premerge"),regardless:new Xy("regardless",Ym.reserved,"regardless"),typedef:new Xy("typedef",Ym.reserved,"typedef"),u8:new Xy("u8",Ym.reserved,"u8"),u16:new Xy("u16",Ym.reserved,"u16"),u64:new Xy("u64",Ym.reserved,"u64"),unless:new Xy("unless",Ym.reserved,"unless"),using:new Xy("using",Ym.reserved,"using"),vec:new Xy("vec",Ym.reserved,"vec"),void:new Xy("void",Ym.reserved,"void")},qy.keywords={array:new Xy("array",Ym.keyword,"array"),atomic:new Xy("atomic",Ym.keyword,"atomic"),bool:new Xy("bool",Ym.keyword,"bool"),f32:new Xy("f32",Ym.keyword,"f32"),i32:new Xy("i32",Ym.keyword,"i32"),mat2x2:new Xy("mat2x2",Ym.keyword,"mat2x2"),mat2x3:new Xy("mat2x3",Ym.keyword,"mat2x3"),mat2x4:new Xy("mat2x4",Ym.keyword,"mat2x4"),mat3x2:new Xy("mat3x2",Ym.keyword,"mat3x2"),mat3x3:new Xy("mat3x3",Ym.keyword,"mat3x3"),mat3x4:new Xy("mat3x4",Ym.keyword,"mat3x4"),mat4x2:new Xy("mat4x2",Ym.keyword,"mat4x2"),mat4x3:new Xy("mat4x3",Ym.keyword,"mat4x3"),mat4x4:new Xy("mat4x4",Ym.keyword,"mat4x4"),ptr:new Xy("ptr",Ym.keyword,"ptr"),sampler:new Xy("sampler",Ym.keyword,"sampler"),sampler_comparison:new Xy("sampler_comparison",Ym.keyword,"sampler_comparison"),struct:new Xy("struct",Ym.keyword,"struct"),texture_1d:new Xy("texture_1d",Ym.keyword,"texture_1d"),texture_2d:new Xy("texture_2d",Ym.keyword,"texture_2d"),texture_2d_array:new Xy("texture_2d_array",Ym.keyword,"texture_2d_array"),texture_3d:new Xy("texture_3d",Ym.keyword,"texture_3d"),texture_cube:new Xy("texture_cube",Ym.keyword,"texture_cube"),texture_cube_array:new Xy("texture_cube_array",Ym.keyword,"texture_cube_array"),texture_multisampled_2d:new Xy("texture_multisampled_2d",Ym.keyword,"texture_multisampled_2d"),texture_storage_1d:new Xy("texture_storage_1d",Ym.keyword,"texture_storage_1d"),texture_storage_2d:new Xy("texture_storage_2d",Ym.keyword,"texture_storage_2d"),texture_storage_2d_array:new Xy("texture_storage_2d_array",Ym.keyword,"texture_storage_2d_array"),texture_storage_3d:new Xy("texture_storage_3d",Ym.keyword,"texture_storage_3d"),texture_depth_2d:new Xy("texture_depth_2d",Ym.keyword,"texture_depth_2d"),texture_depth_2d_array:new Xy("texture_depth_2d_array",Ym.keyword,"texture_depth_2d_array"),texture_depth_cube:new Xy("texture_depth_cube",Ym.keyword,"texture_depth_cube"),texture_depth_cube_array:new Xy("texture_depth_cube_array",Ym.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new Xy("texture_depth_multisampled_2d",Ym.keyword,"texture_depth_multisampled_2d"),texture_external:new Xy("texture_external",Ym.keyword,"texture_external"),u32:new Xy("u32",Ym.keyword,"u32"),vec2:new Xy("vec2",Ym.keyword,"vec2"),vec3:new Xy("vec3",Ym.keyword,"vec3"),vec4:new Xy("vec4",Ym.keyword,"vec4"),bitcast:new Xy("bitcast",Ym.keyword,"bitcast"),block:new Xy("block",Ym.keyword,"block"),break:new Xy("break",Ym.keyword,"break"),case:new Xy("case",Ym.keyword,"case"),continue:new Xy("continue",Ym.keyword,"continue"),continuing:new Xy("continuing",Ym.keyword,"continuing"),default:new Xy("default",Ym.keyword,"default"),diagnostic:new Xy("diagnostic",Ym.keyword,"diagnostic"),discard:new Xy("discard",Ym.keyword,"discard"),else:new Xy("else",Ym.keyword,"else"),enable:new Xy("enable",Ym.keyword,"enable"),fallthrough:new Xy("fallthrough",Ym.keyword,"fallthrough"),false:new Xy("false",Ym.keyword,"false"),fn:new Xy("fn",Ym.keyword,"fn"),for:new Xy("for",Ym.keyword,"for"),function:new Xy("function",Ym.keyword,"function"),if:new Xy("if",Ym.keyword,"if"),let:new Xy("let",Ym.keyword,"let"),const:new Xy("const",Ym.keyword,"const"),loop:new Xy("loop",Ym.keyword,"loop"),while:new Xy("while",Ym.keyword,"while"),private:new Xy("private",Ym.keyword,"private"),read:new Xy("read",Ym.keyword,"read"),read_write:new Xy("read_write",Ym.keyword,"read_write"),return:new Xy("return",Ym.keyword,"return"),requires:new Xy("requires",Ym.keyword,"requires"),storage:new Xy("storage",Ym.keyword,"storage"),switch:new Xy("switch",Ym.keyword,"switch"),true:new Xy("true",Ym.keyword,"true"),alias:new Xy("alias",Ym.keyword,"alias"),type:new Xy("type",Ym.keyword,"type"),uniform:new Xy("uniform",Ym.keyword,"uniform"),var:new Xy("var",Ym.keyword,"var"),override:new Xy("override",Ym.keyword,"override"),workgroup:new Xy("workgroup",Ym.keyword,"workgroup"),write:new Xy("write",Ym.keyword,"write"),r8unorm:new Xy("r8unorm",Ym.keyword,"r8unorm"),r8snorm:new Xy("r8snorm",Ym.keyword,"r8snorm"),r8uint:new Xy("r8uint",Ym.keyword,"r8uint"),r8sint:new Xy("r8sint",Ym.keyword,"r8sint"),r16uint:new Xy("r16uint",Ym.keyword,"r16uint"),r16sint:new Xy("r16sint",Ym.keyword,"r16sint"),r16float:new Xy("r16float",Ym.keyword,"r16float"),rg8unorm:new Xy("rg8unorm",Ym.keyword,"rg8unorm"),rg8snorm:new Xy("rg8snorm",Ym.keyword,"rg8snorm"),rg8uint:new Xy("rg8uint",Ym.keyword,"rg8uint"),rg8sint:new Xy("rg8sint",Ym.keyword,"rg8sint"),r32uint:new Xy("r32uint",Ym.keyword,"r32uint"),r32sint:new Xy("r32sint",Ym.keyword,"r32sint"),r32float:new Xy("r32float",Ym.keyword,"r32float"),rg16uint:new Xy("rg16uint",Ym.keyword,"rg16uint"),rg16sint:new Xy("rg16sint",Ym.keyword,"rg16sint"),rg16float:new Xy("rg16float",Ym.keyword,"rg16float"),rgba8unorm:new Xy("rgba8unorm",Ym.keyword,"rgba8unorm"),rgba8unorm_srgb:new Xy("rgba8unorm_srgb",Ym.keyword,"rgba8unorm_srgb"),rgba8snorm:new Xy("rgba8snorm",Ym.keyword,"rgba8snorm"),rgba8uint:new Xy("rgba8uint",Ym.keyword,"rgba8uint"),rgba8sint:new Xy("rgba8sint",Ym.keyword,"rgba8sint"),bgra8unorm:new Xy("bgra8unorm",Ym.keyword,"bgra8unorm"),bgra8unorm_srgb:new Xy("bgra8unorm_srgb",Ym.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new Xy("rgb10a2unorm",Ym.keyword,"rgb10a2unorm"),rg11b10float:new Xy("rg11b10float",Ym.keyword,"rg11b10float"),rg32uint:new Xy("rg32uint",Ym.keyword,"rg32uint"),rg32sint:new Xy("rg32sint",Ym.keyword,"rg32sint"),rg32float:new Xy("rg32float",Ym.keyword,"rg32float"),rgba16uint:new Xy("rgba16uint",Ym.keyword,"rgba16uint"),rgba16sint:new Xy("rgba16sint",Ym.keyword,"rgba16sint"),rgba16float:new Xy("rgba16float",Ym.keyword,"rgba16float"),rgba32uint:new Xy("rgba32uint",Ym.keyword,"rgba32uint"),rgba32sint:new Xy("rgba32sint",Ym.keyword,"rgba32sint"),rgba32float:new Xy("rgba32float",Ym.keyword,"rgba32float"),static_assert:new Xy("static_assert",Ym.keyword,"static_assert")},qy.tokens={decimal_float_literal:new Xy("decimal_float_literal",Ym.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new Xy("hex_float_literal",Ym.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new Xy("int_literal",Ym.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new Xy("uint_literal",Ym.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new Xy("name",Ym.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new Xy("ident",Ym.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new Xy("and",Ym.token,"&"),and_and:new Xy("and_and",Ym.token,"&&"),arrow:new Xy("arrow ",Ym.token,"->"),attr:new Xy("attr",Ym.token,"@"),forward_slash:new Xy("forward_slash",Ym.token,"/"),bang:new Xy("bang",Ym.token,"!"),bracket_left:new Xy("bracket_left",Ym.token,"["),bracket_right:new Xy("bracket_right",Ym.token,"]"),brace_left:new Xy("brace_left",Ym.token,"{"),brace_right:new Xy("brace_right",Ym.token,"}"),colon:new Xy("colon",Ym.token,":"),comma:new Xy("comma",Ym.token,","),equal:new Xy("equal",Ym.token,"="),equal_equal:new Xy("equal_equal",Ym.token,"=="),not_equal:new Xy("not_equal",Ym.token,"!="),greater_than:new Xy("greater_than",Ym.token,">"),greater_than_equal:new Xy("greater_than_equal",Ym.token,">="),shift_right:new Xy("shift_right",Ym.token,">>"),less_than:new Xy("less_than",Ym.token,"<"),less_than_equal:new Xy("less_than_equal",Ym.token,"<="),shift_left:new Xy("shift_left",Ym.token,"<<"),modulo:new Xy("modulo",Ym.token,"%"),minus:new Xy("minus",Ym.token,"-"),minus_minus:new Xy("minus_minus",Ym.token,"--"),period:new Xy("period",Ym.token,"."),plus:new Xy("plus",Ym.token,"+"),plus_plus:new Xy("plus_plus",Ym.token,"++"),or:new Xy("or",Ym.token,"|"),or_or:new Xy("or_or",Ym.token,"||"),paren_left:new Xy("paren_left",Ym.token,"("),paren_right:new Xy("paren_right",Ym.token,")"),semicolon:new Xy("semicolon",Ym.token,";"),star:new Xy("star",Ym.token,"*"),tilde:new Xy("tilde",Ym.token,"~"),underscore:new Xy("underscore",Ym.token,"_"),xor:new Xy("xor",Ym.token,"^"),plus_equal:new Xy("plus_equal",Ym.token,"+="),minus_equal:new Xy("minus_equal",Ym.token,"-="),times_equal:new Xy("times_equal",Ym.token,"*="),division_equal:new Xy("division_equal",Ym.token,"/="),modulo_equal:new Xy("modulo_equal",Ym.token,"%="),and_equal:new Xy("and_equal",Ym.token,"&="),or_equal:new Xy("or_equal",Ym.token,"|="),xor_equal:new Xy("xor_equal",Ym.token,"^="),shift_right_equal:new Xy("shift_right_equal",Ym.token,">>="),shift_left_equal:new Xy("shift_left_equal",Ym.token,"<<=")},qy.simpleTokens={"@":Km.tokens.attr,"{":Km.tokens.brace_left,"}":Km.tokens.brace_right,":":Km.tokens.colon,",":Km.tokens.comma,"(":Km.tokens.paren_left,")":Km.tokens.paren_right,";":Km.tokens.semicolon},qy.literalTokens={"&":Km.tokens.and,"&&":Km.tokens.and_and,"->":Km.tokens.arrow,"/":Km.tokens.forward_slash,"!":Km.tokens.bang,"[":Km.tokens.bracket_left,"]":Km.tokens.bracket_right,"=":Km.tokens.equal,"==":Km.tokens.equal_equal,"!=":Km.tokens.not_equal,">":Km.tokens.greater_than,">=":Km.tokens.greater_than_equal,">>":Km.tokens.shift_right,"<":Km.tokens.less_than,"<=":Km.tokens.less_than_equal,"<<":Km.tokens.shift_left,"%":Km.tokens.modulo,"-":Km.tokens.minus,"--":Km.tokens.minus_minus,".":Km.tokens.period,"+":Km.tokens.plus,"++":Km.tokens.plus_plus,"|":Km.tokens.or,"||":Km.tokens.or_or,"*":Km.tokens.star,"~":Km.tokens.tilde,_:Km.tokens.underscore,"^":Km.tokens.xor,"+=":Km.tokens.plus_equal,"-=":Km.tokens.minus_equal,"*=":Km.tokens.times_equal,"/=":Km.tokens.division_equal,"%=":Km.tokens.modulo_equal,"&=":Km.tokens.and_equal,"|=":Km.tokens.or_equal,"^=":Km.tokens.xor_equal,">>=":Km.tokens.shift_right_equal,"<<=":Km.tokens.shift_left_equal},qy.regexTokens={decimal_float_literal:Km.tokens.decimal_float_literal,hex_float_literal:Km.tokens.hex_float_literal,int_literal:Km.tokens.int_literal,uint_literal:Km.tokens.uint_literal,ident:Km.tokens.ident},qy.storage_class=[Km.keywords.function,Km.keywords.private,Km.keywords.workgroup,Km.keywords.uniform,Km.keywords.storage],qy.access_mode=[Km.keywords.read,Km.keywords.write,Km.keywords.read_write],qy.sampler_type=[Km.keywords.sampler,Km.keywords.sampler_comparison],qy.sampled_texture_type=[Km.keywords.texture_1d,Km.keywords.texture_2d,Km.keywords.texture_2d_array,Km.keywords.texture_3d,Km.keywords.texture_cube,Km.keywords.texture_cube_array],qy.multisampled_texture_type=[Km.keywords.texture_multisampled_2d],qy.storage_texture_type=[Km.keywords.texture_storage_1d,Km.keywords.texture_storage_2d,Km.keywords.texture_storage_2d_array,Km.keywords.texture_storage_3d],qy.depth_texture_type=[Km.keywords.texture_depth_2d,Km.keywords.texture_depth_2d_array,Km.keywords.texture_depth_cube,Km.keywords.texture_depth_cube_array,Km.keywords.texture_depth_multisampled_2d],qy.texture_external_type=[Km.keywords.texture_external],qy.any_texture_type=[...Km.sampled_texture_type,...Km.multisampled_texture_type,...Km.storage_texture_type,...Km.depth_texture_type,...Km.texture_external_type],qy.texel_format=[Km.keywords.r8unorm,Km.keywords.r8snorm,Km.keywords.r8uint,Km.keywords.r8sint,Km.keywords.r16uint,Km.keywords.r16sint,Km.keywords.r16float,Km.keywords.rg8unorm,Km.keywords.rg8snorm,Km.keywords.rg8uint,Km.keywords.rg8sint,Km.keywords.r32uint,Km.keywords.r32sint,Km.keywords.r32float,Km.keywords.rg16uint,Km.keywords.rg16sint,Km.keywords.rg16float,Km.keywords.rgba8unorm,Km.keywords.rgba8unorm_srgb,Km.keywords.rgba8snorm,Km.keywords.rgba8uint,Km.keywords.rgba8sint,Km.keywords.bgra8unorm,Km.keywords.bgra8unorm_srgb,Km.keywords.rgb10a2unorm,Km.keywords.rg11b10float,Km.keywords.rg32uint,Km.keywords.rg32sint,Km.keywords.rg32float,Km.keywords.rgba16uint,Km.keywords.rgba16sint,Km.keywords.rgba16float,Km.keywords.rgba32uint,Km.keywords.rgba32sint,Km.keywords.rgba32float],qy.const_literal=[Km.tokens.int_literal,Km.tokens.uint_literal,Km.tokens.decimal_float_literal,Km.tokens.hex_float_literal,Km.keywords.true,Km.keywords.false],qy.literal_or_ident=[Km.tokens.ident,Km.tokens.int_literal,Km.tokens.uint_literal,Km.tokens.decimal_float_literal,Km.tokens.hex_float_literal,Km.tokens.name],qy.element_count_expression=[Km.tokens.int_literal,Km.tokens.uint_literal,Km.tokens.ident],qy.template_types=[Km.keywords.vec2,Km.keywords.vec3,Km.keywords.vec4,Km.keywords.mat2x2,Km.keywords.mat2x3,Km.keywords.mat2x4,Km.keywords.mat3x2,Km.keywords.mat3x3,Km.keywords.mat3x4,Km.keywords.mat4x2,Km.keywords.mat4x3,Km.keywords.mat4x4,Km.keywords.atomic,Km.keywords.bitcast,...Km.any_texture_type],qy.attribute_name=[Km.tokens.ident,Km.keywords.block,Km.keywords.diagnostic],qy.assignment_operators=[Km.tokens.equal,Km.tokens.plus_equal,Km.tokens.minus_equal,Km.tokens.times_equal,Km.tokens.division_equal,Km.tokens.modulo_equal,Km.tokens.and_equal,Km.tokens.or_equal,Km.tokens.xor_equal,Km.tokens.shift_right_equal,Km.tokens.shift_left_equal],qy.increment_operators=[Km.tokens.plus_plus,Km.tokens.minus_minus];class Ky{constructor(e,t,n,r,i){this.type=e,this.lexeme=t,this.line=n,this.start=r,this.end=i}toString(){return this.lexeme}isTemplateType(){return-1!=qy.template_types.indexOf(this.type)}isArrayType(){return this.type==qy.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class Yy{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!=e?e:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new Ky(qy.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if("\n"==e)return this._line++,!0;if(this._isWhitespace(e))return!0;if("/"==e){if("/"==this._peekAhead()){for(;"\n"!=e;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let t=1;for(;t>0;){if(this._isAtEnd())return!0;if(e=this._advance(),"\n"==e)this._line++;else if("*"==e){if("/"==this._peekAhead()&&(this._advance(),t--,0==t))return!0}else"/"==e&&"*"==this._peekAhead()&&(this._advance(),t++)}return!0}}const t=qy.simpleTokens[e];if(t)return this._addToken(t),!0;let n=qy.none;const r=this._isAlpha(e),i="_"===e;if(this._isAlphaNumeric(e)){let t=this._peekAhead();for(;this._isAlphaNumeric(t);)e+=this._advance(),t=this._peekAhead()}if(r){const t=qy.keywords[e];if(t)return this._addToken(t),!0}if(r||i)return this._addToken(qy.tokens.ident),!0;for(;;){let t=this._findType(e);const r=this._peekAhead();if("-"==e&&this._tokens.length>0){if("="==r)return this._current++,e+=r,this._addToken(qy.tokens.minus_equal),!0;if("-"==r)return this._current++,e+=r,this._addToken(qy.tokens.minus_minus),!0;const n=this._tokens.length-1;if((-1!=qy.literal_or_ident.indexOf(this._tokens[n].type)||this._tokens[n].type==qy.tokens.paren_right)&&">"!=r)return this._addToken(t),!0}if(">"==e&&(">"==r||"="==r)){let e=!1,n=this._tokens.length-1;for(let t=0;t<5&&n>=0&&-1===qy.assignment_operators.indexOf(this._tokens[n].type);++t,--n)if(this._tokens[n].type===qy.tokens.less_than){n>0&&this._tokens[n-1].isArrayOrTemplateType()&&(e=!0);break}if(e)return this._addToken(t),!0}if(t===qy.none){let r=e,i=0;const o=2;for(let e=0;e<o;++e)if(r+=this._peekAhead(e),t=this._findType(r),t!==qy.none){i=e;break}if(t===qy.none)return n!==qy.none&&(this._current--,this._addToken(n),!0);e=r,this._current+=i+1}if(n=t,this._isAtEnd())break;e+=this._advance()}return n!==qy.none&&(this._addToken(n),!0)}_findType(e){for(const t in qy.regexTokens){const n=qy.regexTokens[t];if(this._match(e,n.rule))return n}return qy.literalTokens[e]||qy.none}_match(e,t){const n=t.exec(e);return n&&0==n.index&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&"_"!==e&&"."!==e&&"("!==e&&")"!==e&&"["!==e&&"]"!==e&&"{"!==e&&"}"!==e&&","!==e&&";"!==e&&":"!==e&&"="!==e&&"!"!==e&&"<"!==e&&">"!==e&&"+"!==e&&"-"!==e&&"*"!==e&&"/"!==e&&"%"!==e&&"&"!==e&&"|"!==e&&"^"!==e&&"~"!==e&&"@"!==e&&"#"!==e&&"?"!==e&&"'"!==e&&"`"!==e&&'"'!==e&&"\\"!==e&&"\n"!==e&&"\r"!==e&&"\t"!==e&&"\0"!==e}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||"_"===e}_isWhitespace(e){return" "==e||"\t"==e||"\r"==e}_advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._source[this._current];return e=e||0,e++,this._current+=e,t}_peekAhead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const t=this._source.substring(this._start,this._current);this._tokens.push(new Ky(e,t,this._line,this._start,this._current))}}function Zy(e){return Array.isArray(e)||(null==e?void 0:e.buffer)instanceof ArrayBuffer}const Qy=new Float32Array(1),Jy=new Uint32Array(Qy.buffer),ev=new Uint32Array(Qy.buffer),tv=new Int32Array(1),nv=new Float32Array(tv.buffer),rv=new Uint32Array(tv.buffer),iv=new Uint32Array(1),ov=new Float32Array(iv.buffer),sv=new Int32Array(iv.buffer);function av(e,t,n){if(t===n)return e;if("f32"===t){if("i32"===n||"x32"===n)return Qy[0]=e,Jy[0];if("u32"===n)return Qy[0]=e,ev[0]}else if("i32"===t||"x32"===t){if("f32"===n)return tv[0]=e,nv[0];if("u32"===n)return tv[0]=e,rv[0]}else if("u32"===t){if("f32"===n)return iv[0]=e,ov[0];if("i32"===n||"x32"===n)return iv[0]=e,sv[0]}return console.error(`Unsupported cast from ${t} to ${n}`),e}class lv{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class cv{constructor(e,t){this.align=e,this.size=t}}class uv{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new wm,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return"texture_storage_1d"==e.name||"texture_storage_2d"==e.name||"texture_storage_2d_array"==e.name||"texture_storage_3d"==e.name}updateAST(e){for(const t of e)t instanceof Bm&&this._functions.set(t.name,new lv(t));for(const t of e)if(t instanceof fy){const e=this.getTypeInfo(t,null);e instanceof dm&&this.structs.push(e)}for(const t of e)if(t instanceof ay)this.aliases.push(this._getAliasInfo(t));else if(t instanceof Wm){const e=t,n=this._getAttributeNum(e.attributes,"id",0),r=null!=e.type?this.getTypeInfo(e.type,e.attributes):null;this.overrides.push(new bm(e.name,r,e.attributes,n))}else if(this._isUniformVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this.getTypeInfo(e.type,e.attributes),o=new gm(e.name,i,n,r,e.attributes,pm.Uniform,e.access);o.access||(o.access="read"),this.uniforms.push(o)}else if(this._isStorageVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this.getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(i),s=new gm(e.name,i,n,r,e.attributes,o?pm.StorageTexture:pm.Storage,e.access);s.access||(s.access="read"),this.storage.push(s)}else if(this._isTextureVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this.getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(i),s=new gm(e.name,i,n,r,e.attributes,o?pm.StorageTexture:pm.Texture,e.access);s.access||(s.access="read"),o?this.storage.push(s):this.textures.push(s)}else if(this._isSamplerVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this.getTypeInfo(e.type,e.attributes),o=new gm(e.name,i,n,r,e.attributes,pm.Sampler,e.access);this.samplers.push(o)}else if(t instanceof Bm){const e=this._getAttribute(t,"vertex"),n=this._getAttribute(t,"fragment"),r=this._getAttribute(t,"compute"),i=e||n||r,o=new xm(t.name,null==i?void 0:i.name,t.attributes);o.attributes=t.attributes,o.startLine=t.startLine,o.endLine=t.endLine,this.functions.push(o),this._functions.get(t.name).info=o,i&&(this._functions.get(t.name).inUse=!0,o.inUse=!0,o.resources=this._findResources(t,!!i),o.inputs=this._getInputs(t.args),o.outputs=this._getOutputs(t.returnType),this.entry[i.name].push(o)),o.arguments=t.args.map((e=>new _m(e.name,this.getTypeInfo(e.type,e.attributes),e.attributes))),o.returnType=t.returnType?this.getTypeInfo(t.returnType,t.attributes):null}for(const t of this._functions.values())t.info&&(t.info.inUse=t.inUse,this._addCalls(t.node,t.info.calls));for(const t of this._functions.values())t.node.search((e=>{var n,r,i;if(e instanceof Dy){if(e.value)if(Zy(e.value))for(const o of e.value)for(const e of this.overrides)o===e.name&&(null===(n=t.info)||void 0===n||n.overrides.push(e));else for(const o of this.overrides)e.value===o.name&&(null===(r=t.info)||void 0===r||r.overrides.push(o))}else if(e instanceof wy)for(const o of this.overrides)e.name===o.name&&(null===(i=t.info)||void 0===i||i.overrides.push(o))}));for(const t of this.uniforms)this._markStructsInUse(t.type);for(const t of this.storage)this._markStructsInUse(t.type)}getStructInfo(e){for(const t of this.structs)if(t.name==e)return t;return null}getOverrideInfo(e){for(const t of this.overrides)if(t.name==e)return t;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const t of e.members)this._markStructsInUse(t.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const t=this._getAlias(e.name);t&&this._markStructsInUse(t)}}_addCalls(e,t){var n;for(const r of e.calls){const e=null===(n=this._functions.get(r.name))||void 0===n?void 0:n.info;e&&t.add(e)}}findResource(e,t,n){if(n){for(const r of this.entry.compute)if(r.name===n)for(const n of r.resources)if(n.group==e&&n.binding==t)return n;for(const r of this.entry.vertex)if(r.name===n)for(const n of r.resources)if(n.group==e&&n.binding==t)return n;for(const r of this.entry.fragment)if(r.name===n)for(const n of r.resources)if(n.group==e&&n.binding==t)return n}for(const r of this.uniforms)if(r.group==e&&r.binding==t)return r;for(const r of this.storage)if(r.group==e&&r.binding==t)return r;for(const r of this.textures)if(r.group==e&&r.binding==t)return r;for(const r of this.samplers)if(r.group==e&&r.binding==t)return r;return null}_findResource(e){for(const t of this.uniforms)if(t.name==e)return t;for(const t of this.storage)if(t.name==e)return t;for(const t of this.textures)if(t.name==e)return t;for(const t of this.samplers)if(t.name==e)return t;return null}_markStructsFromAST(e){const t=this.getTypeInfo(e,null);this._markStructsInUse(t)}_findResources(e,t){const n=[],r=this,i=[];return e.search((o=>{if(o instanceof Om)i.push({});else if(o instanceof Nm)i.pop();else if(o instanceof Vm){const e=o;t&&null!==e.type&&this._markStructsFromAST(e.type),i.length>0&&(i[i.length-1][e.name]=e)}else if(o instanceof _y){const e=o;t&&null!==e.type&&this._markStructsFromAST(e.type)}else if(o instanceof Gm){const e=o;t&&null!==e.type&&this._markStructsFromAST(e.type),i.length>0&&(i[i.length-1][e.name]=e)}else if(o instanceof wy){const e=o;if(i.length>0&&i[i.length-1][e.name])return;const t=r._findResource(e.name);t&&n.push(t)}else if(o instanceof xy){const i=o,s=r._functions.get(i.name);s&&(t&&(s.inUse=!0),e.calls.add(s.node),null===s.resources&&(s.resources=r._findResources(s.node,t)),n.push(...s.resources))}else if(o instanceof Jm){const i=o,s=r._functions.get(i.name);s&&(t&&(s.inUse=!0),e.calls.add(s.node),null===s.resources&&(s.resources=r._findResources(s.node,t)),n.push(...s.resources))}})),[...new Map(n.map((e=>[e.name,e]))).values()]}getBindGroups(){const e=[];function t(t,n){t>=e.length&&(e.length=t+1),void 0===e[t]&&(e[t]=[]),n>=e[t].length&&(e[t].length=n+1)}for(const n of this.uniforms)t(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.storage)t(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.textures)t(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.samplers)t(n.group,n.binding),e[n.group][n.binding]=n;return e}_getOutputs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===t&&(t=[]),e instanceof fy)this._getStructOutputs(e,t);else{const n=this._getOutputInfo(e);null!==n&&t.push(n)}return t}_getStructOutputs(e,t){for(const n of e.members)if(n.type instanceof fy)this._getStructOutputs(n.type,t);else{const e=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(null!==e){const r=this.getTypeInfo(n.type,n.type.attributes),i=this._parseInt(e.value),o=new vm(n.name,r,e.name,i);t.push(o)}}}_getOutputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this.getTypeInfo(e,e.attributes),r=this._parseInt(t.value);return new vm("",n,t.name,r)}return null}_getInputs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;void 0===t&&(t=[]);for(const n of e)if(n.type instanceof fy)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}return t}_getStructInputs(e,t){for(const n of e.members)if(n.type instanceof fy)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}}_getInputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getAttribute(e,"interpolation"),r=this.getTypeInfo(e.type,e.attributes),i=this._parseInt(t.value),o=new ym(e.name,r,t.name,i);return null!==n&&(o.interpolation=this._parseString(n.value)),o}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const t=parseInt(e);return isNaN(t)?e:t}_getAlias(e){for(const t of this.aliases)if(t.name==e)return t.type;return null}_getAliasInfo(e){return new mm(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const t of this.structs)if(t.name==e)return t;for(const t of this.aliases)if(t.name==e)return t.type;return null}getTypeInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._types.has(e))return this._types.get(e);if(e instanceof my){const n=e,r=n.format?this.getTypeInfo(n.format,n.attributes):null,i=new hm(n.name,t);return i.format=r,i.count=n.count,this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof fy){const n=e,r=new dm(n.name,t);r.startLine=n.startLine,r.endLine=n.endLine;for(const e of n.members){const t=this.getTypeInfo(e.type,e.attributes);r.members.push(new um(e.name,t,e.attributes))}return this._types.set(e,r),this._updateTypeInfo(r),r}if(e instanceof yy){const n=e,r=n.format instanceof dy,i=n.format?r?this.getTypeInfo(n.format,null):new cm(n.format,null):null,o=new fm(n.name,i,t,n.access);return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof py){const n=e,r=n.format?this.getTypeInfo(n.format,null):null,i=new fm(n.name,r,t,n.access);return this._types.set(e,i),this._updateTypeInfo(i),i}const n=new cm(e.name,t);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var t,n,r;const i=this._getTypeSize(e);if(e.size=null!==(t=null==i?void 0:i.size)&&void 0!==t?t:0,e instanceof hm&&e.format){const t=this._getTypeSize(e.format);e.stride=Math.max(null!==(n=null==t?void 0:t.size)&&void 0!==n?n:0,null!==(r=null==t?void 0:t.align)&&void 0!==r?r:0),this._updateTypeInfo(e.format)}e instanceof dm&&this._updateStructInfo(e)}_updateStructInfo(e){var t;let n=0,r=0,i=0,o=0;for(let s=0,a=e.members.length;s<a;++s){const a=e.members[s],l=this._getTypeSize(a);if(!l)continue;null!==(t=this._getAlias(a.type.name))&&void 0!==t||a.type;const c=l.align,u=l.size;n=this._roundUp(c,n+r),r=u,i=n,o=Math.max(o,c),a.offset=n,a.size=u,this._updateTypeInfo(a.type)}e.size=this._roundUp(o,i+r),e.align=o}_getTypeSize(e){var t,n;if(null==e)return null;const r=this._getAttributeNum(e.attributes,"size",0),i=this._getAttributeNum(e.attributes,"align",0);if(e instanceof um&&(e=e.type),e instanceof cm){const t=this._getAlias(e.name);null!==t&&(e=t)}{const n=uv._typeInfo[e.name];if(void 0!==n){const o="f16"===(null===(t=e.format)||void 0===t?void 0:t.name)?2:1;return new cv(Math.max(i,n.align/o),Math.max(r,n.size/o))}}{const t=uv._typeInfo[e.name.substring(0,e.name.length-1)];if(t){const n="h"===e.name[e.name.length-1]?2:1;return new cv(Math.max(i,t.align/n),Math.max(r,t.size/n))}}if(e instanceof hm){let t=e,o=8,s=8;const a=this._getTypeSize(t.format);return null!==a&&(s=a.size,o=a.align),s=t.count*this._getAttributeNum(null!==(n=null==e?void 0:e.attributes)&&void 0!==n?n:null,"stride",this._roundUp(o,s)),r&&(s=r),new cv(Math.max(i,o),Math.max(r,s))}if(e instanceof dm){let t=0,n=0,o=0,s=0,a=0;for(const r of e.members){const e=this._getTypeSize(r.type);null!==e&&(t=Math.max(e.align,t),o=this._roundUp(e.align,o+s),s=e.size,a=o)}return n=this._roundUp(t,a+s),new cv(Math.max(i,t),Math.max(r,n))}return null}_isUniformVar(e){return e instanceof Vm&&"uniform"==e.storage}_isStorageVar(e){return e instanceof Vm&&"storage"==e.storage}_isTextureVar(e){return e instanceof Vm&&null!==e.type&&-1!=uv._textureTypes.indexOf(e.type.name)}_isSamplerVar(e){return e instanceof Vm&&null!==e.type&&-1!=uv._samplerTypes.indexOf(e.type.name)}_getAttribute(e,t){const n=e;if(!n||!n.attributes)return null;const r=n.attributes;for(let i of r)if(i.name==t)return i;return null}_getAttributeNum(e,t,n){if(null===e)return n;for(let r of e)if(r.name==t){let e=null!==r&&null!==r.value?r.value:n;return e instanceof Array&&(e=e[0]),"number"==typeof e?e:"string"==typeof e?parseInt(e):n}return n}_roundUp(e,t){return Math.ceil(t/e)*e}}uv._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},uv._textureTypes=qy.any_texture_type.map((e=>e.name)),uv._samplerTypes=qy.sampler_type.map((e=>e.name));class dv{constructor(e,t,n){this.name=e,this.value=t,this.node=n}clone(){return new dv(this.name,this.value,this.node)}}class hv{constructor(e){this.name=e.name,this.node=e}clone(){return new hv(this.node)}}class fv{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var t;return this.variables.has(e)?null!==(t=this.variables.get(e))&&void 0!==t?t:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var t;return this.functions.has(e)?null!==(t=this.functions.get(e))&&void 0!==t?t:null:this.parent?this.parent.getFunction(e):null}createVariable(e,t,n){this.variables.set(e,new dv(e,t,null!=n?n:null))}setVariable(e,t,n){const r=this.getVariable(e);null!==r?r.value=t:this.createVariable(e,t,n)}getVariableValue(e){var t;const n=this.getVariable(e);return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:null}clone(){return new fv(this)}}class pv{evalExpression(e,t){return null}getTypeInfo(e){return null}getVariableName(e,t){return""}}class gv{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,t){const n=this.exec.evalExpression(e.args[0],t);let r=!0;if(n instanceof Vy)return n.data.forEach((e=>{e||(r=!1)})),new $y(r?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy){const e=n.data.some((e=>e));return new $y(e?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,t){const n=this.exec.evalExpression(e.args[2],t);if(!(n instanceof $y))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return n.value?this.exec.evalExpression(e.args[1],t):this.exec.evalExpression(e.args[0],t)}ArrayLength(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.evalExpression(n,t);if(r instanceof Gy&&0===r.typeInfo.size){const e=r.typeInfo,t=r.buffer.byteLength/e.stride;return new $y(t,this.getTypeInfo("u32"))}return new $y(r.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.abs(e))),n.typeInfo);const r=n;return new $y(Math.abs(r.value),r.typeInfo)}Acos(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.acos(e))),n.typeInfo);const r=n;return new $y(Math.acos(r.value),n.typeInfo)}Acosh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.acosh(e))),n.typeInfo);const r=n;return new $y(Math.acosh(r.value),n.typeInfo)}Asin(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.asin(e))),n.typeInfo);const r=n;return new $y(Math.asin(r.value),n.typeInfo)}Asinh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.asinh(e))),n.typeInfo);const r=n;return new $y(Math.asinh(r.value),n.typeInfo)}Atan(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.atan(e))),n.typeInfo);const r=n;return new $y(Math.atan(r.value),n.typeInfo)}Atanh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.atanh(e))),n.typeInfo);const r=n;return new $y(Math.atanh(r.value),n.typeInfo)}Atan2(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy)return new Vy(n.data.map(((e,t)=>Math.atan2(e,r.data[t]))),n.typeInfo);const i=n,o=r;return new $y(Math.atan2(i.value,o.value),n.typeInfo)}Ceil(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.ceil(e))),n.typeInfo);const r=n;return new $y(Math.ceil(r.value),n.typeInfo)}_clamp(e,t,n){return Math.min(Math.max(e,t),n)}Clamp(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if(n instanceof Vy&&r instanceof Vy&&i instanceof Vy)return new Vy(n.data.map(((e,t)=>this._clamp(e,r.data[t],i.data[t]))),n.typeInfo);const o=n,s=r,a=i;return new $y(this._clamp(o.value,s.value,a.value),n.typeInfo)}Cos(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.cos(e))),n.typeInfo);const r=n;return new $y(Math.cos(r.value),n.typeInfo)}Cosh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.cosh(e))),n.typeInfo);const r=n;return new $y(Math.cos(r.value),n.typeInfo)}CountLeadingZeros(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.clz32(e))),n.typeInfo);const r=n;return new $y(Math.clz32(r.value),n.typeInfo)}_countOneBits(e){let t=0;for(;0!==e;)1&e&&t++,e>>=1;return t}CountOneBits(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>this._countOneBits(e))),n.typeInfo);const r=n;return new $y(this._countOneBits(r.value),n.typeInfo)}_countTrailingZeros(e){if(0===e)return 32;let t=0;for(;!(1&e);)e>>=1,t++;return t}CountTrailingZeros(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>this._countTrailingZeros(e))),n.typeInfo);const r=n;return new $y(this._countTrailingZeros(r.value),n.typeInfo)}Cross(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy){if(3!==n.data.length||3!==r.data.length)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const t=n.data,i=r.data;return new Vy([t[1]*i[2]-i[1]*t[2],t[2]*i[0]-i[2]*t[0],t[0]*i[1]-i[0]*t[1]],n.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,t){const n=this.exec.evalExpression(e.args[0],t),r=180/Math.PI;return n instanceof Vy?new Vy(n.data.map((e=>e*r)),n.typeInfo):new $y(n.value*r,this.getTypeInfo("f32"))}Determinant(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Wy){const e=n.data,t=n.typeInfo.getTypeName(),r=t.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if("mat2x2"===t||"mat2x2f"===t||"mat2x2h"===t)return new $y(e[0]*e[3]-e[1]*e[2],r);if("mat2x3"===t||"mat2x3f"===t||"mat2x3h"===t)return new $y(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]),r);if("mat2x4"===t||"mat2x4f"===t||"mat2x4h"===t)console.error(`TODO: Determinant for ${t}`);else if("mat3x2"===t||"mat3x2f"===t||"mat3x2h"===t)console.error(`TODO: Determinant for ${t}`);else{if("mat3x3"===t||"mat3x3f"===t||"mat3x3h"===t)return new $y(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]),r);"mat3x4"===t||"mat3x4f"===t||"mat3x4h"===t||"mat4x2"===t||"mat4x2f"===t||"mat4x2h"===t||"mat4x3"===t||"mat4x3f"===t||"mat4x3h"===t?console.error(`TODO: Determinant for ${t}`):"mat4x4"!==t&&"mat4x4f"!==t&&"mat4x4h"!==t||console.error(`TODO: Determinant for ${t}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy){let e=0;for(let t=0;t<n.data.length;++t)e+=(n.data[t]-r.data[t])*(n.data[t]-r.data[t]);return new $y(Math.sqrt(e),this.getTypeInfo("f32"))}const i=n,o=r;return new $y(Math.abs(i.value-o.value),n.typeInfo)}_dot(e,t){let n=0;for(let r=0;r<e.length;++r)n+=t[r]*e[r];return n}Dot(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);return n instanceof Vy&&r instanceof Vy?new $y(this._dot(n.data,r.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,t){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,t){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.exp(e))),n.typeInfo);const r=n;return new $y(Math.exp(r.value),n.typeInfo)}Exp2(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.pow(2,e))),n.typeInfo);const r=n;return new $y(Math.pow(2,r.value),n.typeInfo)}ExtractBits(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if("u32"!==r.typeInfo.name&&"x32"!==r.typeInfo.name)return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if("u32"!==i.typeInfo.name&&"x32"!==i.typeInfo.name)return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const o=r.value,s=i.value;if(n instanceof Vy)return new Vy(n.data.map((e=>e>>o&(1<<s)-1)),n.typeInfo);if("i32"!==n.typeInfo.name&&"x32"!==n.typeInfo.name)return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const a=n.value;return new $y(a>>o&(1<<s)-1,this.getTypeInfo("i32"))}FaceForward(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if(n instanceof Vy&&r instanceof Vy&&i instanceof Vy){const e=this._dot(r.data,i.data);return new Vy(e<0?Array.from(n.data):n.data.map((e=>-e)),n.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return 0===e?-1:31-Math.clz32(e)}FirstLeadingBit(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>this._firstLeadingBit(e))),n.typeInfo);const r=n;return new $y(this._firstLeadingBit(r.value),n.typeInfo)}_firstTrailingBit(e){return 0===e?-1:Math.log2(e&-e)}FirstTrailingBit(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>this._firstTrailingBit(e))),n.typeInfo);const r=n;return new $y(this._firstTrailingBit(r.value),n.typeInfo)}Floor(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.floor(e))),n.typeInfo);const r=n;return new $y(Math.floor(r.value),n.typeInfo)}Fma(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if(n instanceof Vy&&r instanceof Vy&&i instanceof Vy)return n.data.length!==r.data.length||n.data.length!==i.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new Vy(n.data.map(((e,t)=>e*r.data[t]+i.data[t])),n.typeInfo);const o=n,s=r,a=i;return new $y(o.value*s.value+a.value,o.typeInfo)}Fract(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>e-Math.floor(e))),n.typeInfo);const r=n;return new $y(r.value-Math.floor(r.value),n.typeInfo)}Frexp(e,t){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t),o=this.exec.evalExpression(e.args[3],t);if("u32"!==i.typeInfo.name&&"x32"!==i.typeInfo.name)return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const s=i.value,a=(1<<o.value)-1<<s,l=~a;if(n instanceof Vy&&r instanceof Vy)return new Vy(n.data.map(((e,t)=>e&l|r.data[t]<<s&a)),n.typeInfo);const c=n.value,u=r.value;return new $y(c&l|u<<s&a,n.typeInfo)}InverseSqrt(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>1/Math.sqrt(e))),n.typeInfo);const r=n;return new $y(1/Math.sqrt(r.value),n.typeInfo)}Ldexp(e,t){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy){let e=0;return n.data.forEach((t=>{e+=t*t})),new $y(Math.sqrt(e),this.getTypeInfo("f32"))}const r=n;return new $y(Math.abs(r.value),n.typeInfo)}Log(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.log(e))),n.typeInfo);const r=n;return new $y(Math.log(r.value),n.typeInfo)}Log2(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.log2(e))),n.typeInfo);const r=n;return new $y(Math.log2(r.value),n.typeInfo)}Max(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy)return new Vy(n.data.map(((e,t)=>Math.max(e,r.data[t]))),n.typeInfo);const i=n,o=r;return new $y(Math.max(i.value,o.value),n.typeInfo)}Min(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy)return new Vy(n.data.map(((e,t)=>Math.min(e,r.data[t]))),n.typeInfo);const i=n,o=r;return new $y(Math.min(i.value,o.value),n.typeInfo)}Mix(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if(n instanceof Vy&&r instanceof Vy&&i instanceof Vy)return new Vy(n.data.map(((e,t)=>n.data[t]*(1-i.data[t])+r.data[t]*i.data[t])),n.typeInfo);const o=r,s=i;return new $y(n.value*(1-s.value)+o.value*s.value,n.typeInfo)}Modf(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy)return new Vy(n.data.map(((e,t)=>e%r.data[t])),n.typeInfo);const i=r;return new $y(n.value%i.value,n.typeInfo)}Normalize(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy){const r=this.Length(e,t).value;return new Vy(n.data.map((e=>e/r)),n.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy)return new Vy(n.data.map(((e,t)=>Math.pow(e,r.data[t]))),n.typeInfo);const i=n,o=r;return new $y(Math.pow(i.value,o.value),n.typeInfo)}QuantizeToF16(e,t){const n=this.exec.evalExpression(e.args[0],t);return n instanceof Vy?new Vy(n.data.map((e=>e)),n.typeInfo):new $y(n.value,n.typeInfo)}Radians(e,t){const n=this.exec.evalExpression(e.args[0],t);return n instanceof Vy?new Vy(n.data.map((e=>e*Math.PI/180)),n.typeInfo):new $y(n.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,t){let n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(n instanceof Vy&&r instanceof Vy){const e=this._dot(n.data,r.data);return new Vy(n.data.map(((t,n)=>t-2*e*r.data[n])),n.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,t){let n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if(n instanceof Vy&&r instanceof Vy&&i instanceof $y){const e=this._dot(r.data,n.data);return new Vy(n.data.map(((t,n)=>{const o=1-i.value*i.value*(1-e*e);if(o<0)return 0;const s=Math.sqrt(o);return i.value*t-(i.value*e+s)*r.data[n]})),n.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,t){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.round(e))),n.typeInfo);const r=n;return new $y(Math.round(r.value),n.typeInfo)}Saturate(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.min(Math.max(e,0),1))),n.typeInfo);const r=n;return new $y(Math.min(Math.max(r.value,0),1),n.typeInfo)}Sign(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.sign(e))),n.typeInfo);const r=n;return new $y(Math.sign(r.value),n.typeInfo)}Sin(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.sin(e))),n.typeInfo);const r=n;return new $y(Math.sin(r.value),n.typeInfo)}Sinh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.sinh(e))),n.typeInfo);const r=n;return new $y(Math.sinh(r.value),n.typeInfo)}_smoothstep(e,t,n){const r=Math.min(Math.max((n-e)/(t-e),0),1);return r*r*(3-2*r)}SmoothStep(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t),i=this.exec.evalExpression(e.args[2],t);if(i instanceof Vy&&n instanceof Vy&&r instanceof Vy)return new Vy(i.data.map(((e,t)=>this._smoothstep(n.data[t],r.data[t],e))),i.typeInfo);const o=n,s=r,a=i;return new $y(this._smoothstep(o.value,s.value,a.value),i.typeInfo)}Sqrt(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.sqrt(e))),n.typeInfo);const r=n;return new $y(Math.sqrt(r.value),n.typeInfo)}Step(e,t){const n=this.exec.evalExpression(e.args[0],t),r=this.exec.evalExpression(e.args[1],t);if(r instanceof Vy&&n instanceof Vy)return new Vy(r.data.map(((e,t)=>e<n.data[t]?0:1)),r.typeInfo);const i=n;return new $y(r.value<i.value?0:1,i.typeInfo)}Tan(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.tan(e))),n.typeInfo);const r=n;return new $y(Math.tan(r.value),n.typeInfo)}Tanh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.tanh(e))),n.typeInfo);const r=n;return new $y(Math.tanh(r.value),n.typeInfo)}_getTransposeType(e){const t=e.getTypeName();return"mat2x2f"===t||"mat2x2h"===t?e:"mat2x3f"===t?this.getTypeInfo("mat3x2f"):"mat2x3h"===t?this.getTypeInfo("mat3x2h"):"mat2x4f"===t?this.getTypeInfo("mat4x2f"):"mat2x4h"===t?this.getTypeInfo("mat4x2h"):"mat3x2f"===t?this.getTypeInfo("mat2x3f"):"mat3x2h"===t?this.getTypeInfo("mat2x3h"):"mat3x3f"===t||"mat3x3h"===t?e:"mat3x4f"===t?this.getTypeInfo("mat4x3f"):"mat3x4h"===t?this.getTypeInfo("mat4x3h"):"mat4x2f"===t?this.getTypeInfo("mat2x4f"):"mat4x2h"===t?this.getTypeInfo("mat2x4h"):"mat4x3f"===t?this.getTypeInfo("mat3x4f"):"mat4x3h"===t?this.getTypeInfo("mat3x4h"):("mat4x4f"===t||"mat4x4h"===t||console.error(`Invalid matrix type ${t}`),e)}Transpose(e,t){const n=this.exec.evalExpression(e.args[0],t);if(!(n instanceof Wy))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const r=this._getTransposeType(n.typeInfo);if("mat2x2"===n.typeInfo.name||"mat2x2f"===n.typeInfo.name||"mat2x2h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[2],e[1],e[3]],r)}if("mat2x3"===n.typeInfo.name||"mat2x3f"===n.typeInfo.name||"mat2x3h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[3],e[6],e[1],e[4],e[7]],r)}if("mat2x4"===n.typeInfo.name||"mat2x4f"===n.typeInfo.name||"mat2x4h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13]],r)}if("mat3x2"===n.typeInfo.name||"mat3x2f"===n.typeInfo.name||"mat3x2h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[3],e[1],e[4],e[2],e[5]],r)}if("mat3x3"===n.typeInfo.name||"mat3x3f"===n.typeInfo.name||"mat3x3h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]],r)}if("mat3x4"===n.typeInfo.name||"mat3x4f"===n.typeInfo.name||"mat3x4h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14]],r)}if("mat4x2"===n.typeInfo.name||"mat4x2f"===n.typeInfo.name||"mat4x2h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[4],e[1],e[5],e[2],e[6]],r)}if("mat4x3"===n.typeInfo.name||"mat4x3f"===n.typeInfo.name||"mat4x3h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]],r)}if("mat4x4"===n.typeInfo.name||"mat4x4f"===n.typeInfo.name||"mat4x4h"===n.typeInfo.name){const e=n.data;return new Wy([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]],r)}return console.error(`Invalid matrix type ${n.typeInfo.name}`),null}Trunc(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Vy)return new Vy(n.data.map((e=>Math.trunc(e))),n.typeInfo);const r=n;return new $y(Math.trunc(r.value),n.typeInfo)}Dpdx(e,t){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,t){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,t){return console.error("TODO: dpdxFine"),null}Dpdy(e,t){return console.error("TODO: dpdy"),null}DpdyCoarse(e,t){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,t){return console.error("TODO: dpdyFine"),null}Fwidth(e,t){return console.error("TODO: fwidth"),null}FwidthCoarse(e,t){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,t){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,t){const n=e.args[0],r=e.args.length>1?this.exec.evalExpression(e.args[1],t).value:0;if(n instanceof wy){const i=n.name,o=t.getVariableValue(i);if(o instanceof Hy){if(r<0||r>=o.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const t=o.getMipLevelSize(r),n=o.dimension;return"1d"===n?new $y(t[0],this.getTypeInfo("u32")):"3d"===n?new Vy(t,this.getTypeInfo("vec3u")):"2d"===n?new Vy(t.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${n} not found. Line ${e.line}`),null)}return console.error(`Texture ${i} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,t){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,t){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,t){const n=e.args[0],r=this.exec.evalExpression(e.args[1],t),i=e.args.length>2?this.exec.evalExpression(e.args[2],t).value:0;if(!(r instanceof Vy)||2!==r.data.length)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(n instanceof wy){const o=n.name,s=t.getVariableValue(o);if(s instanceof Hy){const t=Math.floor(r.data[0]),n=Math.floor(r.data[1]);if(t<0||t>=s.width||n<0||n>=s.height)return console.error(`Texture ${o} out of bounds. Line ${e.line}`),null;const a=s.getPixel(t,n,0,i);return null===a?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new Vy(a,this.getTypeInfo("vec4f"))}return console.error(`Texture ${o} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,t){const n=e.args[0];if(n instanceof wy){const r=n.name,i=t.getVariableValue(r);return i instanceof Hy?new $y(i.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,t){const n=e.args[0];if(n instanceof wy){const r=n.name,i=t.getVariableValue(r);return i instanceof Hy?new $y(i.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,t){const n=e.args[0];if(n instanceof wy){const r=n.name,i=t.getVariableValue(r);return i instanceof Hy?new $y(i.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,t){return console.error("TODO: textureSample"),null}TextureSampleBias(e,t){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,t){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,t){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,t){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,t){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,t){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,t){const n=e.args[0],r=this.exec.evalExpression(e.args[1],t),i=4===e.args.length?this.exec.evalExpression(e.args[2],t).value:0,o=4===e.args.length?this.exec.evalExpression(e.args[3],t).data:this.exec.evalExpression(e.args[2],t).data;if(4!==o.length)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(r instanceof Vy)||2!==r.data.length)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(n instanceof wy){const s=n.name,a=t.getVariableValue(s);if(a instanceof Hy){const t=a.getMipLevelSize(0),n=Math.floor(r.data[0]),l=Math.floor(r.data[1]);return n<0||n>=t[0]||l<0||l>=t[1]?(console.error(`Texture ${s} out of bounds. Line ${e.line}`),null):(a.setPixel(n,l,0,i,Array.from(o)),null)}return console.error(`Texture ${s} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t);return t.getVariable(r).value.getSubData(this.exec,n.postfix,t)}AtomicStore(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t);return a instanceof $y&&s instanceof $y&&(a.value=s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),null}AtomicAdd(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value+=s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicSub(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value-=s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicMax(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value=Math.max(a.value,s.value)),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicMin(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value=Math.min(a.value,s.value)),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicAnd(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value=a.value&s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicOr(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value=a.value|s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicXor(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value=a.value^s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicExchange(e,t){let n=e.args[0];n instanceof ky&&(n=n.right);const r=this.exec.getVariableName(n,t),i=t.getVariable(r);let o=e.args[1];const s=this.exec.evalExpression(o,t),a=i.value.getSubData(this.exec,n.postfix,t),l=new $y(a.value,a.typeInfo);return a instanceof $y&&s instanceof $y&&(a.value=s.value),i.value instanceof Gy&&i.value.setDataValue(this.exec,a,n.postfix,t),l}AtomicCompareExchangeWeak(e,t){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,t){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,t){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,t){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,t){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,t){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,t){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,t){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,t){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,t){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,t){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,t){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,t){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,t){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,t){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,t){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,t){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,t){return null}TextureBarrier(e,t){return null}WorkgroupBarrier(e,t){return null}WorkgroupUniformLoad(e,t){return null}SubgroupAdd(e,t){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,t){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,t){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,t){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,t){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,t){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,t){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,t){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,t){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,t){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,t){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,t){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,t){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,t){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,t){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,t){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,t){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,t){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,t){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,t){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,t){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,t){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,t){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,t){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,t){return console.error("TODO: quadSwapY"),null}}const mv={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},yv={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class vv extends pv{constructor(e,t){var n;super(),this.ast=null!=e?e:[],this.reflection=new uv,this.reflection.updateAST(this.ast),this.context=null!==(n=null==t?void 0:t.clone())&&void 0!==n?n:new fv,this.builtins=new gv(this),this.typeInfo={bool:this.getTypeInfo(dy.bool),i32:this.getTypeInfo(dy.i32),u32:this.getTypeInfo(dy.u32),f32:this.getTypeInfo(dy.f32),f16:this.getTypeInfo(dy.f16),vec2f:this.getTypeInfo(py.vec2f),vec2u:this.getTypeInfo(py.vec2u),vec2i:this.getTypeInfo(py.vec2i),vec2h:this.getTypeInfo(py.vec2h),vec3f:this.getTypeInfo(py.vec3f),vec3u:this.getTypeInfo(py.vec3u),vec3i:this.getTypeInfo(py.vec3i),vec3h:this.getTypeInfo(py.vec3h),vec4f:this.getTypeInfo(py.vec4f),vec4u:this.getTypeInfo(py.vec4u),vec4i:this.getTypeInfo(py.vec4i),vec4h:this.getTypeInfo(py.vec4h),mat2x2f:this.getTypeInfo(py.mat2x2f),mat2x3f:this.getTypeInfo(py.mat2x3f),mat2x4f:this.getTypeInfo(py.mat2x4f),mat3x2f:this.getTypeInfo(py.mat3x2f),mat3x3f:this.getTypeInfo(py.mat3x3f),mat3x4f:this.getTypeInfo(py.mat3x4f),mat4x2f:this.getTypeInfo(py.mat4x2f),mat4x3f:this.getTypeInfo(py.mat4x3f),mat4x4f:this.getTypeInfo(py.mat4x4f)}}getVariableValue(e){var t,n;const r=null!==(n=null===(t=this.context.getVariable(e))||void 0===t?void 0:t.value)&&void 0!==n?n:null;if(null===r)return null;if(r instanceof $y)return r.value;if(r instanceof Vy)return Array.from(r.data);if(r instanceof Wy)return Array.from(r.data);if(r instanceof Gy&&r.typeInfo instanceof hm){if("u32"===r.typeInfo.format.name)return Array.from(new Uint32Array(r.buffer,r.offset,r.typeInfo.count));if("i32"===r.typeInfo.format.name)return Array.from(new Int32Array(r.buffer,r.offset,r.typeInfo.count));if("f32"===r.typeInfo.format.name)return Array.from(new Float32Array(r.buffer,r.offset,r.typeInfo.count))}return console.error(`Unsupported return variable type ${r.typeInfo.name}`),null}execute(e){(e=null!=e?e:{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,t,n,r){const i=this.context.clone();(r=null!=r?r:{}).constants&&this._setOverrides(r.constants,i),this._execStatements(this.ast,i);const o=i.getFunction(e);if(!o)return void console.error(`Function ${e} not found`);if("number"==typeof t)t=[t,1,1];else{if(0===t.length)return void console.error("Invalid dispatch count");1===t.length?t=[t[0],1,1]:2===t.length?t=[t[0],t[1],1]:t.length>3&&(t=[t[0],t[1],t[2]])}const s=t[0],a=t[1],l=t[2],c=this.getTypeInfo("vec3u");i.setVariable("@num_workgroups",new Vy(t,c));for(const u in n)for(const e in n[u]){const t=n[u][e];i.variables.forEach((n=>{var r;const i=n.node;if(null==i?void 0:i.attributes){let o=null,s=null;for(const e of i.attributes)"binding"===e.name?o=e.value:"group"===e.name&&(s=e.value);if(e==o&&u==s)if(void 0!==t.texture&&void 0!==t.descriptor){const e=new Hy(t.texture,this.getTypeInfo(i.type),t.descriptor,null!==(r=t.texture.view)&&void 0!==r?r:null);n.value=e}else void 0!==t.uniform?n.value=new Gy(t.uniform,this.getTypeInfo(i.type)):n.value=new Gy(t,this.getTypeInfo(i.type))}}))}for(let u=0;u<l;++u)for(let e=0;e<a;++e)for(let t=0;t<s;++t)i.setVariable("@workgroup_id",new Vy([t,e,u],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(o,[t,e,u],i)}execStatement(e,t){if(e instanceof ry)return this.evalExpression(e.value,t);if(e instanceof cy){if(e.condition){const n=this.evalExpression(e.condition,t);if(!(n instanceof $y))throw new Error("Invalid break-if condition");if(!n.value)return null}return vv._breakObj}if(e instanceof uy)return vv._continueObj;if(e instanceof Gm)this._let(e,t);else if(e instanceof Vm)this._var(e,t);else if(e instanceof Hm)this._const(e,t);else if(e instanceof Bm)this._function(e,t);else{if(e instanceof ny)return this._if(e,t);if(e instanceof ty)return this._switch(e,t);if(e instanceof jm)return this._for(e,t);if(e instanceof zm)return this._while(e,t);if(e instanceof ey)return this._loop(e,t);if(e instanceof $m){const n=t.clone();return n.currentFunctionName=t.currentFunctionName,this._execStatements(e.body,n)}if(e instanceof Qm)this._assign(e,t);else if(e instanceof Zm)this._increment(e,t);else{if(e instanceof fy)return null;if(e instanceof Wm){const n=e.name;null===t.getVariable(n)&&t.setVariable(n,new $y(0,this.getTypeInfo("u32")))}else if(e instanceof Jm)this._call(e,t);else{if(e instanceof sy)return null;if(e instanceof ay)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,t){return e instanceof Py?this._evalBinaryOp(e,t):e instanceof Sy?this._evalLiteral(e,t):e instanceof wy?this._evalVariable(e,t):e instanceof xy?this._evalCall(e,t):e instanceof _y?this._evalCreate(e,t):e instanceof Ey?this._evalConst(e,t):e instanceof Ty?this._evalBitcast(e,t):e instanceof ky?this._evalUnaryOp(e,t):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var t;if(e instanceof dy){const t=this.reflection.getTypeInfo(e);if(null!==t)return t}let n=null!==(t=this.typeInfo[e])&&void 0!==t?t:null;return null!==n||(n=this.reflection.getTypeInfoByName(e)),n}_setOverrides(e,t){for(const n in e){const r=e[n],i=this.reflection.getOverrideInfo(n);null!==i?(null===i.type&&(i.type=this.getTypeInfo("u32")),"u32"===i.type.name||"i32"===i.type.name||"f32"===i.type.name||"f16"===i.type.name?t.setVariable(n,new $y(r,i.type)):"bool"===i.type.name?t.setVariable(n,new $y(r?1:0,i.type)):"vec2"===i.type.name||"vec3"===i.type.name||"vec4"===i.type.name||"vec2f"===i.type.name||"vec3f"===i.type.name||"vec4f"===i.type.name||"vec2i"===i.type.name||"vec3i"===i.type.name||"vec4i"===i.type.name||"vec2u"===i.type.name||"vec3u"===i.type.name||"vec4u"===i.type.name||"vec2h"===i.type.name||"vec3h"===i.type.name||"vec4h"===i.type.name?t.setVariable(n,new Vy(r,i.type)):console.error(`Invalid constant type for ${n}`)):console.error(`Override ${n} does not exist in the shader.`)}}_dispatchWorkgroup(e,t,n){const r=[1,1,1];for(const c of e.node.attributes)if("workgroup_size"===c.name){if(c.value.length>0){const e=n.getVariableValue(c.value[0]);r[0]=e instanceof $y?e.value:parseInt(c.value[0])}if(c.value.length>1){const e=n.getVariableValue(c.value[1]);r[1]=e instanceof $y?e.value:parseInt(c.value[1])}if(c.value.length>2){const e=n.getVariableValue(c.value[2]);r[2]=e instanceof $y?e.value:parseInt(c.value[2])}}const i=this.getTypeInfo("vec3u"),o=this.getTypeInfo("u32");n.setVariable("@workgroup_size",new Vy(r,i));const s=r[0],a=r[1],l=r[2];for(let c=0,u=0;c<l;++c)for(let l=0;l<a;++l)for(let a=0;a<s;++a,++u){const s=[a,l,c],d=[a+t[0]*r[0],l+t[1]*r[1],c+t[2]*r[2]];n.setVariable("@local_invocation_id",new Vy(s,i)),n.setVariable("@global_invocation_id",new Vy(d,i)),n.setVariable("@local_invocation_index",new $y(u,o)),this._dispatchExec(e,n)}}_dispatchExec(e,t){for(const n of e.node.args)for(const e of n.attributes)if("builtin"===e.name){const r=`@${e.value}`,i=t.getVariable(r);void 0!==i&&t.variables.set(n.name,i)}this._execStatements(e.node.body,t)}getVariableName(e,t){for(;e instanceof ky;)e=e.right;return e instanceof wy?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,t){for(const n of e){if(n instanceof Array){const e=t.clone(),r=this._execStatements(n,e);if(r)return r;continue}const e=this.execStatement(n,t);if(e)return e}return null}_call(e,t){const n=t.clone();n.currentFunctionName=e.name;const r=t.getFunction(e.name);if(r){for(let t=0;t<r.node.args.length;++t){const i=r.node.args[t],o=this.evalExpression(e.args[t],n);n.setVariable(i.name,o,i)}this._execStatements(r.node.body,n)}else e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)&&this._evalCreate(e,t)}_increment(e,t){const n=this.getVariableName(e.variable,t),r=t.getVariable(n);r?"++"===e.operator?r.value instanceof $y?r.value.value++:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):"--"===e.operator?r.value instanceof $y?r.value.value--:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${n} not found. Line ${e.line}`)}_getVariableData(e,t){if(e instanceof wy){const n=this.getVariableName(e,t),r=t.getVariable(n);return null===r?(console.error(`Variable ${n} not found. Line ${e.line}`),null):r.value.getSubData(this,e.postfix,t)}if(e instanceof ky){if("*"===e.operator){const n=this._getVariableData(e.right,t);return n instanceof zy?n.reference.getSubData(this,e.postfix,t):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if("&"===e.operator){const n=this._getVariableData(e.right,t);return new zy(n)}}return null}_assign(e,t){let n=null,r="<var>",i=null;if(e.variable instanceof ky){const n=this._getVariableData(e.variable,t),r=this.evalExpression(e.value,t),i=e.operator;if("="===i){if(n instanceof $y||n instanceof Vy||n instanceof Wy){if(r instanceof $y||r instanceof Vy||r instanceof Wy&&n.data.length===r.data.length)return void n.data.set(r.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(n instanceof Gy&&r instanceof Gy&&n.buffer.byteLength-n.offset>=r.buffer.byteLength-r.offset)return void(n.buffer.byteLength%4==0?new Uint32Array(n.buffer,n.offset,n.typeInfo.size/4).set(new Uint32Array(r.buffer,r.offset,r.typeInfo.size/4)):new Uint8Array(n.buffer,n.offset,n.typeInfo.size).set(new Uint8Array(r.buffer,r.offset,r.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if("+="===i)return n instanceof $y||n instanceof Vy||n instanceof Wy?r instanceof $y||r instanceof Vy||r instanceof Wy?void n.data.set(r.data.map(((e,t)=>n.data[t]+e))):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if("-="===i)return(n instanceof $y||n instanceof Vy||n instanceof Wy)&&(r instanceof $y||r instanceof Vy||r instanceof Wy)?void n.data.set(r.data.map(((e,t)=>n.data[t]-e))):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof ky){if("*"===e.variable.operator){r=this.getVariableName(e.variable.right,t);const i=t.getVariable(r);if(!(i&&i.value instanceof zy))return void console.error(`Variable ${r} is not a pointer. Line ${e.line}`);n=i.value.reference;let o=e.variable.postfix;if(!o){let t=e.variable.right;for(;t instanceof ky;){if(t.postfix){o=t.postfix;break}t=t.right}}o&&(n=n.getSubData(this,o,t))}}else{i=e.variable.postfix,r=this.getVariableName(e.variable,t);const o=t.getVariable(r);if(null===o)return void console.error(`Variable ${r} not found. Line ${e.line}`);n=o.value}if(n instanceof zy&&(n=n.reference),null===n)return void console.error(`Variable ${r} not found. Line ${e.line}`);const o=this.evalExpression(e.value,t),s=e.operator;if("="===s)if(n instanceof Gy)n.setDataValue(this,o,i,t);else if(i){if(!(n instanceof Vy||n instanceof Wy))return void console.error(`Variable ${r} is not a vector or matrix. Line ${e.line}`);if(i instanceof Ay){const s=this.evalExpression(i.index,t).value;if(n instanceof Vy){if(!(o instanceof $y))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[s]=o.value}else{if(!(n instanceof Wy))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);{const s=this.evalExpression(i.index,t).value;if(s<0)return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(!(o instanceof Vy))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);{const t=n.typeInfo.getTypeName();if("mat2x2"===t||"mat2x2f"===t||"mat2x2h"===t){if(!(s<2&&2===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[2*s]=o.data[0],n.data[2*s+1]=o.data[1]}else if("mat2x3"===t||"mat2x3f"===t||"mat2x3h"===t){if(!(s<2&&3===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[3*s]=o.data[0],n.data[3*s+1]=o.data[1],n.data[3*s+2]=o.data[2]}else if("mat2x4"===t||"mat2x4f"===t||"mat2x4h"===t){if(!(s<2&&4===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[4*s]=o.data[0],n.data[4*s+1]=o.data[1],n.data[4*s+2]=o.data[2],n.data[4*s+3]=o.data[3]}else if("mat3x2"===t||"mat3x2f"===t||"mat3x2h"===t){if(!(s<3&&2===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[2*s]=o.data[0],n.data[2*s+1]=o.data[1]}else if("mat3x3"===t||"mat3x3f"===t||"mat3x3h"===t){if(!(s<3&&3===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[3*s]=o.data[0],n.data[3*s+1]=o.data[1],n.data[3*s+2]=o.data[2]}else if("mat3x4"===t||"mat3x4f"===t||"mat3x4h"===t){if(!(s<3&&4===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[4*s]=o.data[0],n.data[4*s+1]=o.data[1],n.data[4*s+2]=o.data[2],n.data[4*s+3]=o.data[3]}else if("mat4x2"===t||"mat4x2f"===t||"mat4x2h"===t){if(!(s<4&&2===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[2*s]=o.data[0],n.data[2*s+1]=o.data[1]}else if("mat4x3"===t||"mat4x3f"===t||"mat4x3h"===t){if(!(s<4&&3===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[3*s]=o.data[0],n.data[3*s+1]=o.data[1],n.data[3*s+2]=o.data[2]}else{if("mat4x4"!==t&&"mat4x4f"!==t&&"mat4x4h"!==t)return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(!(s<4&&4===o.data.length))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[4*s]=o.data[0],n.data[4*s+1]=o.data[1],n.data[4*s+2]=o.data[2],n.data[4*s+3]=o.data[3]}}}}}else if(i instanceof by){const t=i.value;if(!(n instanceof Vy))return void console.error(`Invalid assignment to ${t}. Variable ${r} is not a vector. Line ${e.line}`);if(o instanceof $y){if(t.length>1)return void console.error(`Invalid assignment to ${t} for variable ${r}. Line ${e.line}`);if("x"===t)n.data[0]=o.value;else if("y"===t){if(n.data.length<2)return void console.error(`Invalid assignment to ${t} for variable ${r}. Line ${e.line}`);n.data[1]=o.value}else if("z"===t){if(n.data.length<3)return void console.error(`Invalid assignment to ${t} for variable ${r}. Line ${e.line}`);n.data[2]=o.value}else if("w"===t){if(n.data.length<4)return void console.error(`Invalid assignment to ${t} for variable ${r}. Line ${e.line}`);n.data[3]=o.value}}else{if(!(o instanceof Vy))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(t.length!==o.data.length)return void console.error(`Invalid assignment to ${t} for variable ${r}. Line ${e.line}`);for(let i=0;i<t.length;++i){const s=t[i];if("x"===s||"r"===s)n.data[0]=o.data[i];else if("y"===s||"g"===s){if(o.data.length<2)return void console.error(`Invalid assignment to ${s} for variable ${r}. Line ${e.line}`);n.data[1]=o.data[i]}else if("z"===s||"b"===s){if(o.data.length<3)return void console.error(`Invalid assignment to ${s} for variable ${r}. Line ${e.line}`);n.data[2]=o.data[i]}else{if("w"!==s&&"a"!==s)return void console.error(`Invalid assignment to ${s} for variable ${r}. Line ${e.line}`);if(o.data.length<4)return void console.error(`Invalid assignment to ${s} for variable ${r}. Line ${e.line}`);n.data[3]=o.data[i]}}}}}else n instanceof $y&&o instanceof $y?n.value=o.value:n instanceof Vy&&o instanceof Vy||n instanceof Wy&&o instanceof Wy?n.data.set(o.data):console.error(`Invalid assignment to ${r}. Line ${e.line}`);else{const r=n.getSubData(this,i,t);if(r instanceof Vy&&o instanceof $y){const t=r.data,n=o.value;if("+="===s)for(let e=0;e<t.length;++e)t[e]+=n;else if("-="===s)for(let e=0;e<t.length;++e)t[e]-=n;else if("*="===s)for(let e=0;e<t.length;++e)t[e]*=n;else if("/="===s)for(let e=0;e<t.length;++e)t[e]/=n;else if("%="===s)for(let e=0;e<t.length;++e)t[e]%=n;else if("&="===s)for(let e=0;e<t.length;++e)t[e]&=n;else if("|="===s)for(let e=0;e<t.length;++e)t[e]|=n;else if("^="===s)for(let e=0;e<t.length;++e)t[e]^=n;else if("<<="===s)for(let e=0;e<t.length;++e)t[e]<<=n;else if(">>="===s)for(let e=0;e<t.length;++e)t[e]>>=n;else console.error(`Invalid operator ${s}. Line ${e.line}`)}else if(r instanceof Vy&&o instanceof Vy){const t=r.data,n=o.data;if(t.length!==n.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if("+="===s)for(let e=0;e<t.length;++e)t[e]+=n[e];else if("-="===s)for(let e=0;e<t.length;++e)t[e]-=n[e];else if("*="===s)for(let e=0;e<t.length;++e)t[e]*=n[e];else if("/="===s)for(let e=0;e<t.length;++e)t[e]/=n[e];else if("%="===s)for(let e=0;e<t.length;++e)t[e]%=n[e];else if("&="===s)for(let e=0;e<t.length;++e)t[e]&=n[e];else if("|="===s)for(let e=0;e<t.length;++e)t[e]|=n[e];else if("^="===s)for(let e=0;e<t.length;++e)t[e]^=n[e];else if("<<="===s)for(let e=0;e<t.length;++e)t[e]<<=n[e];else if(">>="===s)for(let e=0;e<t.length;++e)t[e]>>=n[e];else console.error(`Invalid operator ${s}. Line ${e.line}`)}else{if(!(r instanceof $y&&o instanceof $y))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);"+="===s?r.value+=o.value:"-="===s?r.value-=o.value:"*="===s?r.value*=o.value:"/="===s?r.value/=o.value:"%="===s?r.value%=o.value:"&="===s?r.value&=o.value:"|="===s?r.value|=o.value:"^="===s?r.value^=o.value:"<<="===s?r.value<<=o.value:">>="===s?r.value>>=o.value:console.error(`Invalid operator ${s}. Line ${e.line}`)}n instanceof Gy&&n.setDataValue(this,r,i,t)}}_function(e,t){const n=new hv(e);t.functions.set(e.name,n)}_const(e,t){let n=null;null!==e.value&&(n=this.evalExpression(e.value,t)),t.createVariable(e.name,n,e)}_let(e,t){let n=null;if(null!==e.value){if(n=this.evalExpression(e.value,t),null===n)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof ky||(n=n.clone())}else{const r=e.type.name;if("f32"===r||"i32"===r||"u32"===r||"bool"===r||"f16"===r||"vec2"===r||"vec3"===r||"vec4"===r||"vec2f"===r||"vec3f"===r||"vec4f"===r||"vec2i"===r||"vec3i"===r||"vec4i"===r||"vec2u"===r||"vec3u"===r||"vec4u"===r||"vec2h"===r||"vec3h"===r||"vec4h"===r||"vec2b"===r||"vec3b"===r||"vec4b"===r||"mat2x2"===r||"mat2x3"===r||"mat2x4"===r||"mat3x2"===r||"mat3x3"===r||"mat3x4"===r||"mat4x2"===r||"mat4x3"===r||"mat4x4"===r||"mat2x2f"===r||"mat2x3f"===r||"mat2x4f"===r||"mat3x2f"===r||"mat3x3f"===r||"mat3x4f"===r||"mat4x2f"===r||"mat4x3f"===r||"mat4x4f"===r||"mat2x2h"===r||"mat2x3h"===r||"mat2x4h"===r||"mat3x2h"===r||"mat3x3h"===r||"mat3x4h"===r||"mat4x2h"===r||"mat4x3h"===r||"mat4x4h"===r||"array"===r){const r=new _y(e.type,[]);n=this._evalCreate(r,t)}}t.createVariable(e.name,n,e)}_var(e,t){let n=null;if(null!==e.value){if(n=this.evalExpression(e.value,t),null===n)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof ky||(n=n.clone())}else{if(null===e.type)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const r=e.type.name;if("f32"===r||"i32"===r||"u32"===r||"bool"===r||"f16"===r||"vec2"===r||"vec3"===r||"vec4"===r||"vec2f"===r||"vec3f"===r||"vec4f"===r||"vec2i"===r||"vec3i"===r||"vec4i"===r||"vec2u"===r||"vec3u"===r||"vec4u"===r||"vec2h"===r||"vec3h"===r||"vec4h"===r||"vec2b"===r||"vec3b"===r||"vec4b"===r||"mat2x2"===r||"mat2x3"===r||"mat2x4"===r||"mat3x2"===r||"mat3x3"===r||"mat3x4"===r||"mat4x2"===r||"mat4x3"===r||"mat4x4"===r||"mat2x2f"===r||"mat2x3f"===r||"mat2x4f"===r||"mat3x2f"===r||"mat3x3f"===r||"mat3x4f"===r||"mat4x2f"===r||"mat4x3f"===r||"mat4x4f"===r||"mat2x2h"===r||"mat2x3h"===r||"mat2x4h"===r||"mat3x2h"===r||"mat3x3h"===r||"mat3x4h"===r||"mat4x2h"===r||"mat4x3h"===r||"mat4x4h"===r||e.type instanceof my||e.type instanceof fy||e.type instanceof py){const r=new _y(e.type,[]);n=this._evalCreate(r,t)}}t.createVariable(e.name,n,e)}_switch(e,t){t=t.clone();const n=this.evalExpression(e.condition,t);if(!(n instanceof $y))return console.error(`Invalid if condition. Line ${e.line}`),null;let r=null;for(const i of e.cases)if(i instanceof Ly)for(const o of i.selectors){if(o instanceof Iy){r=i;continue}const s=this.evalExpression(o,t);if(!(s instanceof $y))return console.error(`Invalid case selector. Line ${e.line}`),null;if(s.value===n.value)return this._execStatements(i.body,t)}else i instanceof My&&(r=i);return r?this._execStatements(r.body,t):null}_if(e,t){t=t.clone();const n=this.evalExpression(e.condition,t);if(!(n instanceof $y))return console.error(`Invalid if condition. Line ${e.line}`),null;if(n.value)return this._execStatements(e.body,t);for(const r of e.elseif){const n=this.evalExpression(r.condition,t);if(!(n instanceof $y))return console.error(`Invalid if condition. Line ${e.line}`),null;if(n.value)return this._execStatements(r.body,t)}return e.else?this._execStatements(e.else,t):null}_getScalarValue(e){return e instanceof $y?e.value:(console.error("Expected scalar value.",e),0)}_for(e,t){for(t=t.clone(),this.execStatement(e.init,t);this._getScalarValue(this.evalExpression(e.condition,t));){const n=this._execStatements(e.body,t);if(n===vv._breakObj)break;if(null!==n&&n!==vv._continueObj)return n;this.execStatement(e.increment,t)}return null}_loop(e,t){for(t=t.clone();;){const n=this._execStatements(e.body,t);if(n===vv._breakObj)break;if(n===vv._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,t)===vv._breakObj)break}else if(null!==n)return n}return null}_while(e,t){for(t=t.clone();this._getScalarValue(this.evalExpression(e.condition,t));){const n=this._execStatements(e.body,t);if(n===vv._breakObj)break;if(n!==vv._continueObj&&null!==n)return n}return null}_evalBitcast(e,t){const n=this.evalExpression(e.value,t),r=e.type;if(n instanceof $y){const e=av(n.value,n.typeInfo.name,r.name);return new $y(e,this.getTypeInfo(r))}if(n instanceof Vy){const t=n.typeInfo.getTypeName();let i="";if(t.endsWith("f"))i="f32";else if(t.endsWith("i"))i="i32";else if(t.endsWith("u"))i="u32";else if(t.endsWith("b"))i="bool";else{if(!t.endsWith("h"))return console.error(`Unknown vector type ${t}. Line ${e.line}`),null;i="f16"}const o=r.getTypeName();let s="";if(o.endsWith("f"))s="f32";else if(o.endsWith("i"))s="i32";else if(o.endsWith("u"))s="u32";else if(o.endsWith("b"))s="bool";else{if(!o.endsWith("h"))return console.error(`Unknown vector type ${s}. Line ${e.line}`),null;s="f16"}const a=function(e,t,n){if(t===n)return e;const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=av(e[i],t,n);return r}(Array.from(n.data),i,s);return new Vy(a,this.getTypeInfo(r))}return console.error(`TODO: bitcast for ${n.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,t){return t.getVariableValue(e.name).clone().getSubData(this,e.postfix,t)}_evalCreate(e,t){var n;if(e instanceof _y){if(null===e.type)return Uy.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,t);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,t);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,t)}}const r=e instanceof _y?e.type.name:e.name,i=e instanceof _y?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(null===i)return console.error(`Unknown type ${r}. Line ${e.line}`),null;if(0===i.size)return null;const o=new Gy(new ArrayBuffer(i.size),i,0);if(i instanceof dm){if(e.args)for(let s=0;s<e.args.length;++s){const n=i.members[s],r=e.args[s],a=this.evalExpression(r,t);o.setData(this,a,n.type,n.offset,t)}}else if(i instanceof hm){let r=0;if(e.args)for(let s=0;s<e.args.length;++s){const a=e.args[s],l=this.evalExpression(a,t);null===i.format&&("x32"===(null===(n=l.typeInfo)||void 0===n?void 0:n.name)?i.format=this.getTypeInfo("i32"):i.format=l.typeInfo),o.setData(this,l,i.format,r,t),r+=i.stride}}else console.error(`Unknown type "${r}". Line ${e.line}`);return e instanceof _y?o.getSubData(this,e.postfix,t):o}_evalLiteral(e,t){const n=this.getTypeInfo(e.type),r=n.name;return"x32"===r||"u32"===r||"f32"===r||"f16"===r||"i32"===r||"bool"===r?new $y(e.scalarValue,n):"vec2"===r||"vec3"===r||"vec4"===r||"vec2f"===r||"vec3f"===r||"vec4f"===r||"vec2h"===r||"vec3h"===r||"vec4h"===r||"vec2i"===r||"vec3i"===r||"vec4i"===r||"vec2u"===r||"vec3u"===r||"vec4u"===r?this._callConstructorVec(e,t):"mat2x2"===r||"mat2x3"===r||"mat2x4"===r||"mat3x2"===r||"mat3x3"===r||"mat3x4"===r||"mat4x2"===r||"mat4x3"===r||"mat4x4"===r||"mat2x2f"===r||"mat2x3f"===r||"mat2x4f"===r||"mat3x2f"===r||"mat3x3f"===r||"mat3x4f"===r||"mat4x2f"===r||"mat4x3f"===r||"mat4x4f"===r||"mat2x2h"===r||"mat2x3h"===r||"mat2x4h"===r||"mat3x2h"===r||"mat3x3h"===r||"mat3x4h"===r||"mat4x2h"===r||"mat4x3h"===r||"mat4x4h"===r?this._callConstructorMatrix(e,t):e.value}_evalVariable(e,t){const n=t.getVariableValue(e.name);return null===n?n:n.getSubData(this,e.postfix,t)}_maxFormatTypeInfo(e){let t=e[0];if("f32"===t.name)return t;for(let n=1;n<e.length;++n){const r=vv._priority.get(t.name);vv._priority.get(e[n].name)<r&&(t=e[n])}return"x32"===t.name?this.getTypeInfo("i32"):t}_evalUnaryOp(e,t){const n=this.evalExpression(e.right,t);if("&"===e.operator)return new zy(n);if("*"===e.operator)return n instanceof zy?n.reference.getSubData(this,e.postfix,t):(console.error(`Invalid dereference. Line ${e.line}`),null);const r=n instanceof $y?n.value:n instanceof Vy?Array.from(n.data):null;switch(e.operator){case"+":{if(Zy(r)){const e=r.map(((e,t)=>+e));return new Vy(e,n.typeInfo)}const e=r,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new $y(+e,t)}case"-":{if(Zy(r)){const e=r.map(((e,t)=>-e));return new Vy(e,n.typeInfo)}const e=r,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new $y(-e,t)}case"!":{if(Zy(r)){const e=r.map(((e,t)=>e?0:1));return new Vy(e,n.typeInfo)}const e=r,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new $y(e?0:1,t)}case"~":{if(Zy(r)){const e=r.map(((e,t)=>~e));return new Vy(e,n.typeInfo)}const e=r,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new $y(~e,t)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,t){const n=this.evalExpression(e.left,t),r=this.evalExpression(e.right,t),i=n instanceof $y?n.value:n instanceof Vy||n instanceof Wy?Array.from(n.data):null,o=r instanceof $y?r.value:r instanceof Vy||r instanceof Wy?Array.from(r.data):null;switch(e.operator){case"+":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e+r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t+e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e+t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t+s,a)}case"-":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e-r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t-e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e-t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t-s,a)}case"*":{if(Zy(i)&&Zy(o)){const t=i,s=o;if(n instanceof Wy&&r instanceof Wy){const i=function(e,t,n,r){if(void 0===yv[t.name]||void 0===yv[r.name])return null;const i=yv[t.name][0],o=yv[t.name][1],s=yv[r.name][0];if(i!==yv[r.name][1])return null;const a=new Array(s*o);for(let l=0;l<o;l++)for(let t=0;t<s;t++){let r=0;for(let s=0;s<i;s++)r+=e[s*o+l]*n[t*i+s];a[l*s+t]=r}return a}(t,n.typeInfo,s,r.typeInfo);if(null===i)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const o=yv[r.typeInfo.name][0],a=yv[n.typeInfo.name][1],l=this.getTypeInfo(`mat${o}x${a}f`);return new Wy(i,l)}if(n instanceof Wy&&r instanceof Vy){const i=function(e,t,n,r){if(void 0===yv[t.name]||void 0===mv[r.name])return null;const i=yv[t.name][0],o=yv[t.name][1];if(i!==n.length)return null;const s=new Array(o);for(let a=0;a<o;a++){let t=0;for(let r=0;r<i;r++)t+=e[r*o+a]*n[r];s[a]=t}return s}(t,n.typeInfo,s,r.typeInfo);return null===i?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Vy(i,r.typeInfo)}if(n instanceof Vy&&r instanceof Wy){const i=function(e,t,n,r){if(void 0===mv[t.name]||void 0===yv[r.name])return null;const i=yv[r.name][0],o=yv[r.name][1];if(o!==e.length)return null;const s=[];for(let a=0;a<i;a++){let t=0;for(let r=0;r<o;r++)t+=e[r]*n[r*i+a];s[a]=t}return s}(t,n.typeInfo,s,r.typeInfo);return null===i?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Vy(i,n.typeInfo)}{if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const r=t.map(((e,t)=>e*s[t]));return new Vy(r,n.typeInfo)}}if(Zy(i)){const e=o,t=i.map(((t,n)=>t*e));return n instanceof Wy?new Wy(t,n.typeInfo):new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e*t));return r instanceof Wy?new Wy(t,r.typeInfo):new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t*s,a)}case"%":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e%r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t%e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e%t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t%s,a)}case"/":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e/r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t/e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e/t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t/s,a)}case"&":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e&r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t&e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e&t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t&s,a)}case"|":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e|r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t|e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e|t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t|s,a)}case"^":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e^r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t^e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e^t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t^s,a)}case"<<":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e<<r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t<<e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e<<t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t<<s,a)}case">>":{if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e>>r[t]));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t>>e));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e>>t));return new Vy(t,r.typeInfo)}const t=i,s=o,a=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new $y(t>>s,a)}case">":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e>r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t>e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e>t?1:0));return new Vy(t,r.typeInfo)}return new $y(i>o?1:0,this.getTypeInfo("bool"));case"<":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e<r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t<e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e<t?1:0));return new Vy(t,r.typeInfo)}return new $y(i<o?1:0,this.getTypeInfo("bool"));case"==":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e===r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t==e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e==t?1:0));return new Vy(t,r.typeInfo)}return new $y(i===o?1:0,this.getTypeInfo("bool"));case"!=":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e!==r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t!==e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e!==t?1:0));return new Vy(t,r.typeInfo)}return new $y(i!==o?1:0,this.getTypeInfo("bool"));case">=":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e>=r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t>=e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e>=t?1:0));return new Vy(t,r.typeInfo)}return new $y(i>=o?1:0,this.getTypeInfo("bool"));case"<=":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e<=r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t<=e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e<=t?1:0));return new Vy(t,r.typeInfo)}return new $y(i<=o?1:0,this.getTypeInfo("bool"));case"&&":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e&&r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t&&e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e&&t?1:0));return new Vy(t,r.typeInfo)}return new $y(i&&o?1:0,this.getTypeInfo("bool"));case"||":if(Zy(i)&&Zy(o)){const t=i,r=o;if(t.length!==r.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map(((e,t)=>e||r[t]?1:0));return new Vy(s,n.typeInfo)}if(Zy(i)){const e=o,t=i.map(((t,n)=>t||e?1:0));return new Vy(t,n.typeInfo)}if(Zy(o)){const e=i,t=o.map(((t,n)=>e||t?1:0));return new Vy(t,r.typeInfo)}return new $y(i||o?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,t){if(null!==e.cachedReturnValue)return e.cachedReturnValue;const n=t.clone();n.currentFunctionName=e.name;const r=t.getFunction(e.name);if(!r)return e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)?this._evalCreate(e,t):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let i=0;i<r.node.args.length;++i){const t=r.node.args[i],o=this.evalExpression(e.args[i],n);n.createVariable(t.name,o,t)}return this._execStatements(r.node.body,n)}_callBuiltinFunction(e,t){switch(e.name){case"all":return this.builtins.All(e,t);case"any":return this.builtins.Any(e,t);case"select":return this.builtins.Select(e,t);case"arrayLength":return this.builtins.ArrayLength(e,t);case"abs":return this.builtins.Abs(e,t);case"acos":return this.builtins.Acos(e,t);case"acosh":return this.builtins.Acosh(e,t);case"asin":return this.builtins.Asin(e,t);case"asinh":return this.builtins.Asinh(e,t);case"atan":return this.builtins.Atan(e,t);case"atanh":return this.builtins.Atanh(e,t);case"atan2":return this.builtins.Atan2(e,t);case"ceil":return this.builtins.Ceil(e,t);case"clamp":return this.builtins.Clamp(e,t);case"cos":return this.builtins.Cos(e,t);case"cosh":return this.builtins.Cosh(e,t);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,t);case"countOneBits":return this.builtins.CountOneBits(e,t);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,t);case"cross":return this.builtins.Cross(e,t);case"degrees":return this.builtins.Degrees(e,t);case"determinant":return this.builtins.Determinant(e,t);case"distance":return this.builtins.Distance(e,t);case"dot":return this.builtins.Dot(e,t);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,t);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,t);case"exp":return this.builtins.Exp(e,t);case"exp2":return this.builtins.Exp2(e,t);case"extractBits":return this.builtins.ExtractBits(e,t);case"faceForward":return this.builtins.FaceForward(e,t);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,t);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,t);case"floor":return this.builtins.Floor(e,t);case"fma":return this.builtins.Fma(e,t);case"fract":return this.builtins.Fract(e,t);case"frexp":return this.builtins.Frexp(e,t);case"insertBits":return this.builtins.InsertBits(e,t);case"inverseSqrt":return this.builtins.InverseSqrt(e,t);case"ldexp":return this.builtins.Ldexp(e,t);case"length":return this.builtins.Length(e,t);case"log":return this.builtins.Log(e,t);case"log2":return this.builtins.Log2(e,t);case"max":return this.builtins.Max(e,t);case"min":return this.builtins.Min(e,t);case"mix":return this.builtins.Mix(e,t);case"modf":return this.builtins.Modf(e,t);case"normalize":return this.builtins.Normalize(e,t);case"pow":return this.builtins.Pow(e,t);case"quantizeToF16":return this.builtins.QuantizeToF16(e,t);case"radians":return this.builtins.Radians(e,t);case"reflect":return this.builtins.Reflect(e,t);case"refract":return this.builtins.Refract(e,t);case"reverseBits":return this.builtins.ReverseBits(e,t);case"round":return this.builtins.Round(e,t);case"saturate":return this.builtins.Saturate(e,t);case"sign":return this.builtins.Sign(e,t);case"sin":return this.builtins.Sin(e,t);case"sinh":return this.builtins.Sinh(e,t);case"smoothStep":return this.builtins.SmoothStep(e,t);case"sqrt":return this.builtins.Sqrt(e,t);case"step":return this.builtins.Step(e,t);case"tan":return this.builtins.Tan(e,t);case"tanh":return this.builtins.Tanh(e,t);case"transpose":return this.builtins.Transpose(e,t);case"trunc":return this.builtins.Trunc(e,t);case"dpdx":return this.builtins.Dpdx(e,t);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,t);case"dpdxFine":return this.builtins.DpdxFine(e,t);case"dpdy":return this.builtins.Dpdy(e,t);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,t);case"dpdyFine":return this.builtins.DpdyFine(e,t);case"fwidth":return this.builtins.Fwidth(e,t);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,t);case"fwidthFine":return this.builtins.FwidthFine(e,t);case"textureDimensions":return this.builtins.TextureDimensions(e,t);case"textureGather":return this.builtins.TextureGather(e,t);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,t);case"textureLoad":return this.builtins.TextureLoad(e,t);case"textureNumLayers":return this.builtins.TextureNumLayers(e,t);case"textureNumLevels":return this.builtins.TextureNumLevels(e,t);case"textureNumSamples":return this.builtins.TextureNumSamples(e,t);case"textureSample":return this.builtins.TextureSample(e,t);case"textureSampleBias":return this.builtins.TextureSampleBias(e,t);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,t);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,t);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,t);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,t);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,t);case"textureStore":return this.builtins.TextureStore(e,t);case"atomicLoad":return this.builtins.AtomicLoad(e,t);case"atomicStore":return this.builtins.AtomicStore(e,t);case"atomicAdd":return this.builtins.AtomicAdd(e,t);case"atomicSub":return this.builtins.AtomicSub(e,t);case"atomicMax":return this.builtins.AtomicMax(e,t);case"atomicMin":return this.builtins.AtomicMin(e,t);case"atomicAnd":return this.builtins.AtomicAnd(e,t);case"atomicOr":return this.builtins.AtomicOr(e,t);case"atomicXor":return this.builtins.AtomicXor(e,t);case"atomicExchange":return this.builtins.AtomicExchange(e,t);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,t);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,t);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,t);case"pack4xI8":return this.builtins.Pack4xI8(e,t);case"pack4xU8":return this.builtins.Pack4xU8(e,t);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,t);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,t);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,t);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,t);case"pack2x16float":return this.builtins.Pack2x16float(e,t);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,t);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,t);case"unpack4xI8":return this.builtins.Unpack4xI8(e,t);case"unpack4xU8":return this.builtins.Unpack4xU8(e,t);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,t);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,t);case"unpack2x16float":return this.builtins.Unpack2x16float(e,t);case"storageBarrier":return this.builtins.StorageBarrier(e,t);case"textureBarrier":return this.builtins.TextureBarrier(e,t);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,t);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,t);case"subgroupAdd":return this.builtins.SubgroupAdd(e,t);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,t);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,t);case"subgroupAll":return this.builtins.SubgroupAll(e,t);case"subgroupAnd":return this.builtins.SubgroupAnd(e,t);case"subgroupAny":return this.builtins.SubgroupAny(e,t);case"subgroupBallot":return this.builtins.SubgroupBallot(e,t);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,t);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,t);case"subgroupElect":return this.builtins.SubgroupElect(e,t);case"subgroupMax":return this.builtins.SubgroupMax(e,t);case"subgroupMin":return this.builtins.SubgroupMin(e,t);case"subgroupMul":return this.builtins.SubgroupMul(e,t);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,t);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,t);case"subgroupOr":return this.builtins.SubgroupOr(e,t);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,t);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,t);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,t);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,t);case"subgroupXor":return this.builtins.SubgroupXor(e,t);case"quadBroadcast":return this.builtins.QuadBroadcast(e,t);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,t);case"quadSwapX":return this.builtins.QuadSwapX(e,t);case"quadSwapY":return this.builtins.QuadSwapY(e,t)}const n=t.getFunction(e.name);if(n){const r=t.clone();for(let t=0;t<n.node.args.length;++t){const i=n.node.args[t],o=this.evalExpression(e.args[t],r);r.setVariable(i.name,o,i)}return this._execStatements(n.node.body,r)}return null}_callConstructorValue(e,t){if(!e.args||0===e.args.length)return new $y(0,this.getTypeInfo(e.type));const n=this.evalExpression(e.args[0],t);return n.typeInfo=this.getTypeInfo(e.type),n.getSubData(this,e.postfix,t).clone()}_callConstructorVec(e,t){const n=this.getTypeInfo(e.type),r=e.type.getTypeName(),i=mv[r];if(void 0===i)return console.error(`Invalid vec constructor ${r}. Line ${e.line}`),null;const o=[];if(e instanceof Sy)if(e.isVector){const t=e.vectorValue;for(const e of t)o.push(e)}else o.push(e.scalarValue);else if(e.args)for(const s of e.args){const e=this.evalExpression(s,t);if(e instanceof Vy){const t=e.data;for(let e=0;e<t.length;++e){let n=t[e];o.push(n)}}else if(e instanceof $y){let t=e.value;o.push(t)}}if(e.type instanceof py&&null===e.type.format&&(e.type.format=py.f32),0===o.length){const r=new Array(i).fill(0);return new Vy(r,n).getSubData(this,e.postfix,t)}if(1===o.length)for(;o.length<i;)o.push(o[0]);return o.length<i?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new Vy(o.length>i?o.slice(0,i):o,n).getSubData(this,e.postfix,t)}_callConstructorMatrix(e,t){const n=this.getTypeInfo(e.type),r=e.type.getTypeName(),i=yv[r];if(void 0===i)return console.error(`Invalid matrix constructor ${r}. Line ${e.line}`),null;const o=[];if(e instanceof Sy)if(e.isVector){const t=e.vectorValue;for(const e of t)o.push(e)}else o.push(e.scalarValue);else if(e.args)for(const s of e.args){const e=this.evalExpression(s,t);e instanceof Vy?o.push(...e.data):e instanceof $y?o.push(e.value):e instanceof Wy&&o.push(...e.data)}if(n instanceof fm&&null===n.format&&(n.format=this.getTypeInfo("f32")),0===o.length){const r=new Array(i[2]).fill(0);return new Wy(r,n).getSubData(this,e.postfix,t)}return o.length!==i[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new Wy(o,n).getSubData(this,e.postfix,t)}}vv._breakObj=new By(new cm("BREAK",null),null),vv._continueObj=new By(new cm("CONTINUE",null),null),vv._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class bv{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class _v{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new bv,this._exec=new vv,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const t=[];for(;!this._isAtEnd();){const e=this._global_decl_or_directive();if(!e)break;t.push(e)}if(this._deferArrayCountEval.length>0){for(const t of this._deferArrayCountEval){const n=t.arrayType,r=t.countNode;if(r instanceof wy){const t=r.name,i=this._context.constants.get(t);if(i)try{const e=i.constEvaluate(this._exec);n.count=e}catch(e){}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const n of t)n.search((e=>{e instanceof Fy||e instanceof gy?e.type=this._forwardType(e.type):e instanceof my?e.format=this._forwardType(e.format):e instanceof Vm||e instanceof Gm||e instanceof Hm?e.type=this._forwardType(e.type):e instanceof Bm?e.returnType=this._forwardType(e.returnType):e instanceof Oy&&(e.type=this._forwardType(e.type))}));return t}_forwardType(e){if(e instanceof hy){const t=this._getType(e.name);if(t)return t}else e instanceof gy?e.type=this._forwardType(e.type):e instanceof my&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if("string"==typeof e){const t=new Yy(e);this._tokens=t.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,t){return e.line=null!=t?t:this._currentLine,e}_error(e,t){return{token:e,message:t,toString:()=>`${t}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==qy.eof}_match(e){if(e instanceof Xy)return!!this._check(e)&&(this._advance(),!0);for(let t=0,n=e.length;t<n;++t){const n=e[t];if(this._check(n))return this._advance(),!0}return!1}_consume(e,t){if(this._check(e))return this._advance();throw this._error(this._peek(),`${t}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const t=this._peek();if(e instanceof Array){const n=t.type;let r=!1;for(const t of e){if(n===t)return!0;t===qy.tokens.name&&(r=!0)}if(r){const e=qy.tokens.name.rule.exec(t.lexeme);if(e&&0==e.index&&e[0]==t.lexeme)return!0}return!1}if(t.type===e)return!0;if(e===qy.tokens.name){const e=qy.tokens.name.rule.exec(t.lexeme);return e&&0==e.index&&e[0]==t.lexeme}return!1}_advance(){var e,t;return this._currentLine=null!==(t=null===(e=this._peek())||void 0===e?void 0:e.line)&&void 0!==t?t:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(qy.tokens.semicolon)&&!this._isAtEnd(););if(this._match(qy.keywords.alias)){const e=this._type_alias();return this._consume(qy.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}if(this._match(qy.keywords.diagnostic)){const e=this._diagnostic();return this._consume(qy.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}if(this._match(qy.keywords.requires)){const e=this._requires_directive();return this._consume(qy.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}if(this._match(qy.keywords.enable)){const e=this._enable_directive();return this._consume(qy.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([e]),e}const e=this._attribute();if(this._check(qy.keywords.var)){const t=this._global_variable_decl();return null!=t&&(t.attributes=e),this._consume(qy.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(qy.keywords.override)){const t=this._override_variable_decl();return null!=t&&(t.attributes=e),this._consume(qy.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(qy.keywords.let)){const t=this._global_let_decl();return null!=t&&(t.attributes=e),this._consume(qy.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(qy.keywords.const)){const t=this._global_const_decl();return null!=t&&(t.attributes=e),this._consume(qy.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([t]),t}if(this._check(qy.keywords.struct)){const t=this._struct_decl();return null!=t&&(t.attributes=e),this._exec.reflection.updateAST([t]),t}if(this._check(qy.keywords.fn)){const t=this._function_decl();return null!=t&&(t.attributes=e),this._exec.reflection.updateAST([t]),t}return null}_function_decl(){if(!this._match(qy.keywords.fn))return null;const e=this._currentLine,t=this._consume(qy.tokens.ident,"Expected function name.").toString();this._consume(qy.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(qy.tokens.paren_right))do{if(this._check(qy.tokens.paren_right))break;const e=this._attribute(),t=this._consume(qy.tokens.name,"Expected argument name.").toString();this._consume(qy.tokens.colon,"Expected ':' for argument type.");const r=this._attribute(),i=this._type_decl();null!=i&&(i.attributes=r,n.push(this._updateNode(new Oy(t,i,e))))}while(this._match(qy.tokens.comma));this._consume(qy.tokens.paren_right,"Expected ')' after function arguments.");let r=null;if(this._match(qy.tokens.arrow)){const e=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=e)}const i=this._compound_statement(),o=this._currentLine;return this._updateNode(new Bm(t,n,r,i,e,o),e)}_compound_statement(){const e=[];for(this._consume(qy.tokens.brace_left,"Expected '{' for block.");!this._check(qy.tokens.brace_right);){const t=this._statement();null!==t&&e.push(t)}return this._consume(qy.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(qy.tokens.semicolon)&&!this._isAtEnd(););if(this._check(qy.tokens.attr)&&this._attribute(),this._check(qy.keywords.if))return this._if_statement();if(this._check(qy.keywords.switch))return this._switch_statement();if(this._check(qy.keywords.loop))return this._loop_statement();if(this._check(qy.keywords.for))return this._for_statement();if(this._check(qy.keywords.while))return this._while_statement();if(this._check(qy.keywords.continuing))return this._continuing_statement();if(this._check(qy.keywords.static_assert))return this._static_assert_statement();if(this._check(qy.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(qy.keywords.return))e=this._return_statement();else if(this._check([qy.keywords.var,qy.keywords.let,qy.keywords.const]))e=this._variable_statement();else if(this._match(qy.keywords.discard))e=this._updateNode(new ly);else if(this._match(qy.keywords.break)){const t=this._updateNode(new cy);if(this._currentLoop.length>0){const e=this._currentLoop[this._currentLoop.length-1];t.loopId=e.id}e=t,this._check(qy.keywords.if)&&(this._advance(),t.condition=this._optional_paren_expression())}else if(this._match(qy.keywords.continue)){const t=this._updateNode(new uy);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${t.line}`);{const e=this._currentLoop[this._currentLoop.length-1];t.loopId=e.id}e=t}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return null!=e&&this._consume(qy.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(qy.keywords.static_assert))return null;const e=this._currentLine,t=this._optional_paren_expression();return this._updateNode(new Um(t),e)}_while_statement(){if(!this._match(qy.keywords.while))return null;const e=this._updateNode(new zm(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(qy.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(qy.keywords.continuing))return null;const t=this._currentLine,n=this._compound_statement();return this._updateNode(new $m(n,e),t)}_for_statement(){if(!this._match(qy.keywords.for))return null;this._consume(qy.tokens.paren_left,"Expected '('.");const e=this._updateNode(new jm(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(qy.tokens.semicolon)?null:this._for_init(),this._consume(qy.tokens.semicolon,"Expected ';'."),e.condition=this._check(qy.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(qy.tokens.semicolon,"Expected ';'."),e.increment=this._check(qy.tokens.paren_right)?null:this._for_increment(),this._consume(qy.tokens.paren_right,"Expected ')'."),this._check(qy.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(qy.keywords.var)){const e=this._variable_decl();if(null===e)throw this._error(this._peek(),"Variable declaration expected.");let t=null;return this._match(qy.tokens.equal)&&(t=this._short_circuit_or_expression()),this._updateNode(new Vm(e.name,e.type,e.storage,e.access,t),e.line)}if(this._match(qy.keywords.let)){const e=this._currentLine,t=this._consume(qy.tokens.name,"Expected name for let.").toString();let n=null;if(this._match(qy.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}this._consume(qy.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return this._updateNode(new Gm(t,n,null,null,r),e)}if(this._match(qy.keywords.const)){const e=this._currentLine,t=this._consume(qy.tokens.name,"Expected name for const.").toString();let n=null;if(this._match(qy.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}this._consume(qy.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return null===n&&r instanceof Sy&&(n=r.type),this._updateNode(new Hm(t,n,null,null,r),e)}return null}_increment_decrement_statement(){const e=this._current,t=this._unary_expression();if(null==t)return null;if(!this._check(qy.increment_operators))return this._current=e,null;const n=this._consume(qy.increment_operators,"Expected increment operator");return this._updateNode(new Zm(n.type===qy.tokens.plus_plus?Xm.increment:Xm.decrement,t))}_assignment_statement(){let e=null;const t=this._currentLine;if(this._check(qy.tokens.brace_right))return null;let n=this._match(qy.tokens.underscore);if(n||(e=this._unary_expression()),!n&&null==e)return null;const r=this._consume(qy.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return this._updateNode(new Qm(qm.parse(r.lexeme),e,i),t)}_func_call_statement(){if(!this._check(qy.tokens.ident))return null;const e=this._currentLine,t=this._current,n=this._consume(qy.tokens.ident,"Expected function name."),r=this._argument_expression_list();return null===r?(this._current=t,null):this._updateNode(new Jm(n.lexeme,r),e)}_loop_statement(){if(!this._match(qy.keywords.loop))return null;this._check(qy.tokens.attr)&&this._attribute(),this._consume(qy.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new ey([],null));this._currentLoop.push(e);let t=this._statement();for(;null!==t;){if(Array.isArray(t))for(let n of t)e.body.push(n);else e.body.push(t);if(t instanceof $m){e.continuing=t;break}t=this._statement()}return this._currentLoop.pop(),this._consume(qy.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(qy.keywords.switch))return null;const e=this._updateNode(new ty(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(qy.tokens.attr)&&this._attribute(),this._consume(qy.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),null==e.cases||0==e.cases.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(qy.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let t=!1;for(;this._check([qy.keywords.default,qy.keywords.case]);){if(this._match(qy.keywords.case)){const n=this._case_selectors();for(const e of n)if(e instanceof Iy){if(t)throw this._error(this._previous(),"Multiple default cases in switch statement.");t=!0;break}this._match(qy.tokens.colon),this._check(qy.tokens.attr)&&this._attribute(),this._consume(qy.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(qy.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new Ly(n,r)))}if(this._match(qy.keywords.default)){if(t)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(qy.tokens.colon),this._check(qy.tokens.attr)&&this._attribute(),this._consume(qy.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(qy.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new My(n)))}}return e}_case_selectors(){const e=[];for(this._match(qy.keywords.default)?e.push(this._updateNode(new Iy)):e.push(this._shift_expression());this._match(qy.tokens.comma);)this._match(qy.keywords.default)?e.push(this._updateNode(new Iy)):e.push(this._shift_expression());return e}_case_body(){if(this._match(qy.keywords.fallthrough))return this._consume(qy.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(null==e)return[];e instanceof Array||(e=[e]);const t=this._case_body();return 0==t.length?e:[...e,t[0]]}_if_statement(){if(!this._match(qy.keywords.if))return null;const e=this._currentLine,t=this._optional_paren_expression();this._check(qy.tokens.attr)&&this._attribute();const n=this._compound_statement();let r=[];this._match_elseif()&&(this._check(qy.tokens.attr)&&this._attribute(),r=this._elseif_statement(r));let i=null;return this._match(qy.keywords.else)&&(this._check(qy.tokens.attr)&&this._attribute(),i=this._compound_statement()),this._updateNode(new ny(t,n,r,i),e)}_match_elseif(){return this._tokens[this._current].type===qy.keywords.else&&this._tokens[this._current+1].type===qy.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this._optional_paren_expression(),n=this._compound_statement();return e.push(this._updateNode(new Ny(t,n))),this._match_elseif()&&(this._check(qy.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(qy.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new ry(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(qy.tokens.or_or);)e=this._updateNode(new Py(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(qy.tokens.and_and);)e=this._updateNode(new Py(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(qy.tokens.or);)e=this._updateNode(new Py(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(qy.tokens.xor);)e=this._updateNode(new Py(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(qy.tokens.and);)e=this._updateNode(new Py(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([qy.tokens.equal_equal,qy.tokens.not_equal])?this._updateNode(new Py(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([qy.tokens.less_than,qy.tokens.greater_than,qy.tokens.less_than_equal,qy.tokens.greater_than_equal]);)e=this._updateNode(new Py(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([qy.tokens.shift_left,qy.tokens.shift_right]);)e=this._updateNode(new Py(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([qy.tokens.plus,qy.tokens.minus]);)e=this._updateNode(new Py(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([qy.tokens.star,qy.tokens.forward_slash,qy.tokens.modulo]);)e=this._updateNode(new Py(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([qy.tokens.minus,qy.tokens.bang,qy.tokens.tilde,qy.tokens.star,qy.tokens.and])?this._updateNode(new ky(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),t=this._postfix_expression();return t&&(e.postfix=t),e}_postfix_expression(){if(this._match(qy.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(qy.tokens.bracket_right,"Expected ']'.");const t=this._updateNode(new Ay(e)),n=this._postfix_expression();return n&&(t.postfix=n),t}if(this._match(qy.tokens.period)){const e=this._consume(qy.tokens.name,"Expected member name."),t=this._postfix_expression(),n=this._updateNode(new by(e.lexeme));return t&&(n.postfix=t),n}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const t=this._getStruct(e);if(null!==t)return t;switch(e){case"void":return dy.void;case"bool":return dy.bool;case"i32":return dy.i32;case"u32":return dy.u32;case"f32":return dy.f32;case"f16":return dy.f16;case"vec2f":return py.vec2f;case"vec3f":return py.vec3f;case"vec4f":return py.vec4f;case"vec2i":return py.vec2i;case"vec3i":return py.vec3i;case"vec4i":return py.vec4i;case"vec2u":return py.vec2u;case"vec3u":return py.vec3u;case"vec4u":return py.vec4u;case"vec2h":return py.vec2h;case"vec3h":return py.vec3h;case"vec4h":return py.vec4h;case"mat2x2f":return py.mat2x2f;case"mat2x3f":return py.mat2x3f;case"mat2x4f":return py.mat2x4f;case"mat3x2f":return py.mat3x2f;case"mat3x3f":return py.mat3x3f;case"mat3x4f":return py.mat3x4f;case"mat4x2f":return py.mat4x2f;case"mat4x3f":return py.mat4x3f;case"mat4x4f":return py.mat4x4f;case"mat2x2h":return py.mat2x2h;case"mat2x3h":return py.mat2x3h;case"mat2x4h":return py.mat2x4h;case"mat3x2h":return py.mat3x2h;case"mat3x3h":return py.mat3x3h;case"mat3x4h":return py.mat3x4h;case"mat4x2h":return py.mat4x2h;case"mat4x3h":return py.mat4x3h;case"mat4x4h":return py.mat4x4h;case"mat2x2i":return py.mat2x2i;case"mat2x3i":return py.mat2x3i;case"mat2x4i":return py.mat2x4i;case"mat3x2i":return py.mat3x2i;case"mat3x3i":return py.mat3x3i;case"mat3x4i":return py.mat3x4i;case"mat4x2i":return py.mat4x2i;case"mat4x3i":return py.mat4x3i;case"mat4x4i":return py.mat4x4i;case"mat2x2u":return py.mat2x2u;case"mat2x3u":return py.mat2x3u;case"mat2x4u":return py.mat2x4u;case"mat3x2u":return py.mat3x2u;case"mat3x3u":return py.mat3x3u;case"mat3x4u":return py.mat3x4u;case"mat4x2u":return py.mat4x2u;case"mat4x3u":return py.mat4x3u;case"mat4x4u":return py.mat4x4u}return null}_validateTypeRange(e,t){if("i32"===t.name){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if("u32"===t.name&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(qy.tokens.ident)){const e=this._previous().toString();if(this._check(qy.tokens.paren_left)){const t=this._argument_expression_list(),n=this._getType(e);return null!==n?this._updateNode(new _y(n,t)):this._updateNode(new xy(e,t))}if(this._context.constants.has(e)){const t=this._context.constants.get(e);return this._updateNode(new Ey(e,t.value))}return this._updateNode(new wy(e))}if(this._match(qy.tokens.int_literal)){const e=this._previous().toString();let t=e.endsWith("i")||e.endsWith("i")?dy.i32:e.endsWith("u")||e.endsWith("U")?dy.u32:dy.x32;const n=parseInt(e);return this._validateTypeRange(n,t),this._updateNode(new Sy(new $y(n,this._exec.getTypeInfo(t)),t))}if(this._match(qy.tokens.uint_literal)){const e=parseInt(this._previous().toString());return this._validateTypeRange(e,dy.u32),this._updateNode(new Sy(new $y(e,this._exec.getTypeInfo(dy.u32)),dy.u32))}if(this._match([qy.tokens.decimal_float_literal,qy.tokens.hex_float_literal])){let e=this._previous().toString(),t=e.endsWith("h");t&&(e=e.substring(0,e.length-1));const n=parseFloat(e);this._validateTypeRange(n,t?dy.f16:dy.f32);const r=t?dy.f16:dy.f32;return this._updateNode(new Sy(new $y(n,this._exec.getTypeInfo(r)),r))}if(this._match([qy.keywords.true,qy.keywords.false])){let e=this._previous().toString()===qy.keywords.true.rule;return this._updateNode(new Sy(new $y(e?1:0,this._exec.getTypeInfo(dy.bool)),dy.bool))}if(this._check(qy.tokens.paren_left))return this._paren_expression();if(this._match(qy.keywords.bitcast)){this._consume(qy.tokens.less_than,"Expected '<'.");const e=this._type_decl();this._consume(qy.tokens.greater_than,"Expected '>'.");const t=this._paren_expression();return this._updateNode(new Ty(e,t))}const e=this._type_decl(),t=this._argument_expression_list();return this._updateNode(new _y(e,t))}_argument_expression_list(){if(!this._match(qy.tokens.paren_left))return null;const e=[];do{if(this._check(qy.tokens.paren_right))break;const t=this._short_circuit_or_expression();e.push(t)}while(this._match(qy.tokens.comma));return this._consume(qy.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(qy.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(qy.tokens.paren_right),e}_paren_expression(){this._consume(qy.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(qy.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(qy.keywords.struct))return null;const e=this._currentLine,t=this._consume(qy.tokens.ident,"Expected name for struct.").toString();this._consume(qy.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(qy.tokens.brace_right);){const e=this._attribute(),t=this._consume(qy.tokens.name,"Expected variable name.").toString();this._consume(qy.tokens.colon,"Expected ':' for struct member type.");const r=this._attribute(),i=this._type_decl();null!=i&&(i.attributes=r),this._check(qy.tokens.brace_right)?this._match(qy.tokens.comma):this._consume(qy.tokens.comma,"Expected ',' for struct member."),n.push(this._updateNode(new Fy(t,i,e)))}this._consume(qy.tokens.brace_right,"Expected '}' after struct body.");const r=this._currentLine,i=this._updateNode(new fy(t,n,e,r),e);return this._context.structs.set(t,i),i}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(qy.tokens.equal)){const t=this._const_expression();e.value=t}if(null!==e.type&&e.value instanceof Sy){if("x32"!==e.value.type.name&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else null===e.type&&e.value instanceof Sy&&(e.type="x32"===e.value.type.name?dy.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(qy.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(qy.keywords.const))return null;const t=this._consume(qy.tokens.name,"Expected variable name"),n=this._currentLine;let r=null;if(this._match(qy.tokens.colon)){const e=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=e)}let i=null;this._consume(qy.tokens.equal,"const declarations require an assignment");const o=this._short_circuit_or_expression();try{let e=[dy.f32],n=o.constEvaluate(this._exec,e);n instanceof $y&&this._validateTypeRange(n.value,e[0]),e[0]instanceof py&&null===e[0].format&&n.typeInfo instanceof fm&&null!==n.typeInfo.format&&("f16"===n.typeInfo.format.name?e[0].format=dy.f16:"f32"===n.typeInfo.format.name?e[0].format=dy.f32:"i32"===n.typeInfo.format.name?e[0].format=dy.i32:"u32"===n.typeInfo.format.name?e[0].format=dy.u32:"bool"===n.typeInfo.format.name?e[0].format=dy.bool:console.error(`TODO: impelement template format type ${n.typeInfo.format.name}`)),i=this._updateNode(new Sy(n,e[0])),this._exec.context.setVariable(t.toString(),n)}catch(e){i=o}if(null!==r&&i instanceof Sy){if("x32"!==i.type.name&&r.getTypeName()!==i.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${i.type.name} to ${r.name}. Line:${this._currentLine}`);i.type=r,i.isScalar&&this._validateTypeRange(i.scalarValue,i.type)}else null===r&&i instanceof Sy&&(r=null!==(e=null==i?void 0:i.type)&&void 0!==e?e:dy.f32,r===dy.x32&&(r=dy.i32));const s=this._updateNode(new Hm(t.toString(),r,"","",i),n);return this._context.constants.set(s.name,s),s}_global_let_decl(){if(!this._match(qy.keywords.let))return null;const e=this._currentLine,t=this._consume(qy.tokens.name,"Expected variable name");let n=null;if(this._match(qy.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}let r=null;if(this._match(qy.tokens.equal)&&(r=this._const_expression()),null!==n&&r instanceof Sy){if("x32"!==r.type.name&&n.getTypeName()!==r.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${r.type.name} to ${n.name}. Line:${this._currentLine}`);r.type=n}else null===n&&r instanceof Sy&&(n="x32"===r.type.name?dy.i32:r.type);return r instanceof Sy&&r.isScalar&&this._validateTypeRange(r.scalarValue,n),this._updateNode(new Gm(t.toString(),n,"","",r),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(qy.keywords.var))return null;const e=this._currentLine;let t="",n="";this._match(qy.tokens.less_than)&&(t=this._consume(qy.storage_class,"Expected storage_class.").toString(),this._match(qy.tokens.comma)&&(n=this._consume(qy.access_mode,"Expected access_mode.").toString()),this._consume(qy.tokens.greater_than,"Expected '>'."));const r=this._consume(qy.tokens.name,"Expected variable name");let i=null;if(this._match(qy.tokens.colon)){const e=this._attribute();i=this._type_decl(),null!=i&&(i.attributes=e)}return this._updateNode(new Vm(r.toString(),i,t,n,null),e)}_override_decl(){if(!this._match(qy.keywords.override))return null;const e=this._consume(qy.tokens.name,"Expected variable name");let t=null;if(this._match(qy.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}return this._updateNode(new Wm(e.toString(),t,null))}_diagnostic(){this._consume(qy.tokens.paren_left,"Expected '('");const e=this._consume(qy.tokens.ident,"Expected severity control name.");this._consume(qy.tokens.comma,"Expected ','");let t=this._consume(qy.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(qy.tokens.period)&&(t+=`.${this._consume(qy.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(qy.tokens.paren_right,"Expected ')'"),this._updateNode(new sy(e.toString(),t))}_enable_directive(){const e=this._consume(qy.tokens.ident,"identity expected.");return this._updateNode(new iy(e.toString()))}_requires_directive(){const e=[this._consume(qy.tokens.ident,"identity expected.").toString()];for(;this._match(qy.tokens.comma);){const t=this._consume(qy.tokens.ident,"identity expected.");e.push(t.toString())}return this._updateNode(new oy(e))}_type_alias(){const e=this._consume(qy.tokens.ident,"identity expected.");this._consume(qy.tokens.equal,"Expected '=' for type alias.");let t=this._type_decl();if(null===t)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);const n=this._updateNode(new ay(e.toString(),t));return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([qy.tokens.ident,...qy.texel_format,qy.keywords.bool,qy.keywords.f32,qy.keywords.i32,qy.keywords.u32])){const e=this._advance().toString();if(this._context.structs.has(e))return this._context.structs.get(e);if(this._context.aliases.has(e))return this._context.aliases.get(e).type;if(!this._getType(e)){const t=this._updateNode(new hy(e));return this._forwardTypeCount++,t}return this._updateNode(new dy(e))}let e=this._texture_sampler_types();if(e)return e;if(this._check(qy.template_types)){let e=this._advance().toString(),t=null,n=null;return this._match(qy.tokens.less_than)&&(t=this._type_decl(),n=null,this._match(qy.tokens.comma)&&(n=this._consume(qy.access_mode,"Expected access_mode for pointer").toString()),this._consume(qy.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new py(e,t,n))}if(this._match(qy.keywords.ptr)){let e=this._previous().toString();this._consume(qy.tokens.less_than,"Expected '<' for pointer.");const t=this._consume(qy.storage_class,"Expected storage_class for pointer");this._consume(qy.tokens.comma,"Expected ',' for pointer.");const n=this._type_decl();let r=null;return this._match(qy.tokens.comma)&&(r=this._consume(qy.access_mode,"Expected access_mode for pointer").toString()),this._consume(qy.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new gy(e,t.toString(),n,r))}const t=this._attribute();if(this._match(qy.keywords.array)){let n=null,r=-1;const i=this._previous();let o=null;if(this._match(qy.tokens.less_than)){n=this._type_decl(),this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let t="";if(this._match(qy.tokens.comma)){o=this._shift_expression();try{t=o.constEvaluate(this._exec).toString(),o=null}catch(e){t="1"}}this._consume(qy.tokens.greater_than,"Expected '>' for array."),r=t?parseInt(t):0}const s=this._updateNode(new my(i.toString(),t,n,r));return o&&this._deferArrayCountEval.push({arrayType:s,countNode:o}),s}return null}_texture_sampler_types(){if(this._match(qy.sampler_type))return this._updateNode(new yy(this._previous().toString(),null,null));if(this._match(qy.depth_texture_type))return this._updateNode(new yy(this._previous().toString(),null,null));if(this._match(qy.sampled_texture_type)||this._match(qy.multisampled_texture_type)){const e=this._previous();this._consume(qy.tokens.less_than,"Expected '<' for sampler type.");const t=this._type_decl();return this._consume(qy.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new yy(e.toString(),t,null))}if(this._match(qy.storage_texture_type)){const e=this._previous();this._consume(qy.tokens.less_than,"Expected '<' for sampler type.");const t=this._consume(qy.texel_format,"Invalid texel format.").toString();this._consume(qy.tokens.comma,"Expected ',' after texel format.");const n=this._consume(qy.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(qy.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new yy(e.toString(),t,n))}return null}_attribute(){let e=[];for(;this._match(qy.tokens.attr);){const t=this._consume(qy.attribute_name,"Expected attribute name"),n=this._updateNode(new Dy(t.toString(),null));if(this._match(qy.tokens.paren_left)){if(n.value=this._consume(qy.literal_or_ident,"Expected attribute value").toString(),this._check(qy.tokens.comma)){this._advance();do{const e=this._consume(qy.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(e)}while(this._match(qy.tokens.comma))}this._consume(qy.tokens.paren_right,"Expected ')'")}e.push(n)}return 0==e.length?null:e}}class xv extends uv{constructor(e){super(),e&&this.update(e)}update(e){const t=(new _v).parse(e);this.updateAST(t)}}function wv(e){const t={attributes:[],bindings:[]};let n;try{n=function(e){try{return new xv(e)}catch(t){if(t instanceof Error)throw t;let e="WGSL parse error";throw"object"===typeof t&&t?.message&&(e+=`: ${t.message} `),"object"===typeof t&&t?.token&&(e+=t.token.line||""),new Error(e,{cause:t})}}(e)}catch(o){return xh.error(o.message)(),t}for(const s of n.uniforms){const e=[];for(const t of s.type?.members||[])e.push({name:t.name,type:Ev(t.type)});t.bindings.push({type:"uniform",name:s.name,group:s.group,location:s.binding,members:e})}for(const s of n.textures)t.bindings.push({type:"texture",name:s.name,group:s.group,location:s.binding});for(const s of n.samplers)t.bindings.push({type:"sampler",name:s.name,group:s.group,location:s.binding});const r=n.entry.vertex[0],i=r?.inputs.length||0;for(let s=0;s<i;s++){const e=r.inputs[s];if("location"===e.locationType){const n=Ev(e.type);t.attributes.push({name:e.name,location:Number(e.location),type:n})}}return t}function Ev(e){return e.format?`${e.name}<${e.format.name}>`:e.name}const Sv={};function Tv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";Sv[e]=Sv[e]||1;return`${e}-${Sv[e]++}`}class Av{id;userData={};topology;bufferLayout=[];vertexCount;indices;attributes;constructor(e){if(this.id=e.id||Tv("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&Th.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){this.indices?.destroy();for(const e of Object.values(this.attributes))e.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function Cv(e,t){if(t instanceof Av)return t;const n=function(e,t){if(!t.indices)return;const n=t.indices.value;return e.createBuffer({usage:Th.INDEX,data:n})}(e,t),{attributes:r,bufferLayout:i}=function(e,t){const n=[],r={};for(const[o,s]of Object.entries(t.attributes)){let t=o;switch(o){case"POSITION":t="positions";break;case"NORMAL":t="normals";break;case"TEXCOORD_0":t="texCoords";break;case"COLOR_0":t="colors"}if(s){r[t]=e.createBuffer({data:s.value,id:`${o}-buffer`});const{value:i,size:a,normalized:l}=s;n.push({name:t,format:Ug(i,a,l)})}}const i=t._calculateVertexCount(t.attributes,t.indices);return{attributes:r,bufferLayout:n,vertexCount:i}}(e,t);return new Av({topology:t.topology||"triangle-list",bufferLayout:i,vertexCount:t.vertexCount,indices:n,attributes:r})}class kv extends Sh{static defaultProps=(()=>({...Sh.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0}))();get[Symbol.toStringTag](){return"ComputePipeline"}hash="";shaderLayout;constructor(e,t){super(e,t,kv.defaultProps),this.shaderLayout=t.shaderLayout}}class Pv{static defaultProps={...Bp.defaultProps};static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new Pv(e),e._lumaData.defaultPipelineFactory}device;destroyPolicy;_hashCounter=0;_hashes={};_renderPipelineCache={};_computePipelineCache={};constructor(e){this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}createRenderPipeline(e){const t={...Bp.defaultProps,...e},n=this._hashRenderPipeline(t);if(!this._renderPipelineCache[n]){const e=this.device.createRenderPipeline({...t,id:t.id?`${t.id}-cached`:void 0});e.hash=n,this._renderPipelineCache[n]={pipeline:e,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const t={...kv.defaultProps,...e},n=this._hashComputePipeline(t);if(!this._computePipelineCache[n]){const e=this.device.createComputePipeline({...t,id:t.id?`${t.id}-cached`:void 0});e.hash=n,this._computePipelineCache[n]={pipeline:e,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const t=e.hash,n=e instanceof kv?this._computePipelineCache:this._renderPipelineCache;n[t].useCount--,0===n[t].useCount&&"unused"===this.destroyPolicy&&(n[t].pipeline.destroy(),delete n[t])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const t=e.vs?this._getHash(e.vs.source):0,n=e.fs?this._getHash(e.fs.source):0,r=this._getHash(JSON.stringify(e.bufferLayout));if("webgl"===this.device.type)return`${t}/${n}V-BL${r}`;{const i=this._getHash(JSON.stringify(e.parameters));return`${t}/${n}V-T${e.topology}P${i}BL${r}`}}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}}class Rv{static defaultProps={...ap.defaultProps};static getDefaultShaderFactory(e){return e._lumaData.defaultShaderFactory||=new Rv(e),e._lumaData.defaultShaderFactory}device;destroyPolicy;_cache={};constructor(e){this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}createShader(e){const t=this._hashShader(e);let n=this._cache[t];if(!n){const r=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[t]=n={shader:r,useCount:0}}return n.useCount++,n.shader}release(e){const t=this._hashShader(e),n=this._cache[t];n&&(n.useCount--,0===n.useCount&&"unused"===this.destroyPolicy&&(delete this._cache[t],n.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}}let Iv=null,Lv=null;function Mv(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Mv(e[r],t[r],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const o of r){if(!t.hasOwnProperty(o))return!1;if(!Mv(e[o],t[o],n-1))return!1}return!0}return!1}function Ov(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach((n=>{const r=e[n];var i;qp(i=r)||"number"===typeof i||"boolean"===typeof i?t.uniforms[n]=r:t.bindings[n]=r})),t}class Nv{options={disableWarnings:!1};modules;moduleUniforms;moduleBindings;constructor(e,t){Object.assign(this.options,t);const n=wi(Object.values(e).filter((e=>e.dependencies)));for(const r of n)e[r.name]=r;xh.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[r,i]of Object.entries(e))this._addModule(i),i.name&&r!==i.name&&!this.options.disableWarnings&&xh.warn(`Module name: ${r} vs ${i.name}`)()}destroy(){}setProps(e){for(const t of Object.keys(e)){const n=t,r=e[n]||{},i=this.modules[n];if(!i){this.options.disableWarnings||xh.warn(`Module ${t} not found`)();continue}const o=this.moduleUniforms[n],s=this.moduleBindings[n],a=i.getUniforms?.(r,o)||r,{uniforms:l,bindings:c}=Ov(a);this.moduleUniforms[n]={...o,...l},this.moduleBindings[n]={...s,...c}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const t of Object.values(this.moduleBindings))Object.assign(e,t);return e}getDebugTable(){const e={};for(const[t,n]of Object.entries(this.moduleUniforms))for(const[r,i]of Object.entries(n))e[`${t}.${r}`]={type:this.modules[t].uniformTypes?.[r],value:String(i)};return e}_addModule(e){const t=e.name;this.moduleUniforms[t]=e.defaultUniforms||{},this.moduleBindings[t]={}}}let Fv="";async function Dv(e,t){const n=new Image;return n.crossOrigin=t?.crossOrigin||"anonymous",n.src=e.startsWith("http")?e:Fv+e,await n.decode(),t?await createImageBitmap(n,t):await createImageBitmap(n)}class Bv{device;id;texture;sampler;view;ready;isReady=!1;destroyed=!1;resolveReady=()=>{};rejectReady=()=>{};get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}constructor(e,t){this.device=e,this.id=t.id||Tv("async-texture"),"string"===typeof t?.data&&"2d"===t.dimension&&(t={...t,data:Dv(t.data)}),this.ready=new Promise(((e,t)=>{this.resolveReady=()=>{this.isReady=!0,e()},this.rejectReady=t})),this.initAsync(t)}async initAsync(e){const t=e.data,n=await Uv(t).then(undefined,undefined);if(this.destroyed)return;const r={...e,data:n};this.texture=this.device.createTexture(r),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const t=this.texture;this.texture=t.clone(e),t.destroy()}return!0}}async function Uv(e){if(e=await e,Array.isArray(e))return await Promise.all(e.map(Uv));if(e&&"object"===typeof e&&e.constructor===Object){const t=e,n=await Promise.all(Object.values(t)),r=Object.keys(t),i={};for(let e=0;e<r.length;e++)i[r[e]]=n[e];return i}return e}class zv{static defaultProps=(()=>({...Bp.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:$i.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0}))();device;id;source;vs;fs;pipelineFactory;shaderFactory;userData={};parameters;topology;bufferLayout;isInstanced=void 0;instanceCount=0;vertexCount;indexBuffer=null;bufferAttributes={};constantAttributes={};bindings={};uniforms={};vertexArray;transformFeedback=null;pipeline;shaderInputs;_uniformStore;_attributeInfos={};_gpuGeometry=null;_getModuleUniforms;props;_pipelineNeedsUpdate="newly created";_needsRedraw="initializing";_destroyed=!1;_lastDrawTimestamp=-1;get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}constructor(e,t){this.props={...zv.defaultProps,...t},t=this.props,this.id=t.id||Tv("model"),this.device=e,Object.assign(this.userData,t.userData);const n=Object.fromEntries(this.props.modules?.map((e=>[e.name,e]))||[]),r=t.shaderInputs||new Nv(n,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(r);const i=function(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}(e),o=(this.props.modules?.length>0?this.props.modules:this.shaderInputs?.getModules())||[];if("webgpu"===this.device.type&&this.props.source){const{source:e,getUniforms:t}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:i,...this.props,modules:o});this.source=e,this._getModuleUniforms=t,this.props.shaderLayout||=wv(this.source)}else{const{vs:e,fs:t,getUniforms:n}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:i,...this.props,modules:o});this.vs=e,this.fs=t,this._getModuleUniforms=n}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,t.geometry&&this.setGeometry(t.geometry),this.pipelineFactory=t.pipelineFactory||Pv.getDefaultPipelineFactory(this.device),this.shaderFactory=t.shaderFactory||Rv.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in t&&(this.isInstanced=t.isInstanced),t.instanceCount&&this.setInstanceCount(t.instanceCount),t.vertexCount&&this.setVertexCount(t.vertexCount),t.indexBuffer&&this.setIndexBuffer(t.indexBuffer),t.attributes&&this.setAttributes(t.attributes),t.constantAttributes&&this.setConstantAttributes(t.constantAttributes),t.bindings&&this.setBindings(t.bindings),t.uniforms&&this.setUniformsWebGL(t.uniforms),t.moduleSettings&&this.updateModuleSettingsWebGL(t.moduleSettings),t.transformFeedback&&(this.transformFeedback=t.transformFeedback),Object.seal(this)}destroy(){this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),this._gpuGeometry?.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||=e}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const t=this._areBindingsLoading();if(t)return xh.info(2,`>>> DRAWING ABORTED ${this.id}: ${t} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let n;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const t=this._getBindings();this.pipeline.setBindings(t,{disableWarnings:this.props.disableWarnings}),jv(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:r}=this.vertexArray,i=r?r.byteLength/("uint32"===r.indexType?4:2):void 0;n=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:i,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),n?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",n}setGeometry(e){this._gpuGeometry?.destroy();const t=e&&Cv(this.device,e);if(t){this.setTopology(t.topology||"triangle-list");const e=new nm(this.bufferLayout);this.bufferLayout=e.mergeBufferLayouts(t.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(t)}this._gpuGeometry=t}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const t=new nm(this.bufferLayout);this.bufferLayout=this._gpuGeometry?t.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){Mv(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,void 0===this.isInstanced&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new lm(this.shaderInputs.modules);for(const[t,n]of Object.entries(this.shaderInputs.modules))if($v(n)){const e=this._uniformStore.getManagedUniformBuffer(this.device,t);this.bindings[`${t}Uniforms`]=e}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,t){const n=t?.disableWarnings??this.props.disableWarnings;e.indices&&xh.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();const r=new nm(this.bufferLayout);for(const[i,o]of Object.entries(e)){const e=r.getBufferLayout(i);if(!e){n||xh.warn(`Model(${this.id}): Missing layout for buffer "${i}".`)();continue}const t=r.getAttributeNamesForBuffer(e);let s=!1;for(const n of t){const e=this._attributeInfos[n];e&&(this.vertexArray.setBuffer(e.location,o),s=!0)}s||n||xh.warn(`Model(${this.id}): Ignoring buffer "${o.id}" for unknown attribute "${i}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,t){for(const[n,r]of Object.entries(e)){const e=this._attributeInfos[n];e?this.vertexArray.setConstantWebGL(e.location,r):(t?.disableWarnings??this.props.disableWarnings)||xh.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){jv(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:t,uniforms:n}=Ov(this._getModuleUniforms(e));Object.assign(this.bindings,t),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof Bv&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[t,n]of Object.entries(this.bindings))n instanceof Bv?n.isReady&&(e[t]=n.texture):e[t]=n;return e}_getBindingsUpdateTimestamp(){let e=0;for(const t of Object.values(this.bindings))t instanceof Sp?e=Math.max(e,t.texture.updateTimestamp):t instanceof Th||t instanceof jf?e=Math.max(e,t.updateTimestamp):t instanceof Bv?e=t.texture?Math.max(e,t.texture.updateTimestamp):1/0:t instanceof hp||(e=Math.max(e,t.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const t={...e.attributes};for(const[n]of Object.entries(t))this.pipeline.shaderLayout.attributes.find((e=>e.name===n))||"positions"===n||delete t[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(t,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||=e,this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,t=null;this.pipeline&&(xh.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,t=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let r=null;this.source?r=n:this.fs&&(r=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:n,fs:r}),this._attributeInfos=cg(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),t&&this.shaderFactory.release(t)}return this.pipeline}_lastLogTime=0;_logOpen=!1;_logDrawCallStart(){const e=xh.level>3?0:1e4;xh.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,xh.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:xh.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=function(e){const t={},n="Values";if(0===e.attributes.length&&!e.varyings?.length)return{"No attributes or varyings":{[n]:"N/A"}};for(const r of e.attributes)r&&(t[`in ${r.location} ${r.name}: ${r.type}`]={[n]:r.stepMode||"vertex"});for(const r of e.varyings||[])t[`out ${r.location} ${r.name}`]={[n]:JSON.stringify(r)};return t}(this.pipeline.shaderLayout,this.id);xh.table(2,e)();const t=this.shaderInputs.getDebugTable();for(const[r,i]of Object.entries(this.uniforms))t[r]={value:i};xh.table(2,t)();const n=this._getAttributeDebugTable();xh.table(2,this._attributeInfos)(),xh.table(2,n)(),xh.groupEnd(2)(),this._logOpen=!1}}_drawCount=0;_logFramebuffer(e){const t=this.device.props.debugFramebuffers;if(this._drawCount++,!t)return;const n=e.props.framebuffer;n&&function(e,t){let{id:n,minimap:r,opaque:i,top:o="0",left:s="0",rgbaScale:a=1}=t;Iv||(Iv=document.createElement("canvas"),Iv.id=n,Iv.title=n,Iv.style.zIndex="100",Iv.style.position="absolute",Iv.style.top=o,Iv.style.left=s,Iv.style.border="blue 5px solid",Iv.style.transform="scaleY(-1)",document.body.appendChild(Iv),Lv=Iv.getContext("2d")),Iv.width===e.width&&Iv.height===e.height||(Iv.width=e.width/2,Iv.height=e.height/2,Iv.style.width="400px",Iv.style.height="400px");const l=e.device.readPixelsToArrayWebGL(e),c=Lv?.createImageData(e.width,e.height);if(c){const e=0;for(let t=0;t<l.length;t+=4)c.data[e+t+0]=l[t+0]*a,c.data[e+t+1]=l[t+1]*a,c.data[e+t+2]=l[t+2]*a,c.data[e+t+3]=i?255:l[t+3]*a;Lv?.putImageData(c,0,0)}}(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[t,n]of Object.entries(this._attributeInfos)){const r=this.vertexArray.attributes[n.location];e[n.location]={name:t,type:n.shaderType,values:r?this._getBufferOrConstantValues(r,n.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:t}=this.vertexArray,n="uint32"===t.indexType?new Uint32Array(t.debugData):new Uint16Array(t.debugData);e.indices={name:"indices",type:t.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,t){const n=Bg(t);return(e instanceof Th?new n(e.debugData):e).toString()}}function $v(e){return Boolean(e.uniformTypes&&!jv(e.uniformTypes))}function jv(e){for(const t in e)return!1;return!0}class Vv{device;model;transformFeedback;static defaultProps=(()=>({...zv.defaultProps,outputs:void 0,feedbackBuffers:void 0}))();static isSupported(e){return"webgl"===e?.info?.type}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vv.defaultProps;if(!Vv.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new zv(this.device,{id:t.id||"buffer-transform-model",fs:t.fs||tm(),topology:t.topology||"point-list",varyings:t.outputs||t.varyings,...t}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:t.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e?.inputBuffers&&this.model.setAttributes(e.inputBuffers),e?.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const t=this.device.beginRenderPass(e);this.model.draw(t),t.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const t=this.getBuffer(e);if(!t)throw new Error("BufferTransform#getBuffer");if(t instanceof Th)return t.readAsync();const{buffer:n,byteOffset:r=0,byteLength:i=n.byteLength}=t;return n.readAsync(r,i)}}function Wv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.fround(e),i=e-r;return t[n]=r,t[n+1]=i,t}function Gv(e){return e-Math.fround(e)}function Hv(e){const t=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=4*n+r;Wv(e[4*r+n],t,2*i)}return t}const Xv={name:"fp64arithmetic",vs:"\nuniform fp64arithmeticUniforms {\n  uniform float ONE;\n} fp64;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' form.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * fp64.ONE - (t - a);\n  float a_lo = a * fp64.ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * fp64.ONE;\n  float err = b - (sum - a) * fp64.ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * fp64.ONE - a) * fp64.ONE;\n  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * fp64.ONE - a) * fp64.ONE;\n  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *\n    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",defaultUniforms:{ONE:1},uniformTypes:{ONE:"f32"},fp64ify:Wv,fp64LowPart:Gv,fp64ifyMatrix4:Hv};function qv(e){const{source:t,target:n,start:r=0,size:i,getData:o}=e,s=e.end||n.length,a=t.length,l=s-r;if(a>l)return void n.set(t.subarray(0,l),r);if(n.set(t,r),!o)return;let c=a;for(;c<l;){const e=o(c,t);for(let t=0;t<i;t++)n[r+c]=e[t]||0,c++}}function Kv(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${e}"`)}}function Yv(e){switch(e){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function Zv(e){e.push(e.shift())}function Qv(e){let{device:t,source:n,target:r}=e;return(!r||r.byteLength<n.byteLength)&&(r?.destroy(),r=t.createBuffer({byteLength:n.byteLength,usage:n.usage})),r}function Jv(e){let{device:t,buffer:n,attribute:r,fromLength:i,toLength:o,fromStartIndices:s,getData:a=e=>e}=e;const l=r.doublePrecision&&r.value instanceof Float64Array?2:1,c=r.size*l,u=r.byteOffset,d=r.settings.bytesPerElement<4?u/r.settings.bytesPerElement*4:u,h=r.startIndices,f=s&&h,p=r.isConstant;if(!f&&n&&i>=o)return n;const g=r.value instanceof Float64Array?Float32Array:r.value.constructor,m=p?r.value:new g(r.getBuffer().readSyncWebGL(u,o*g.BYTES_PER_ELEMENT).buffer);if(r.settings.normalized&&!p){const e=a;a=(t,n)=>r.normalizeConstant(e(t,n))}const y=p?(e,t)=>a(m,t):(e,t)=>a(m.subarray(e+u,e+u+c),t),v=n?new Float32Array(n.readSyncWebGL(d,4*i).buffer):new Float32Array(0),b=new Float32Array(o);return function(e){let{source:t,target:n,size:r,getData:i,sourceStartIndices:o,targetStartIndices:s}=e;if(!o||!s)return qv({source:t,target:n,size:r,getData:i}),n;let a=0,l=0;const c=i&&((e,t)=>i(e+l,t)),u=Math.min(o.length,s.length);for(let d=1;d<u;d++){const e=o[d]*r,i=s[d]*r;qv({source:t.subarray(a,e),target:n,start:l,end:i,size:r,getData:c}),a=e,l=i}l<n.length&&qv({source:[],target:n,start:l,size:r,getData:c})}({source:v,target:b,sourceStartIndices:s,targetStartIndices:h,size:c,getData:y}),(!n||n.byteLength<b.byteLength+d)&&(n?.destroy(),n=t.createBuffer({byteLength:b.byteLength+d,usage:35050})),n.write(b,d),n}class eb{constructor(e){let{device:t,attribute:n,timeline:r}=e;this.buffers=[],this.currentLength=0,this.device=t,this.transition=new mu(r),this.attribute=n,this.attributeInTransition=function(e){const{device:t,settings:n,value:r}=e,i=new em(t,n);return i.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),i}(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=function(e,t){const{doublePrecision:n,settings:r,value:i,size:o}=e,s=n&&i instanceof Float64Array?2:1;let a=0;const{shaderAttributes:l}=e.settings;if(l)for(const c of Object.values(l))a=Math.max(a,c.vertexOffset??0);return(r.noAlloc?i.length:(t+a)*o)*s}(this.attribute,t),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}const tb={name:"interpolation",vs:"uniform interpolationUniforms {\n  float time;\n} interpolation;\n",uniformTypes:{time:"f32"}},nb="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, interpolation.time);\n  gl_Position = vec4(0.0);\n}\n",rb="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n";function ib(e){return e.doublePrecision&&e.value instanceof Float64Array}const ob={name:"spring",vs:"uniform springUniforms {\n  float damping;\n  float stiffness;\n} spring;\n",uniformTypes:{damping:"f32",stiffness:"f32"}},sb="#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE force = delta * spring.stiffness;\n  ATTRIBUTE_TYPE resistance = velocity * spring.damping;\n  return force - resistance + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",ab="#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}";const lb={interpolation:class extends eb{constructor(e){let{device:t,attribute:n,timeline:r}=e;super({device:t,attribute:n,timeline:r}),this.type="interpolation",this.transform=function(e,t){const n=t.size,r=Kv(n),i=Yv(n),o=t.getBufferLayout();if(ib(t))return new Vv(e,{vs:rb,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*n}]}],modules:[Xv,tb],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0});return new Vv(e,{vs:nb,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:o.attributes[0].format}],modules:[tb],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}(t,n)}start(e,t){const n=this.currentLength,r=this.currentStartIndices;if(super.start(e,t,e.duration),e.duration<=0)return void this.transition.cancel();const{buffers:i,attribute:o}=this;Zv(i),i[0]=Jv({device:this.device,buffer:i[0],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter}),i[1]=Qv({device:this.device,source:i[0],target:i[1]}),this.setBuffer(i[1]);const{transform:s}=this,a=s.model;let l=Math.floor(this.currentLength/o.size);ib(o)&&(l/=2),a.setVertexCount(l),o.isConstant?(a.setAttributes({aFrom:i[0]}),a.setConstantAttributes({aTo:o.value})):a.setAttributes({aFrom:i[0],aTo:o.getBuffer()}),s.transformFeedback.setBuffers({vCurrent:i[1]})}onUpdate(){const{duration:e,easing:t}=this.settings,{time:n}=this.transition;let r=n/e;t&&(r=t(r));const{model:i}=this.transform,o={time:r};i.shaderInputs.setProps({interpolation:o}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}},spring:class extends eb{constructor(e){let{device:t,attribute:n,timeline:r}=e;super({device:t,attribute:n,timeline:r}),this.type="spring",this.texture=function(e){return e.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}(t),this.framebuffer=function(e,t){return e.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[t]})}(t,this.texture),this.transform=function(e,t){const n=Kv(t.size),r=Yv(t.size);return new Vv(e,{vs:sb,fs:ab,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:t.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[ob],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}(t,n)}start(e,t){const n=this.currentLength,r=this.currentStartIndices;super.start(e,t);const{buffers:i,attribute:o}=this;for(let a=0;a<2;a++)i[a]=Jv({device:this.device,buffer:i[a],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter});i[2]=Qv({device:this.device,source:i[0],target:i[2]}),this.setBuffer(i[1]);const{model:s}=this.transform;s.setVertexCount(Math.floor(this.currentLength/o.size)),o.isConstant?s.setConstantAttributes({aTo:o.value}):s.setAttributes({aTo:o.getBuffer()})}onUpdate(){const{buffers:e,transform:t,framebuffer:n,transition:r}=this,i=this.settings;t.model.setAttributes({aPrev:e[0],aCur:e[1]}),t.transformFeedback.setBuffers({vNext:e[2]});const o={stiffness:i.stiffness,damping:i.damping};t.model.shaderInputs.setProps({spring:o}),t.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),Zv(e),this.setBuffer(e[1]);this.device.readPixelsToArrayWebGL(n)[0]>0||r.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}};class cb{constructor(e,t){let{id:n,timeline:r}=t;if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update(e){let{attributes:t,transitions:n,numInstances:r}=e;this.numInstances=r||1;for(const i in t){const e=t[i],r=e.getTransitionSetting(n);r&&this._updateAttribute(i,e,r)}for(const i in this.transitions){const e=t[i];e&&e.getTransitionSetting(n)||this._removeTransition(i)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,t,n){const r=this.transitions[e];let i=!r||r.type!==n.type;if(i){r&&this._removeTransition(e);const o=lb[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,device:this.device}):(Po.error(`unsupported transition type '${n.type}'`)(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const ub="attributeManager.invalidate";class db{constructor(e){let{id:t="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mergeBoundsMemoized=od(Za),this.id=t,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new cb(e,{id:`${t}-transitions`,timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const n=this._invalidateTrigger(e,t);Lo(ub,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Lo(ub,this,"all")}update(e){let{data:t,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}=e,l=!1;Lo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const e=this.attributes[c],i=e.settings.accessor;e.startIndices=r,e.numInstances=n,o[c]&&Po.removed(`props.${c}`,`data.attributes.${c}`)(),e.setExternalBuffer(s[c])||e.setBinaryValue("string"===typeof i?s[i]:void 0,t.startIndices)||"string"===typeof i&&!s[i]&&e.setConstantValue(o[i])||e.needsUpdate()&&(l=!0,this._updateAttribute({attribute:e,numInstances:n,data:t,props:o,context:a})),this.needsRedraw=this.needsRedraw||e.needsRedraw()}l&&Lo("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const t=e.map((e=>this.attributes[e]?.getBounds()));return this.mergeBoundsMemoized(t)}getChangedAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:t,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in t){const o=t[i];o.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getBufferLayouts(e){return Object.values(this.getAttributes()).map((t=>t.getBufferLayout(e)))}_add(e,t){for(const n in e){const r=e[n],i={...r,id:n,size:(r.isIndexed?1:r.size)||1,...t};this.attributes[n]=new em(this.device,i)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes){this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}))}this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:r}=this,i=r[e];return i&&i.forEach((e=>{const r=n[e];r&&r.setNeedsUpdate(r.id,t)})),i}_updateAttribute(e){const{attribute:t,numInstances:n}=e;if(Lo("attribute.updateStart",t),t.constant)return void t.setConstantValue(t.value);t.allocate(n)&&Lo("attribute.allocate",t,n);t.updateBuffer(e)&&(this.needsRedraw=!0,Lo("attribute.updateEnd",t,n))}}const hb=1e-5;function fb(e,t,n,r,i){const o=t-e;return(n-t)*i+-o*r+o+t}function pb(e,t){if(Array.isArray(e)){let n=0;for(let r=0;r<e.length;r++){const i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}const gb={interpolation:class extends mu{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:r,easing:i}}=this,o=i(e/r);this._value=xa(t,n,o)}},spring:class extends mu{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:r}=this.settings,{_prevValue:i=e,_currValue:o=e}=this;let s=function(e,t,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=fb(e[s],t[s],n[s],r,i);return o}return fb(e,t,n,r,i)}(i,o,t,n,r);const a=pb(s,t),l=pb(s,o);a<hb&&l<hb&&(s=t,this.end()),this._prevValue=o,this._currValue=s}}};class mb{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,r){const{transitions:i}=this;if(i.has(e)){const n=i.get(e),{value:r=n.settings.fromValue}=n;t=r,this.remove(e)}if(!(r=Jg(r)))return;const o=gb[r.type];if(!o)return void Po.error(`unsupported transition type '${r.type}'`)();const s=new o(this.timeline);s.start({...r,fromValue:t,toValue:n}),i.set(e,s)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function yb(e,t){const n=bb({newProps:e,oldProps:t,propTypes:e[ro],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=e;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t);let i=!1;return r||(i=function(e,t){if(null===t)return{all:!0};if("all"in e.updateTriggers){if(wb(e,t,"all"))return{all:!0}}const n={};let r=!1;for(const i in e.updateTriggers)if("all"!==i){wb(e,t,i)&&(n[i]=!0,r=!0)}return!!r&&n}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:xb(e,t),transitionsChanged:vb(e,t)}}function vb(e,t){if(!e.transitions)return!1;const n={},r=e[ro];let i=!1;for(const o in e.transitions){const s=r[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&_b(e[o],t[o],s)&&(n[o]=!0,i=!0)}return!!i&&n}function bb(e){let{newProps:t,oldProps:n,ignoreProps:r={},propTypes:i={},triggerName:o="props"}=e;if(n===t)return!1;if("object"!==typeof t||null===t)return`${o} changed shallowly`;if("object"!==typeof n||null===n)return`${o} changed shallowly`;for(const s of Object.keys(t))if(!(s in r)){if(!(s in n))return`${o}.${s} added`;const e=_b(t[s],n[s],i[s]);if(e)return`${o}.${s} ${e}`}for(const s of Object.keys(n))if(!(s in r)){if(!(s in t))return`${o}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const e=_b(t[s],n[s],i[s]);if(e)return`${o}.${s} ${e}`}}return!1}function _b(e,t,n){let r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||(r=e&&t&&e.equals,!r||r.call(e,t))?r||t===e?null:"changed shallowly":"changed deeply"}function xb(e,t){if(null===t)return!0;const n=t.extensions,{extensions:r}=e;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function wb(e,t,n){let r=e.updateTriggers[n];r=void 0===r||null===r?{}:r;let i=t.updateTriggers[n];i=void 0===i||null===i?{}:i;return bb({oldProps:i,newProps:r,triggerName:n})}function Eb(e){if(null===(t=e)||"object"!==typeof t)throw new Error("count(): argument not an object");var t;if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function Sb(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const r={...e.inject};for(const e in t.inject)r[e]=(r[e]||"")+t.inject[e];n.inject=r}else n.inject=t.inject;return n}const Tb=[0,0,0];function Ab(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.projectPosition(e);if(n&&t instanceof gu){const[n,i,o=0]=e,s=t.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function Cb(e,t){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:o,offsetMode:s}=t,[a,l,c=0]=e;switch(r&&([a,l,c]=fl([],[a,l,c,1],r)),i){case Yc.LNGLAT:return Ab([a,l,c],n,s);case Yc.LNGLAT_OFFSETS:return Ab([a+o[0],l+o[1],c+(o[2]||0)],n,s);case Yc.METER_OFFSETS:return Ab(jl(o,[a,l,c]),n,s);case Yc.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function kb(e,t){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(e){const{viewport:t,modelMatrix:n,coordinateOrigin:r}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return i===Yc.DEFAULT&&(i=t.isGeospatial?Yc.LNGLAT:Yc.CARTESIAN),void 0===o&&(o=i),void 0===s&&(s=r),{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(t),{autoOffset:l=!0}=t,{geospatialOrigin:c=Tb,shaderCoordinateOrigin:u=Tb,offsetMode:d=!1}=l?hd(n,r,i):{},h=Cb(e,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});if(d){const e=n.projectPosition(c||u);Ba(h,h,e)}return h}const Pb={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},Rb={};const Ib={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||Ob(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>lu(e,t,1)},accessor:{validate(e,t){const n=Nb(e);return"function"===n||n===Nb(t.value)},equal:(e,t,n)=>"function"===typeof t||lu(e,t,1)},array:{validate:(e,t)=>t.optional&&!e||Ob(e),equal(e,t,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?lu(e,t,i):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?lu(e,t,i):e===t}},function:{validate:(e,t)=>t.optional&&!e||"function"===typeof e,equal:(e,t,n)=>!n.compare&&!1!==n.ignore||e===t},data:{transform:(e,t,n)=>{if(!e)return e;const{dataTransform:r}=n.props;return r?r(e):"string"===typeof e.shape&&e.shape.endsWith("-table")&&Array.isArray(e.data)?e.data:e}},image:{transform:(e,t,n)=>{const r=n.context;return r&&r.device?function(e,t,n,r){if(n instanceof jf)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const o=t.createTexture({...n,sampler:{...Pb,...i,...r},mipmaps:!0});return Rb[o.id]=e,o}(n.id,r.device,e,{...t.parameters,...n.props.textureParameters}):null},release:(e,t,n)=>{var r,i;r=n.id,(i=e)&&i instanceof jf&&Rb[i.id]===r&&(i.delete(),delete Rb[i.id])}}};function Lb(e,t){switch(Nb(t)){case"object":return Mb(e,t);case"array":return Mb(e,{type:"array",value:t,compare:!1});case"boolean":return Mb(e,{type:"boolean",value:t});case"number":return Mb(e,{type:"number",value:t});case"function":return Mb(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Mb(e,t){return"type"in t?{name:e,...Ib[t.type],...t}:"value"in t?{name:e,type:Nb(t.value),...t}:{name:e,type:"object",value:t}}function Ob(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Nb(e){return Ob(e)?"array":null===e?"null":typeof e}const Fb="_mergedDefaultProps";function Db(e,t){if(!(e instanceof Vb.constructor))return{};let n=Fb;if(t)for(const i of t){const e=i.constructor;e&&(n+=`:${e.extensionName||e.name}`)}const r=zb(e,n);return r||(e[n]=function(e,t){const n=e.prototype;if(!n)return null;const r=Object.getPrototypeOf(e),i=Db(r),o=zb(e,"defaultProps")||{},s=function(e){const t={},n={},r={};for(const[i,o]of Object.entries(e)){const e=o?.deprecatedFor;if(e)r[i]=Array.isArray(e)?e:[e];else{const e=Lb(i,o);t[i]=e,n[i]=e.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(o),a=Object.assign(Object.create(null),i,s.defaultProps),l=Object.assign(Object.create(null),i?.[ro],s.propTypes),c=Object.assign(Object.create(null),i?.[io],s.deprecatedProps);for(const u of t){const e=Db(u.constructor);e&&(Object.assign(a,e),Object.assign(l,e[ro]),Object.assign(c,e[io]))}(function(e,t){const n=function(e){const t=e.componentName;t||Po.warn(`${e.name}.componentName not specified`)();return t||e.name}(t);Object.defineProperties(e,{id:{writable:!0,value:n}})})(a,e),function(e,t){const n={},r={};for(const i in t){const e=t[i],{name:o,value:s}=e;e.async&&(n[o]=s,r[o]=Bb(o))}e[oo]=n,e[so]={},Object.defineProperties(e,r)}(a,l),function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const r=`${this.id}: ${n}`;for(const i of t[n])Ub(this,i)||(this[i]=e);Po.deprecated(r,t[n].join("/"))()}})}(a,c),a[ro]=l,a[io]=c,0!==t.length||Ub(e,"_propTypes")||(e._propTypes=l);return a}(e,t||[]))}function Bb(e){return{enumerable:!0,set(t){"string"===typeof t||t instanceof Promise||qg(t)?this[so][e]=t:this[ao][e]=t},get(){if(this[ao]){if(e in this[ao]){return this[ao][e]||this[oo][e]}if(e in this[so]){const t=this[no]&&this[no].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[oo][e]}}return this[oo][e]}}}function Ub(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zb(e,t){return Ub(e,t)&&e[t]}let $b=0;class jb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props=function(e,t){let n;for(let o=t.length-1;o>=0;o--){const e=t[o];"extensions"in e&&(n=e.extensions)}const r=Db(e.constructor,n),i=Object.create(r);i[no]=e,i[so]={},i[ao]={};for(let o=0;o<t.length;++o){const e=t[o];for(const t in e)i[t]=e[t]}return Object.freeze(i),i}(this,t),this.id=this.props.id,this.count=$b++}clone(e){const{props:t}=this,n={};for(const r in t[oo])r in t[ao]?n[r]=t[ao][r]:r in t[so]&&(n[r]=t[so][r]);return new this.constructor({...t,...n,...e})}}jb.componentName="Component",jb.defaultProps={};const Vb=jb,Wb=Object.freeze({});class Gb{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Wb}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[no]||this.component;const t=e[ao]||{},n=e[so]||e,r=e[oo]||{};for(const i in t){const e=t[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,e),t[i]=this.getAsyncProp(i)}for(const i in n){const e=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,e)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){this._didAsyncInputValueChange(e,t)&&("string"===typeof t&&(t=this._fetch(e,t)),t instanceof Promise?this._watchPromise(e,t):qg(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,t,n){const r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;t.then((t=>{this.component&&(t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,r),this._onResolve(e,t))})).catch((t=>{this._onError(e,t)}))}}async _resolveAsyncIterable(e,t){if("data"!==e)return void this._setPropValue(e,t);const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const s of t){if(!this.component)return;const{dataTransform:t}=this.component.props;i=t?t(s,i):i.concat(s),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(e,i,r)}this._onResolve(e,i)}_postProcessValue(e,t){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.props[ro];this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class Hb extends Gb{constructor(e){let{attributeManager:t,layer:n}=e;super(n),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const n=this.layer,r=n?.props.fetch;return r?r(t,{propName:e,layer:n}):super._fetch(e,t)}_onResolve(e,t){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===e&&r&&r(t,{propName:e,layer:n})}}_onError(e,t){const n=this.layer;n&&n.raiseError(t,`loading ${e} of ${this.layer}`)}}const Xb=2**24-1,qb=Object.freeze([]),Kb=od((e=>{let{oldViewport:t,viewport:n}=e;return t.equals(n)}));let Yb=new Uint8ClampedArray(0);const Zb={data:{type:"data",value:qb,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,t)=>{let{propName:n,layer:r,loaders:i,loadOptions:o,signal:s}=t;const{resourceManager:a}=r.context;o=o||r.getLoadOptions(),i=i||r.props.loaders,s&&(o={...o,fetch:{...o?.fetch,signal:s}});let l=a.contains(e);return l||o||(a.add({resourceId:e,data:fa(e,i),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:e=>r.internalState?.reloadAsyncProp(n,e),consumerId:r.id,requestId:n}):fa(e,i,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Yc.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:e=>{let{layerIndex:t}=e;return[0,100*-t]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Qb extends Vb{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Yi,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){Eu(this.internalState);const t=this.internalState.viewport||this.context.viewport,n=Cb(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=Hl(n,t.pixelProjectionMatrix);return 2===e.length?[r,i]:[r,i,o]}unproject(e){Eu(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){Eu(this.internalState);return kb(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(){for(const e of this.getModels())e.shaderInputs.setProps(...arguments)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Yc.DEFAULT||e===Yc.LNGLAT||e===Yc.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){Eu(e instanceof Uint8Array);const[t,n,r]=e;return t+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Eb(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){return this.getAttributeManager()?.getBounds(["positions","instancePositions"])}getShaders(e){e=Sb(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const t of this.props.extensions)e=Sb(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&t)if(Array.isArray(n))for(const r of n)t.invalidateAll(r);else t.invalidateAll();if(t){const{props:n}=e,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((e=>e.getNeedsPickingBuffer.call(this,e)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:e,instancePickingColors:n}=t.attributes,r=e||n;r&&(i&&r.constant&&(r.constant=!1,t.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e.renderPass)}getPickingInfo(e){let{info:t,mode:n,sourceLayer:r}=e;const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(e,t){t&&(e=new Error(`${t}: ${e.message}`,{cause:e})),this.props.onError?.(e)||this.context?.onError?.(e,this)}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){return this.internalState?.uniformTransitions.active||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,t&&Kb({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){let t=!1;for(const n in e)e[n].layoutChanged()&&(t=!0);for(const n of this.getModels())this._setModelAttributes(n,e,t)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,n=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,t){let{numInstances:n}=t;if(e.constant)return;const r=Math.floor(Yb.length/4);if(this.internalState.usesPickingColorCache=!0,r<n){n>Xb&&Po.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Yb=ma.allocate(Yb,n,{size:4,copy:!0,maxCount:Math.max(n,Xb)});const e=Math.floor(Yb.length/4),t=[0,0,0];for(let n=r;n<e;n++)this.encodePickingColor(n,t),Yb[4*n+0]=t[0],Yb[4*n+1]=t[1],Yb[4*n+2]=t[2],Yb[4*n+3]=0}e.value=Yb.subarray(0,4*n)}_setModelAttributes(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Object.keys(t).length)return;if(n){const n=this.getAttributeManager();e.setBufferLayout(n.getBufferLayouts(e)),t=n.getAttributes()}const r=e.userData?.excludeAttributes||{},i={},o={};for(const s in t){if(r[s])continue;const n=t[s].getValue();for(const r in n){const a=n[r];a instanceof Th?t[s].settings.isIndexed?e.setIndexBuffer(a):i[r]=a:a&&(o[r]=a)}}e.setAttributes(i),e.setConstantAttributes(o)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t))return void this._disablePickingIndex(e);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&t.attributes&&t.attributes[i.id];if(o&&o.value){const n=o.value,r=this.encodePickingColor(e);for(let e=0;e<t.length;e++){const t=i.getVertexOffset(e);n[t]===r[0]&&n[t+1]===r[1]&&n[t+2]===r[2]&&this._disablePickingIndex(e)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,r=t||n;if(!r)return;const i=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.write(new Uint8Array(o-i),i)}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Yb.buffer&&(n.value=Yb.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){Eu(!this.internalState),Eu(Number.isFinite(this.props.coordinateSystem)),Lo("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Hb({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Po.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new mb(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Lo("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Lo("layer.update",this,e),!e)return;const t=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const e=this._getUpdateParams(),t=this.getModels();if(n.device)this.updateState(e);else try{this.updateState(e)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,e,n);this.setNeedsRedraw(),this._updateAttributes();const r=this.getModels()[0]!==t[0];this._postUpdate(e,r)}finally{n.viewport=i,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Lo("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer(e){let{renderPass:t,shaderModuleProps:n=null,uniforms:r={},parameters:i={}}=e;this._updateAttributeTransition();const o=this.props,s=this.context;this.props=this.internalState.propsInTransition||o;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:e}=this.props,o=e&&e(r)||[0,0];s.device instanceof xg&&s.device.setParametersWebGL({polygonOffset:o});for(const t of this.getModels())"webgpu"===t.device.type?t.setParameters({...t.parameters,...i}):t.setParameters(i);if(s.device instanceof xg)s.device.withParametersWebGL(i,(()=>{const e={renderPass:t,shaderModuleProps:n,uniforms:r,parameters:i,context:s};for(const t of this.props.extensions)t.draw.call(this,e,t);this.draw(e)}));else{const e={renderPass:t,shaderModuleProps:n,uniforms:r,parameters:i,context:s};for(const t of this.props.extensions)t.draw.call(this,e,t);this.draw(e)}}finally{this.props=o}}getChangeFlags(){return this.internalState?.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let n=!1;if("dataChanged"===r){const i=e[r],o=t[r];i&&Array.isArray(o)&&(t.dataChanged=Array.isArray(i)?o.concat(i):i,n=!0)}t[r]||(t[r]=e[r],n=!0),n&&Lo("layer.changeFlag",this,r,e)}const n=Boolean(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=n,t.somethingChanged=n||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const n=yb(e,t);if(n.updateTriggersChanged)for(const r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(const r in n.transitionsChanged)this.internalState.uniformTransitions.add(r,t[r],e[r],e.transitions?.[r]);return this.setChangeFlags(n)}validateProps(){!function(e){const t=e[ro];for(const n in t){const r=t[n],{validate:i}=r;if(i&&!i(e[n],r))throw new Error(`Invalid prop ${n}: ${e[n]}`)}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"===typeof n&&(t.highlightColor=n(e)),this.setShaderModuleProps({picking:t}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new db(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:n,oldProps:r}=e,i=this.state.model;i?.isInstanced&&i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(t||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){const e={};Array.isArray(a)&&(e.highlightColor=a),(t||r.autoHighlight!==o||s!==r.highlightedObjectIndex)&&(e.highlightedObjectColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setShaderModuleProps({picking:e})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(e);if(t=t||r,t)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Qb.defaultProps=Zb,Qb.layerName="Layer";const Jb=Qb,e_={position:"absolute",zIndex:-1};function t_(t,n){if("function"===typeof t)return t(n);if(Array.isArray(t))return t.map((e=>t_(e,n)));if(n_(t)){if(r=t,r.props?.mapStyle)return n.style=e_,(0,e.cloneElement)(t,n);if(function(e){const t=e.type;return t&&t.deckGLViewProps}(t))return(0,e.cloneElement)(t,n)}var r;return t}function n_(e){return e&&"object"===typeof e&&"type"in e||!1}function r_(t){if("function"===typeof t)return(0,e.createElement)(fu,{},t);if(Array.isArray(t))return t.map(r_);if(n_(t)){if(t.type===e.Fragment)return r_(t.props.children);if(Fg(t.type,fu))return t}return t}const i_=(0,e.createContext)();const o_={mixBlendMode:null};function s_(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const a_=e.forwardRef((function(t,n){const[r,i]=(0,e.useState)(0),o=(0,e.useRef)({control:null,version:r,forceUpdate:()=>i((e=>e+1))}),s=o.current,a=(0,e.useRef)(null),l=(0,e.useRef)(null),c=(0,e.useMemo)((()=>function(t){let{children:n,layers:r=[],views:i=null}=t;const o=[],s=[],a={};return e.Children.forEach(r_(n),(e=>{if(n_(e)){const t=e.type;if(Fg(t,Jb)){const n=function(e,t){const n={},r=e.defaultProps||{};for(const i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);s.push(n)}else o.push(e);if(Fg(t,fu)&&t!==fu&&e.props.id){const n=new t(e.props);a[n.id]=n}}else e&&o.push(e)})),Object.keys(a).length>0&&(Array.isArray(i)?i.forEach((e=>{a[e.id]=e})):i&&(a[i.id]=i),i=Object.values(a)),r=s.length>0?[...s,...r]:r,{layers:r,children:o,views:i}}(t)),[t.layers,t.views,t.children]);let u=!0;const d=e=>u&&t.viewState?(s.viewStateUpdateRequested=e,null):(s.viewStateUpdateRequested=null,t.onViewStateChange?.(e)),h=e=>{u?s.interactionStateUpdateRequested=e:(s.interactionStateUpdateRequested=null,t.onInteractionStateChange?.(e))},f=(0,e.useMemo)((()=>{const e={widgets:[],...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:l.current,layers:c.layers,views:c.views,onViewStateChange:d,onInteractionStateChange:h};return delete e._customRender,s.deck&&s.deck.setProps(e),e}),[t]);(0,e.useEffect)((()=>{const e=t.Deck||Og;return s.deck=function(e,t,n){const r=new t({...n,_customRender:"webgpu"===n.deviceProps?.adapters?.[0]?.type?void 0:t=>{e.redrawReason=t;const n=r.getViewports();e.lastRenderedViewports!==n?e.forceUpdate():s_(e)}});return r}(s,e,{...f,parent:a.current,canvas:l.current}),()=>s.deck?.finalize()}),[]),Ng((()=>{s_(s);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=s;e&&d(e),t&&h(t)})),(0,e.useImperativeHandle)(n,(()=>function(e){return{get deck(){return e.deck},pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)}}(s)),[]);const p=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:g,width:m="100%",height:y="100%",id:v,style:b}=t,{containerStyle:_,canvasStyle:x}=(0,e.useMemo)((()=>function(e){let{width:t,height:n,style:r}=e;const i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},o={left:0,top:0};if(r)for(const s in r)s in o_?o[s]=r[s]:i[s]=r[s];return{containerStyle:i,canvasStyle:o}}({width:m,height:y,style:b})),[m,y,b]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===p||s.version!==r){s.lastRenderedViewports=p,s.version=r;const t=function(t){let{children:n,deck:r,ContextProvider:i=i_.Provider}=t;const{viewManager:o}=r||{};if(!o||!o.views.length)return[];const s={},a=o.views[0].id;for(const e of n){let t=a,n=e;n_(e)&&Fg(e.type,fu)&&(t=e.props.id||a,n=e.props.children);const r=o.getViewport(t),i=o.getViewState(t);if(r){i.padding=r.padding;const{x:e,y:o,width:a,height:l}=r;n=t_(n,{x:e,y:o,width:a,height:l,viewport:r,viewState:i}),s[t]||(s[t]={viewport:r,children:[]}),s[t].children.push(n)}}return Object.keys(s).map((t=>{const{viewport:n,children:o}=s[t],{x:a,y:l,width:c,height:u}=n,d={position:"absolute",left:a,top:l,width:c,height:u},h=`view-${t}`,f=(0,e.createElement)("div",{key:h,id:h,style:d},...o),p={deck:r,viewport:n,container:r.canvas.offsetParent,eventManager:r.eventManager,onViewStateChange:e=>{e.viewId=t,r._onViewStateChange(e)},widgets:[]},g=`view-${t}-context`;return(0,e.createElement)(i,{key:g,value:p},f)}))}({children:c.children,deck:s.deck,ContextProvider:g}),n=(0,e.createElement)("canvas",{key:"canvas",id:v||"deckgl-overlay",ref:l,style:x});s.control=(0,e.createElement)("div",{id:`${v||"deckgl"}-wrapper`,ref:a,style:_},[n,t])}return u=!1,s.control})),l_=a_;class c_ extends Jb{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((e=>e.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo(e){let{info:t}=e;const{object:n}=t;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(t.object=n.__source.object,t.index=n.__source.index,t):t}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||t}getSubLayerRow(e,t,n){return e.__source={parent:this,object:t,index:n},e}getSubLayerAccessor(e){if("function"===typeof e){const t={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,r)}return e}getSubLayerProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{opacity:t,pickable:n,visible:r,parameters:i,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:a,highlightColor:l,coordinateSystem:c,coordinateOrigin:u,wrapLongitude:d,positionFormat:h,modelMatrix:f,extensions:p,fetch:g,operation:m,_subLayerProps:y}=this.props,v={id:"",updateTriggers:{},opacity:t,pickable:n,visible:r,parameters:i,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:a,highlightColor:l,coordinateSystem:c,coordinateOrigin:u,wrapLongitude:d,positionFormat:h,modelMatrix:f,extensions:p,fetch:g,operation:m},b=y&&e.id&&y[e.id],_=b&&b.updateTriggers,x=e.id||"sublayer";if(b){const t=this.props[ro],n=e.type?e.type._propTypes:{};for(const e in b){const r=n[e]||t[e];r&&"accessor"===r.type&&(b[e]=this.getSubLayerAccessor(b[e]))}}Object.assign(v,e,b),v.id=`${this.props.id}-${x}`,v.updateTriggers={all:this.props.updateTriggers?.all,...e.updateTriggers,..._};for(const w of p){const e=w.getSubLayerProps.call(this,w);e&&Object.assign(v,e,{updateTriggers:Object.assign(v.updateTriggers,e.updateTriggers)})}return v}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){n=Mo(this.renderLayers(),Boolean),this.internalState.subLayers=n}Lo("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}c_.layerName="CompositeLayer";const u_=c_;function d_(e){let{data:t,getIndex:n,dataRange:r,replace:i}=e;const{startRow:o=0,endRow:s=1/0}=r,a=t.length;let l=a,c=a;for(let h=0;h<a;h++){const e=n(t[h]);if(l>h&&e>=o&&(l=h),e>=s){c=h;break}}let u=l;const d=c-l!==i.length?t.slice(c):void 0;for(let h=0;h<i.length;h++)t[u++]=i[h];if(d){for(let e=0;e<d.length;e++)t[u++]=d[e];t.length=u}return{startRow:l,endRow:l+i.length}}const h_={name:"project32",dependencies:[vd],source:"// Define a structure to hold both the clip-space position and the common position.\nstruct ProjectResult {\n  clipPosition: vec4<f32>,\n  commonPosition: vec4<f32>,\n};\n\n// This function mimics the GLSL version with the 'out' parameter by returning both values.\nfn project_position_to_clipspace_and_commonspace(\n    position: vec3<f32>,\n    position64Low: vec3<f32>,\n    offset: vec3<f32>\n) -> ProjectResult {\n  // Compute the projected position.\n  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);\n\n  // Start with the provided offset.\n  var finalOffset: vec3<f32> = offset;\n\n  // Get whether a rotation is needed and the rotation matrix.\n  let rotationResult = project_needs_rotation(projectedPosition);\n\n  // If rotation is needed, update the offset.\n  if (rotationResult.needsRotation) {\n    finalOffset = rotationResult.transform * offset;\n  }\n\n  // Compute the common position.\n  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);\n\n  // Convert to clip-space.\n  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);\n\n  return ProjectResult(clipPosition, commonPosition);\n}\n\n// A convenience overload that returns only the clip-space position.\nfn project_position_to_clipspace(\n    position: vec3<f32>,\n    position64Low: vec3<f32>,\n    offset: vec3<f32>\n) -> vec4<f32> {\n  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;\n}\n",vs:"vec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},f_={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:[0,1,1,1]},vs:"uniform pickingUniforms {\n  float isActive;\n  float isAttribute;\n  float isHighlightActive;\n  float useFloatColors;\n  vec3 highlightedObjectColor;\n  vec4 highlightColor;\n} picking;\n\nout vec4 picking_vRGBcolor_Avalid;\n\n// Normalize unsigned byte color to 0-1 range\nvec3 picking_normalizeColor(vec3 color) {\n  return picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\n\n// Normalize unsigned byte color to 0-1 range\nvec4 picking_normalizeColor(vec4 color) {\n  return picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\n\nbool picking_isColorZero(vec3 color) {\n  return dot(color, vec3(1.0)) < 0.00001;\n}\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.00001;\n}\n\n// Check if this vertex is highlighted \nbool isVertexHighlighted(vec3 vertexColor) {\n  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\n  return\n    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\n\n// Set the current picking color\nvoid picking_setPickingColor(vec3 pickingColor) {\n  pickingColor = picking_normalizeColor(pickingColor);\n\n  if (bool(picking.isActive)) {\n    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!bool(picking.isAttribute)) {\n      // Stores the picking color so that the fragment shader can render it during picking\n      picking_vRGBcolor_Avalid.rgb = pickingColor;\n    }\n  } else {\n    // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\n\nvoid picking_setPickingAttribute(vec2 value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\n\nvoid picking_setPickingAttribute(vec3 value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform pickingUniforms {\n  float isActive;\n  float isAttribute;\n  float isHighlightActive;\n  float useFloatColors;\n  vec3 highlightedObjectColor;\n  vec4 highlightColor;\n} picking;\n\nin vec4 picking_vRGBcolor_Avalid;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  // If we are still picking, we don't highlight\n  if (picking.isActive > 0.5) {\n    return color;\n  }\n\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    // Blend in highlight color based on its alpha value\n    float highLightAlpha = picking.highlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  if (bool(picking.isActive)) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 picking_filterColor(vec4 color) {\n  vec4 highlightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highlightColor);\n}\n",getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};if(void 0===e.highlightedObjectColor);else if(null===e.highlightedObjectColor)t.isHighlightActive=!1;else{t.isHighlightActive=!0;const n=e.highlightedObjectColor.slice(0,3);t.highlightedObjectColor=n}if(e.highlightColor){const n=Array.from(e.highlightColor,(e=>e/255));Number.isFinite(n[3])||(n[3]=1),t.highlightColor=n}void 0!==e.isActive&&(t.isActive=Boolean(e.isActive),t.isAttribute=Boolean(e.isAttribute));void 0!==e.useFloatColors&&(t.useFloatColors=Boolean(e.useFloatColors));return t}};const p_={...f_,defaultUniforms:{...f_.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}};class g_{id;topology;vertexCount;indices;attributes;userData={};constructor(e){const{attributes:t={},indices:n=null,vertexCount:r=null}=e;this.id=e.id||Tv("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[i,o]of Object.entries(t)){const e=ArrayBuffer.isView(o)?{value:o}:o;if(!ArrayBuffer.isView(e.value))throw new Error(`${this._print(i)}: must be typed array or object with value as typed array`);if("POSITION"!==i&&"positions"!==i||e.size||(e.size=3),"indices"===i){if(this.indices)throw new Error("Multiple indices detected");this.indices=e}else this.attributes[i]=e}this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=r||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){return this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const r of Object.values(e)){const{value:e,size:t,constant:i}=r;!i&&e&&void 0!==t&&t>=1&&(n=Math.min(n,e.length/t))}return n}}const m_="uniform iconUniforms {\n  float sizeScale;\n  vec2 iconsTextureDim;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  bool billboard;\n  highp int sizeUnits;\n  float alphaCutoff;\n} icon;\n",y_={name:"icon",vs:m_,fs:m_,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},v_=()=>{},b_={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},__={x:0,y:0,width:0,height:0};function x_(e,t,n,r){const i=Math.min(n/t.width,r/t.height),o=Math.floor(t.width*i),s=Math.floor(t.height*i);return 1===i?{image:t,width:o,height:s}:(e.canvas.height=s,e.canvas.width=o,e.clearRect(0,0,o,s),e.drawImage(t,0,0,t.width,t.height,0,0,o,s),{image:e.canvas,width:o,height:s})}function w_(e){return e&&(e.id||e.url)}function E_(e,t,n){for(let r=0;r<t.length;r++){const{icon:i,xOffset:o}=t[r];e[w_(i)]={...i,x:o,y:n}}}class S_{constructor(e,t){let{onUpdate:n=v_,onError:r=v_}=t;this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=n,this.onError=r}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?w_(e):e;return this._mapping[t]||__}setProps(e){let{loadOptions:t,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}=e;t&&(this._loadOptions=t),void 0!==n&&(this._autoPacking=n),i&&(this._mapping=i),r&&(this._texture?.delete(),this._texture=null,this._externalTexture=r),o&&(this._samplerParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=Xg(e);for(const s of i){o.index++;const e=t(s,o),i=w_(e);if(!e)throw new Error("Icon is missing.");if(!e.url)throw new Error("Icon url is missing.");r[i]||n[i]&&e.url===n[i].url||(r[i]={...e,source:s,sourceIndex:o.index})}return r}(e,t,this._mapping)||{});if(n.length>0){const{mapping:e,xOffset:t,yOffset:r,rowHeight:i,canvasHeight:o}=function(e){let{icons:t,buffer:n,mapping:r={},xOffset:i=0,yOffset:o=0,rowHeight:s=0,canvasWidth:a}=e,l=[];for(let u=0;u<t.length;u++){const e=t[u];if(!r[w_(e)]){const{height:t,width:c}=e;i+c+n>a&&(E_(r,l,o),i=0,o=s+o+n,s=0,l=[]),l.push({icon:e,xOffset:i}),i=i+c+n,s=Math.max(s,t)}}return l.length>0&&E_(r,l,o),{mapping:r,rowHeight:s,xOffset:i,yOffset:o,canvasWidth:a,canvasHeight:(c=s+o+n,Math.pow(2,Math.ceil(Math.log2(c))))};var c}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=e,this._xOffset=t,this._yOffset=r,this._canvasHeight=o,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||b_,mipmaps:!0})),this._texture.height!==this._canvasHeight&&(this._texture=function(e,t,n,r){const{width:i,height:o,device:s}=e,a=s.createTexture({format:"rgba8unorm",width:t,height:n,sampler:r,mipmaps:!0}),l=s.createCommandEncoder();return l.copyTextureToTexture({sourceTexture:e,destinationTexture:a,width:i,height:o}),l.finish(),e.destroy(),a}(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||b_)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,fa(n.url,this._loadOptions).then((e=>{const r=w_(n),i=this._mapping[r],{x:o,y:s,width:a,height:l}=i,{image:c,width:u,height:d}=x_(t,e,a,l);this._texture?.copyExternalImage({image:c,x:o+(a-u)/2,y:s+(l-d)/2,width:u,height:d}),i.width=u,i.height=d,this._texture.generateMipmap(),this.onUpdate()})).catch((e=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:e})})).finally((()=>{this._pendingCount--}))}}const T_=[0,0,0,255],A_={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:T_},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class C_ extends Jb{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),\nicon.sizeMinPixels, icon.sizeMaxPixels\n);\nfloat instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (icon.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / icon.iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n",fs:"#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * layer.opacity * vColor.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[h_,p_,y_]})}initializeState(){this.state={iconManager:new S_(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:T_},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=t,{iconManager:u}=this.state;if("string"===typeof o)return;const d=o||this.internalState.isAsyncPropLoading("iconAtlas");u.setProps({loadOptions:t.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:c}),d?n.iconMapping!==t.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.packIcons(a,l),r.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),i.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw(e){let{uniforms:t}=e;const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();if(c){const e=this.state.model,t={iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:Qc[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a};e.shaderInputs.setProps({icon:t}),e.draw(this.context.renderPass)}}_getModel(){return new zv(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new g_({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([-1,-1,1,-1,-1,1,1,1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){const t=this.getCurrentLayer()?.props.onIconError;t?t(e):Po.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:n,anchorX:r=t/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,n/2-i]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(e);return[t,n,r,i]}}C_.defaultProps=A_,C_.layerName="IconLayer";const k_=C_,P_="uniform scatterplotUniforms {\n  float radiusScale;\n  float radiusMinPixels;\n  float radiusMaxPixels;\n  float lineWidthScale;\n  float lineWidthMinPixels;\n  float lineWidthMaxPixels;\n  float stroked;\n  float filled;\n  bool antialiasing;\n  bool billboard;\n  highp int radiusUnits;\n  highp int lineWidthUnits;\n} scatterplot;\n",R_={name:"scatterplot",vs:P_,fs:P_,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},I_=[0,0,0,255],L_={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:I_},getLineColor:{type:"accessor",value:I_},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class M_ extends Jb{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-vertex-shader\nin vec3 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceRadius;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout vec2 unitPosition;\nout float innerUnitRadius;\nout float outerRadiusPixels;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nouterRadiusPixels = clamp(\nproject_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),\nscatterplot.radiusMinPixels, scatterplot.radiusMaxPixels\n);\nfloat lineWidthPixels = clamp(\nproject_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),\nscatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels\n);\nouterRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;\nfloat edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\nunitPosition = edgePadding * positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\ninnerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;\nif (scatterplot.billboard) {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = edgePadding * positions * outerRadiusPixels;\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin vec2 unitPosition;\nin float innerUnitRadius;\nin float outerRadiusPixels;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition;\nfloat distToCenter = length(unitPosition) * outerRadiusPixels;\nfloat inCircle = scatterplot.antialiasing ?\nsmoothedge(distToCenter, outerRadiusPixels) :\nstep(distToCenter, outerRadiusPixels);\nif (inCircle == 0.0) {\ndiscard;\n}\nif (scatterplot.stroked > 0.5) {\nfloat isLine = scatterplot.antialiasing ?\nsmoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\nstep(innerUnitRadius * outerRadiusPixels, distToCenter);\nif (scatterplot.filled > 0.5) {\nfragColor = mix(vFillColor, vLineColor, isLine);\n} else {\nif (isLine == 0.0) {\ndiscard;\n}\nfragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n}\n} else if (scatterplot.filled < 0.5) {\ndiscard;\n} else {\nfragColor = vFillColor;\n}\nfragColor.a *= inCircle;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",source:'// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)\n\nstruct LayerUniforms {\n  opacity: f32,\n};\n\nvar<private> layer: LayerUniforms = LayerUniforms(1.0);\n// @group(0) @binding(1) var<uniform> layer: LayerUniforms;\n\n// Main shaders\n\nstruct ScatterplotUniforms {\n  radiusScale: f32,\n  radiusMinPixels: f32,\n  radiusMaxPixels: f32,\n  lineWidthScale: f32,\n  lineWidthMinPixels: f32,\n  lineWidthMaxPixels: f32,\n  stroked: f32,\n  filled: i32,\n  antialiasing: i32,\n  billboard: i32,\n  radiusUnits: i32,\n  lineWidthUnits: i32,\n};\n\nstruct ConstantAttributeUniforms {\n instancePositions: vec3<f32>,\n instancePositions64Low: vec3<f32>,\n instanceRadius: f32,\n instanceLineWidths: f32,\n instanceFillColors: vec4<f32>,\n instanceLineColors: vec4<f32>,\n instancePickingColors: vec3<f32>,\n\n instancePositionsConstant: i32,\n instancePositions64LowConstant: i32,\n instanceRadiusConstant: i32,\n instanceLineWidthsConstant: i32,\n instanceFillColorsConstant: i32,\n instanceLineColorsConstant: i32,\n instancePickingColorsConstant: i32\n};\n\n@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;\n\nstruct ConstantAttributes {\n  instancePositions: vec3<f32>,\n  instancePositions64Low: vec3<f32>,\n  instanceRadius: f32,\n  instanceLineWidths: f32,\n  instanceFillColors: vec4<f32>,\n  instanceLineColors: vec4<f32>,\n  instancePickingColors: vec3<f32>\n};\n\nconst constants = ConstantAttributes(\n  vec3<f32>(0.0),\n  vec3<f32>(0.0),\n  0.0,\n  0.0,\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec3<f32>(0.0)\n);\n\nstruct Attributes {\n  @builtin(instance_index) instanceIndex : u32,\n  @builtin(vertex_index) vertexIndex : u32,\n  @location(0) positions: vec3<f32>,\n  @location(1) instancePositions: vec3<f32>,\n  @location(2) instancePositions64Low: vec3<f32>,\n  @location(3) instanceRadius: f32,\n  @location(4) instanceLineWidths: f32,\n  @location(5) instanceFillColors: vec4<f32>,\n  @location(6) instanceLineColors: vec4<f32>,\n  @location(7) instancePickingColors: vec3<f32>\n};\n\nstruct Varyings {\n  @builtin(position) position: vec4<f32>,\n  @location(0) vFillColor: vec4<f32>,\n  @location(1) vLineColor: vec4<f32>,\n  @location(2) unitPosition: vec2<f32>,\n  @location(3) innerUnitRadius: f32,\n  @location(4) outerRadiusPixels: f32,\n};\n\n@vertex\nfn vertexMain(attributes: Attributes) -> Varyings {\n  var varyings: Varyings;\n\n  // Draw an inline geometry constant array clip space triangle to verify that rendering works.\n  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));\n  // if (attributes.instanceIndex == 0) {\n  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);\n  //   return varyings;\n  // }\n\n  // var geometry: Geometry;\n  // geometry.worldPosition = instancePositions;\n\n  // Multiply out radius and clamp to limits\n  varyings.outerRadiusPixels = clamp(\n    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),\n    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels\n  );\n\n  // Multiply out line width and clamp to limits\n  let lineWidthPixels = clamp(\n    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),\n    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;\n  // Expand geometry to accommodate edge smoothing\n  let edgePadding = select(\n    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,\n    1.0,\n    scatterplot.antialiasing != 0\n  );\n\n  // position on the containing square in [-1, 1] space\n  varyings.unitPosition = edgePadding * attributes.positions.xy;\n  geometry.uv = varyings.unitPosition;\n  geometry.pickingColor = attributes.instancePickingColors;\n\n  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;\n\n  if (scatterplot.billboard != 0) {\n    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);\n    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);\n    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;\n    // DECKGL_FILTER_SIZE(offset, geometry);\n    let clipPixels = project_pixel_size_to_clipspace(offset.xy);\n    varyings.position.x = clipPixels.x;\n    varyings.position.y = clipPixels.y;\n  } else {\n    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);\n    // DECKGL_FILTER_SIZE(offset, geometry);\n    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);\n    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);\n  }\n\n  // Apply opacity to instance color, or return instance picking color\n  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);\n  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);\n  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);\n  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);\n\n  return varyings;\n}\n\n@fragment\nfn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {\n  // var geometry: Geometry;\n  // geometry.uv = unitPosition;\n\n  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;\n  let inCircle = select(\n    smoothedge(distToCenter, varyings.outerRadiusPixels),\n    step(distToCenter, varyings.outerRadiusPixels),\n    scatterplot.antialiasing != 0\n  );\n\n  if (inCircle == 0.0) {\n    // discard;\n  }\n\n  var fragColor: vec4<f32>;\n\n  if (scatterplot.stroked != 0) {\n    let isLine = select(\n      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),\n      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),\n      scatterplot.antialiasing != 0\n    );\n\n    if (scatterplot.filled != 0) {\n      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        // discard;\n      }\n      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);\n    }\n  } else if (scatterplot.filled == 0) {\n    // discard;\n  } else {\n    fragColor = varyings.vFillColor;\n  }\n\n  fragColor.a *= inCircle;\n  // DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  return fragColor;\n  // return vec4<f32>(0, 0, 1, 1);\n}\n',modules:[h_,p_,R_]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e),e.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw(e){let{uniforms:t}=e;const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props,p={stroked:s,filled:a,billboard:l,antialiasing:c,radiusUnits:Qc[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Qc[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f},g=this.state.model;g.shaderInputs.setProps({scatterplot:p}),g.draw(this.context.renderPass)}_getModel(){return new zv(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new g_({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0])}}}),isInstanced:!0})}}M_.defaultProps=L_,M_.layerName="ScatterplotLayer";const O_=M_,N_="uniform sdfUniforms {\n  float gamma;\n  bool enabled;\n  float buffer;\n  float outlineBuffer;\n  vec4 outlineColor;\n} sdf;\n",F_={name:"sdf",vs:N_,fs:N_,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}},D_=.75,B_=[];class U_ extends k_{getShaders(){const e=super.getShaders();return{...e,modules:[...e.modules,F_],fs:"#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf.enabled) {\nfloat distance = alpha;\nalpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);\nif (sdf.outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);\ncolor = mix(sdf.outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(e,t)=>{let{index:n,target:r}=t;return this.encodePickingColor(n,r)}}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;let{outlineColor:r}=t;r!==n.outlineColor&&(r=r.map((e=>e/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&Po.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){const{sdf:t,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state,o=r?Math.max(n,D_*(1-r)):-1,s=this.state.model,a={buffer:D_,outlineBuffer:o,gamma:n,enabled:Boolean(t),outlineColor:i};if(s.shaderInputs.setProps({sdf:a}),super.draw(e),t&&r){const{iconManager:e}=this.state;e.getTexture()&&(s.shaderInputs.setProps({sdf:{...a,outlineBuffer:D_}}),s.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap((e=>super.getInstanceOffset(e))):B_}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap((e=>super.getInstanceIconFrame(e))):B_}}U_.defaultProps={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},U_.layerName="MultiIconLayer";const z_=U_,$_=1e20;class j_{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=r,this.radius=n;const a=this.size=e+4*t,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${s} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,s+Math.ceil(r)),c=a+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),f={data:h,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===a||0===l)return f;const{ctx:p,buffer:g,gridInner:m,gridOuter:y}=this;p.clearRect(g,g,a,l),p.fillText(e,g,g+s);const v=p.getImageData(g,g,a,l);y.fill($_,0,d),m.fill(0,0,d);for(let b=0;b<l;b++)for(let e=0;e<a;e++){const t=v.data[4*(b*a+e)+3]/255;if(0===t)continue;const n=(b+g)*c+e+g;if(1===t)y[n]=0,m[n]=$_;else{const e=.5-t;y[n]=e>0?e*e:0,m[n]=e<0?e*e:0}}V_(y,0,0,c,u,c,this.f,this.v,this.z),V_(m,g,g,a,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const e=Math.sqrt(y[b])-Math.sqrt(m[b]);h[b]=Math.round(255-255*(e/this.radius+this.cutoff))}return f}}function V_(e,t,n,r,i,o,s,a,l){for(let c=t;c<t+r;c++)W_(e,n*o+c,o,i,s,a,l);for(let c=n;c<n+i;c++)W_(e,c*o+t,1,r,s,a,l)}function W_(e,t,n,r,i,o,s){o[0]=0,s[0]=-$_,s[1]=$_,i[0]=e[t];for(let a=1,l=0,c=0;a<r;a++){i[a]=e[t+a*n];const r=a*a;do{const e=o[l];c=(i[a]-i[e]+r-e*e)/(a-e)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=$_}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;const r=o[l],c=a-r;e[t+a*n]=i[r]+c*c}}const G_=[];function H_(e,t,n,r){let i=0;for(let o=t;o<n;o++){const t=e[o];i+=r[t]?.layoutWidth||0}return i}function X_(e,t,n,r,i,o){let s=t,a=0;for(let l=t;l<n;l++){const t=H_(e,l,l+1,i);a+t>r&&(s<l&&o.push(l),s=l,a=0),a+=t}return a}function q_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=e.length);const s=[];return"break-all"===t?X_(e,i,o,n,r,s):function(e,t,n,r,i,o){let s=t,a=t,l=t,c=0;for(let u=t;u<n;u++)if(" "===e[u]?l=u+1:" "!==e[u+1]&&u+1!==n||(l=u+1),l>a){let t=H_(e,a,l,i);c+t>r&&(s<a&&(o.push(a),s=a,c=0),t>r&&(t=X_(e,a,l,r,i,o),s=o[o.length-1])),a=l,c+=t}}(e,i,o,n,r,s),s}function K_(e,t,n,r,i,o){let s=0,a=0;for(let l=t;l<n;l++){const t=e[l],n=r[t];n?(a||(a=n.layoutHeight),i[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(Po.warn(`Missing character: ${t} (${t.codePointAt(0)})`)(),i[l]=s,s+=32)}o[0]=s,o[1]=a}class Y_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this._cache={},this._order=[],this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const Z_={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let Q_=new Y_(3);function J_(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function ex(e,t,n,r){e.font=`${r} ${n}px ${t}`,e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}class tx{constructor(){this.props={...Z_}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(1.2*e+2*t)/e}setProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,e),this._key=this._getKey();const t=function(e,t){let n;n="string"===typeof t?new Set(Array.from(t)):new Set(t);const r=Q_.get(e);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}(this._key,this.props.characterSet),n=Q_.get(this._key);if(n&&0===t.size)return void(this._atlas!==n&&(this._atlas=n));const r=this._generateFontAtlas(t,n);this._atlas=r,Q_.set(this._key,r)}_generateFontAtlas(e,t){const{fontFamily:n,fontWeight:r,fontSize:i,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=t&&t.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});ex(u,n,i,r);const{mapping:d,canvasHeight:h,xOffset:f,yOffset:p}=function(e){let{characterSet:t,getFontWidth:n,fontHeight:r,buffer:i,maxCanvasWidth:o,mapping:s={},xOffset:a=0,yOffset:l=0}=e,c=0,u=a;const d=r+2*i;for(const f of t)if(!s[f]){const e=n(f);u+e+2*i>o&&(u=0,c++),s[f]={x:u+i,y:l+c*d+i,width:e,height:d,layoutWidth:e,layoutHeight:r},u+=e+2*i}return{mapping:s,xOffset:u,yOffset:l+c*d,canvasHeight:(h=l+(c+1)*d,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:e=>u.measureText(e).width,fontHeight:1.2*i,buffer:o,characterSet:e,maxCanvasWidth:1024,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(c.height!==h){const e=u.getImageData(0,0,c.width,c.height);c.height=h,u.putImageData(e,0,0)}if(ex(u,n,i,r),s){const t=new j_({fontSize:i,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:`${r}`});for(const n of e){const{data:e,width:r,height:o,glyphTop:s}=t.draw(n);d[n].width=r,d[n].layoutOffsetY=.9*i-s;const a=u.createImageData(r,o);J_(e,a),u.putImageData(a,d[n].x,d[n].y)}}else for(const g of e)u.fillText(g,d[g].x,d[g].y+o+.9*i);return{xOffset:f,yOffset:p,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:s}=this.props;return i?`${e} ${t} ${n} ${r} ${o} ${s}`:`${e} ${t} ${n} ${r}`}}const nx="uniform textBackgroundUniforms {\n  bool billboard;\n  float sizeScale;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  vec4 padding;\n  highp int sizeUnits;\n  bool stroked;\n} textBackground;\n",rx={name:"textBackground",vs:nx,fs:nx,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}},ix={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class ox extends Jb{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),\ntextBackground.sizeMinPixels, textBackground.sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (textBackground.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec2 pixelPosition = uv * dimensions;\nif (textBackground.stroked) {\nfloat distToEdge = min(\nmin(pixelPosition.x, dimensions.x - pixelPosition.x),\nmin(pixelPosition.y, dimensions.y - pixelPosition.y)\n);\nfloat isBorder = smoothedge(distToEdge, vLineWidth);\nfragColor = mix(vFillColor, vLineColor, isBorder);\n} else {\nfragColor = vFillColor;\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[h_,p_,rx]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;t.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw(e){let{uniforms:t}=e;const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]);const c=this.state.model,u={billboard:n,stroked:Boolean(a),padding:l,sizeUnits:Qc[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s};c.shaderInputs.setProps({textBackground:u}),c.draw(this.context.renderPass)}_getModel(){return new zv(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new g_({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,0,1,1,1])}}}),isInstanced:!0})}}ox.defaultProps=ix,ox.layerName="TextBackgroundLayer";const sx=ox,ax={start:1,middle:0,end:-1},lx={top:1,center:0,bottom:-1},cx=[0,0,0,255],ux={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:cx},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Z_.characterSet},fontFamily:Z_.fontFamily,fontWeight:Z_.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:cx},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:cx},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class dx extends u_{constructor(){super(...arguments),this.getBoundingRect=(e,t)=>{let{size:[n,r]}=this.transformParagraph(e,t);const{fontSize:i}=this.state.fontAtlasManager.props;n/=i,r/=i;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(ax["function"===typeof o?o(e,t):o]-1)*n/2,(lx["function"===typeof s?s(e,t):s]-1)*r/2,n,r]},this.getIconOffsets=(e,t)=>{const{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:i,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(e,t),c=ax["function"===typeof n?n(e,t):n],u=lx["function"===typeof r?r(e,t):r],d=i.length,h=new Array(2*d);let f=0;for(let p=0;p<d;p++){const e=(1-c)*(a-s[p])/2;h[f++]=(c-1)*a/2+e+i[p],h[f++]=(u-1)*l/2+o[p]}return h}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new tx},this.props.maxWidth>0&&Po.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:n,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(e){let{info:t}=e;return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,o={...e,characterSet:i,fontFamily:t,fontWeight:n};if(!r.mapping)return r.setProps(o),!0;for(const s in o)if(o[s]!==r.props[s])return r.setProps(o),!0;return!1}_updateText(){const{data:e,characterSet:t}=this.props,n=e.attributes?.getText;let r,{getText:i}=this.props,o=e.startIndices;const s="auto"===t&&new Set;if(n&&o){const{texts:t,characterCount:a}=function(e){let{value:t,length:n,stride:r,offset:i,startIndices:o,characterSet:s}=e;const a=t.BYTES_PER_ELEMENT,l=r?r/a:1,c=i?i/a:0,u=o[n]||Math.ceil((t.length-c)/l),d=s&&new Set,h=new Array(n);let f=t;if(l>1||c>0){f=new(0,t.constructor)(u);for(let e=0;e<u;e++)f[e]=t[e*l+c]}for(let p=0;p<n;p++){const e=o[p],t=o[p+1]||u,n=f.subarray(e,t);h[p]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const p of d)s.add(String.fromCodePoint(p));return{texts:h,characterCount:u}}({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:o,characterSet:s});r=a,i=(e,n)=>{let{index:r}=n;return t[r]}}else{const{iterable:t,objectInfo:n}=Xg(e);o=[0],r=0;for(const e of t){n.index++;const t=Array.from(i(e,n)||"");s&&t.forEach(s.add,s),r+=t.length,o.push(r)}}this.setState({getText:i,startIndices:o,numInstances:r,characterSet:s||t})}transformParagraph(e,t){const{fontAtlasManager:n}=this.state,r=n.mapping,i=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(e,t,n,r,i){const o=Array.from(e),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,d=[0,0],h=[0,0];let f=0,p=0,g=0;for(let m=0;m<=s;m++){const e=o[m];if("\n"!==e&&m!==s||(g=m),g>p){const e=u?q_(o,n,r,i,p,g):G_;for(let n=0;n<=e.length;n++){const r=0===n?p:e[n-1],s=n<e.length?e[n]:g;K_(o,r,s,i,a,h);for(let e=r;e<s;e++){const t=o[e],n=i[t]?.layoutOffsetY||0;l[e]=f+h[1]/2+n,c[e]=h[0]}f+=h[1]*t,d[0]=Math.max(d[0],h[0])}p=g}"\n"===e&&(a[p]=0,l[p]=0,c[p]=0,p++)}return d[1]=f,{x:a,y:l,rowWidth:c,size:d}}(i(e,t)||"",s,o,a*n.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:t,getText:n,fontAtlasManager:{scale:r,atlas:i,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:v,billboard:b,fontSettings:_,outlineWidth:x,outlineColor:w,sizeScale:E,sizeUnits:S,sizeMinPixels:T,sizeMaxPixels:A,transitions:C,updateTriggers:k}=this.props,P=this.getSubLayerClass("characters",z_),R=this.getSubLayerClass("background",sx);return[v&&new R({getFillColor:p,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:d,getAngle:h,getPixelOffset:f,billboard:b,sizeScale:E,sizeUnits:S,sizeMinPixels:T,sizeMaxPixels:A,transitions:C&&{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:k.getPosition,getAngle:k.getAngle,getSize:k.getSize,getFillColor:k.getBackgroundColor,getLineColor:k.getBorderColor,getLineWidth:k.getBorderWidth,getPixelOffset:k.getPixelOffset,getBoundingRect:{getText:k.getText,getTextAnchor:k.getTextAnchor,getAlignmentBaseline:k.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new P({sdf:_.sdf,smoothing:Number.isFinite(_.smoothing)?_.smoothing:Z_.smoothing,outlineWidth:x/(_.radius||Z_.radius),outlineColor:w,iconAtlas:i,iconMapping:o,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,billboard:b,sizeScale:E*r,sizeUnits:S,sizeMinPixels:T*r,sizeMaxPixels:A*r,transitions:C&&{getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:k.getText,getPosition:k.getPosition,getAngle:k.getAngle,getColor:k.getColor,getSize:k.getSize,getPixelOffset:k.getPixelOffset,getIconOffsets:{getTextAnchor:k.getTextAnchor,getAlignmentBaseline:k.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){!function(e){Po.assert(Number.isFinite(e)&&e>=3,"Invalid cache limit"),Q_=new Y_(e)}(e)}}dx.defaultProps=ux,dx.layerName="TextLayer";const hx=dx;class fx{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:t={}}=e;this.typedArrayManager=ma,this.attributes={},this._attributeDefs=t,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:t,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=t,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,i&&(Eu(t.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),a||(n.vertexPositions=i)),this.geometryBuffer=n.vertexPositions,Array.isArray(s))for(const l of s)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(e){let{startRow:t,endRow:n}=e;this._rebuildGeometry({startRow:t,endRow:n})}getGeometryFromBuffer(e){const t=e.value||e;return ArrayBuffer.isView(t)?Kg(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,t){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(const s in i)if(s in r)o.release(n[s]),n[s]=null;else{const r=i[s];r.copy=t,n[s]=o.allocate(n[s],e,r)}}_forEachGeometry(e,t,n){const{data:r,getGeometry:i}=this,{iterable:o,objectInfo:s}=Xg(r,t,n);for(const a of o){s.index++;e(i?i(a,s):null,s.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:t,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=e||{},l={};if(e||(t=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((e,t)=>{const r=e&&this.normalizeGeometry(e);l[t]=r,n[t+1]=n[t]+(r?this.getGeometrySize(r):0)}),s,a),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(o))r=r||o.length/this.positionSize;else if(o instanceof Th){const e=4*this.positionSize;r=r||o.byteLength/e}else if(o.buffer){const e=o.stride||4*this.positionSize;r=r||o.buffer.byteLength/e}else if(o.value){const e=o.value,t=o.stride/e.BYTES_PER_ELEMENT||this.positionSize;r=r||e.length/t}this._allocate(r,Boolean(e)),this.indexStarts=t,this.vertexStarts=n,this.instanceCount=r;const c={};this._forEachGeometry(((e,i)=>{const o=l[i]||e;c.vertexStart=n[i],c.indexStart=t[i];const s=i<n.length-1?n[i+1]:r;c.geometrySize=s-n[i],c.geometryIndex=i,this.updateGeometryAttributes(o,c)}),s,a),this.vertexCount=t[t.length-1]}}const px=1,gx=-1;function mx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:r=e.length,plane:i="xy"}=t,o=t.size||2;let s=0;const a=yx[i[0]],l=yx[i[1]];for(let c=n,u=r-o;c<r;c+=o)s+=(e[c+a]-e[u+a])*(e[c+l]+e[u+l]),u=c;return s/2}(e,t))}(e,n);return r!==t&&(function(e,t){const{start:n=0,end:r=e.length,size:i=2}=t,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const t=n+a*i,r=n+(o-1-a)*i;for(let n=0;n<i;++n){const i=e[t+n];e[t+n]=e[r+n],e[r+n]=i}}}(e,n),!0)}const yx={x:0,y:1,z:2};function vx(e,t,n,r){let i,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-e[1])/(t[1]-e[1]),o=3;else if(4&n)i=(r[1]-e[1])/(t[1]-e[1]),o=1;else if(2&n)i=(r[2]-e[0])/(t[0]-e[0]),o=2;else{if(!(1&n))return null;i=(r[0]-e[0])/(t[0]-e[0]),o=0}for(let a=0;a<e.length;a++)s[a]=(1&o)===a?r[o]:i*(t[a]-e[a])+e[a];return s}function bx(e,t){let n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function _x(e,t){const n=t.length,r=e.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(e[r-n+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)e[r+i]=t[i];return!0}function xx(e,t){const n=t.length;for(let r=0;r<n;r++)e[r]=t[r]}function wx(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=r+t*n;for(let s=0;s<n;s++)i[s]=e[o+s];return i}function Ex(e,t){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t||{},l=(a-s)/n;let c=[];const u=[c],d=wx(e,0,n,s);let h,f;const p=Ax(d,i,o,[]),g=[];_x(c,d);for(let m=1;m<l;m++){for(h=wx(e,m,n,s,h),f=bx(h,p);f;){vx(d,h,f,p,g);const e=bx(g,p);e&&(vx(d,g,e,p,g),f=e),_x(c,g),xx(d,g),Cx(p,i,f),r&&c.length>n&&(c=[],u.push(c),_x(c,d)),f=bx(h,p)}_x(c,h),xx(d,h)}return r?u:u[0]}function Sx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!e.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:e,types:s?new Array(e.length/r).fill(1):null,holes:t||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:e,types:t,holes:n}=l.shift();kx(e,r,n[0]||e.length,c),u=Ax(c[0],i,o,u);const d=bx(c[1],u);if(d){let i=Tx(e,t,r,0,n[0]||e.length,u,d);const o={pos:i[0].pos,types:i[0].types,holes:[]},a={pos:i[1].pos,types:i[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)i=Tx(e,t,r,n[l],n[l+1]||e.length,u,d),i[0]&&(o.holes.push(o.pos.length),o.pos=Px(o.pos,i[0].pos),s&&(o.types=Px(o.types,i[0].types))),i[1]&&(a.holes.push(a.pos.length),a.pos=Px(a.pos,i[1].pos),s&&(a.types=Px(a.types,i[1].types)))}else{const r={positions:e};s&&(r.edgeTypes=t),n.length&&(r.holeIndices=n),a.push(r)}}return a}function Tx(e,t,n,r,i,o,s){const a=(i-r)/n,l=[],c=[],u=[],d=[],h=[];let f,p,g;const m=wx(e,a-1,n,r);let y=Math.sign(8&s?m[1]-o[3]:m[0]-o[2]),v=t&&t[a-1],b=0,_=0;for(let x=0;x<a;x++)f=wx(e,x,n,r,f),p=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),g=t&&t[r/n+x],p&&y&&y!==p&&(vx(m,f,s,o,h),_x(l,h)&&u.push(v),_x(c,h)&&d.push(v)),p<=0?(_x(l,f)&&u.push(g),b-=p):u.length&&(u[u.length-1]=0),p>=0?(_x(c,f)&&d.push(g),_+=p):d.length&&(d[d.length-1]=0),xx(m,f),y=p,v=g;return[b?{pos:l,types:t&&u}:null,_?{pos:c,types:t&&d}:null]}function Ax(e,t,n,r){const i=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return r[0]=i,r[1]=o,r[2]=i+t,r[3]=o+t,r}function Cx(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function kx(e,t,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=t){const t=e[l],n=e[l+1];i=t<i?t:i,o=t>o?t:o,s=n<s?n:s,a=n>a?n:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}function Px(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function Rx(e,t,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=t){const t=Math.abs(e[s]);t>i&&(i=t,o=s-1)}return o}function Ix(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85.051129;const o=e[n],s=e[r-t];if(Math.abs(o-s)>180){const r=wx(e,0,t,n);r[0]+=360*Math.round((s-o)/360),_x(e,r),r[1]=Math.sign(r[1])*i,_x(e,r),r[0]=o,_x(e,r)}}function Lx(e,t,n,r){let i,o=e[0];for(let s=n;s<r;s+=t){i=e[s];const t=i-o;(t>180||t<-180)&&(i-=360*Math.round(t/360)),e[s]=o=i}}function Mx(e,t){let n;const r=e.length/t;for(let o=0;o<r&&(n=e[o*t],(n+180)%360===0);o++);const i=360*-Math.round(n/360);if(0!==i)for(let o=0;o<r;o++)e[o*t]+=i}function Ox(e,t,n,r){let i;if(Array.isArray(e[0])){const n=e.length*t;i=new Array(n);for(let r=0;r<e.length;r++)for(let n=0;n<t;n++)i[r*t+n]=e[r][n]||0}else i=e;return n?Ex(i,{size:t,gridResolution:n}):r?function(e,t){const{size:n=2,startIndex:r=0,endIndex:i=e.length,normalize:o=!0}=t||{},s=e.slice(r,i);Lx(s,n,0,i-r);const a=Ex(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)Mx(l,n);return a}(i,{size:t}):i}class Nx extends fx{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?Ox(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(Fx(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}const t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+2:t}updateGeometryAttributes(e,t){if(0!==t.geometrySize)if(e&&Fx(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}_updateSegmentTypes(e,t){const n=this.attributes.segmentTypes,r=!!e&&this.isClosed(e),{vertexStart:i,geometrySize:o}=t;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(e,t){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:r,geometrySize:i}=t,o=new Array(3);for(let s=r,a=0;a<i;s++,a++)this.getPointOnPath(e,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:r}=this;t*r>=e.length&&(t+=1-e.length/r);const i=t*r;return n[0]=e[i],n[1]=e[i+1],n[2]=3===r&&e[i+2]||0,n}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:t}=this,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}function Fx(e){return Array.isArray(e[0])}const Dx="uniform pathUniforms {\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  float jointType;\n  float capType;\n  float miterLimit;\n  bool billboard;\n  highp int widthUnits;\n} path;\n",Bx={name:"path",vs:Dx,fs:Dx,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",jointType:"f32",capType:"f32",miterLimit:"f32",billboard:"f32",widthUnits:"i32"}},Ux=[0,0,0,255],zx={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:Ux},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},$x={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class jx extends Jb{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = path.capType;\n} else {\nvJointType = path.jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),\npath.widthMinPixels, path.widthMaxPixels) / 2.0);\nvec3 width;\nif (path.billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[h_,p_,Bx]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const e=!0;this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:$x,accessor:"getPath",update:this.calculatePositions,noAlloc:e,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:e},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:$x,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:$x,defaultValue:Ux},instancePickingColors:{size:4,type:"uint8",accessor:(e,t)=>{let{index:n,target:r}=t;return this.encodePickingColor(e&&e.__source?e.__source.index:n,r)}}}),this.setState({pathTesselator:new Nx({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:t,changeFlags:n}=e,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:e}=this.state,i=t.data.attributes||{};e.updateGeometry({data:t.data,geometryBuffer:i.getPath,buffers:i,normalize:!t._pathType,loop:"loop"===t._pathType,getGeometry:t.getPath,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||r.invalidateAll()}n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),r.invalidateAll())}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,r=this.props.data;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw(e){let{uniforms:t}=e;const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props,u=this.state.model,d={jointType:Number(n),capType:Number(r),billboard:i,widthUnits:Qc[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:c};u.shaderInputs.setProps({path:d}),u.draw(this.context.renderPass)}_getModel(){return new zv(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new g_({topology:"triangle-list",attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateSegmentTypes(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}jx.defaultProps=zx,jx.layerName="PathLayer";const Vx=jx,Wx="precision highp int;\n\n// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\n  vec3 color;\n};\n\nstruct PointLight {\n  vec3 color;\n  vec3 position;\n  vec3 attenuation; // 2nd order x:Constant-y:Linear-z:Exponential\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform lightingUniforms {\n  int enabled;\n  int lightType;\n\n  int directionalLightCount;\n  int pointLightCount;\n\n  vec3 ambientColor;\n\n  vec3 lightColor0;\n  vec3 lightPosition0;\n  vec3 lightDirection0;\n  vec3 lightAttenuation0;\n\n  vec3 lightColor1;\n  vec3 lightPosition1;\n  vec3 lightDirection1;\n  vec3 lightAttenuation1;\n\n  vec3 lightColor2;\n  vec3 lightPosition2;\n  vec3 lightDirection2;\n  vec3 lightAttenuation2;\n} lighting;\n\nPointLight lighting_getPointLight(int index) {\n  switch (index) {\n    case 0:\n      return PointLight(lighting.lightColor0, lighting.lightPosition0, lighting.lightAttenuation0);\n    case 1:\n      return PointLight(lighting.lightColor1, lighting.lightPosition1, lighting.lightAttenuation1);\n    case 2:\n    default:  \n      return PointLight(lighting.lightColor2, lighting.lightPosition2, lighting.lightAttenuation2);\n  }\n}\n\nDirectionalLight lighting_getDirectionalLight(int index) {\n  switch (index) {\n    case 0:\n      return DirectionalLight(lighting.lightColor0, lighting.lightDirection0);\n    case 1:\n      return DirectionalLight(lighting.lightColor1, lighting.lightDirection1);\n    case 2:\n    default:   \n      return DirectionalLight(lighting.lightColor2, lighting.lightDirection2);\n  }\n} \n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n// #endif\n";var Gx;!function(e){e[e.POINT=0]="POINT",e[e.DIRECTIONAL=1]="DIRECTIONAL"}(Gx||(Gx={}));const Hx={props:{},uniforms:{},name:"lighting",defines:{MAX_LIGHTS:3},uniformTypes:{enabled:"i32",lightType:"i32",directionalLightCount:"i32",pointLightCount:"i32",ambientLightColor:"vec3<f32>",lightColor0:"vec3<f32>",lightPosition0:"vec3<f32>",lightDirection0:"vec3<f32>",lightAttenuation0:"vec3<f32>",lightColor1:"vec3<f32>",lightPosition1:"vec3<f32>",lightDirection1:"vec3<f32>",lightAttenuation1:"vec3<f32>",lightColor2:"vec3<f32>",lightPosition2:"vec3<f32>",lightDirection2:"vec3<f32>",lightAttenuation2:"vec3<f32>"},defaultUniforms:{enabled:1,lightType:Gx.POINT,directionalLightCount:0,pointLightCount:0,ambientLightColor:[.1,.1,.1],lightColor0:[1,1,1],lightPosition0:[1,1,2],lightDirection0:[1,1,1],lightAttenuation0:[1,0,0],lightColor1:[1,1,1],lightPosition1:[1,1,2],lightDirection1:[1,1,1],lightAttenuation1:[1,0,0],lightColor2:[1,1,1],lightPosition2:[1,1,2],lightDirection2:[1,1,1],lightAttenuation2:[1,0,0]},source:"// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\n  color: vec3<f32>,\n};\n\nstruct PointLight {\n  color: vec3<f32>,\n  position: vec3<f32>,\n  attenuation: vec3<f32>, // 2nd order x:Constant-y:Linear-z:Exponential\n};\n\nstruct DirectionalLight {\n  color: vec3<f32>,\n  direction: vec3<f32>,\n};\n\nstruct lightingUniforms {\n  enabled: i32,\n  pointLightCount: i32,\n  directionalLightCount: i32,\n\n  ambientColor: vec3<f32>,\n\n  // TODO - support multiple lights by uncommenting arrays below\n  lightType: i32,\n  lightColor: vec3<f32>,\n  lightDirection: vec3<f32>,\n  lightPosition: vec3<f32>,\n  lightAttenuation: vec3<f32>,\n\n  // AmbientLight ambientLight;\n  // PointLight pointLight[MAX_LIGHTS];\n  // DirectionalLight directionalLight[MAX_LIGHTS];\n};\n\n// Binding 0:1 is reserved for lighting (Note: could go into separate bind group as it is stable across draw calls)\n@binding(1) @group(0) var<uniform> lighting : lightingUniforms;\n\nfn lighting_getPointLight(index: i32) -> PointLight {\n  return PointLight(lighting.lightColor, lighting.lightPosition, lighting.lightAttenuation);\n}\n\nfn lighting_getDirectionalLight(index: i32) -> DirectionalLight {\n  return DirectionalLight(lighting.lightColor, lighting.lightDirection);\n} \n\nfn getPointLightAttenuation(pointLight: PointLight, distance: f32) -> f32 {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n",vs:Wx,fs:Wx,getUniforms:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=e?{...e}:e))return{...Hx.defaultUniforms};e.lights&&(e={...e,...qx(e.lights),lights:void 0});const{ambientLight:n,pointLights:r,directionalLights:i}=e||{};if(!(n||r&&r.length>0||i&&i.length>0))return{...Hx.defaultUniforms,enabled:0};const o={...Hx.defaultUniforms,...t,...Xx({ambientLight:n,pointLights:r,directionalLights:i})};void 0!==e.enabled&&(o.enabled=e.enabled?1:0);return o}};function Xx(e){let{ambientLight:t,pointLights:n=[],directionalLights:r=[]}=e;const i={};i.ambientLightColor=Kx(t);let o=0;for(const s of n){i.lightType=Gx.POINT;const e=o;i[`lightColor${e}`]=Kx(s),i[`lightPosition${e}`]=s.position,i[`lightAttenuation${e}`]=s.attenuation||[1,0,0],o++}for(const s of r){i.lightType=Gx.DIRECTIONAL;const e=o;i[`lightColor${e}`]=Kx(s),i[`lightDirection${e}`]=s.direction,o++}return o>3&&xh.warn("MAX_LIGHTS exceeded")(),i.directionalLightCount=r.length,i.pointLightCount=n.length,i}function qx(e){const t={pointLights:[],directionalLights:[]};for(const n of e||[])switch(n.type){case"ambient":t.ambientLight=n;break;case"directional":t.directionalLights?.push(n);break;case"point":t.pointLights?.push(n)}return t}function Kx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t=[0,0,0],intensity:n=1}=e;return t.map((e=>e*n/255))}const Yx="uniform phongMaterialUniforms {\n  uniform float ambient;\n  uniform float diffuse;\n  uniform float shininess;\n  uniform vec3  specularColor;\n} material;\n",Zx="struct phongMaterialUniforms {\n  ambient: f32,\n  diffuse: f32,\n  shininess: f32,\n  specularColor: vec3<f32>,\n};\n\n@binding(2) @group(0) var<uniform> phongMaterial : phongMaterialUniforms;\n\nfn lighting_getLightColor(surfaceColor: vec3<f32>, light_direction: vec3<f32>, view_direction: vec3<f32>, normal_worldspace: vec3<f32>, color: vec3<f32>) -> vec3<f32> {\n  let halfway_direction: vec3<f32> = normalize(light_direction + view_direction);\n  var lambertian: f32 = dot(light_direction, normal_worldspace);\n  var specular: f32 = 0.0;\n  if (lambertian > 0.0) {\n    let specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n    specular = pow(specular_angle, phongMaterial.shininess);\n  }\n  lambertian = max(lambertian, 0.0);\n  return (lambertian * phongMaterial.diffuse * surfaceColor + specular * phongMaterial.specularColor) * color;\n}\n\nfn lighting_getLightColor2(surfaceColor: vec3<f32>, cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32> {\n  var lightColor: vec3<f32> = surfaceColor;\n\n  if (lighting.enabled == 0) {\n    return lightColor;\n  }\n\n  let view_direction: vec3<f32> = normalize(cameraPosition - position_worldspace);\n  lightColor = phongMaterial.ambient * surfaceColor * lighting.ambientColor;\n\n  if (lighting.lightType == 0) {\n    let pointLight: PointLight  = lighting_getPointLight(0);\n    let light_position_worldspace: vec3<f32> = pointLight.position;\n    let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n  } else if (lighting.lightType == 1) {\n    var directionalLight: DirectionalLight = lighting_getDirectionalLight(0);\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  \n  return lightColor;\n  /*\n  for (int i = 0; i < MAX_LIGHTS; i++) {\n    if (i >= lighting.pointLightCount) {\n      break;\n    }\n    PointLight pointLight = lighting.pointLight[i];\n    vec3 light_position_worldspace = pointLight.position;\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n  }\n\n  for (int i = 0; i < MAX_LIGHTS; i++) {\n    if (i >= lighting.directionalLightCount) {\n      break;\n    }\n    DirectionalLight directionalLight = lighting.directionalLight[i];\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  */\n}\n\nfn lighting_getSpecularLightColor(cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32>{\n  var lightColor = vec3<f32>(0, 0, 0);\n  let surfaceColor = vec3<f32>(0, 0, 0);\n\n  if (lighting.enabled == 0) {\n    let view_direction = normalize(cameraPosition - position_worldspace);\n\n    switch (lighting.lightType) {\n      case 0, default: {\n        let pointLight: PointLight = lighting_getPointLight(0);\n        let light_position_worldspace: vec3<f32> = pointLight.position;\n        let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);\n        lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n      }\n      case 1: {\n        let directionalLight: DirectionalLight = lighting_getDirectionalLight(0);\n        lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n      }\n    }\n  }\n  return lightColor;\n}\n",Qx={props:{},name:"gouraudMaterial",vs:"uniform phongMaterialUniforms {\n  uniform float ambient;\n  uniform float diffuse;\n  uniform float shininess;\n  uniform vec3  specularColor;\n} material;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n  vec3 halfway_direction = normalize(light_direction + view_direction);\n  float lambertian = dot(light_direction, normal_worldspace);\n  float specular = 0.0;\n  if (lambertian > 0.0) {\n    float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n    specular = pow(specular_angle, material.shininess);\n  }\n  lambertian = max(lambertian, 0.0);\n  return (lambertian * material.diffuse * surfaceColor + specular * material.specularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting.enabled == 0) {\n    return lightColor;\n  }\n\n  vec3 view_direction = normalize(cameraPosition - position_worldspace);\n  lightColor = material.ambient * surfaceColor * lighting.ambientColor;\n\n  for (int i = 0; i < lighting.pointLightCount; i++) {\n    PointLight pointLight = lighting_getPointLight(i);\n    vec3 light_position_worldspace = pointLight.position;\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n    float light_attenuation = getPointLightAttenuation(pointLight, distance(light_position_worldspace, position_worldspace));\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color / light_attenuation);\n  }\n\n  int totalLights = min(MAX_LIGHTS, lighting.pointLightCount + lighting.directionalLightCount);\n  for (int i = lighting.pointLightCount; i < totalLights; i++) {\n    DirectionalLight directionalLight = lighting_getDirectionalLight(i);\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  \n  return lightColor;\n}\n".replace("phongMaterial","gouraudMaterial"),fs:Yx.replace("phongMaterial","gouraudMaterial"),source:Zx.replaceAll("phongMaterial","gouraudMaterial"),defines:{LIGHTING_VERTEX:1},dependencies:[Hx],uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(e){const t={...e};return t.specularColor&&(t.specularColor=t.specularColor.map((e=>e/255))),{...Qx.defaultUniforms,...t}}};var Jx=n(232);const ew=px,tw=gx,nw={isClosed:!0};function rw(e){return"positions"in e?e.positions:e}function iw(e){return"holeIndices"in e?e.holeIndices:null}function ow(e,t,n,r,i){let o=t;const s=n.length;for(let a=0;a<s;a++)for(let t=0;t<r;t++)e[o++]=n[a][t]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let a=0;a<r;a++)e[o++]=n[0][a]||0;return nw.start=t,nw.end=o,nw.size=r,mx(e,i,nw),o}function sw(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;o=o||n.length;const a=o-i;if(a<=0)return t;let l=t;for(let c=0;c<a;c++)e[l++]=n[i+c];if(!function(e,t,n,r){for(let i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}(n,r,i,o))for(let c=0;c<r;c++)e[l++]=n[i+c];return nw.start=t,nw.end=l,nw.size=r,mx(e,s,nw),l}function aw(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],r=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let e=0;for(let s=0;s<=o.length;s++)e=sw(n,e,i,t,o[s-1],o[s],0===s?ew:tw),r.push(e);return r.pop(),{positions:n,holeIndices:r}}e=i}if(!function(e){return Array.isArray(e[0])}(e))return sw(n,0,e,t,0,n.length,ew),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let i=0;for(const[o,s]of e.entries())i=ow(n,i,s,t,0===o?ew:tw),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return ow(n,0,e,t,ew),n}function lw(e,t,n){const r=e.length/3;let i=0;for(let o=0;o<r;o++){const s=(o+1)%r;i+=e[3*o+t]*e[3*s+n],i-=e[3*s+t]*e[3*o+n]}return Math.abs(i/2)}function cw(e,t,n,r){const i=e.length/3;for(let o=0;o<i;o++){const i=3*o,s=e[i+0],a=e[i+1],l=e[i+2];e[i+t]=s,e[i+n]=a,e[i+r]=l}}class uw extends fx{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;if(t)this.vertexCount=(t.value||t).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const t=aw(e,this.positionSize);return this.opts.resolution?Sx(rw(t),iw(t),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};t=t||[];const s=[],a=[];let l=0,c=0;for(let d=0;d<=t.length;d++){const i=t[d]||e.length,o=c,u=Rx(e,r,l,i);for(let t=u;t<i;t++)s[c++]=e[t];for(let t=l;t<u;t++)s[c++]=e[t];Lx(s,r,o,c),Ix(s,r,o,c,n?.maxLatitude),l=i,a[d]=c}a.pop();const u=Sx(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const d of u)Mx(d.positions,r);return u}(rw(t),iw(t),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):t}return e}getGeometrySize(e){if(dw(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return rw(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,t){if(e&&dw(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else{const n=e;this._updateIndices(n,t),this._updatePositions(n,t),this._updateVertexValid(n,t)}}_updateIndices(e,t){let{geometryIndex:n,vertexStart:r,indexStart:i}=t;const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!e)return;let c=i;const u=function(e,t,n,r){let i=iw(e);i&&(i=i.map((e=>e/t)));let o=rw(e);const s=r&&3===t;if(n){const e=o.length;o=o.slice();const r=[];for(let i=0;i<e;i+=t){r[0]=o[i],r[1]=o[i+1],s&&(r[2]=o[i+2]);const e=n(r);o[i]=e[0],o[i+1]=e[1],s&&(o[i+2]=e[2])}}if(s){const e=lw(o,0,1),t=lw(o,0,2),r=lw(o,1,2);if(!e&&!t&&!r)return[];e>t&&e>r||(t>r?(n||(o=o.slice()),cw(o,0,2,1)):(n||(o=o.slice()),cw(o,2,0,1)))}return Jx(o,i,t)}(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+r;s[n+1]=i+u.length,o.indices=l}_updatePositions(e,t){let{vertexStart:n,geometrySize:r}=t;const{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;const s=rw(e);for(let a=n,l=0;l<r;a++,l++){const e=s[l*o],t=s[l*o+1],n=o>2?s[l*o+2]:0;i[3*a]=e,i[3*a+1]=t,i[3*a+2]=n}}_updateVertexValid(e,t){let{vertexStart:n,geometrySize:r}=t;const{positionSize:i}=this,o=this.attributes.vertexValid,s=e&&iw(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+r),s)for(let a=0;a<s.length;a++)o[n+s[a]/i-1]=0;o[n+r-1]=0}}function dw(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const hw="uniform solidPolygonUniforms {\n  bool extruded;\n  bool isWireframe;\n  float elevationScale;\n} solidPolygon;\n",fw={name:"solidPolygon",vs:hw,fs:hw,uniformTypes:{extruded:"f32",isWireframe:"f32",elevationScale:"f32"}},pw="in vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project.commonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (solidPolygon.extruded) {\npos.z += props.elevations * solidPolygon.elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (solidPolygon.extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * layer.opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",gw=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${pw}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`,mw=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${pw}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`,yw=[0,0,0,255],vw={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:yw},getLineColor:{type:"accessor",value:yw},material:!0},bw={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class _w extends Jb{getShaders(e){return super.getShaders({vs:"top"===e?gw:mw,fs:"#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[h_,Qx,p_,fw]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:t}=this.props;const{_full3d:n}=this.props;let r;e.isGeospatial&&t===Yc.DEFAULT&&(t=Yc.LNGLAT),t===Yc.LNGLAT&&(r=n?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new uw({preproject:r,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:bw,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,stepMode:"dynamic",transition:bw,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:bw,accessor:"getFillColor",defaultValue:yw},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:bw,accessor:"getLineColor",defaultValue:yw},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(e,t)=>{let{index:n,target:r}=t;return this.encodePickingColor(e&&e.__source?e.__source.index:n,r)}}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,r=this.props.data;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw(e){let{uniforms:t}=e;const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,wireframeModel:l,polygonTesselator:c}=this.state,u={extruded:Boolean(n),elevationScale:o,isWireframe:!1};l&&i&&(l.setInstanceCount(c.instanceCount-1),l.shaderInputs.setProps({solidPolygon:{...u,isWireframe:!0}}),l.draw(this.context.renderPass)),a&&r&&(a.setInstanceCount(c.instanceCount-1),a.shaderInputs.setProps({solidPolygon:u}),a.draw(this.context.renderPass)),s&&r&&(s.setVertexCount(c.vertexCount),s.shaderInputs.setProps({solidPolygon:u}),s.draw(this.context.renderPass))}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:r}=e,i=this.getAttributeManager();(r.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(this.state.models?.forEach((e=>e.destroy())),this.setState(this._getModels()),i.invalidateAll())}updateGeometry(e){let{props:t,oldProps:n,changeFlags:r}=e;if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,n=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:t,extruded:n}=this.props;let r,i,o;if(t){const t=this.getShaders("top");t.defines.NON_INSTANCED_MODEL=1;const n=this.getAttributeManager().getBufferLayouts({isInstanced:!1});r=new zv(this.context.device,{...t,id:`${e}-top`,topology:"triangle-list",bufferLayout:n,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const t=this.getAttributeManager().getBufferLayouts({isInstanced:!0});i=new zv(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:t,geometry:new g_({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),o=new zv(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:t,geometry:new g_({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[i,o,r].filter(Boolean),topModel:r,sideModel:i,wireframeModel:o}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}_w.defaultProps=vw,_w.layerName="SolidPolygonLayer";const xw={circle:{type:O_,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:k_,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:hx,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},ww={type:Vx,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Ew={type:_w,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Sw(e){let{type:t,props:n}=e;const r={};for(const i in n)r[i]=t.defaultProps[n[i]];return r}function Tw(e,t){const{transitions:n,updateTriggers:r}=e.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function Aw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=n;for(let s=i;s<o;s++){const n=e[s],{geometry:i}=n;if(i)if("GeometryCollection"===i.type){Po.assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");const{geometries:e}=i;for(let i=0;i<e.length;i++){Cw(e[i],r,t,n,s)}}else Cw(i,r,t,n,s)}return r}function Cw(e,t,n,r,i){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=t;if(function(e,t){let n=kw[e];Po.assert(n,`Unknown GeoJSON type ${e}`);for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,s))switch(o){case"Point":a.push(n({geometry:e},r,i));break;case"MultiPoint":s.forEach((e=>{a.push(n({geometry:{type:"Point",coordinates:e}},r,i))}));break;case"LineString":l.push(n({geometry:e},r,i));break;case"MultiLineString":s.forEach((e=>{l.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"Polygon":c.push(n({geometry:e},r,i)),s.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"MultiPolygon":s.forEach((e=>{c.push(n({geometry:{type:"Polygon",coordinates:e}},r,i)),e.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}))}))}else Po.warn(`${o} coordinates are malformed`)()}const kw={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Pw(e){return e.geometry.coordinates}function Rw(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:o}=e,s=function(e,t){const n={points:null,lines:null,polygons:null};for(const r in n){const i=e[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(4*i.length);const o=[];for(let e=0;e<i.length;e++)t(i[e],o),n[r][4*e+0]=o[0],n[r][4*e+1]=o[1],n[r][4*e+2]=o[2],n[r][4*e+3]=255}return n}(e,t);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:4,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:4,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:4,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:4,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Iw=["points","linestrings","polygons"],Lw={...Sw(xw.circle),...Sw(xw.icon),...Sw(xw.text),...Sw(ww),...Sw(Ew),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Mw extends u_{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState(e){let{props:t,changeFlags:n}=e;if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:n}):this._updateStateJSON({props:t,changeFlags:n})}_updateStateBinary(e){let{props:t,changeFlags:n}=e;const r=Rw(t.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON(e){let{props:t,changeFlags:n}=e;const r=function(e){if(Array.isArray(e))return e;switch(Po.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Po.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const e=this.state.features;for(const t in e)o[t]=e[t].slice(),s[t]=[];for(const t of n.dataChanged){const n=Aw(r,i,t);for(const r in e)s[r].push(d_({data:o[r],getIndex:e=>e.__source.index,dataRange:t,replace:n[r]}))}}else o=Aw(r,i);const a=function(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=e;return n.points.data=r,n.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),n.points.getPosition=Pw,n.lines.data=i,n.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),n.lines.getPath=Pw,n.polygons.data=o,n.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),n.polygons.getPolygon=Pw,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),n.polygonsOutline.getPath=Pw,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n,sourceLayer:r}=t;return t.featureType=Iw.find((e=>r.id.startsWith(`${this.id}-${e}-`))),n>=0&&r.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(t.index=this.props.data.points.globalFeatureIds.value[n]),t}_updateAutoHighlight(e){const t=`${this.id}-points-`,n="points"===e.featureType;for(const r of this.getSubLayers())r.id.startsWith(t)===n&&r.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:t}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons?.data)&&this.getSubLayerClass(r,Ew.type);if(i){const o=Tw(this,Ew.props),s=e&&t;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:t}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!e&&t&&this.shouldRenderSubLayer(r,n.polygonsOutline?.data)&&this.getSubLayerClass(r,ww.type),s=this.shouldRenderSubLayer(i,n.lines?.data)&&this.getSubLayerClass(i,ww.type);if(o||s){const e=Tw(this,ww.props);return[o&&new o(e,this.getSubLayerProps({id:r,updateTriggers:e.updateTriggers}),n.polygonsOutline),s&&new s(e,this.getSubLayerProps({id:i,updateTriggers:e.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:t,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=t.points.data.findIndex((e=>e.__source.index===r)));const i=new Set(e.split("+")),o=[];for(const s of i){const e=`points-${s}`,i=xw[s],a=i&&this.shouldRenderSubLayer(e,t.points?.data)&&this.getSubLayerClass(e,i.type);if(a){const l=Tw(this,i.props);let c=t.points;if("text"===s&&n){const{instancePickingColors:e,...t}=c.data.attributes;c={...c,data:{...c.data,attributes:t}}}o.push(new a(l,this.getSubLayerProps({id:e,updateTriggers:l.updateTriggers,highlightedObjectIndex:r}),c))}}return o}renderLayers(){const{extruded:e}=this.props,t=this._renderPolygonLayer();return[!e&&t,this._renderLineLayers(),this._renderPointLayers(),e&&t]}getSubLayerAccessor(e){const{binary:t}=this.state;return t&&"function"===typeof e?(t,n)=>{const{data:r,index:i}=n,o=function(e,t){if(!e)return null;const n="startIndices"in e?e.startIndices[t]:t,r=e.featureIds.value[n];return-1!==n?function(e,t,n){const r={properties:{...e.properties[t]}};for(const i in e.numericProps)r.properties[i]=e.numericProps[i].value[n];return r}(e,r,n):null}(r,i);return e(o,n)}:super.getSubLayerAccessor(e)}}Mw.layerName="GeoJsonLayer",Mw.defaultProps=Lw;const Ow=Mw,Nw={id:"request-scheduler",throttleRequests:!0,maxRequests:6,debounceTime:0};class Fw{props;stats;activeRequestCount=0;requestQueue=[];requestMap=(()=>new Map)();updateTimer=null;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...Nw,...e},this.stats=new Bo({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const n={handle:e,priority:0,getPriority:t},r=new Promise((e=>(n.resolve=e,n)));return this.requestQueue.push(n),this.requestMap.set(e,r),this._issueNewRequests(),r}_issueRequest(e){const{handle:t,resolve:n}=e;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){null!==this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout((()=>this._issueNewRequestsAsync()),this.props.debounceTime)}_issueNewRequestsAsync(){null!==this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}class Dw{constructor(e){this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,this.boundingBox="west"in e?[[e.west,e.south],[e.east,e.north]]:[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData(e){let{getData:t,requestScheduler:n,onLoad:r,onError:i}=e;const{index:o,id:s,bbox:a,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:d}=this._abortController,h=await n.scheduleRequest(this,(e=>e.isSelected?1:-1));if(!h)return void(this._isCancelled=!0);if(this._isCancelled)return void h.done();let f,p=null;try{p=await t({index:o,id:s,bbox:a,userData:l,zoom:c,signal:d})}catch(g){f=g||!0}finally{h.done()}u===this._loaderId&&(this._loader=void 0,this.content=p,!this._isCancelled||p?(this._isLoaded=!0,this._isCancelled=!1,f?i(f,this):r(this)):this._isLoaded=!1)}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){this.isLoaded||(this._isCancelled=!0,this._abortController?.abort())}}const Bw=Math.PI/180,Uw=180/Math.PI,zw=6370972,$w=256;function jw(){const e=4018225162502676e-20,t=Math.PI/180*$w;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,24886.609375]}}class Vw extends su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{longitude:t=0,zoom:n=0,nearZMultiplier:r=.5,farZMultiplier:i=1,resolution:o=10}=e;let{latitude:s=0,height:a,altitude:l=1.5,fovy:c}=e;s=Math.max(Math.min(s,Nl),-85.051129),a=a||1,c?l=Gl(c):c=Wl(l);const u=1/Math.PI/Math.cos(s*Math.PI/180),d=Math.pow(2,n)*u,h=e.nearZ??r,f=e.farZ??(l+512*d/a)*i,p=(new _l).lookAt({eye:[0,-l,0],up:[0,0,1]});p.rotateX(s*Bw),p.rotateZ(-t*Bw),p.scale(d/a),super({...e,height:a,viewMatrix:p,longitude:t,latitude:s,zoom:n,distanceScales:jw(),fovy:c,focalDistance:l,near:h,far:f}),this.scale=d,this.latitude=s,this.longitude=t,this.resolution=o}get projectionMode(){return Zc.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(){const e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,this.height/2],e),n=this.unproject([this.width/2,0],e),r=this.unproject([this.width,this.height/2],e),i=this.unproject([this.width/2,this.height],e);return r[0]<this.longitude&&(r[0]+=360),t[0]>this.longitude&&(t[0]-=360),[Math.min(t[0],r[0],n[0],i[0]),Math.min(t[1],r[1],n[1],i[1]),Math.max(t[0],r[0],n[0],i[0]),Math.max(t[1],r[1],n[1],i[1])]}unproject(e){let{topLeft:t=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=e,s=t?i:this.height-i,{pixelUnprojectionMatrix:a}=this;let l;if(Number.isFinite(o))l=Ww(a,[r,s,o,1]);else{const e=Ww(a,[r,s,-1,1]),t=Ww(a,[r,s,1,1]),i=((n||0)/zw+1)*$w,o=za(Ba([],e,t)),c=za(e),u=za(t),d=4*((4*c*u-(o-c-u)**2)/16)/o;l=function(e,t,n,r){const i=t[0],o=t[1],s=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e}([],e,t,(Math.sqrt(c-d)-Math.sqrt(Math.max(0,i*i-d)))/Math.sqrt(o))}const[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n,r=0]=e,i=t*Bw,o=n*Bw,s=Math.cos(o),a=(r/zw+1)*$w;return[Math.sin(i)*s*a,-Math.cos(i)*s*a,Math.sin(o)*a]}unprojectPosition(e){const[t,n,r]=e,i=Ua(e),o=Math.asin(r/i);return[Math.atan2(t,-n)*Uw,o*Uw,(i/$w-1)*zw]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,t){const n=this.unproject(t);return{longitude:e[0]-n[0]+this.longitude,latitude:e[1]-n[1]+this.latitude}}}function Ww(e,t){const n=fl([],t,e);return ul(n,n,1/n[3]),n}const Gw=-1,Hw=0,Xw=1,qw=new Ga,Kw=new Ga;class Yw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;n=n||qw.copy(e).add(t).scale(.5),this.center=new Ga(n),this.halfDiagonal=new Ga(t).subtract(this.center),this.minimum=new Ga(e),this.maximum=new Ga(t)}clone(){return new Yw(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:t}=this,n=Kw.from(e.normal),r=t.x*Math.abs(n.x)+t.y*Math.abs(n.y)+t.z*Math.abs(n.z),i=this.center.dot(n)+e.distance;return i-r>0?Xw:i+r<0?Gw:Hw}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=qw.from(e).subtract(this.center),{halfDiagonal:n}=this;let r,i=0;return r=Math.abs(t.x)-n.x,r>0&&(i+=r*r),r=Math.abs(t.y)-n.y,r>0&&(i+=r*r),r=Math.abs(t.z)-n.z,r>0&&(i+=r*r),i}}const Zw=new Ga,Qw=new Ga;class Jw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.radius=-0,this.center=new Ga,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=Zw.from(t),this.center=(new Ga).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new Jw(this.center,this.radius)}union(e){const t=this.center,n=this.radius,r=e.center,i=e.radius,o=Zw.copy(r).subtract(t),s=o.magnitude();if(n>=s+i)return this.clone();if(i>=s+n)return e.clone();const a=.5*(n+s+i);return Qw.copy(o).scale((-n+a)/s).add(t),this.center.copy(Qw),this.radius=a,this}expand(e){const t=Zw.from(e).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=ol(Zw,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=Zw.from(e).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const t=this.center,n=this.radius,r=e.normal.dot(t)+e.distance;return r<-n?Gw:r<n?Hw:Xw}}function eE(e,t,n){const r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],g=n[3],m=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return e[0]=h*r+f*s+p*c,e[1]=h*i+f*a+p*u,e[2]=h*o+f*l+p*d,e[3]=g*r+m*s+y*c,e[4]=g*i+m*a+y*u,e[5]=g*o+m*l+y*d,e[6]=v*r+b*s+_*c,e[7]=v*i+b*a+_*u,e[8]=v*o+b*l+_*d,e}function tE(e,t,n){const r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}var nE;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"}(nE||(nE={}));const rE=Object.freeze([1,0,0,0,1,0,0,0,1]);class iE extends Qa{static get IDENTITY(){return function(){aE||(aE=new iE,Object.freeze(aE));return aE}()}static get ZERO(){return function(){oE||(oE=new iE([0,0,0,0,0,0,0,0,0]),Object.freeze(oE));return oE}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return nE}constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(rE)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){const n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,y=o*l;e[0]=1-d-p,e[3]=u-y,e[6]=h+m,e[1]=u+y,e[4]=1-c-p,e[7]=f-g,e[2]=h-m,e[5]=f+g,e[8]=1-c-d}(this,e),this.check()}set(e,t,n,r,i,o,s,a,l){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this.check()}setRowMajor(e,t,n,r,i,o,s,a,l){return this[0]=e,this[1]=r,this[2]=s,this[3]=t,this[4]=i,this[5]=a,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return function(e){const t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*(c*o-s*l)+n*(-c*i+s*a)+r*(l*i-o*a)}(this)}transpose(){return function(e,t){if(e===t){const n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]}(this,this),this.check()}invert(){return function(e,t){const n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=u*s-a*c,h=-u*o+a*l,f=c*o-s*l;let p=n*d+r*h+i*f;p&&(p=1/p,e[0]=d*p,e[1]=(-u*r+i*c)*p,e[2]=(a*r-i*s)*p,e[3]=h*p,e[4]=(u*n-i*l)*p,e[5]=(-a*n+i*o)*p,e[6]=f*p,e[7]=(-c*n+r*l)*p,e[8]=(s*n-r*o)*p)}(this,this),this.check()}multiplyLeft(e){return eE(this,e,this),this.check()}multiplyRight(e){return eE(this,this,e),this.check()}rotate(e){return function(e,t,n){const r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=Math.sin(n),f=Math.cos(n);e[0]=f*r+h*s,e[1]=f*i+h*a,e[2]=f*o+h*l,e[3]=f*s-h*r,e[4]=f*a-h*i,e[5]=f*l-h*o,e[6]=c,e[7]=u,e[8]=d}(this,this,e),this.check()}scale(e){return Array.isArray(e)?tE(this,this,e):tE(this,this,[e,e]),this.check()}translate(e){return function(e,t,n){const r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1];e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=h*r+f*s+c,e[7]=h*i+f*a+u,e[8]=h*o+f*l+d}(this,this,e),this.check()}transform(e,t){let n;switch(e.length){case 2:n=function(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}(t||[-0,-0],e,this);break;case 3:n=Fa(t||[-0,-0,-0],e,this);break;case 4:n=ja(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Aa(n,e.length),n}transformVector(e,t){return this.transform(e,t)}transformVector2(e,t){return this.transform(e,t)}transformVector3(e,t){return this.transform(e,t)}}let oE,sE,aE=null;class lE extends ka{static get ZERO(){return sE||(sE=new lE(0,0,0,0),Object.freeze(sE)),sE}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(-0,-0,-0,-0),ba(e)&&1===arguments.length?this.copy(e):(ya.debug&&(Ta(e),Ta(t),Ta(n),Ta(r)),this[0]=e,this[1]=t,this[2]=n,this[3]=r)}set(e,t,n,r){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return ya.debug&&(Ta(e.x),Ta(e.y),Ta(e.z),Ta(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Ta(e)}get w(){return this[3]}set w(e){this[3]=Ta(e)}transform(e){return Na(this,this,e),this.check()}transformByMatrix3(e){return ja(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2],e[3]=t[3]}(this,this,e),this.check()}transformByQuaternion(e){return Da(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function cE(){const e=new Ra(4);return Ra!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function uE(e,t,n){n*=.5;const r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function dE(e,t,n){const r=t[0],i=t[1],o=t[2],s=t[3],a=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+s*a+i*c-o*l,e[1]=i*u+s*l+o*a-r*c,e[2]=o*u+s*c+r*l-i*a,e[3]=s*u-r*a-i*l-o*c,e}function hE(e,t,n,r){const i=t[0],o=t[1],s=t[2],a=t[3];let l,c,u,d,h,f=n[0],p=n[1],g=n[2],m=n[3];return l=i*f+o*p+s*g+a*m,l<0&&(l=-l,f=-f,p=-p,g=-g,m=-m),1-l>Pa?(c=Math.acos(l),h=Math.sin(c),u=Math.sin((1-r)*c)/h,d=Math.sin(r*c)/h):(u=1-r,d=r),e[0]=u*i+d*f,e[1]=u*o+d*p,e[2]=u*s+d*g,e[3]=u*a+d*m,e}function fE(e,t){const n=t[0]+t[4]+t[8];let r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const i=(n+1)%3,o=(n+2)%3;r=Math.sqrt(t[3*n+n]-t[3*i+i]-t[3*o+o]+1),e[n]=.5*r,r=.5/r,e[3]=(t[3*i+o]-t[3*o+i])*r,e[i]=(t[3*i+n]+t[3*n+i])*r,e[o]=(t[3*o+n]+t[3*n+o])*r}return e}const pE=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},gE=ul,mE=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},yE=function(e,t,n,r){const i=t[0],o=t[1],s=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e[3]=a+r*(n[3]-a),e},vE=dl,bE=hl,_E=function(e,t){const n=t[0],r=t[1],i=t[2],o=t[3];let s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s,e};const xE=function(){const e=Ia(),t=La(1,0,0),n=La(0,1,0);return function(r,i,o){const s=Ma(i,o);return s<-.999999?(Oa(e,t,i),Ua(e)<1e-6&&Oa(e,n,i),function(e,t){const n=t[0],r=t[1],i=t[2];let o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o}(e,e),uE(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Oa(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,_E(r,r))}}(),wE=(function(){const e=cE(),t=cE()}(),function(){const e=function(){const e=new Ra(9);return Ra!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}()}(),[0,0,0,1]);class EE extends Sa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,n,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,n,r){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return fE(this,e),this.check()}fromAxisRotation(e,t){return uE(this,e,t),this.check()}identity(){var e;return(e=this)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Ta(e)}get y(){return this[1]}set y(e){this[1]=Ta(e)}get z(){return this[2]}set z(e){this[2]=Ta(e)}get w(){return this[3]}set w(e){this[3]=Ta(e)}len(){return vE(this)}lengthSquared(){return bE(this)}dot(e){return mE(this,e)}rotationTo(e,t){return xE(this,e,t),this.check()}add(e){return pE(this,this,e),this.check()}calculateW(){return function(e,t){const n=t[0],r=t[1],i=t[2];e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){return function(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3]}(this,this),this.check()}invert(){return function(e,t){const n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=o*a}(this,this),this.check()}lerp(e,t,n){return void 0===n?this.lerp(this,e,t):(yE(this,e,t,n),this.check())}multiplyRight(e){return dE(this,this,e),this.check()}multiplyLeft(e){return dE(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(e,t,n){n*=.5;const r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+s*a,e[1]=i*l+o*a,e[2]=o*l-i*a,e[3]=s*l-r*a}(this,this,e),this.check()}rotateY(e){return function(e,t,n){n*=.5;const r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*a,e[1]=i*l+s*a,e[2]=o*l+r*a,e[3]=s*l-i*a}(this,this,e),this.check()}rotateZ(e){return function(e,t,n){n*=.5;const r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+i*a,e[1]=i*l-r*a,e[2]=o*l+s*a,e[3]=s*l-o*a}(this,this,e),this.check()}scale(e){return gE(this,this,e),this.check()}slerp(e,t,n){let r,i,o;switch(arguments.length){case 1:({start:r=wE,target:i,ratio:o}=e);break;case 2:r=this,i=e,o=t;break;default:r=e,i=t,o=n}return hE(this,r,i,o),this.check()}transformVector4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lE;return function(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*o-l*i,d=c*i+l*r-s*o,h=c*o+s*i-a*r,f=-s*r-a*i-l*o;e[0]=u*c+f*-s+d*-l-h*-a,e[1]=d*c+f*-a+h*-s-u*-l,e[2]=h*c+f*-l+u*-a-d*-s,e[3]=t[3]}(t,e,this),Aa(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const SE=new Ga,TE=new Ga,AE=new Ga,CE=new Ga,kE=new Ga,PE=new Ga,RE=new Ga,IE=0,LE=1,ME=2,OE=3,NE=4,FE=5,DE=6,BE=7,UE=8;class zE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];this.center=(new Ga).from(e),this.halfAxes=new iE(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new Ga(e).len(),new Ga(t).len(),new Ga(n).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new Ga(e).normalize(),i=new Ga(t).normalize(),o=new Ga(n).normalize();return(new EE).fromMatrix3(new iE([...r,...i,...o]))}fromCenterHalfSizeQuaternion(e,t,n){const r=new EE(n),i=(new iE).fromQuaternion(r);return i[0]=i[0]*t[0],i[1]=i[1]*t[0],i[2]=i[2]*t[0],i[3]=i[3]*t[1],i[4]=i[4]*t[1],i[5]=i[5]*t[1],i[6]=i[6]*t[2],i[7]=i[7]*t[2],i[8]=i[8]*t[2],this.center=(new Ga).from(e),this.halfAxes=i,this}clone(){return new zE(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jw;const t=this.halfAxes,n=t.getColumn(0,AE),r=t.getColumn(1,CE),i=t.getColumn(2,kE),o=SE.copy(n).add(r).add(i);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,n=e.normal,r=this.halfAxes,i=n.x,o=n.y,s=n.z,a=Math.abs(i*r[IE]+o*r[LE]+s*r[ME])+Math.abs(i*r[OE]+o*r[NE]+s*r[FE])+Math.abs(i*r[DE]+o*r[BE]+s*r[UE]),l=n.dot(t)+e.distance;return l<=-a?Gw:l>=a?Xw:Hw}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=TE.from(e).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,AE),i=n.getColumn(1,CE),o=n.getColumn(2,kE),s=r.magnitude(),a=i.magnitude(),l=o.magnitude();r.normalize(),i.normalize(),o.normalize();let c,u=0;return c=Math.abs(t.dot(r))-s,c>0&&(u+=c*c),c=Math.abs(t.dot(i))-a,c>0&&(u+=c*c),c=Math.abs(t.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,AE),l=s.getColumn(1,CE),c=s.getColumn(2,kE),u=PE.copy(a).add(l).add(c).add(o),d=RE.copy(u).subtract(e);let h=t.dot(d);return r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).add(l).subtract(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).subtract(l).add(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).subtract(l).subtract(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).add(l).add(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).add(l).subtract(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).subtract(l).add(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).subtract(l).subtract(c),d.copy(u).subtract(e),h=t.dot(d),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,AE);t.transformAsPoint(e);const n=this.halfAxes.getColumn(1,CE);n.transformAsPoint(e);const r=this.halfAxes.getColumn(2,kE);return r.transformAsPoint(e),this.halfAxes=new iE([...t,...n,...r]),this}getTransform(){throw new Error("not implemented")}}const $E=new Ga,jE=new Ga;class VE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=new Ga,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Ca(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=$E.from(e),this.normal.from(t).normalize();const n=-this.normal.dot(e);return this.distance=n,this}fromCoefficients(e,t,n,r){return this.normal.set(e,t,n),Ca(wa(this.normal.len(),1)),this.distance=r,this}clone(){return new VE(this.normal,this.distance)}equals(e){return wa(this.distance,e.distance)&&wa(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=jE.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,t)}projectPointOntoPlane(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];const n=$E.from(e),r=this.getPointDistance(n),i=jE.copy(this.normal).scale(r);return n.subtract(i).to(t)}}const WE=[new Ga([1,0,0]),new Ga([0,1,0]),new Ga([0,0,1])],GE=new Ga,HE=new Ga;class XE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.planes=e}fromBoundingSphere(e){this.planes.length=2*WE.length;const t=e.center,n=e.radius;let r=0;for(const i of WE){let e=this.planes[r],o=this.planes[r+1];e||(e=this.planes[r]=new VE),o||(o=this.planes[r+1]=new VE);const s=GE.copy(i).scale(-n).add(t);e.fromPointNormal(s,i);const a=GE.copy(i).scale(n).add(t),l=HE.copy(i).negate();o.fromPointNormal(a,l),r+=2}return this}computeVisibility(e){let t=Xw;for(const n of this.planes){switch(e.intersectPlane(n)){case Gw:return Gw;case Hw:t=Hw}}return t}computeVisibilityWithPlaneMask(e,t){if(Ca(Number.isFinite(t),"parentPlaneMask is required."),t===XE.MASK_OUTSIDE||t===XE.MASK_INSIDE)return t;let n=XE.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const o=i<31?1<<i:0;if(i<31&&0===(t&o))continue;const s=r[i],a=e.intersectPlane(s);if(a===Gw)return XE.MASK_OUTSIDE;a===Hw&&(n|=o)}return n}}XE.MASK_OUTSIDE=4294967295,XE.MASK_INSIDE=0,XE.MASK_INDETERMINATE=2147483647;new Ga,new Ga,new Ga,new Ga,new Ga;new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga;Math.PI,Math.PI,Math.PI,Math.PI;const qE=new iE,KE=new iE,YE=new iE,ZE=new iE,QE=new iE;function JE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};let n=0,r=0;const i=KE,o=YE;i.identity(),o.copy(e);const s=1e-20*function(e){let t=0;for(let n=0;n<9;++n){const r=e[n];t+=r*r}return Math.sqrt(t)}(o);for(;r<10&&nS(o)>s;)rS(o,ZE),QE.copy(ZE).transpose(),o.multiplyRight(ZE),o.multiplyLeft(QE),i.multiplyRight(ZE),++n>2&&(++r,n=0);return t.unitary=i.toTarget(t.unitary),t.diagonal=o.toTarget(t.diagonal),t}const eS=[1,0,0],tS=[2,2,1];function nS(e){let t=0;for(let n=0;n<3;++n){const r=e[qE.getElementIndex(tS[n],eS[n])];t+=2*r*r}return Math.sqrt(t)}function rS(e,t){let n=0,r=1;for(let l=0;l<3;++l){const t=Math.abs(e[qE.getElementIndex(tS[l],eS[l])]);t>n&&(r=l,n=t)}const i=eS[r],o=tS[r];let s=1,a=0;if(Math.abs(e[qE.getElementIndex(o,i)])>1e-15){const t=(e[qE.getElementIndex(o,o)]-e[qE.getElementIndex(i,i)])/2/e[qE.getElementIndex(o,i)];let n;n=t<0?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),s=1/Math.sqrt(1+n*n),a=n*s}return iE.IDENTITY.to(t),t[qE.getElementIndex(i,i)]=t[qE.getElementIndex(o,o)]=s,t[qE.getElementIndex(o,i)]=a,t[qE.getElementIndex(i,o)]=-a,t}const iS=new Ga,oS=new Ga,sS=new Ga,aS=new Ga,lS=new Ga,cS=new iE,uS={diagonal:new iE,unitary:new iE};const dS=512,hS=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],fS=hS.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),pS=fS.concat([[.25,.5],[.75,.5]]);class gS{constructor(e,t,n){this.x=e,this.y=t,this.z=n}get children(){if(!this._children){const e=2*this.x,t=2*this.y,n=this.z+1;this._children=[new gS(e,t,n),new gS(e,t+1,n),new gS(e+1,t,n),new gS(e+1,t+1,n)]}return this._children}update(e){const{viewport:t,cullingVolume:n,elevationBounds:r,minZ:i,maxZ:o,bounds:s,offset:a,project:l}=e,c=this.getBoundingVolume(r,a,l);if(s&&!this.insideBounds(s))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:e}=this;if(e<o&&e>=i){const n=c.distanceTo(t.cameraPosition)*t.scale/t.height;e+=Math.floor(Math.log2(n))}if(e>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const u of this.children)u.update(e);return!0}getSelected(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&e.push(this),this._children)for(const t of this._children)t.getSelected(e);return e}insideBounds(e){let[t,n,r,i]=e;const o=Math.pow(2,this.z),s=dS/o;return this.x*s<r&&this.y*s<i&&(this.x+1)*s>t&&(this.y+1)*s>n}getBoundingVolume(e,t,n){if(n){const t=this.z<1?pS:this.z<2?fS:hS,r=[];for(const i of t){const t=SS(this.x+i[0],this.y+i[1],this.z);t[2]=e[0],r.push(n(t)),e[0]!==e[1]&&(t[2]=e[1],r.push(n(t)))}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zE;if(!e||0===e.length)return t.halfAxes=new iE([0,0,0,0,0,0,0,0,0]),t.center=new Ga,t;const n=e.length,r=new Ga(0,0,0);for(const T of e)r.add(T);const i=1/n;r.multiplyByScalar(i);let o=0,s=0,a=0,l=0,c=0,u=0;for(const T of e){const e=iS.copy(T).subtract(r);o+=e.x*e.x,s+=e.x*e.y,a+=e.x*e.z,l+=e.y*e.y,c+=e.y*e.z,u+=e.z*e.z}o*=i,s*=i,a*=i,l*=i,c*=i,u*=i;const d=cS;d[0]=o,d[1]=s,d[2]=a,d[3]=s,d[4]=l,d[5]=c,d[6]=a,d[7]=c,d[8]=u;const{unitary:h}=JE(d,uS),f=t.halfAxes.copy(h);let p=f.getColumn(0,sS),g=f.getColumn(1,aS),m=f.getColumn(2,lS),y=-Number.MAX_VALUE,v=-Number.MAX_VALUE,b=-Number.MAX_VALUE,_=Number.MAX_VALUE,x=Number.MAX_VALUE,w=Number.MAX_VALUE;for(const T of e)iS.copy(T),y=Math.max(iS.dot(p),y),v=Math.max(iS.dot(g),v),b=Math.max(iS.dot(m),b),_=Math.min(iS.dot(p),_),x=Math.min(iS.dot(g),x),w=Math.min(iS.dot(m),w);p=p.multiplyByScalar(.5*(_+y)),g=g.multiplyByScalar(.5*(x+v)),m=m.multiplyByScalar(.5*(w+b)),t.center.copy(p).add(g).add(m);const E=oS.set(y-_,v-x,b-w).multiplyByScalar(.5),S=new iE([E[0],0,0,0,E[1],0,0,0,E[2]]);return t.halfAxes.multiplyRight(S),t}(r)}const r=Math.pow(2,this.z),i=dS/r,o=this.x*i+t*dS,s=dS-(this.y+1)*i;return new Yw([o,s,e[0]],[o+i,s+i,e[1]])}}const mS=512,yS=[-1/0,-1/0,1/0,1/0],vS={type:"object",value:null,validate:(e,t)=>t.optional&&null===e||"string"===typeof e||Array.isArray(e)&&e.every((e=>"string"===typeof e)),equal:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}};function bS(e,t){const n=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...n.map((e=>e[0]))),Math.min(...n.map((e=>e[1]))),Math.max(...n.map((e=>e[0]))),Math.max(...n.map((e=>e[1])))]}function _S(e,t){if(!e||!e.length)return null;const{index:n,id:r}=t;if(Array.isArray(e)){const t=function(e){return Math.abs(e.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)|0),0))}(r)%e.length;e=e[t]}let i=e;for(const o of Object.keys(n)){const e=new RegExp(`{${o}}`,"g");i=i.replace(e,String(n[o]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function xS(e){let{viewport:t,z:n,cullRect:r}=e;return(t.subViewports||[t]).map((e=>wS(e,n||0,r)))}function wS(e,t,n){if(!Array.isArray(t)){const r=n.x-e.x,i=n.y-e.y,{width:o,height:s}=n,a={targetZ:t},l=e.unproject([r,i],a),c=e.unproject([r+o,i],a),u=e.unproject([r,i+s],a),d=e.unproject([r+o,i+s],a);return[Math.min(l[0],c[0],u[0],d[0]),Math.min(l[1],c[1],u[1],d[1]),Math.max(l[0],c[0],u[0],d[0]),Math.max(l[1],c[1],u[1],d[1])]}const r=wS(e,t[0],n),i=wS(e,t[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function ES(e,t){return Math.pow(2,e)*mS/t}function SS(e,t,n){const r=ES(n,mS),i=e/r*360-180,o=Math.PI-2*Math.PI*t/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function TS(e,t,n,r){const i=ES(n,r);return[e/i*mS,t/i*mS]}function AS(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mS;if(e.isGeospatial){const[e,i]=SS(t,n,r),[o,s]=SS(t+1,n+1,r);return{west:e,north:i,east:o,south:s}}const[o,s]=TS(t,n,r,i),[a,l]=TS(t+1,n+1,r,i);return{left:o,top:s,right:a,bottom:l}}function CS(e,t,n,r,i){const o=function(e,t,n){let r;if(t&&2===t.length){const[n,i]=t,o=e.getBounds({z:n}),s=e.getBounds({z:i});r=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else r=e.getBounds();return e.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(e,null,r),s=ES(t,n),[a,l,c,u]=function(e,t,n){if(n)return bS(e,n).map((e=>e*t/mS));return e.map((e=>e*t/mS))}(o,s,i),d=[];for(let h=Math.floor(a);h<c;h++)for(let e=Math.floor(l);e<u;e++)d.push({x:h,y:e,z:t});return d}function kS(e){let{viewport:t,maxZoom:n,minZoom:r,zRange:i,extent:o,tileSize:s=mS,modelMatrix:a,modelMatrixInverse:l,zoomOffset:c=0}=e,u=t.isGeospatial?Math.round(t.zoom+Math.log2(mS/s))+c:Math.ceil(t.zoom)+c;if("number"===typeof r&&Number.isFinite(r)&&u<r){if(!o)return[];u=r}"number"===typeof n&&Number.isFinite(n)&&u>n&&(u=n);let d=o;return a&&l&&o&&!t.isGeospatial&&(d=bS(o,a)),t.isGeospatial?function(e,t,n,r){const i=e instanceof Vw&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map((e=>{let{normal:t,distance:n}=e;return new VE(t.clone().negate(),n)})),s=new XE(o),a=e.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=e instanceof gu&&e.pitch<=60?t:0;if(r){const[e,t,n,i]=r,o=Dl([e,i]),s=Dl([n,t]);r=[o[0],dS-o[1],s[0],dS-s[1]]}const d=new gS(0,0,0),h={viewport:e,project:i,cullingVolume:s,elevationBounds:[l,c],minZ:u,maxZ:t,bounds:r,offset:0};if(d.update(h),e instanceof gu&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;d.update(h)&&!(--h.offset<-3););for(h.offset=1;d.update(h)&&!(++h.offset>3););}return d.getSelected()}(t,u,i,o):CS(t,u,s,d||yS,l)}function PS(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}const RS="never",IS="no-overlap",LS="best-available",MS={[LS]:function(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!NS(t)&&FS(t);for(const t of e)t.isVisible=Boolean(2&t.state)},[IS]:function(e){for(const n of e)n.state=0;for(const n of e)n.isSelected&&NS(n);const t=Array.from(e).sort(((e,t)=>e.zoom-t.zoom));for(const n of t)if(n.isVisible=Boolean(2&n.state),n.children&&(n.isVisible||1&n.state))for(const e of n.children)e.state=1;else n.isSelected&&FS(n)},[RS]:()=>{}},OS={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function NS(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=2,!0;t=t.parent}return!1}function FS(e){for(const t of e.children)t.isLoaded||t.content?t.state|=2:FS(t)}const DS={TilesetClass:class{constructor(e){this._getCullBounds=function(e){let t,n={};return r=>{for(const i in r)if(!PS(r[i],n[i])){t=e(r),n=r;break}return t}}(xS),this.opts={...OS,...e},this.setOptions(this.opts),this.onTileLoad=e=>{this.opts.onTileLoad?.(e),null!==this.opts.maxCacheByteSize&&(this._cacheByteSize+=e.byteLength,this._resizeCache())},this._requestScheduler=new Fw({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new _l,this._modelMatrixInverse=new _l}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((e=>e.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((e=>e.needsReload))}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const t=this._cache.get(e);this._selectedTiles&&this._selectedTiles.includes(t)?t.setNeedsReload():this._cache.delete(e)}}update(e){let{zRange:t,modelMatrix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zRange:null,modelMatrix:null};const r=n?new _l(n):new _l,i=!r.equals(this._modelMatrix);if(this._viewport&&e.equals(this._viewport)&&wa(this._zRange,t)&&!i)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((e=>this._getTile(e.index,!0))));else{i&&(this._modelMatrixInverse=r.clone().invert(),this._modelMatrix=r),this._viewport=e,this._zRange=t;const n=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:t,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((e=>this._getTile(e,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(e,t){if(!e.isVisible)return!1;if(t&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:t}),{bbox:r}=e;for(const[e,t,i,o]of n){let n;if("west"in r)n=r.west<i&&r.east>e&&r.south<o&&r.north>t;else{const s=Math.min(r.top,r.bottom),a=Math.max(r.top,r.bottom);n=r.left<i&&r.right>e&&s<o&&a>t}if(n)return!0}return!1}return!0}getTileIndices(e){let{viewport:t,maxZoom:n,minZoom:r,zRange:i,modelMatrix:o,modelMatrixInverse:s}=e;const{tileSize:a,extent:l,zoomOffset:c}=this.opts;return kS({viewport:t,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:c})}getTileId(e){return`${e.x}-${e.y}-${e.z}`}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:t}=this.opts;return{bbox:AS(this._viewport,e.x,e.y,e.z,t)}}getParentIndex(e){return{x:Math.floor(e.x/2),y:Math.floor(e.y/2),z:e.z-1}}updateTileStates(){const e=this.opts.refinementStrategy||LS,t=new Array(this._cache.size);let n=0;for(const r of this._cache.values())t[n++]=r.isVisible,r.isSelected=!1,r.isVisible=!1;for(const r of this._selectedTiles)r.isSelected=!0,r.isVisible=!0;("function"===typeof e?e:MS[e])(Array.from(this._cache.values())),n=0;for(const r of this._cache.values())if(t[n++]!==r.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,t=[];let n=0;for(const r of this._cache.values())r.isLoading&&(n++,r.isSelected||r.isVisible||t.push(r));for(;e>0&&n>e&&t.length>0;){t.shift().abort(),n--}}_rebuildTree(){const{_cache:e}=this;for(const t of e.values())t.parent=null,t.children&&(t.children.length=0);for(const t of e.values()){const e=this._getNearestAncestor(t);t.parent=e,e?.children&&e.children.push(t)}}_resizeCache(){const{_cache:e,opts:t}=this,n=t.maxCacheSize??(null!==t.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=t.maxCacheByteSize??1/0;if(e.size>n||this._cacheByteSize>r){for(const[i,o]of e)if(o.isVisible||o.isSelected||(this._cacheByteSize-=null!==t.maxCacheByteSize?o.byteLength:0,e.delete(i),this.opts.onTileUnload?.(o)),e.size<=n&&this._cacheByteSize<=r)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((e,t)=>e.zoom-t.zoom)),this._dirty=!1)}_getTile(e,t){const n=this.getTileId(e);let r=this._cache.get(n),i=!1;return!r&&t?(r=new Dw(e),Object.assign(r,this.getTileMetadata(r.index)),Object.assign(r,{id:n,zoom:this.getTileZoom(r.index)}),i=!0,this._cache.set(n,r),this._dirty=!0):r&&r.needsReload&&(i=!0),r&&i&&r.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),r}_getNearestAncestor(e){const{_minZoom:t=0}=this;let n=e.index;for(;this.getTileZoom(n)>t;){n=this.getParentIndex(n);const e=this._getTile(n);if(e)return e}return null}},data:{type:"data",value:[]},dataComparator:vS.equal,renderSubLayers:{type:"function",value:e=>new Ow(e)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:e=>{}},onTileUnload:{type:"function",value:e=>{}},onTileError:{type:"function",value:e=>console.error(e)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:LS,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0};class BS extends u_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){this.state?.tileset?.finalize()}get isLoaded(){return Boolean(this.state?.tileset?.selectedTiles?.every((e=>e.isLoaded&&e.layers&&e.layers.every((e=>e.isLoaded)))))}shouldUpdateState(e){let{changeFlags:t}=e;return t.somethingChanged}updateState(e){let{changeFlags:t}=e,{tileset:n}=this.state;const r=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():n.tiles.forEach((e=>{e.layers=null}))):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:t,maxCacheByteSize:n,refinementStrategy:r,extent:i,maxZoom:o,minZoom:s,maxRequests:a,debounceTime:l,zoomOffset:c}=this.props;return{maxCacheSize:t,maxCacheByteSize:n,maxZoom:o,minZoom:s,tileSize:e,refinementStrategy:r,extent:i,maxRequests:a,debounceTime:l,zoomOffset:c,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const e=this.state.tileset,{zRange:t,modelMatrix:n}=this.props,r=e.update(this.context.viewport,{zRange:t,modelMatrix:n}),{isLoaded:i}=e,o=this.state.isLoaded!==i,s=this.state.frameNumber!==r;i&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:r}),this.state.isLoaded=i}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:t}=this.props;t&&t(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,t){this.props.onTileError(e),t.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:t,getTileData:n,fetch:r}=this.props,{signal:i}=e;return e.url="string"===typeof t||Array.isArray(t)?_S(t,e):null,n?n(e):r&&e.url?r(e.url,{propName:"data",layer:this,signal:i}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo(e){const t=e.sourceLayer,n=t.props.tile,r=e.info;return r.picked&&(r.tile=n),r.sourceTile=n,r.sourceTileSubLayer=t,r}_updateAutoHighlight(e){e.sourceTileSubLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map((e=>{const t=this.getSubLayerPropsByTile(e);if(e.isLoaded||e.content)if(e.layers)t&&e.layers[0]&&Object.keys(t).some((n=>e.layers[0].props[n]!==t[n]))&&(e.layers=e.layers.map((e=>e.clone(t))));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=Mo(n,Boolean).map((n=>n.clone({tile:e,...t})))}else;return e.layers}))}filterSubLayer(e){let{layer:t,cullRect:n}=e;const{tile:r}=t.props;return this.state.tileset.isTileVisible(r,n)}}BS.defaultProps=DS,BS.layerName="TileLayer";const US=BS;function zS(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=zS(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const $S=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=zS(e))&&(r&&(r+=" "),r+=t);return r};function jS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let s="",a=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(s+=(!0===a?"":" ")+t(r),a=!1,n&&n[r]&&(s+=" "+n[r]))}r[i]=s}return r}var VS=n(732);function WS(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function GS(t){if(e.isValidElement(t)||(0,VS.Hy)(t)||!WS(t))return t;const n={};return Object.keys(t).forEach((e=>{n[e]=GS(t[e])})),n}function HS(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=r.clone?{...t}:t;return WS(t)&&WS(n)&&Object.keys(n).forEach((o=>{e.isValidElement(n[o])||(0,VS.Hy)(n[o])?i[o]=n[o]:WS(n[o])&&Object.prototype.hasOwnProperty.call(t,o)&&WS(t[o])?i[o]=HS(t[o],n[o],r):r.clone?i[o]=WS(n[o])?GS(n[o]):n[o]:i[o]=n[o]})),i}const XS={xs:0,sm:600,md:900,lg:1200,xl:1536},qS={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${XS[e]}px)`},KS={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:XS[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function YS(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||qS;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||qS;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:KS,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||XS).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function ZS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function QS(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function JS(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}function eT(e){if("string"!==typeof e)throw new Error(JS(7));return e.charAt(0).toUpperCase()+e.slice(1)}function tT(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function nT(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:tT(e,n)||i,t&&(r=t(r,i,e)),r}const rT=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],s=tT(e.theme,r)||{};return YS(e,o,(e=>{let r=nT(s,i,e);return e===r&&"string"===typeof e&&(r=nT(s,i,`${t}${"default"===e?"":eT(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const iT=function(e,t){return t?HS(e,t,{clone:!1}):e};const oT={m:"margin",p:"padding"},sT={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},lT=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!aT[e])return[e];e=aT[e]}const[t,n]=e.split(""),r=oT[t],i=sT[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),cT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],uT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],dT=[...cT,...uT];function hT(e,t,n,r){const i=tT(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?i.startsWith("var(")&&0===e?0:i.startsWith("var(")&&1===e?i:`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?`calc(-1 * ${n})`:`-${n}`}:"function"===typeof i?i:()=>{}}function fT(e){return hT(e,"spacing",8)}function pT(e,t){return"string"===typeof t||null==t?t:e(t)}function gT(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=pT(t,n),e)),{})}(lT(n),r);return YS(e,e[n],i)}function mT(e,t){const n=fT(e.theme);return Object.keys(e).map((r=>gT(e,t,r,n))).reduce(iT,{})}function yT(e){return mT(e,cT)}function vT(e){return mT(e,uT)}function bT(e){return mT(e,dT)}yT.propTypes={},yT.filterProps=cT,vT.propTypes={},vT.filterProps=uT,bT.propTypes={},bT.filterProps=dT;const _T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?iT(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function xT(e){return"number"!==typeof e?e:`${e}px solid`}function wT(e,t){return rT({prop:e,themeKey:"borders",transform:t})}const ET=wT("border",xT),ST=wT("borderTop",xT),TT=wT("borderRight",xT),AT=wT("borderBottom",xT),CT=wT("borderLeft",xT),kT=wT("borderColor"),PT=wT("borderTopColor"),RT=wT("borderRightColor"),IT=wT("borderBottomColor"),LT=wT("borderLeftColor"),MT=wT("outline",xT),OT=wT("outlineColor"),NT=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=hT(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:pT(t,e)});return YS(e,e.borderRadius,n)}return null};NT.propTypes={},NT.filterProps=["borderRadius"];_T(ET,ST,TT,AT,CT,kT,PT,RT,IT,LT,NT,MT,OT);const FT=e=>{if(void 0!==e.gap&&null!==e.gap){const t=hT(e.theme,"spacing",8),n=e=>({gap:pT(t,e)});return YS(e,e.gap,n)}return null};FT.propTypes={},FT.filterProps=["gap"];const DT=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=hT(e.theme,"spacing",8),n=e=>({columnGap:pT(t,e)});return YS(e,e.columnGap,n)}return null};DT.propTypes={},DT.filterProps=["columnGap"];const BT=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=hT(e.theme,"spacing",8),n=e=>({rowGap:pT(t,e)});return YS(e,e.rowGap,n)}return null};BT.propTypes={},BT.filterProps=["rowGap"];_T(FT,DT,BT,rT({prop:"gridColumn"}),rT({prop:"gridRow"}),rT({prop:"gridAutoFlow"}),rT({prop:"gridAutoColumns"}),rT({prop:"gridAutoRows"}),rT({prop:"gridTemplateColumns"}),rT({prop:"gridTemplateRows"}),rT({prop:"gridTemplateAreas"}),rT({prop:"gridArea"}));function UT(e,t){return"grey"===t?t:e}_T(rT({prop:"color",themeKey:"palette",transform:UT}),rT({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:UT}),rT({prop:"backgroundColor",themeKey:"palette",transform:UT}));function zT(e){return e<=1&&0!==e?100*e+"%":e}const $T=rT({prop:"width",transform:zT}),jT=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||XS[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:zT(t)}};return YS(e,e.maxWidth,t)}return null};jT.filterProps=["maxWidth"];const VT=rT({prop:"minWidth",transform:zT}),WT=rT({prop:"height",transform:zT}),GT=rT({prop:"maxHeight",transform:zT}),HT=rT({prop:"minHeight",transform:zT}),XT=(rT({prop:"size",cssProperty:"width",transform:zT}),rT({prop:"size",cssProperty:"height",transform:zT}),_T($T,jT,VT,WT,GT,HT,rT({prop:"boxSizing"})),{border:{themeKey:"borders",transform:xT},borderTop:{themeKey:"borders",transform:xT},borderRight:{themeKey:"borders",transform:xT},borderBottom:{themeKey:"borders",transform:xT},borderLeft:{themeKey:"borders",transform:xT},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:xT},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:NT},color:{themeKey:"palette",transform:UT},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:UT},backgroundColor:{themeKey:"palette",transform:UT},p:{style:vT},pt:{style:vT},pr:{style:vT},pb:{style:vT},pl:{style:vT},px:{style:vT},py:{style:vT},padding:{style:vT},paddingTop:{style:vT},paddingRight:{style:vT},paddingBottom:{style:vT},paddingLeft:{style:vT},paddingX:{style:vT},paddingY:{style:vT},paddingInline:{style:vT},paddingInlineStart:{style:vT},paddingInlineEnd:{style:vT},paddingBlock:{style:vT},paddingBlockStart:{style:vT},paddingBlockEnd:{style:vT},m:{style:yT},mt:{style:yT},mr:{style:yT},mb:{style:yT},ml:{style:yT},mx:{style:yT},my:{style:yT},margin:{style:yT},marginTop:{style:yT},marginRight:{style:yT},marginBottom:{style:yT},marginLeft:{style:yT},marginX:{style:yT},marginY:{style:yT},marginInline:{style:yT},marginInlineStart:{style:yT},marginInlineEnd:{style:yT},marginBlock:{style:yT},marginBlockStart:{style:yT},marginBlockEnd:{style:yT},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:FT},rowGap:{style:BT},columnGap:{style:DT},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:zT},maxWidth:{style:jT},minWidth:{transform:zT},height:{transform:zT},maxHeight:{transform:zT},minHeight:{transform:zT},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});function qT(e){const{sx:t,...n}=e,{systemProps:r,otherProps:i}=(e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??XT;return Object.keys(e).forEach((r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]})),t})(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return WS(e)?{...r,...e}:r}:{...r,...t},{...i,sx:o}}var KT=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(iF){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),YT=Math.abs,ZT=String.fromCharCode,QT=Object.assign;function JT(e){return e.trim()}function eA(e,t,n){return e.replace(t,n)}function tA(e,t){return e.indexOf(t)}function nA(e,t){return 0|e.charCodeAt(t)}function rA(e,t,n){return e.slice(t,n)}function iA(e){return e.length}function oA(e){return e.length}function sA(e,t){return t.push(e),e}var aA=1,lA=1,cA=0,uA=0,dA=0,hA="";function fA(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:aA,column:lA,length:s,return:""}}function pA(e,t){return QT(fA("",null,null,"",null,null,0),e,{length:-e.length},t)}function gA(){return dA=uA<cA?nA(hA,uA++):0,lA++,10===dA&&(lA=1,aA++),dA}function mA(){return nA(hA,uA)}function yA(){return uA}function vA(e,t){return rA(hA,e,t)}function bA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _A(e){return aA=lA=1,cA=iA(hA=e),uA=0,[]}function xA(e){return hA="",e}function wA(e){return JT(vA(uA-1,TA(91===e?e+2:40===e?e+1:e)))}function EA(e){for(;(dA=mA())&&dA<33;)gA();return bA(e)>2||bA(dA)>3?"":" "}function SA(e,t){for(;--t&&gA()&&!(dA<48||dA>102||dA>57&&dA<65||dA>70&&dA<97););return vA(e,yA()+(t<6&&32==mA()&&32==gA()))}function TA(e){for(;gA();)switch(dA){case e:return uA;case 34:case 39:34!==e&&39!==e&&TA(dA);break;case 40:41===e&&TA(e);break;case 92:gA()}return uA}function AA(e,t){for(;gA()&&e+dA!==57&&(e+dA!==84||47!==mA()););return"/*"+vA(t,uA-1)+"*"+ZT(47===e?e:gA())}function CA(e){for(;!bA(mA());)gA();return vA(e,uA)}var kA="-ms-",PA="-moz-",RA="-webkit-",IA="comm",LA="rule",MA="decl",OA="@keyframes";function NA(e,t){for(var n="",r=oA(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function FA(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case MA:return e.return=e.return||e.value;case IA:return"";case OA:return e.return=e.value+"{"+NA(e.children,r)+"}";case LA:e.value=e.props.join(",")}return iA(n=NA(e.children,r))?e.return=e.value+"{"+n+"}":""}function DA(e){return xA(BA("",null,null,null,[""],e=_A(e),0,[0],e))}function BA(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,g=1,m=1,y=1,v=0,b="",_=i,x=o,w=r,E=b;m;)switch(p=v,v=gA()){case 40:if(108!=p&&58==nA(E,d-1)){-1!=tA(E+=eA(wA(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:E+=wA(v);break;case 9:case 10:case 13:case 32:E+=EA(p);break;case 92:E+=SA(yA()-1,7);continue;case 47:switch(mA()){case 42:case 47:sA(zA(AA(gA(),yA()),t,n),l);break;default:E+="/"}break;case 123*g:a[c++]=iA(E)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(E=eA(E,/\f/g,"")),f>0&&iA(E)-d&&sA(f>32?$A(E+";",r,n,d-1):$A(eA(E," ","")+";",r,n,d-2),l);break;case 59:E+=";";default:if(sA(w=UA(E,t,n,c,u,i,a,b,_=[],x=[],d),o),123===v)if(0===u)BA(E,t,w,w,_,o,d,a,x);else switch(99===h&&110===nA(E,3)?100:h){case 100:case 108:case 109:case 115:BA(e,w,w,r&&sA(UA(e,w,w,0,0,i,a,b,i,_=[],d),x),i,x,d,a,r?_:x);break;default:BA(E,w,w,w,[""],x,0,a,x)}}c=u=f=0,g=y=1,b=E="",d=s;break;case 58:d=1+iA(E),f=p;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==(dA=uA>0?nA(hA,--uA):0,lA--,10===dA&&(lA=1,aA--),dA))continue;switch(E+=ZT(v),v*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(iA(E)-1)*y,y=1;break;case 64:45===mA()&&(E+=wA(gA())),h=mA(),u=d=iA(b=E+=CA(yA())),v++;break;case 45:45===p&&2==iA(E)&&(g=0)}}return o}function UA(e,t,n,r,i,o,s,a,l,c,u){for(var d=i-1,h=0===i?o:[""],f=oA(h),p=0,g=0,m=0;p<r;++p)for(var y=0,v=rA(e,d+1,d=YT(g=s[p])),b=e;y<f;++y)(b=JT(g>0?h[y]+" "+v:eA(v,/&\f/g,h[y])))&&(l[m++]=b);return fA(e,t,n,0===i?LA:a,l,c,u)}function zA(e,t,n){return fA(e,t,n,IA,ZT(dA),rA(e,2,-2),0)}function $A(e,t,n,r){return fA(e,t,n,MA,rA(e,0,r),rA(e,r+1,-1),r)}var jA=function(e,t,n){for(var r=0,i=0;r=i,i=mA(),38===r&&12===i&&(t[n]=1),!bA(i);)gA();return vA(e,uA)},VA=function(e,t){return xA(function(e,t){var n=-1,r=44;do{switch(bA(r)){case 0:38===r&&12===mA()&&(t[n]=1),e[n]+=jA(uA-1,t,n);break;case 2:e[n]+=wA(r);break;case 4:if(44===r){e[++n]=58===mA()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=ZT(r)}}while(r=gA());return e}(_A(e),t))},WA=new WeakMap,GA=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||WA.get(n))&&!r){WA.set(e,!0);for(var i=[],o=VA(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},HA=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function XA(e,t){switch(function(e,t){return 45^nA(e,0)?(((t<<2^nA(e,0))<<2^nA(e,1))<<2^nA(e,2))<<2^nA(e,3):0}(e,t)){case 5103:return RA+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return RA+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return RA+e+PA+e+kA+e+e;case 6828:case 4268:return RA+e+kA+e+e;case 6165:return RA+e+kA+"flex-"+e+e;case 5187:return RA+e+eA(e,/(\w+).+(:[^]+)/,RA+"box-$1$2"+kA+"flex-$1$2")+e;case 5443:return RA+e+kA+"flex-item-"+eA(e,/flex-|-self/,"")+e;case 4675:return RA+e+kA+"flex-line-pack"+eA(e,/align-content|flex-|-self/,"")+e;case 5548:return RA+e+kA+eA(e,"shrink","negative")+e;case 5292:return RA+e+kA+eA(e,"basis","preferred-size")+e;case 6060:return RA+"box-"+eA(e,"-grow","")+RA+e+kA+eA(e,"grow","positive")+e;case 4554:return RA+eA(e,/([^-])(transform)/g,"$1"+RA+"$2")+e;case 6187:return eA(eA(eA(e,/(zoom-|grab)/,RA+"$1"),/(image-set)/,RA+"$1"),e,"")+e;case 5495:case 3959:return eA(e,/(image-set\([^]*)/,RA+"$1$`$1");case 4968:return eA(eA(e,/(.+:)(flex-)?(.*)/,RA+"box-pack:$3"+kA+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+RA+e+e;case 4095:case 3583:case 4068:case 2532:return eA(e,/(.+)-inline(.+)/,RA+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(iA(e)-1-t>6)switch(nA(e,t+1)){case 109:if(45!==nA(e,t+4))break;case 102:return eA(e,/(.+:)(.+)-([^]+)/,"$1"+RA+"$2-$3$1"+PA+(108==nA(e,t+3)?"$3":"$2-$3"))+e;case 115:return~tA(e,"stretch")?XA(eA(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==nA(e,t+1))break;case 6444:switch(nA(e,iA(e)-3-(~tA(e,"!important")&&10))){case 107:return eA(e,":",":"+RA)+e;case 101:return eA(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+RA+(45===nA(e,14)?"inline-":"")+"box$3$1"+RA+"$2$3$1"+kA+"$2box$3")+e}break;case 5936:switch(nA(e,t+11)){case 114:return RA+e+kA+eA(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return RA+e+kA+eA(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return RA+e+kA+eA(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return RA+e+kA+e+e}return e}var qA=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case MA:e.return=XA(e.value,e.length);break;case OA:return NA([pA(e,{value:eA(e.value,"@","@"+RA)})],r);case LA:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return NA([pA(e,{props:[eA(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return NA([pA(e,{props:[eA(t,/:(plac\w+)/,":"+RA+"input-$1")]}),pA(e,{props:[eA(t,/:(plac\w+)/,":-moz-$1")]}),pA(e,{props:[eA(t,/:(plac\w+)/,kA+"input-$1")]})],r)}return""}))}}],KA=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,o=e.stylisPlugins||qA,s={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var l,c,u=[FA,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=oA(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([GA,HA].concat(o,u));i=function(e,t,n,r){l=n,function(e){NA(DA(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new KT({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return h.sheet.hydrate(a),h};function YA(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var ZA=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},QA=function(e,t,n){ZA(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}};var JA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function eC(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var tC=/[A-Z]|^ms/g,nC=/_EMO_([^_]+?)_([^]*?)_EMO_/g,rC=function(e){return 45===e.charCodeAt(1)},iC=function(e){return null!=e&&"boolean"!==typeof e},oC=eC((function(e){return rC(e)?e:e.replace(tC,"-$&").toLowerCase()})),sC=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(nC,(function(e,t,n){return lC={name:t,styles:n,next:lC},t}))}return 1===JA[e]||rC(e)||"number"!==typeof t||0===t?t:t+"px"};function aC(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return lC={name:i.name,styles:i.styles,next:lC},i.name;var o=n;if(void 0!==o.styles){var s=o.next;if(void 0!==s)for(;void 0!==s;)lC={name:s.name,styles:s.styles,next:lC},s=s.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=aC(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s){var a=s;null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":iC(a)&&(r+=oC(o)+":"+sC(o,a)+";")}else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var l=aC(e,t,s);switch(o){case"animation":case"animationName":r+=oC(o)+":"+l+";";break;default:r+=o+"{"+l+"}"}}else for(var c=0;c<s.length;c++)iC(s[c])&&(r+=oC(o)+":"+sC(o,s[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=lC,l=n(e);return lC=a,aC(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var lC,cC=/label:\s*([^\s;{]+)\s*(;|$)/g;function uC(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";lC=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=aC(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++){if(i+=aC(n,t,e[s]),r)i+=o[s]}cC.lastIndex=0;for(var a,l="";null!==(a=cC.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:lC}}var dC=!!t.useInsertionEffect&&t.useInsertionEffect,hC=dC||function(e){return e()},fC=dC||e.useLayoutEffect,pC=e.createContext("undefined"!==typeof HTMLElement?KA({key:"css"}):null),gC=(pC.Provider,function(t){return(0,e.forwardRef)((function(n,r){var i=(0,e.useContext)(pC);return t(n,i,r)}))}),mC=e.createContext({});var yC={}.hasOwnProperty,vC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",bC=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return ZA(t,n,r),hC((function(){return QA(t,n,r)})),null},_C=gC((function(t,n,r){var i=t.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var o=t[vC],s=[i],a="";"string"===typeof t.className?a=YA(n.registered,s,t.className):null!=t.className&&(a=t.className+" ");var l=uC(s,void 0,e.useContext(mC));a+=n.key+"-"+l.name;var c={};for(var u in t)yC.call(t,u)&&"css"!==u&&u!==vC&&(c[u]=t[u]);return c.className=a,r&&(c.ref=r),e.createElement(e.Fragment,null,e.createElement(bC,{cache:n,serialized:l,isStringTag:"string"===typeof o}),e.createElement(o,c))})),xC=_C,wC=(n(876),function(t,n){var r=arguments;if(null==n||!yC.call(n,"css"))return e.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=xC,o[1]=function(e,t){var n={};for(var r in t)yC.call(t,r)&&(n[r]=t[r]);return n[vC]=e,n}(t,n);for(var s=2;s<i;s++)o[s]=r[s];return e.createElement.apply(null,o)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(wC||(wC={}));var EC=gC((function(t,n){var r=uC([t.styles],void 0,e.useContext(mC)),i=e.useRef();return fC((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),o=!1,s=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==s&&(o=!0,s.setAttribute("data-emotion",e),t.hydrate([s])),i.current=[t,o],function(){t.flush()}}),[n]),fC((function(){var e=i.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&QA(n,r.next,!0),t.tags.length){var o=t.tags[t.tags.length-1].nextElementSibling;t.before=o,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function SC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uC(t)}function TC(){var e=SC.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function AC(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,Kr.jsx)(EC,{styles:r})}function CC(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),s=Object.keys(o);function a(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const o=s.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[s[o]]?t[s[o]]:i)-r/100}${n})`}return{keys:s,values:o,up:a,down:l,between:c,only:function(e){return s.indexOf(e)+1<s.length?c(e,s[s.indexOf(e)+1]):a(e)},not:function(e){const t=s.indexOf(e);return 0===t?a(s[1]):t===s.length-1?l(s[t]):c(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const kC={borderRadius:4};function PC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fT({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const RC=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:s=e,themeKey:a,transform:l,style:c}=o;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const u=tT(n,a)||{};if(c)return c(i);return YS(i,t,(t=>{let n=nT(u,l,t);return t===n&&"string"===typeof t&&(n=nT(u,l,`${e}${"default"===t?"":eT(t)}`,t)),!1===s?n:{[s]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??XT;function s(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const s=ZS(i.breakpoints),a=Object.keys(s);let l=s;return Object.keys(r).forEach((n=>{const s=function(e,t){return"function"===typeof e?e(t):e}(r[n],i);if(null!==s&&void 0!==s)if("object"===typeof s)if(o[n])l=iT(l,e(n,s,i,o));else{const e=YS({theme:i},s,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,s)?l=iT(l,e):l[n]=t({sx:s,theme:i})}else l=iT(l,e(n,s,i,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,QS(a,l))}return Array.isArray(r)?r.map(s):s(r)}}();RC.filterProps=["sx"];const IC=RC;function LC(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const MC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...o}=e;let s=HS({breakpoints:CC(t),direction:"ltr",components:{},palette:{mode:"light",...n},spacing:PC(r),shape:{...kC,...i}},o);s=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(s),s.applyStyles=LC;for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return s=l.reduce(((e,t)=>HS(e,t)),s),s.unstable_sxConfig={...XT,...o?.unstable_sxConfig},s.unstable_sx=function(e){return IC({sx:e,theme:this})},s};const OC=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=e.useContext(mC);return n&&(r=n,0!==Object.keys(r).length)?n:t;var r},NC=MC();const FC=function(){return OC(arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC)};const DC=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=FC(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Kr.jsx)(AC,{styles:o})};const BC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function UC(e){return BC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function zC(e){if(e.type)return e;if("#"===e.charAt(0))return zC(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(JS(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(JS(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const $C=(e,t)=>{try{return(e=>{const t=zC(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(n){return e}};function jC(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function VC(e){e=zC(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),jC({type:a,values:l})}function WC(e){let t="hsl"===(e=zC(e)).type||"hsla"===e.type?zC(VC(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function GC(e,t){return e=zC(e),t=UC(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,jC(e)}function HC(e,t,n){try{return GC(e,t)}catch(r){return e}}function XC(e,t){if(e=zC(e),t=UC(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return jC(e)}function qC(e,t,n){try{return XC(e,t)}catch(r){return e}}function KC(e,t){if(e=zC(e),t=UC(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return jC(e)}function YC(e,t,n){try{return KC(e,t)}catch(r){return e}}function ZC(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return WC(e)>.5?XC(e,t):KC(e,t)}(e,t)}catch(r){return e}}const QC={black:"#000",white:"#fff"},JC={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ek={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},tk={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},nk={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},rk={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ik={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ok={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function sk(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:QC.white,default:QC.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ak=sk();function lk(){return{text:{primary:QC.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:QC.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const ck=lk();function uk(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=KC(e.main,i):"dark"===t&&(e.dark=XC(e.main,o)))}function dk(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:rk[200],light:rk[50],dark:rk[400]}:{main:rk[700],light:rk[400],dark:rk[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ek[200],light:ek[50],dark:ek[400]}:{main:ek[500],light:ek[300],dark:ek[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:tk[500],light:tk[300],dark:tk[700]}:{main:tk[700],light:tk[400],dark:tk[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ik[400],light:ik[300],dark:ik[700]}:{main:ik[700],light:ik[500],dark:ik[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ok[400],light:ok[300],dark:ok[700]}:{main:ok[800],light:ok[500],dark:ok[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:nk[400],light:nk[300],dark:nk[700]}:{main:"#ed6c02",light:nk[500],dark:nk[900]}}(t);function d(e){const t=function(e,t){const n=WC(e),r=WC(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,ck.text.primary)>=n?ck.text.primary:ak.text.primary;return t}const h=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=e;if(t={...t},!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(JS(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error(JS(12,n?` (${n})`:"",JSON.stringify(t.main)));return uk(t,"light",o,r),uk(t,"dark",s,r),t.contrastText||(t.contrastText=d(t.main)),t};let f;"light"===t?f=sk():"dark"===t&&(f=lk());return HS({common:{...QC},mode:t,primary:h({color:o,name:"primary"}),secondary:h({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:JC,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r,...f},i)}function hk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${o}`:`, var(--${e?`${e}-`:""}${o}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return`var(--${e?`${e}-`:""}${n}${t(...i)})`}}function fk(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const pk=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function gk(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},s={};var a,l;return a=(e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t)(e,t);Object.assign(i,{[r]:l}),pk(o,e,`var(${r})`,a),pk(s,e,`var(${r}, ${l})`,a)}},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,o]=t;(!l||l&&!l([...n,i]))&&void 0!==o&&null!==o&&("object"===typeof o&&Object.keys(o).length>0?e(o,[...n,i],Array.isArray(o)?[...r,i]:r):a([...n,i],o,r))}))}(e),{css:i,vars:o,varsWithDefaults:s}}const mk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=m,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:s,defaultColorScheme:a="light",...l}=e,{vars:c,css:u,varsWithDefaults:d}=gk(l,t);let h=d;const f={},{[a]:p,...g}=o;if(Object.entries(g||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:o,varsWithDefaults:s}=gk(r,t);h=HS(h,s),f[n]={css:o,vars:i}})),p){const{css:e,vars:n,varsWithDefaults:r}=gk(p,t);h=HS(h,r),f[a]={css:e,vars:n}}function m(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(r=`[${i}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=o[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:h,generateThemeVars:()=>{let e={...c};return Object.entries(f).forEach((t=>{let[,{vars:n}]=t;e=HS(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function s(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}s(n(void 0,{...u}),u);const{[i]:a,...l}=f;if(a){const{css:e}=a,t=o[i]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};s(n(i,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:i}]=e;const a=o[t]?.palette?.mode,l=!r&&a?{colorScheme:a,...i}:{...i};s(n(t,{...l}),l)})),t}}};function yk(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}const vk={textTransform:"uppercase"},bk='"Roboto", "Helvetica", "Arial", sans-serif';function _k(e,t){const{fontFamily:n=bk,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:s=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}="function"===typeof t?t(e):t;const h=r/14,f=u||(e=>e/l*h+"rem"),p=(e,t,r,i,o)=>{return{fontFamily:n,fontWeight:e,fontSize:f(t),lineHeight:r,...n===bk?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},...o,...c};var s},g={h1:p(i,96,1.167,-1.5),h2:p(i,60,1.2,-.5),h3:p(o,48,1.167,0),h4:p(o,34,1.235,.25),h5:p(o,24,1.334,0),h6:p(s,20,1.6,.15),subtitle1:p(o,16,1.75,.15),subtitle2:p(s,14,1.57,.1),body1:p(o,16,1.5,.15),body2:p(o,14,1.43,.15),button:p(s,14,1.75,.4,vk),caption:p(o,12,1.66,.4),overline:p(o,12,2.66,1,vk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return HS({htmlFontSize:l,pxToRem:f,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:s,fontWeightBold:a,...g},d,{clone:!1})}function xk(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const wk=["none",xk(0,2,1,-1,0,1,1,0,0,1,3,0),xk(0,3,1,-2,0,2,2,0,0,1,5,0),xk(0,3,3,-2,0,3,4,0,0,1,8,0),xk(0,2,4,-1,0,4,5,0,0,1,10,0),xk(0,3,5,-1,0,5,8,0,0,1,14,0),xk(0,3,5,-1,0,6,10,0,0,1,18,0),xk(0,4,5,-2,0,7,10,1,0,2,16,1),xk(0,5,5,-3,0,8,10,1,0,3,14,2),xk(0,5,6,-3,0,9,12,1,0,3,16,2),xk(0,6,6,-3,0,10,14,1,0,4,18,3),xk(0,6,7,-4,0,11,15,1,0,4,20,3),xk(0,7,8,-4,0,12,17,2,0,5,22,4),xk(0,7,8,-4,0,13,19,2,0,5,24,4),xk(0,7,9,-4,0,14,21,2,0,5,26,4),xk(0,8,9,-5,0,15,22,2,0,6,28,5),xk(0,8,10,-5,0,16,24,2,0,6,30,5),xk(0,8,11,-5,0,17,26,2,0,6,32,5),xk(0,9,11,-5,0,18,28,2,0,7,34,6),xk(0,9,12,-6,0,19,29,2,0,7,36,6),xk(0,10,13,-6,0,20,31,3,0,8,38,7),xk(0,10,13,-6,0,21,33,3,0,8,40,7),xk(0,10,14,-6,0,22,35,3,0,8,42,7),xk(0,11,14,-7,0,23,36,3,0,9,44,8),xk(0,11,15,-7,0,24,38,3,0,9,46,8)],Ek={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sk={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Tk(e){return`${Math.round(e)}ms`}function Ak(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Ck(e){const t={...Ek,...e.easing},n={...Sk,...e.duration};return{getAutoHeightDuration:Ak,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0,...a}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof i?i:Tk(i)} ${o} ${"string"===typeof s?s:Tk(s)}`)).join(",")},...e,easing:t,duration:n}}const kk={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Pk(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[o,s]=n[i];!WS(r=s)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||o.startsWith("unstable_")?delete t[o]:WS(s)&&(t[o]={...s},e(t[o]))}var r}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}const Rk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:o={},typography:s={},shape:a,...l}=e;if(e.vars&&void 0===e.generateThemeVars)throw new Error(JS(20));const c=dk(i),u=MC(e);let d=HS(u,{mixins:yk(u.breakpoints,n),palette:c,shadows:wk.slice(),typography:_k(c,s),transitions:Ck(o),zIndex:{...kk}});d=HS(d,l);for(var h=arguments.length,f=new Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];return d=f.reduce(((e,t)=>HS(e,t)),d),d.unstable_sxConfig={...XT,...l?.unstable_sxConfig},d.unstable_sx=function(e){return IC({sx:e,theme:this})},d.toRuntimeSource=Pk,d};function Ik(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const Lk=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=Ik(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function Mk(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Ok(e){return"dark"===e?Lk:[]}function Nk(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Fk=e=>[...[...Array(25)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Dk=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if("class"===i&&(o=".%s"),"data"===i&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const i={};return Fk(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===o?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",t)]:i,[`${r}, ${o.replace("%s",t)}`]:n}:{[r]:{...n,...i}}}if(o&&"media"!==o)return`${r}, ${o.replace("%s",String(t))}`}else if(t){if("media"===o)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r};function Bk(e,t,n){!e[t]&&n&&(e[t]=n)}function Uk(e){return"string"===typeof e&&e.startsWith("hsl")?VC(e):e}function zk(e,t){`${t}Channel`in e||(e[`${t}Channel`]=$C(Uk(e[t])))}const $k=e=>{try{return e()}catch(t){}};function jk(e,t,n,r){if(!t)return;t=!0===t?{}:t;const i="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,o=dk(t);return{palette:o,opacity:{...Mk(o.mode),...n},overlays:r||Ok(o.mode),...i}}({...t,palette:{mode:i,...t?.palette}}));const{palette:o,...s}=Rk({...n,palette:{mode:i,...t?.palette}});return e[r]={...t,palette:o,opacity:{...Mk(i),...t?.opacity},overlays:t?.overlays||Ok(i)},s}function Vk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=Nk,colorSchemeSelector:s=(t.light&&t.dark?"media":void 0),rootSelector:a=":root",...l}=e,c=Object.keys(t)[0],u=n||(t.light&&"light"!==c?"light":c),d=function(){return hk(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[u]:h,light:f,dark:p,...g}=t,m={...g};let y=h;if(("dark"===u&&!("dark"in t)||"light"===u&&!("light"in t))&&(y=!0),!y)throw new Error(JS(21,u));const v=jk(m,y,l,u);f&&!m.light&&jk(m,f,void 0,"light"),p&&!m.dark&&jk(m,p,void 0,"dark");let b={defaultColorScheme:u,...v,cssVarPrefix:i,colorSchemeSelector:s,rootSelector:a,getCssVar:d,colorSchemes:m,font:{...fk(v.typography),...v.font},spacing:(_=l.spacing,"number"===typeof _?`${_}px`:"string"===typeof _||"function"===typeof _||Array.isArray(_)?_:"8px")};var _;Object.keys(b.colorSchemes).forEach((e=>{const t=b.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return d(e,t[r][i])};var r;if("light"===t.mode&&(Bk(t.common,"background","#fff"),Bk(t.common,"onBackground","#000")),"dark"===t.mode&&(Bk(t.common,"background","#000"),Bk(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){Bk(t.Alert,"errorColor",qC(t.error.light,.6)),Bk(t.Alert,"infoColor",qC(t.info.light,.6)),Bk(t.Alert,"successColor",qC(t.success.light,.6)),Bk(t.Alert,"warningColor",qC(t.warning.light,.6)),Bk(t.Alert,"errorFilledBg",n("palette-error-main")),Bk(t.Alert,"infoFilledBg",n("palette-info-main")),Bk(t.Alert,"successFilledBg",n("palette-success-main")),Bk(t.Alert,"warningFilledBg",n("palette-warning-main")),Bk(t.Alert,"errorFilledColor",$k((()=>t.getContrastText(t.error.main)))),Bk(t.Alert,"infoFilledColor",$k((()=>t.getContrastText(t.info.main)))),Bk(t.Alert,"successFilledColor",$k((()=>t.getContrastText(t.success.main)))),Bk(t.Alert,"warningFilledColor",$k((()=>t.getContrastText(t.warning.main)))),Bk(t.Alert,"errorStandardBg",YC(t.error.light,.9)),Bk(t.Alert,"infoStandardBg",YC(t.info.light,.9)),Bk(t.Alert,"successStandardBg",YC(t.success.light,.9)),Bk(t.Alert,"warningStandardBg",YC(t.warning.light,.9)),Bk(t.Alert,"errorIconColor",n("palette-error-main")),Bk(t.Alert,"infoIconColor",n("palette-info-main")),Bk(t.Alert,"successIconColor",n("palette-success-main")),Bk(t.Alert,"warningIconColor",n("palette-warning-main")),Bk(t.AppBar,"defaultBg",n("palette-grey-100")),Bk(t.Avatar,"defaultBg",n("palette-grey-400")),Bk(t.Button,"inheritContainedBg",n("palette-grey-300")),Bk(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),Bk(t.Chip,"defaultBorder",n("palette-grey-400")),Bk(t.Chip,"defaultAvatarColor",n("palette-grey-700")),Bk(t.Chip,"defaultIconColor",n("palette-grey-700")),Bk(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Bk(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Bk(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Bk(t.LinearProgress,"primaryBg",YC(t.primary.main,.62)),Bk(t.LinearProgress,"secondaryBg",YC(t.secondary.main,.62)),Bk(t.LinearProgress,"errorBg",YC(t.error.main,.62)),Bk(t.LinearProgress,"infoBg",YC(t.info.main,.62)),Bk(t.LinearProgress,"successBg",YC(t.success.main,.62)),Bk(t.LinearProgress,"warningBg",YC(t.warning.main,.62)),Bk(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),Bk(t.Slider,"primaryTrack",YC(t.primary.main,.62)),Bk(t.Slider,"secondaryTrack",YC(t.secondary.main,.62)),Bk(t.Slider,"errorTrack",YC(t.error.main,.62)),Bk(t.Slider,"infoTrack",YC(t.info.main,.62)),Bk(t.Slider,"successTrack",YC(t.success.main,.62)),Bk(t.Slider,"warningTrack",YC(t.warning.main,.62));const e=ZC(t.background.default,.8);Bk(t.SnackbarContent,"bg",e),Bk(t.SnackbarContent,"color",$k((()=>t.getContrastText(e)))),Bk(t.SpeedDialAction,"fabHoverBg",ZC(t.background.paper,.15)),Bk(t.StepConnector,"border",n("palette-grey-400")),Bk(t.StepContent,"border",n("palette-grey-400")),Bk(t.Switch,"defaultColor",n("palette-common-white")),Bk(t.Switch,"defaultDisabledColor",n("palette-grey-100")),Bk(t.Switch,"primaryDisabledColor",YC(t.primary.main,.62)),Bk(t.Switch,"secondaryDisabledColor",YC(t.secondary.main,.62)),Bk(t.Switch,"errorDisabledColor",YC(t.error.main,.62)),Bk(t.Switch,"infoDisabledColor",YC(t.info.main,.62)),Bk(t.Switch,"successDisabledColor",YC(t.success.main,.62)),Bk(t.Switch,"warningDisabledColor",YC(t.warning.main,.62)),Bk(t.TableCell,"border",YC(HC(t.divider,1),.88)),Bk(t.Tooltip,"bg",HC(t.grey[700],.92))}if("dark"===t.mode){Bk(t.Alert,"errorColor",YC(t.error.light,.6)),Bk(t.Alert,"infoColor",YC(t.info.light,.6)),Bk(t.Alert,"successColor",YC(t.success.light,.6)),Bk(t.Alert,"warningColor",YC(t.warning.light,.6)),Bk(t.Alert,"errorFilledBg",n("palette-error-dark")),Bk(t.Alert,"infoFilledBg",n("palette-info-dark")),Bk(t.Alert,"successFilledBg",n("palette-success-dark")),Bk(t.Alert,"warningFilledBg",n("palette-warning-dark")),Bk(t.Alert,"errorFilledColor",$k((()=>t.getContrastText(t.error.dark)))),Bk(t.Alert,"infoFilledColor",$k((()=>t.getContrastText(t.info.dark)))),Bk(t.Alert,"successFilledColor",$k((()=>t.getContrastText(t.success.dark)))),Bk(t.Alert,"warningFilledColor",$k((()=>t.getContrastText(t.warning.dark)))),Bk(t.Alert,"errorStandardBg",qC(t.error.light,.9)),Bk(t.Alert,"infoStandardBg",qC(t.info.light,.9)),Bk(t.Alert,"successStandardBg",qC(t.success.light,.9)),Bk(t.Alert,"warningStandardBg",qC(t.warning.light,.9)),Bk(t.Alert,"errorIconColor",n("palette-error-main")),Bk(t.Alert,"infoIconColor",n("palette-info-main")),Bk(t.Alert,"successIconColor",n("palette-success-main")),Bk(t.Alert,"warningIconColor",n("palette-warning-main")),Bk(t.AppBar,"defaultBg",n("palette-grey-900")),Bk(t.AppBar,"darkBg",n("palette-background-paper")),Bk(t.AppBar,"darkColor",n("palette-text-primary")),Bk(t.Avatar,"defaultBg",n("palette-grey-600")),Bk(t.Button,"inheritContainedBg",n("palette-grey-800")),Bk(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),Bk(t.Chip,"defaultBorder",n("palette-grey-700")),Bk(t.Chip,"defaultAvatarColor",n("palette-grey-300")),Bk(t.Chip,"defaultIconColor",n("palette-grey-300")),Bk(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Bk(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Bk(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Bk(t.LinearProgress,"primaryBg",qC(t.primary.main,.5)),Bk(t.LinearProgress,"secondaryBg",qC(t.secondary.main,.5)),Bk(t.LinearProgress,"errorBg",qC(t.error.main,.5)),Bk(t.LinearProgress,"infoBg",qC(t.info.main,.5)),Bk(t.LinearProgress,"successBg",qC(t.success.main,.5)),Bk(t.LinearProgress,"warningBg",qC(t.warning.main,.5)),Bk(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),Bk(t.Slider,"primaryTrack",qC(t.primary.main,.5)),Bk(t.Slider,"secondaryTrack",qC(t.secondary.main,.5)),Bk(t.Slider,"errorTrack",qC(t.error.main,.5)),Bk(t.Slider,"infoTrack",qC(t.info.main,.5)),Bk(t.Slider,"successTrack",qC(t.success.main,.5)),Bk(t.Slider,"warningTrack",qC(t.warning.main,.5));const e=ZC(t.background.default,.98);Bk(t.SnackbarContent,"bg",e),Bk(t.SnackbarContent,"color",$k((()=>t.getContrastText(e)))),Bk(t.SpeedDialAction,"fabHoverBg",ZC(t.background.paper,.15)),Bk(t.StepConnector,"border",n("palette-grey-600")),Bk(t.StepContent,"border",n("palette-grey-600")),Bk(t.Switch,"defaultColor",n("palette-grey-300")),Bk(t.Switch,"defaultDisabledColor",n("palette-grey-600")),Bk(t.Switch,"primaryDisabledColor",qC(t.primary.main,.55)),Bk(t.Switch,"secondaryDisabledColor",qC(t.secondary.main,.55)),Bk(t.Switch,"errorDisabledColor",qC(t.error.main,.55)),Bk(t.Switch,"infoDisabledColor",qC(t.info.main,.55)),Bk(t.Switch,"successDisabledColor",qC(t.success.main,.55)),Bk(t.Switch,"warningDisabledColor",qC(t.warning.main,.55)),Bk(t.TableCell,"border",qC(HC(t.divider,1),.68)),Bk(t.Tooltip,"bg",HC(t.grey[700],.92))}zk(t.background,"default"),zk(t.background,"paper"),zk(t.common,"background"),zk(t.common,"onBackground"),zk(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&Bk(t[e],"mainChannel",$C(Uk(n.main))),n.light&&Bk(t[e],"lightChannel",$C(Uk(n.light))),n.dark&&Bk(t[e],"darkChannel",$C(Uk(n.dark))),n.contrastText&&Bk(t[e],"contrastTextChannel",$C(Uk(n.contrastText))),"text"===e&&(zk(t[e],"primary"),zk(t[e],"secondary")),"action"===e&&(n.active&&zk(t[e],"active"),n.selected&&zk(t[e],"selected")))}))}));for(var x=arguments.length,w=new Array(x>1?x-1:0),E=1;E<x;E++)w[E-1]=arguments[E];b=w.reduce(((e,t)=>HS(e,t)),b);const S={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:Dk(b)},{vars:T,generateThemeVars:A,generateStyleSheets:C}=mk(b,S);return b.vars=T,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach((e=>{let[t,n]=e;b[t]=n})),b.generateThemeVars=A,b.generateStyleSheets=C,b.generateSpacing=function(){return PC(l.spacing,fT(this))},b.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(s),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=o,b.unstable_sxConfig={...XT,...l?.unstable_sxConfig},b.unstable_sx=function(e){return IC({sx:e,theme:this})},b.toRuntimeSource=Pk,b}function Wk(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:dk({...!0===n?{}:n.palette,mode:t})})}function Gk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=t?.mode,...o}=e,s=i||"light",a=r?.[s],l={...r,...t?{[s]:{..."boolean"!==typeof a&&a,palette:t}}:void 0};for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];if(!1===n){if(!("colorSchemes"in e))return Rk(e,...u);let n=t;"palette"in e||l[s]&&(!0!==l[s]?n=l[s].palette:"dark"===s&&(n={mode:"dark"}));const r=Rk({...e,palette:n},...u);return r.defaultColorScheme=s,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light={...!0!==l.light&&l.light,palette:r.palette},Wk(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:r.palette},Wk(r,"light",l.light)),r}return t||"light"in l||"light"!==s||(l.light=!0),Vk({...o,colorSchemes:l,defaultColorScheme:s,..."boolean"!==typeof n&&n},...u)}const Hk=Gk(),Xk="$$material";const qk=function(e){return(0,Kr.jsx)(DC,{...e,defaultTheme:Hk,themeId:Xk})};function Kk(){return Kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kk.apply(null,arguments)}var Yk=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zk=eC((function(e){return Yk.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Qk=function(e){return"theme"!==e},Jk=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Zk:Qk},eP=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},tP=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return ZA(t,n,r),hC((function(){return QA(t,n,r)})),null},nP=function t(n,r){var i,o,s=n.__emotion_real===n,a=s&&n.__emotion_base||n;void 0!==r&&(i=r.label,o=r.target);var l=eP(n,r,s),c=l||Jk(a),u=!c("as");return function(){var d=arguments,h=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{var f=d[0];h.push(f[0]);for(var p=d.length,g=1;g<p;g++)h.push(d[g],f[g])}var m=gC((function(t,n,r){var i=u&&t.as||a,s="",d=[],f=t;if(null==t.theme){for(var p in f={},t)f[p]=t[p];f.theme=e.useContext(mC)}"string"===typeof t.className?s=YA(n.registered,d,t.className):null!=t.className&&(s=t.className+" ");var g=uC(h.concat(d),n.registered,f);s+=n.key+"-"+g.name,void 0!==o&&(s+=" "+o);var m=u&&void 0===l?Jk(i):c,y={};for(var v in t)u&&"as"===v||m(v)&&(y[v]=t[v]);return y.className=s,r&&(y.ref=r),e.createElement(e.Fragment,null,e.createElement(tP,{cache:n,serialized:g,isStringTag:"string"===typeof i}),e.createElement(i,y))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=a,m.__emotion_styles=h,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(e,n){return t(e,Kk({},r,n,{shouldForwardProp:eP(m,n,!0)})).apply(void 0,h)},m}}.bind(null);function rP(e,t){return nP(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){nP[e]=nP(e)}));const iP=[];function oP(e){return iP[0]=e,uC(iP)}function sP(e){const{variants:t,...n}=e,r={variants:t,style:oP(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=oP(e.style))})),r}const aP=MC();function lP(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function cP(e){return e?(t,n)=>n[e]:null}function uP(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>uP(e,t)));if(Array.isArray(n?.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e,...r}=n;t=r}return dP(e,n.variants,[t])}return n?.isProcessed?n.style:n}function dP(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let i=0;i<t.length;i+=1){const o=t[i];if("function"===typeof o.props){if(n??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(n))continue}else for(const t in o.props)if(e[t]!==o.props[t]&&e.ownerState?.[t]!==o.props[t])continue e;"function"===typeof o.style?(n??={...e,...e.ownerState,ownerState:e.ownerState},r.push(o.style(n))):r.push(o.style)}return r}function hP(e,t){}function fP(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const pP=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},gP=e=>pP(e)&&"classes"!==e,mP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=aP,rootShouldForwardProp:r=lP,slotShouldForwardProp:i=lP}=e;function o(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==IC))));const{name:n,slot:s,skipVariantsResolver:a,skipSx:l,overridesResolver:c=cP(fP(s)),...u}=t,d=void 0!==a?a:s&&"Root"!==s&&"root"!==s||!1,h=l||!1;let f=lP;"Root"===s||"root"===s?f=r:s?f=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(f=void 0);const p=rP(e,{shouldForwardProp:f,label:hP(n,s),...u}),g=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return uP(t,e)};if(WS(e)){const t=sP(e);return t.variants?function(e){return uP(e,t)}:t.style}return e},m=function(){const t=[];for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const a=i.map(g),l=[];if(t.push(o),n&&c&&l.push((function(e){const t=e.theme,r=t.components?.[n]?.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=uP(e,r[n]);return c(e,i)})),n&&!d&&l.push((function(e){const t=e.theme,r=t?.components?.[n]?.variants;return r?dP(e,r):null})),h||l.push(IC),Array.isArray(a[0])){const e=a.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const u=[...t,...a,...l],f=p(...u);return e.muiName&&(f.muiName=e.muiName),f};return p.withConfig&&(m.withConfig=p.withConfig),m}}({themeId:Xk,defaultTheme:Hk,rootShouldForwardProp:gP}),yP=mP,vP={theme:void 0};const bP=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(vP.theme=r.theme,i=sP(e(vP)),t=i,n=r.theme),i}};function _P(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]={...e[i],...n[i]};else if("componentsProps"===i||"slotProps"===i){const r=e[i],o=t[i];if(o)if(r){n[i]={...o};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=_P(r[t],o[t])}}else n[i]=o;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}const xP=e.createContext(void 0);function wP(t){let{props:n,name:r}=t;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?_P(i.defaultProps,r):i.styleOverrides||i.variants?r:_P(i,r)}({props:n,name:r,theme:{components:e.useContext(xP)}})}function EP(e){return wP(e)}const SP=eT;function TP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}const AP=e=>e,CP=(()=>{let e=AP;return{configure(t){e=t},generate:t=>e(t),reset(){e=AP}}})(),kP={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function PP(e,t){const n=kP[t];return n?`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui"}-${n}`:`${CP.generate(e)}-${t}`}function RP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=PP(e,t,n)})),r}function IP(e){return PP("MuiTypography",e)}RP("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const LP={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},MP=qT,OP=yP("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${SP(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(bP((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[n]=e;return{props:{color:`text${SP(n)}`},style:{color:(t.vars||t).palette.text[n]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),NP={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},FP=e.forwardRef((function(e,t){const{color:n,...r}=EP({props:e,name:"MuiTypography"}),i=MP({...r,...!LP[n]&&{color:n}}),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=NP,...f}=i,p={...i,align:o,color:n,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h},g=a||(u?"p":h[d]||NP[d])||"span",m=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e;return jS({root:["root",o,"inherit"!==e.align&&`align${SP(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},IP,s)})(p);return(0,Kr.jsx)(OP,{as:g,ref:t,className:$S(m.root,s),...f,ownerState:p,style:{..."inherit"!==o&&{"--Typography-textAlign":o},...f.style}})})),DP=FP;const BP=RP("MuiBox",["root"]),UP=Gk(),zP=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:o}=t,s=rP("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(IC),a=e.forwardRef((function(e,t){const a=FC(r),{className:l,component:c="div",...u}=qT(e);return(0,Kr.jsx)(s,{as:c,ref:t,className:$S(l,o?o(i):i),theme:n&&a[n]||a,...u})}));return a}({themeId:Xk,defaultTheme:UP,defaultClassName:BP.root,generateClassName:CP.generate}),$P=zP;let jP=0;const VP={...t}.useId;function WP(t){if(void 0!==VP){const e=VP();return t??e}return function(t){const[n,r]=e.useState(t),i=t||n;return e.useEffect((()=>{null==n&&(jP+=1,r(`mui-${jP}`))}),[n]),i}(t)}function GP(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function HP(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo((()=>n.every((e=>null==e))?null:e=>{n.forEach((t=>{GP(t,e)}))}),n)}function XP(e){return e&&e.ownerDocument||document}function qP(e){return XP(e).defaultView||window}const KP="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;const YP=function(t){const n=e.useRef(t);return KP((()=>{n.current=t})),e.useRef((function(){return(0,n.current)(...arguments)})).current};function ZP(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}function QP(e){return parseInt(e,10)||0}const JP={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function eR(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const tR=e.forwardRef((function(t,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:a,...l}=t,{current:c}=e.useRef(null!=a),u=e.useRef(null),d=HP(n,u),h=e.useRef(null),f=e.useRef(null),p=e.useCallback((()=>{const e=u.current,n=f.current;if(!e||!n)return;const r=qP(e).getComputedStyle(e);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=e.value||t.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const s=r.boxSizing,a=QP(r.paddingBottom)+QP(r.paddingTop),l=QP(r.borderBottomWidth)+QP(r.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;o&&(h=Math.max(Number(o)*d,h)),i&&(h=Math.min(Number(i)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===s?a+l:0),overflowing:Math.abs(h-c)<=1}}),[i,o,t.placeholder]),g=YP((()=>{const e=u.current,t=p();if(!e||!t||eR(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),m=e.useCallback((()=>{const e=u.current,t=p();if(!e||!t||eR(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[p]),y=e.useRef(-1);KP((()=>{const e=ZP(m),t=u?.current;if(!t)return;const n=qP(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{g()&&(r.unobserve(t),cancelAnimationFrame(y.current),m(),y.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(y.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[p,m,g]),KP((()=>{m()}));return(0,Kr.jsxs)(e.Fragment,{children:[(0,Kr.jsx)("textarea",{value:a,onChange:e=>{c||m(),r&&r(e)},ref:d,rows:o,style:s,...l}),(0,Kr.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:f,tabIndex:-1,style:{...JP,...s,paddingTop:0,paddingBottom:0}})]})})),nR=tR;const rR=function(e){return"string"===typeof e};function iR(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const oR=e.createContext(void 0);function sR(){return e.useContext(oR)}const aR=HP,lR=KP;function cR(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function uR(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(cR(e.value)&&""!==e.value||t&&cR(e.defaultValue)&&""!==e.defaultValue)}function dR(e){return PP("MuiInputBase",e)}const hR=RP("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var fR;const pR=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${SP(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},gR=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},mR=yP("div",{name:"MuiInputBase",slot:"Root",overridesResolver:pR})(bP((e=>{let{theme:t}=e;return{...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${hR.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]}}))),yR=yP("input",{name:"MuiInputBase",slot:"Input",overridesResolver:gR})(bP((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${hR.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${hR.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),vR=function(e){return function(t){return(0,Kr.jsx)(qk,{styles:"function"===typeof e?n=>e({theme:n,...t}):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),bR=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:s,className:a,color:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,error:g,fullWidth:m=!1,id:y,inputComponent:v="input",inputProps:b={},inputRef:_,margin:x,maxRows:w,minRows:E,multiline:S=!1,name:T,onBlur:A,onChange:C,onClick:k,onFocus:P,onKeyDown:R,onKeyUp:I,placeholder:L,readOnly:M,renderSuffix:O,rows:N,size:F,slotProps:D={},slots:B={},startAdornment:U,type:z="text",value:$,...j}=r,V=null!=b.value?b.value:$,{current:W}=e.useRef(null!=V),G=e.useRef(),H=e.useCallback((e=>{0}),[]),X=aR(G,_,b.ref,H),[q,K]=e.useState(!1),Y=sR();const Z=iR({props:r,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Z.focused=Y?Y.focused:q,e.useEffect((()=>{!Y&&h&&q&&(K(!1),A&&A())}),[Y,h,q,A]);const Q=Y&&Y.onFilled,J=Y&&Y.onEmpty,ee=e.useCallback((e=>{uR(e)?Q&&Q():J&&J()}),[Q,J]);lR((()=>{W&&ee({value:V})}),[V,ee,W]);e.useEffect((()=>{ee(G.current)}),[]);let te=v,ne=b;S&&"input"===te&&(ne=N?{type:void 0,minRows:N,maxRows:N,...ne}:{type:void 0,maxRows:w,minRows:E,...ne},te=nR);e.useEffect((()=>{Y&&Y.setAdornedStart(Boolean(U))}),[Y,U]);const re={...r,color:Z.color||"primary",disabled:Z.disabled,endAdornment:p,error:Z.error,focused:Z.focused,formControl:Y,fullWidth:m,hiddenLabel:Z.hiddenLabel,multiline:S,size:Z.size,startAdornment:U,type:z},ie=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=e;return jS({root:["root",`color${SP(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&`size${SP(h)}`,u&&"multiline",f&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]},dR,t)})(re),oe=B.root||c.Root||mR,se=D.root||u.root||{},ae=B.input||c.Input||yR;return ne={...ne,...D.input??u.input},(0,Kr.jsxs)(e.Fragment,{children:[!f&&"function"===typeof vR&&(fR||(fR=(0,Kr.jsx)(vR,{}))),(0,Kr.jsxs)(oe,{...se,ref:n,onClick:e=>{G.current&&e.currentTarget===e.target&&G.current.focus(),k&&k(e)},...j,...!rR(oe)&&{ownerState:{...re,...se.ownerState}},className:$S(ie.root,se.className,a,M&&"MuiInputBase-readOnly"),children:[U,(0,Kr.jsx)(oR.Provider,{value:null,children:(0,Kr.jsx)(ae,{"aria-invalid":Z.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:d,disabled:Z.disabled,id:y,onAnimationStart:e=>{ee("mui-auto-fill-cancel"===e.animationName?G.current:{value:"x"})},name:T,placeholder:L,readOnly:M,required:Z.required,rows:N,value:V,onKeyDown:R,onKeyUp:I,type:z,...ne,...!rR(ae)&&{as:te,ownerState:{...re,...ne.ownerState}},ref:X,className:$S(ie.input,ne.className,M&&"MuiInputBase-readOnly"),onBlur:e=>{A&&A(e),b.onBlur&&b.onBlur(e),Y&&Y.onBlur?Y.onBlur(e):K(!1)},onChange:function(e){if(!W){const t=e.target||G.current;if(null==t)throw new Error(JS(1));ee({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.onChange&&b.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{P&&P(e),b.onFocus&&b.onFocus(e),Y&&Y.onFocus?Y.onFocus(e):K(!0)}})}),p,O?O({...Z,startAdornment:U}):null]})]})})),_R=bR;function xR(e){return PP("MuiInput",e)}const wR={...hR,...RP("MuiInput",["root","underline","input"])},ER=yP(mR,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...pR(e,t),!n.disableUnderline&&t.underline]}})(bP((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${wR.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${wR.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${wR.disabled}, .${wR.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${wR.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n].main}`}}}}))]}}))),SR=yP(yR,{name:"MuiInput",slot:"Input",overridesResolver:gR})({}),TR=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiInput"}),{disableUnderline:r=!1,components:i={},componentsProps:o,fullWidth:s=!1,inputComponent:a="input",multiline:l=!1,slotProps:c,slots:u={},type:d="text",...h}=n,f=(e=>{const{classes:t,disableUnderline:n}=e,r=jS({root:["root",!n&&"underline"],input:["input"]},xR,t);return{...t,...r}})(n),p={root:{ownerState:{disableUnderline:r}}},g=c??o?HS(c??o,p):p,m=u.root??i.Root??ER,y=u.input??i.Input??SR;return(0,Kr.jsx)(_R,{slots:{root:m,input:y},slotProps:g,fullWidth:s,inputComponent:a,multiline:l,ref:t,type:d,...h,classes:f})}));TR.muiName="Input";const AR=TR;function CR(e){return PP("MuiFilledInput",e)}const kR={...hR,...RP("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},PR=yP(mR,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...pR(e,t),!n.disableUnderline&&t.underline]}})(bP((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},[`&.${kR.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},[`&.${kR.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:s},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kR.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kR.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kR.disabled}, .${kR.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${kR.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{disableUnderline:!1,color:n},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n]?.main}`}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),RR=yP(yR,{name:"MuiFilledInput",slot:"Input",overridesResolver:gR})(bP((e=>{let{theme:t}=e;return{paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}}))),IR=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:i={},componentsProps:o,fullWidth:s=!1,hiddenLabel:a,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:d={},type:h="text",...f}=n,p={...n,disableUnderline:r,fullWidth:s,inputComponent:l,multiline:c,type:h},g=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:s,multiline:a}=e,l=jS({root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd","small"===o&&`size${SP(o)}`,s&&"hiddenLabel",a&&"multiline"],input:["input"]},CR,t);return{...t,...l}})(n),m={root:{ownerState:p},input:{ownerState:p}},y=u??o?HS(m,u??o):m,v=d.root??i.Root??PR,b=d.input??i.Input??RR;return(0,Kr.jsx)(_R,{slots:{root:v,input:b},slotProps:y,fullWidth:s,inputComponent:l,multiline:c,ref:t,type:h,...f,classes:g})}));IR.muiName="Input";const LR=IR;var MR;const OR=yP("fieldset",{shouldForwardProp:gP})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NR=yP("legend",{shouldForwardProp:gP})(bP((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function FR(e){return PP("MuiOutlinedInput",e)}const DR={...hR,...RP("MuiOutlinedInput",["root","notchedOutline","input"])},BR=yP(mR,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:pR})(bP((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${DR.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${DR.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${DR.focused} .${DR.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${DR.focused} .${DR.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${DR.error} .${DR.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${DR.disabled} .${DR.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),UR=yP((function(e){const{children:t,classes:n,className:r,label:i,notched:o,...s}=e,a=null!=i&&""!==i,l={...e,notched:o,withLabel:a};return(0,Kr.jsx)(OR,{"aria-hidden":!0,className:r,ownerState:l,...s,children:(0,Kr.jsx)(NR,{ownerState:l,children:a?(0,Kr.jsx)("span",{children:i}):MR||(MR=(0,Kr.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})})}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(bP((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}}))),zR=yP(yR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:gR})(bP((e=>{let{theme:t}=e;return{padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]}}))),$R=e.forwardRef((function(t,n){var r;const i=EP({props:t,name:"MuiOutlinedInput"}),{components:o={},fullWidth:s=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:d={},type:h="text",...f}=i,p=(e=>{const{classes:t}=e,n=jS({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},FR,t);return{...t,...n}})(i),g=sR(),m=iR({props:i,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y={...i,color:m.color||"primary",disabled:m.disabled,error:m.error,focused:m.focused,formControl:g,fullWidth:s,hiddenLabel:m.hiddenLabel,multiline:c,size:m.size,type:h},v=d.root??o.Root??BR,b=d.input??o.Input??zR;return(0,Kr.jsx)(_R,{slots:{root:v,input:b},renderSuffix:t=>(0,Kr.jsx)(UR,{ownerState:y,className:p.notchedOutline,label:null!=l&&""!==l&&m.required?r||(r=(0,Kr.jsxs)(e.Fragment,{children:[l,"\u2009","*"]})):l,notched:"undefined"!==typeof u?u:Boolean(t.startAdornment||t.filled||t.focused)}),fullWidth:s,inputComponent:a,multiline:c,ref:n,type:h,...f,classes:{...p,notchedOutline:null}})}));$R.muiName="Input";const jR=$R;function VR(e){return PP("MuiFormLabel",e)}const WR=RP("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),GR=yP("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled]}})(bP((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${WR.focused}`]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${WR.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${WR.error}`]:{color:(t.vars||t).palette.error.main}}}]}}))),HR=yP("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(bP((e=>{let{theme:t}=e;return{[`&.${WR.error}`]:{color:(t.vars||t).palette.error.main}}}))),XR=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiFormLabel"}),{children:r,className:i,color:o,component:s="label",disabled:a,error:l,filled:c,focused:u,required:d,...h}=n,f=iR({props:n,muiFormControl:sR(),states:["color","required","focused","disabled","error","filled"]}),p={...n,color:f.color||"primary",component:s,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required},g=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e;return jS({root:["root",`color${SP(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},VR,t)})(p);return(0,Kr.jsxs)(GR,{as:s,ownerState:p,className:$S(g.root,i),ref:t,...h,children:[r,f.required&&(0,Kr.jsxs)(HR,{ownerState:p,"aria-hidden":!0,className:g.asterisk,children:["\u2009","*"]})]})})),qR=XR;function KR(e){return PP("MuiInputLabel",e)}RP("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const YR=yP(qR,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${WR.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(bP((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),ZR=e.forwardRef((function(e,t){const n=EP({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:i,shrink:o,variant:s,className:a,...l}=n,c=sR();let u=o;"undefined"===typeof u&&c&&(u=c.filled||c.focused||c.adornedStart);const d=iR({props:n,muiFormControl:c,states:["size","variant","required","focused"]}),h={...n,disableAnimation:r,formControl:c,shrink:u,size:d.size,variant:d.variant,required:d.required,focused:d.focused},f=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l=jS({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"medium"!==r&&`size${SP(r)}`,s],asterisk:[a&&"asterisk"]},KR,t);return{...t,...l}})(h);return(0,Kr.jsx)(YR,{"data-shrink":u,ref:t,className:$S(f.root,a),...l,ownerState:h,classes:f})}));const QR=function(t,n){return e.isValidElement(t)&&-1!==n.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)};function JR(e){return PP("MuiFormControl",e)}RP("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const eI=yP("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${SP(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),tI=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:g="medium",variant:m="outlined",...y}=r,v={...r,color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:g,variant:m},b=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return jS({root:["root","none"!==n&&`margin${SP(n)}`,r&&"fullWidth"]},JR,t)})(v),[_,x]=e.useState((()=>{let t=!1;return i&&e.Children.forEach(i,(e=>{if(!QR(e,["Input","Select"]))return;const n=QR(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)})),t})),[w,E]=e.useState((()=>{let t=!1;return i&&e.Children.forEach(i,(e=>{QR(e,["Input","Select"])&&(uR(e.props,!0)||uR(e.props.inputProps,!0))&&(t=!0)})),t})),[S,T]=e.useState(!1);l&&S&&T(!1);const A=void 0===u||l?S:u;let C;e.useRef(!1);const k=e.useCallback((()=>{E(!0)}),[]),P=e.useCallback((()=>{E(!1)}),[]),R=e.useMemo((()=>({adornedStart:_,setAdornedStart:x,color:s,disabled:l,error:c,filled:w,focused:A,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{T(!1)},onFocus:()=>{T(!0)},onEmpty:P,onFilled:k,registerEffect:C,required:p,variant:m})),[_,s,l,c,w,A,d,h,C,P,k,p,g,m]);return(0,Kr.jsx)(oR.Provider,{value:R,children:(0,Kr.jsx)(eI,{as:a,ownerState:v,className:$S(b.root,o),ref:n,...y,children:i})})})),nI=tI;function rI(e){return PP("MuiFormHelperText",e)}const iI=RP("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oI;const sI=yP("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${SP(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(bP((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${iI.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${iI.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]}}))),aI=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p",disabled:s,error:a,filled:l,focused:c,margin:u,required:d,variant:h,...f}=n,p=iR({props:n,muiFormControl:sR(),states:["variant","size","disabled","error","filled","focused","required"]}),g={...n,component:o,contained:"filled"===p.variant||"outlined"===p.variant,variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required};delete g.ownerState;const m=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e;return jS({root:["root",i&&"disabled",o&&"error",r&&`size${SP(r)}`,n&&"contained",a&&"focused",s&&"filled",l&&"required"]},rI,t)})(g);return(0,Kr.jsx)(sI,{as:o,className:$S(m.root,i),ref:t,...f,ownerState:g,children:" "===r?oI||(oI=(0,Kr.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):r})})),lI=aI;function cI(t){return parseInt(e.version,10)>=19?t?.props?.ref||null:t?.ref||null}const uI=XP,dI=e.createContext();const hI=()=>e.useContext(dI)??!1;const fI=function(e){return"string"===typeof e};const pI=function(e,t,n){return void 0===e||fI(e)?t:{...t,ownerState:{...t.ownerState,...n}}};const gI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const mI=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const yI=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=$S(n?.className,o,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},s={...n,...i,...r};return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=gI({...i,...r}),a=mI(r),l=mI(i),c=t(s),u=$S(c?.className,n?.className,o,i?.className,r?.className),d={...c?.style,...n?.style,...i?.style,...r?.style},h={...c,...n,...l,...a};return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}};const vI=function(e,t,n){return"function"===typeof e?e(t,n):e};const bI=function(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=e,s=i?{}:vI(n,r),{props:a,internalRef:l}=yI({...o,externalSlotProps:s}),c=HP(l,s?.ref,e.additionalProps?.ref);return pI(t,{...a,ref:c},r)};const _I=e.createContext({});function xI(e){return PP("MuiList",e)}RP("MuiList",["root","padding","dense","subheader"]);const wI=yP("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),EI=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,d=e.useMemo((()=>({dense:a})),[a]),h={...r,component:s,dense:a,disablePadding:l},f=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return jS({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},xI,t)})(h);return(0,Kr.jsx)(_I.Provider,{value:d,children:(0,Kr.jsxs)(wI,{as:s,className:$S(f.root,o),ref:n,ownerState:h,...u,children:[c,i]})})})),SI=EI;function TI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const AI=TI,CI=qP;function kI(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function PI(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function RI(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function II(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&RI(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const LI=e.forwardRef((function(t,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu",...h}=t,f=e.useRef(null),p=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});lR((()=>{i&&f.current.focus()}),[i]),e.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!f.current.style.width;if(e.clientHeight<f.current.clientHeight&&r){const t=`${AI(CI(e))}px`;f.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,f.current.style.width=`calc(100% + ${t})`}return f.current}})),[]);const g=aR(f,n);let m=-1;e.Children.forEach(s,((t,n)=>{e.isValidElement(t)?(t.props.disabled||("selectedMenu"===d&&t.props.selected||-1===m)&&(m=n),m===n&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(m+=1,m>=s.length&&(m=-1))):m===n&&(m+=1,m>=s.length&&(m=-1))}));const y=e.Children.map(s,((t,n)=>{if(n===m){const n={};return o&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),e.cloneElement(t,n)}return t}));return(0,Kr.jsx)(SI,{role:"menu",ref:g,className:a,onKeyDown:e=>{const t=f.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(u&&u(e));const r=uI(t).activeElement;if("ArrowDown"===n)e.preventDefault(),II(t,r,c,l,kI);else if("ArrowUp"===n)e.preventDefault(),II(t,r,c,l,PI);else if("Home"===n)e.preventDefault(),II(t,null,c,l,kI);else if("End"===n)e.preventDefault(),II(t,null,c,l,PI);else if(1===n.length){const i=p.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&RI(r,i);i.previousKeyMatched&&(a||II(t,r,!1,l,kI,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1,...h,children:y})})),MI=ZP,OI={};function NI(t,n){const r=e.useRef(OI);return r.current===OI&&(r.current=t(n)),r}const FI=[];class DI{static create(){return new DI}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function BI(){const t=NI(DI.create).current;var n;return n=t.disposeEffect,e.useEffect(n,FI),t}function UI(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function zI(e,t){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zI(e,t)}function $I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,zI(e,t)}var jI=n(119);const VI=!1,WI=e.createContext(null);var GI="unmounted",HI="exited",XI="entering",qI="entered",KI="exiting",YI=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=HI,r.appearStatus=XI):i=qI:i=e.unmountOnExit||e.mountOnEnter?GI:HI,r.state={status:i},r.nextCallback=null,r}$I(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===GI?{status:HI}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==XI&&n!==qI&&(t=XI):n!==XI&&n!==qI||(t=KI)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===XI){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:jI.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===HI&&this.setState({status:GI})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[jI.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||VI?this.safeSetState({status:qI},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:XI},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:qI},(function(){t.props.onEntered(o,s)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:jI.findDOMNode(this);t&&!VI?(this.props.onExit(r),this.safeSetState({status:KI},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:HI},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:HI},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:jI.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===GI)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,UI(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(WI.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function ZI(){}YI.contextType=WI,YI.propTypes={},YI.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ZI,onEntering:ZI,onEntered:ZI,onExit:ZI,onExiting:ZI,onExited:ZI},YI.UNMOUNTED=GI,YI.EXITED=HI,YI.ENTERING=XI,YI.ENTERED=qI,YI.EXITING=KI;const QI=YI;function JI(){const e=FC(Hk);return e[Xk]||e}const eL=e=>e.scrollTop;function tL(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:i.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:i.transitionDelay}}function nL(e){return`scale(${e}, ${e**2})`}const rL={entering:{opacity:1,transform:nL(1)},entered:{opacity:1,transform:"none"}},iL="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),oL=e.forwardRef((function(t,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:g="auto",TransitionComponent:m=QI,...y}=t,v=BI(),b=e.useRef(),_=JI(),x=e.useRef(null),w=aR(x,cI(o),n),E=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},S=E(u),T=E(((e,t)=>{eL(e);const{duration:n,delay:r,easing:i}=tL({style:p,timeout:g,easing:s},{mode:"enter"});let o;"auto"===g?(o=_.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=n,e.style.transition=[_.transitions.create("opacity",{duration:o,delay:r}),_.transitions.create("transform",{duration:iL?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),A=E(c),C=E(f),k=E((e=>{const{duration:t,delay:n,easing:r}=tL({style:p,timeout:g,easing:s},{mode:"exit"});let i;"auto"===g?(i=_.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[_.transitions.create("opacity",{duration:i,delay:n}),_.transitions.create("transform",{duration:iL?i:.666*i,delay:iL?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=nL(.75),d&&d(e)})),P=E(h);return(0,Kr.jsx)(m,{appear:i,in:a,nodeRef:x,onEnter:T,onEntered:A,onEntering:S,onExit:k,onExited:P,onExiting:C,addEndListener:e=>{"auto"===g&&v.start(b.current||0,e),r&&r(x.current,e)},timeout:"auto"===g?null:g,...y,children:(t,n)=>{let{ownerState:r,...i}=n;return e.cloneElement(o,{style:{opacity:0,transform:nL(.75),visibility:"exited"!==t||a?void 0:"hidden",...rL[t],...p,...o.props.style},ref:w,...i})}})}));oL&&(oL.muiSupportAuto=!0);const sL=oL,aL=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function lL(e){const t=[],n=[];return Array.from(e.querySelectorAll(aL)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function cL(){return!0}const uL=function(t){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:s=lL,isEnabled:a=cL,open:l}=t,c=e.useRef(!1),u=e.useRef(null),d=e.useRef(null),h=e.useRef(null),f=e.useRef(null),p=e.useRef(!1),g=e.useRef(null),m=HP(cI(n),g),y=e.useRef(null);e.useEffect((()=>{l&&g.current&&(p.current=!r)}),[r,l]),e.useEffect((()=>{if(!l||!g.current)return;const e=XP(g.current);return g.current.contains(e.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),p.current&&g.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),e.useEffect((()=>{if(!l||!g.current)return;const e=XP(g.current),t=t=>{y.current=t,!i&&a()&&"Tab"===t.key&&e.activeElement===g.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=g.current;if(null===t)return;if(!e.hasFocus()||!a()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==f.current)f.current=null;else if(null!==f.current)return;if(!p.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=s(g.current)),n.length>0){const e=Boolean(y.current?.shiftKey&&"Tab"===y.current?.key),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,o,a,l,s]);const v=e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0};return(0,Kr.jsxs)(e.Fragment,{children:[(0,Kr.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:m,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0,f.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,Kr.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:d,"data-testid":"sentinelEnd"})]})};const dL=e.forwardRef((function(t,n){const{children:r,container:i,disablePortal:o=!1}=t,[s,a]=e.useState(null),l=HP(e.isValidElement(r)?cI(r):null,n);if(KP((()=>{o||a(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),KP((()=>{if(s&&!o)return GP(n,s),()=>{GP(n,null)}}),[n,s,o]),o){if(e.isValidElement(r)){const t={ref:l};return e.cloneElement(r,t)}return r}return s?jI.createPortal(r,s):s}));function hL(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:s,shouldForwardComponentProp:a=!1,...l}=t,{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0},...h}=o,f=u[e]||r,p=vI(d[e],i),{props:{component:g,...m},internalRef:y}=yI({className:n,...l,externalForwardedProps:"root"===e?h:void 0,externalSlotProps:p}),v=HP(y,p?.ref,t.ref),b="root"===e?g||c:g;return[f,pI(f,{..."root"===e&&!c&&!u[e]&&s,..."root"!==e&&!u[e]&&s,...m,...b&&!a&&{as:b},...b&&a&&{component:b},ref:v},i)]}const fL={entering:{opacity:1},entered:{opacity:1}},pL=e.forwardRef((function(t,n){const r=JI(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:m,timeout:y=i,TransitionComponent:v=QI,...b}=t,_=e.useRef(null),x=aR(_,cI(a),n),w=e=>t=>{if(e){const n=_.current;void 0===t?e(n):e(n,t)}},E=w(h),S=w(((e,t)=>{eL(e);const n=tL({style:m,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),u&&u(e,t)})),T=w(d),A=w(g),C=w((e=>{const t=tL({style:m,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),f&&f(e)})),k=w(p);return(0,Kr.jsx)(v,{appear:s,in:c,nodeRef:_,onEnter:S,onEntered:T,onEntering:E,onExit:C,onExited:k,onExiting:A,addEndListener:e=>{o&&o(_.current,e)},timeout:y,...b,children:(t,n)=>{let{ownerState:r,...i}=n;return e.cloneElement(a,{style:{opacity:0,visibility:"exited"!==t||c?void 0:"hidden",...fL[t],...m,...a.props.style},ref:x,...i})}})})),gL=pL;function mL(e){return PP("MuiBackdrop",e)}RP("MuiBackdrop",["root","invisible"]);const yL=yP("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),vL=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:s=!1,open:a,components:l={},componentsProps:c={},slotProps:u={},slots:d={},TransitionComponent:h,transitionDuration:f,...p}=n,g={...n,component:o,invisible:s},m=(e=>{const{classes:t,invisible:n}=e;return jS({root:["root",n&&"invisible"]},mL,t)})(g),y={slots:{transition:h,root:l.Root,...d},slotProps:{...c,...u}},[v,b]=hL("root",{elementType:yL,externalForwardedProps:y,className:$S(m.root,i),ownerState:g}),[_,x]=hL("transition",{elementType:gL,externalForwardedProps:y,ownerState:g});return(0,Kr.jsx)(_,{in:a,timeout:f,...p,...x,children:(0,Kr.jsx)(v,{"aria-hidden":!0,...b,classes:m,ref:t,children:r})})})),bL=vL;function _L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function xL(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function wL(e){return parseInt(qP(e).getComputedStyle(e).paddingRight,10)||0}function EL(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&xL(e,i)}))}function SL(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function TL(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=XP(e);return t.body===e?qP(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=TI(qP(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${wL(r)+e}px`;const t=XP(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${wL(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=XP(r).body;else{const t=r.parentElement,n=qP(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const AL=()=>{},CL=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&xL(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);EL(t,e.mount,e.modalRef,r,!0);const i=SL(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=SL(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=TL(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=SL(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&xL(e.modalRef,t),EL(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&xL(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const kL=function(t){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,h=e.useRef({}),f=e.useRef(null),p=e.useRef(null),g=HP(p,d),[m,y]=e.useState(!u),v=function(e){return!!e&&e.props.hasOwnProperty("in")}(l);let b=!0;"false"!==t["aria-hidden"]&&!1!==t["aria-hidden"]||(b=!1);const _=()=>(h.current.modalRef=p.current,h.current.mount=f.current,h.current),x=()=>{CL.mount(_(),{disableScrollLock:i}),p.current&&(p.current.scrollTop=0)},w=YP((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||XP(f.current).body;CL.add(_(),e),p.current&&x()})),E=()=>CL.isTopModal(_()),S=YP((e=>{f.current=e,e&&(u&&E()?x():p.current&&xL(p.current,b))})),T=e.useCallback((()=>{CL.remove(_(),b)}),[b]);e.useEffect((()=>()=>{T()}),[T]),e.useEffect((()=>{u?w():v&&o||T()}),[u,T,v,o,w]);const A=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&E()&&(r||(t.stopPropagation(),c&&c(t,"escapeKeyDown")))},C=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&c&&c(t,"backdropClick")};return{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=gI(t);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...e};return{role:"presentation",...r,onKeyDown:A(r),ref:g}},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":!0,...e,onClick:C(e),open:u}},getTransitionProps:()=>({onEnter:_L((()=>{y(!1),s&&s()}),l?.props.onEnter??AL),onExited:_L((()=>{y(!0),a&&a(),o&&T()}),l?.props.onExited??AL)}),rootRef:g,portalRef:S,isTopModal:E,exited:m,hasTransition:v}};function PL(e){return PP("MuiModal",e)}RP("MuiModal",["root","hidden","backdrop"]);const RL=yP("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(bP((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),IL=yP(bL,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),LL=e.forwardRef((function(t,n){const r=EP({name:"MuiModal",props:t}),{BackdropComponent:i=IL,BackdropProps:o,classes:s,className:a,closeAfterTransition:l=!1,children:c,container:u,component:d,components:h={},componentsProps:f={},disableAutoFocus:p=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:m=!1,disablePortal:y=!1,disableRestoreFocus:v=!1,disableScrollLock:b=!1,hideBackdrop:_=!1,keepMounted:x=!1,onClose:w,onTransitionEnter:E,onTransitionExited:S,open:T,slotProps:A={},slots:C={},theme:k,...P}=r,R={...r,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:g,disableEscapeKeyDown:m,disablePortal:y,disableRestoreFocus:v,disableScrollLock:b,hideBackdrop:_,keepMounted:x},{getRootProps:I,getBackdropProps:L,getTransitionProps:M,portalRef:O,isTopModal:N,exited:F,hasTransition:D}=kL({...R,rootRef:n}),B={...R,exited:F},U=(e=>{const{open:t,exited:n,classes:r}=e;return jS({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},PL,r)})(B),z={};if(void 0===c.props.tabIndex&&(z.tabIndex="-1"),D){const{onEnter:e,onExited:t}=M();z.onEnter=e,z.onExited=t}const $={slots:{root:h.Root,backdrop:h.Backdrop,...C},slotProps:{...f,...A}},[j,V]=hL("root",{ref:n,elementType:RL,externalForwardedProps:{...$,...P,component:d},getSlotProps:I,ownerState:B,className:$S(a,U?.root,!B.open&&B.exited&&U?.hidden)}),[W,G]=hL("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:$,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:e=>L({...e,onClick:t=>{e?.onClick&&e.onClick(t)}}),className:$S(o?.className,U?.backdrop),ownerState:B});return x||T||D&&!F?(0,Kr.jsx)(dL,{ref:O,container:u,disablePortal:y,children:(0,Kr.jsxs)(j,{...V,children:[!_&&i?(0,Kr.jsx)(W,{...G}):null,(0,Kr.jsx)(uL,{disableEnforceFocus:g,disableAutoFocus:p,disableRestoreFocus:v,isEnabled:N,open:T,children:e.cloneElement(c,z)})]})}):null})),ML=LL;function OL(e){return PP("MuiPaper",e)}RP("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const NL=yP("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})(bP((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),FL=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiPaper"}),r=JI(),{className:i,component:o="div",elevation:s=1,square:a=!1,variant:l="elevation",...c}=n,u={...n,component:o,elevation:s,square:a,variant:l},d=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return jS({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},OL,i)})(u);return(0,Kr.jsx)(NL,{as:o,ownerState:u,className:$S(d.root,i),ref:t,...c,style:{..."elevation"===l&&{"--Paper-shadow":(r.vars||r).shadows[s],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[s]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${GC("#fff",Ik(s))}, ${GC("#fff",Ik(s))})`}},...c.style}})})),DL=FL;function BL(e){return PP("MuiPopover",e)}RP("MuiPopover",["root","paper"]);function UL(e,t){if(!e)return t;function n(e,t){const n={};return Object.keys(t).forEach((r=>{(function(e,t){const n=e.charCodeAt(2);return"o"===e[0]&&"n"===e[1]&&n>=65&&n<=90&&"function"===typeof t})(r,t[r])&&"function"===typeof e[r]&&(n[r]=function(){e[r](...arguments),t[r](...arguments)})})),n}if("function"===typeof e||"function"===typeof t)return r=>{const i="function"===typeof t?t(r):t,o="function"===typeof e?e({...r,...i}):e,s=$S(r?.className,i?.className,o?.className),a=n(o,i);return{...i,...o,...a,...!!s&&{className:s},...i?.style&&o?.style&&{style:{...i.style,...o.style}},...i?.sx&&o?.sx&&{sx:[...Array.isArray(i.sx)?i.sx:[i.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]}}};const r=t,i=n(e,r),o=$S(r?.className,e?.className);return{...t,...e,...i,...!!o&&{className:o},...r?.style&&e?.style&&{style:{...r.style,...e.style}},...r?.sx&&e?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function zL(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function $L(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function jL(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function VL(e){return"function"===typeof e?e():e}const WL=yP(ML,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),GL=yP(DL,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),HL=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:s={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:h=8,marginThreshold:f=16,open:p,PaperProps:g={},slots:m={},slotProps:y={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:b,transitionDuration:_="auto",TransitionProps:x={},disableScrollLock:w=!1,...E}=r,S=e.useRef(),T={...r,anchorOrigin:s,anchorReference:l,elevation:h,marginThreshold:f,transformOrigin:v,TransitionComponent:b,transitionDuration:_,TransitionProps:x},A=(e=>{const{classes:t}=e;return jS({root:["root"],paper:["paper"]},BL,t)})(T),C=e.useCallback((()=>{if("anchorPosition"===l)return a;const e=VL(o),t=(e&&1===e.nodeType?e:uI(S.current).body).getBoundingClientRect();return{top:t.top+zL(t,s.vertical),left:t.left+$L(t,s.horizontal)}}),[o,s.horizontal,s.vertical,a,l]),k=e.useCallback((e=>({vertical:zL(e,v.vertical),horizontal:$L(e,v.horizontal)})),[v.horizontal,v.vertical]),P=e.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=k(t);if("none"===l)return{top:null,left:null,transformOrigin:jL(n)};const r=C();let i=r.top-n.vertical,s=r.left-n.horizontal;const a=i+t.height,c=s+t.width,u=CI(VL(o)),d=u.innerHeight-f,h=u.innerWidth-f;if(null!==f&&i<f){const e=i-f;i-=e,n.vertical+=e}else if(null!==f&&a>d){const e=a-d;i-=e,n.vertical+=e}if(null!==f&&s<f){const e=s-f;s-=e,n.horizontal+=e}else if(c>h){const e=c-h;s-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(s)}px`,transformOrigin:jL(n)}}),[o,l,C,k,f]),[R,I]=e.useState(p),L=e.useCallback((()=>{const e=S.current;if(!e)return;const t=P(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,I(!0)}),[P]);e.useEffect((()=>(w&&window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L))),[o,w,L]);e.useEffect((()=>{p&&L()})),e.useImperativeHandle(i,(()=>p?{updatePosition:()=>{L()}}:null),[p,L]),e.useEffect((()=>{if(!p)return;const e=MI((()=>{L()})),t=CI(VL(o));return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[o,p,L]);let M=_;const O={slots:{transition:b,...m},slotProps:{transition:x,paper:g,...y}},[N,F]=hL("transition",{elementType:sL,externalForwardedProps:O,ownerState:T,getSlotProps:e=>({...e,onEntering:(t,n)=>{e.onEntering?.(t,n),L()},onExited:t=>{e.onExited?.(t),I(!1)}}),additionalProps:{appear:!0,in:p}});"auto"!==_||N.muiSupportAuto||(M=void 0);const D=d||(o?uI(VL(o)).body:void 0),[B,{slots:U,slotProps:z,...$}]=hL("root",{ref:n,elementType:WL,externalForwardedProps:{...O,...E},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:m.backdrop},slotProps:{backdrop:UL("function"===typeof y.backdrop?y.backdrop(T):y.backdrop,{invisible:!0})},container:D,open:p},ownerState:T,className:$S(A.root,u)}),[j,V]=hL("paper",{ref:S,className:A.paper,elementType:GL,externalForwardedProps:O,shouldForwardComponentProp:!0,additionalProps:{elevation:h,style:R?void 0:{opacity:0}},ownerState:T});return(0,Kr.jsx)(B,{...$,...!rR(B)&&{slots:U,slotProps:z,disableScrollLock:w},children:(0,Kr.jsx)(N,{...F,timeout:M,children:(0,Kr.jsx)(j,{...V,children:c})})})}));function XL(e){return PP("MuiMenu",e)}RP("MuiMenu",["root","paper","list"]);const qL={vertical:"top",horizontal:"right"},KL={vertical:"top",horizontal:"left"},YL=yP(HL,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ZL=yP(GL,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),QL=yP(LI,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),JL=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:s,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:d={},PopoverClasses:h,transitionDuration:f="auto",TransitionProps:{onEntering:p,...g}={},variant:m="selectedMenu",slots:y={},slotProps:v={},...b}=r,_=hI(),x={...r,autoFocus:i,disableAutoFocusItem:a,MenuListProps:l,onEntering:p,PaperProps:d,transitionDuration:f,TransitionProps:g,variant:m},w=(e=>{const{classes:t}=e;return jS({root:["root"],paper:["paper"],list:["list"]},XL,t)})(x),E=i&&!a&&u,S=e.useRef(null);let T=-1;e.Children.map(o,((t,n)=>{e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===m&&t.props.selected||-1===T)&&(T=n))}));const A={slots:y,slotProps:{list:l,transition:g,paper:d,...v}},C=bI({elementType:y.root,externalSlotProps:v.root,ownerState:x,className:[w.root,s]}),[k,P]=hL("paper",{className:w.paper,elementType:ZL,externalForwardedProps:A,shouldForwardComponentProp:!0,ownerState:x}),[R,I]=hL("list",{className:$S(w.list,l.className),elementType:QL,shouldForwardComponentProp:!0,externalForwardedProps:A,getSlotProps:e=>({...e,onKeyDown:t=>{(e=>{"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))})(t),e.onKeyDown?.(t)}}),ownerState:x}),L="function"===typeof A.slotProps.transition?A.slotProps.transition(x):A.slotProps.transition;return(0,Kr.jsx)(YL,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?qL:KL,slots:{root:y.root,paper:k,backdrop:y.backdrop,...y.transition&&{transition:y.transition}},slotProps:{root:C,paper:P,backdrop:"function"===typeof v.backdrop?v.backdrop(x):v.backdrop,transition:{...L,onEntering:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];((e,t)=>{S.current&&S.current.adjustStyleForScrollbar(e,{direction:_?"rtl":"ltr"}),p&&p(e,t)})(...t),L?.onEntering?.(...t)}}},open:u,ref:n,transitionDuration:f,ownerState:x,...b,classes:h,children:(0,Kr.jsx)(R,{actions:S,autoFocus:i&&(-1===T||a),autoFocusItem:E,variant:m,...I,children:o})})}));function eM(e){return PP("MuiNativeSelect",e)}const tM=RP("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),nM=yP("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${tM.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),rM=yP(nM,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:gP,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${tM.multiple}`]:t.multiple}]}})({}),iM=yP("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${tM.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),oM=yP(iM,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${SP(n.variant)}`],n.open&&t.iconOpen]}})({}),sM=e.forwardRef((function(t,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard",...c}=t,u={...t,disabled:i,variant:l,error:o},d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e;return jS({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${SP(n)}`,o&&"iconOpen",r&&"disabled"]},eM,t)})(u);return(0,Kr.jsxs)(e.Fragment,{children:[(0,Kr.jsx)(rM,{ownerState:u,className:$S(d.select,r),disabled:i,ref:a||n,...c}),t.multiple?null:(0,Kr.jsx)(oM,{as:s,ownerState:u,className:d.icon})]})}));function aM(t){let{controlled:n,default:r,name:i,state:o="value"}=t;const{current:s}=e.useRef(void 0!==n),[a,l]=e.useState(r);return[s?n:a,e.useCallback((e=>{s||l(e)}),[])]}const lM=aM;function cM(e){return PP("MuiSelect",e)}const uM=RP("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var dM;const hM=yP(nM,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${uM.select}`]:t.select},{[`&.${uM.select}`]:t[n.variant]},{[`&.${uM.error}`]:t.error},{[`&.${uM.multiple}`]:t.multiple}]}})({[`&.${uM.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),fM=yP(iM,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${SP(n.variant)}`],n.open&&t.iconOpen]}})({}),pM=yP("input",{shouldForwardProp:e=>pP(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function gM(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function mM(e){return null==e||"string"===typeof e&&!e.trim()}const yM=e.forwardRef((function(t,n){const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:s,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:h,error:f=!1,IconComponent:p,inputRef:g,labelId:m,MenuProps:y={},multiple:v,name:b,onBlur:_,onChange:x,onClose:w,onFocus:E,onOpen:S,open:T,readOnly:A,renderValue:C,required:k,SelectDisplayProps:P={},tabIndex:R,type:I,value:L,variant:M="standard",...O}=t,[N,F]=lM({controlled:L,default:u,name:"Select"}),[D,B]=lM({controlled:T,default:c,name:"Select"}),U=e.useRef(null),z=e.useRef(null),[$,j]=e.useState(null),{current:V}=e.useRef(null!=T),[W,G]=e.useState(),H=aR(n,g),X=e.useCallback((e=>{z.current=e,e&&j(e)}),[]),q=$?.parentNode;e.useImperativeHandle(H,(()=>({focus:()=>{z.current.focus()},node:U.current,value:N})),[N]),e.useEffect((()=>{c&&D&&$&&!V&&(G(s?null:q.clientWidth),z.current.focus())}),[$,s]),e.useEffect((()=>{o&&z.current.focus()}),[o]),e.useEffect((()=>{if(!m)return;const e=uI(z.current).getElementById(m);if(e){const t=()=>{getSelection().isCollapsed&&z.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[m]);const K=(e,t)=>{e?S&&S(t):w&&w(t),V||(G(s?null:q.clientWidth),B(e))},Y=e.Children.toArray(a),Z=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(v){n=Array.isArray(N)?N.slice():[];const t=N.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),N!==n&&(F(n),x)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:b}}),x(i,e)}v||K(!1,t)}},Q=null!==$&&D;let J,ee;delete O["aria-invalid"];const te=[];let ne=!1,re=!1;(uR({value:N})||h)&&(C?J=C(N):ne=!0);const ie=Y.map((t=>{if(!e.isValidElement(t))return null;let n;if(v){if(!Array.isArray(N))throw new Error(JS(2));n=N.some((e=>gM(e,t.props.value))),n&&ne&&te.push(t.props.children)}else n=gM(N,t.props.value),n&&ne&&(ee=t.props.children);return n&&(re=!0),e.cloneElement(t,{"aria-selected":n?"true":"false",onClick:Z(t),onKeyUp:e=>{" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));ne&&(J=v?0===te.length?null:te.reduce(((e,t,n)=>(e.push(t),n<te.length-1&&e.push(", "),e)),[]):ee);let oe,se=W;!s&&V&&$&&(se=q.clientWidth),oe="undefined"!==typeof R?R:d?null:0;const ae=P.id||(b?`mui-component-select-${b}`:void 0),le={...t,variant:M,value:N,open:Q,error:f},ce=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e;return jS({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${SP(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},cM,t)})(le),ue={...y.PaperProps,...y.slotProps?.paper},de=WP();return(0,Kr.jsxs)(e.Fragment,{children:[(0,Kr.jsx)(hM,{as:"div",ref:X,tabIndex:oe,role:"combobox","aria-controls":Q?de:void 0,"aria-disabled":d?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":k?"true":void 0,"aria-invalid":f?"true":void 0,onKeyDown:e=>{if(!A){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:d||A?null:e=>{0===e.button&&(e.preventDefault(),z.current.focus(),K(!0,e))},onBlur:e=>{!Q&&_&&(Object.defineProperty(e,"target",{writable:!0,value:{value:N,name:b}}),_(e))},onFocus:E,...P,ownerState:le,className:$S(P.className,ce.select,l),id:ae,children:mM(J)?dM||(dM=(0,Kr.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):J}),(0,Kr.jsx)(pM,{"aria-invalid":f,value:Array.isArray(N)?N.join(","):N,name:b,ref:U,"aria-hidden":!0,onChange:e=>{const t=Y.find((t=>t.props.value===e.target.value));void 0!==t&&(F(t.props.value),x&&x(e,t))},tabIndex:-1,disabled:d,className:ce.nativeInput,autoFocus:o,required:k,...O,ownerState:le}),(0,Kr.jsx)(fM,{as:p,className:ce.icon,ownerState:le}),(0,Kr.jsx)(JL,{id:`menu-${b||""}`,anchorEl:q,open:Q,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...y,slotProps:{...y.slotProps,list:{"aria-labelledby":m,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:de,...y.MenuListProps},paper:{...ue,style:{minWidth:se,...null!=ue?ue.style:null}}},children:ie})]})})),vM=yM;function bM(e){return PP("MuiSvgIcon",e)}RP("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _M=yP("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${SP(n.color)}`],t[`fontSize${SP(n.fontSize)}`]]}})(bP((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),xM=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24",...f}=r,p=e.isValidElement(i)&&"svg"===i.type,g={...r,color:s,component:a,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p},m={};u||(m.viewBox=h);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return jS({root:["root","inherit"!==t&&`color${SP(t)}`,`fontSize${SP(n)}`]},bM,r)})(g);return(0,Kr.jsxs)(_M,{as:a,className:$S(y.root,o),focusable:"false",color:c,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:n,...m,...f,...p&&i.props,ownerState:g,children:[p?i.props.children:i,d?(0,Kr.jsx)("title",{children:d}):null]})}));xM.muiName="SvgIcon";const wM=xM;const EM=function(t){function n(e,n){return(0,Kr.jsx)(wM,{"data-testid":void 0,ref:n,...e,children:t})}return n.muiName=wM.muiName,e.memo(e.forwardRef(n))}((0,Kr.jsx)("path",{d:"M7 10l5 5 5-5z"})),SM={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>gP(e)&&"variant"!==e,slot:"Root"},TM=yP(AR,SM)(""),AM=yP(jR,SM)(""),CM=yP(LR,SM)(""),kM=e.forwardRef((function(t,n){const r=EP({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=EM,id:d,input:h,inputProps:f,label:p,labelId:g,MenuProps:m,multiple:y=!1,native:v=!1,onClose:b,onOpen:_,open:x,renderValue:w,SelectDisplayProps:E,variant:S="outlined",...T}=r,A=v?sM:vM,C=iR({props:r,muiFormControl:sR(),states:["variant","error"]}),k=C.variant||S,P={...r,variant:k,classes:s},R=(e=>{const{classes:t}=e,n=jS({root:["root"]},cM,t);return{...t,...n}})(P),{root:I,...L}=R,M=h||{standard:(0,Kr.jsx)(TM,{ownerState:P}),outlined:(0,Kr.jsx)(AM,{label:p,ownerState:P}),filled:(0,Kr.jsx)(CM,{ownerState:P})}[k],O=aR(n,cI(M));return(0,Kr.jsx)(e.Fragment,{children:e.cloneElement(M,{inputComponent:A,inputProps:{children:o,error:C.error,IconComponent:u,variant:k,type:void 0,multiple:y,...v?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:m,onClose:b,onOpen:_,open:x,renderValue:w,SelectDisplayProps:{id:d,...E}},...f,classes:f?HS(L,f.classes):L,...h?h.props.inputProps:{}},...(y&&v||c)&&"outlined"===k?{notched:!0}:{},ref:O,className:$S(M.props.className,a,R.root),...!h&&{variant:k},...T})})}));kM.muiName="Select";const PM=kM;function RM(e){return PP("MuiTextField",e)}RP("MuiTextField",["root"]);const IM={standard:AR,filled:LR,outlined:jR},LM=yP(nI,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),MM=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:f,id:p,InputLabelProps:g,inputProps:m,InputProps:y,inputRef:v,label:b,maxRows:_,minRows:x,multiline:w=!1,name:E,onBlur:S,onChange:T,onFocus:A,placeholder:C,required:k=!1,rows:P,select:R=!1,SelectProps:I,slots:L={},slotProps:M={},type:O,value:N,variant:F="outlined",...D}=n,B={...n,autoFocus:i,color:a,disabled:c,error:u,fullWidth:h,multiline:w,required:k,select:R,variant:F},U=(e=>{const{classes:t}=e;return jS({root:["root"]},RM,t)})(B);const z=WP(p),$=f&&z?`${z}-helper-text`:void 0,j=b&&z?`${z}-label`:void 0,V=IM[F],W={slots:L,slotProps:{input:y,inputLabel:g,htmlInput:m,formHelperText:d,select:I,...M}},G={},H=W.slotProps.inputLabel;"outlined"===F&&(H&&"undefined"!==typeof H.shrink&&(G.notched=H.shrink),G.label=b),R&&(I&&I.native||(G.id=void 0),G["aria-describedby"]=void 0);const[X,q]=hL("root",{elementType:LM,shouldForwardComponentProp:!0,externalForwardedProps:{...W,...D},ownerState:B,className:$S(U.root,s),ref:t,additionalProps:{disabled:c,error:u,fullWidth:h,required:k,color:a,variant:F}}),[K,Y]=hL("input",{elementType:V,externalForwardedProps:W,additionalProps:G,ownerState:B}),[Z,Q]=hL("inputLabel",{elementType:ZR,externalForwardedProps:W,ownerState:B}),[J,ee]=hL("htmlInput",{elementType:"input",externalForwardedProps:W,ownerState:B}),[te,ne]=hL("formHelperText",{elementType:lI,externalForwardedProps:W,ownerState:B}),[re,ie]=hL("select",{elementType:PM,externalForwardedProps:W,ownerState:B}),oe=(0,Kr.jsx)(K,{"aria-describedby":$,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:w,name:E,rows:P,maxRows:_,minRows:x,type:O,value:N,id:z,inputRef:v,onBlur:S,onChange:T,onFocus:A,placeholder:C,inputProps:ee,slots:{input:L.htmlInput?J:void 0},...Y});return(0,Kr.jsxs)(X,{...q,children:[null!=b&&""!==b&&(0,Kr.jsx)(Z,{htmlFor:z,id:j,...Q,children:b}),R?(0,Kr.jsx)(re,{"aria-describedby":$,id:z,labelId:j,value:N,input:oe,...ie,children:o}):oe,f&&(0,Kr.jsx)(te,{id:$,...ne,children:f})]})})),OM=MM,NM=WP;function FM(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}const DM=YP;class BM{static create(){return new BM}static use(){const t=NI(BM.create).current,[n,r]=e.useState(!1);return t.shouldMount=n,t.setShouldMount=r,e.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())};start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.start(...t)))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.stop(...t)))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.pulsate(...t)))}}function UM(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function zM(e,t,n){return null!=n[t]?n[t]:e.props[t]}function $M(t,n,r){var i=UM(t.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(n,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,e.isValidElement)(a)){var l=s in n,c=s in i,u=n[s],d=(0,e.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,e.isValidElement)(u)&&(o[s]=(0,e.cloneElement)(a,{onExited:r.bind(null,a),in:u.props.in,exit:zM(a,"exit",t),enter:zM(a,"enter",t)})):o[s]=(0,e.cloneElement)(a,{in:!1}):o[s]=(0,e.cloneElement)(a,{onExited:r.bind(null,a),in:!0,exit:zM(a,"exit",t),enter:zM(a,"enter",t)})}})),o}var jM=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},VM=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}$I(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,o=n.children,s=n.handleExited;return{children:n.firstRender?(r=t,i=s,UM(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:zM(t,"appear",r),enter:zM(t,"enter",r),exit:zM(t,"exit",r)})}))):$M(t,o,s),firstRender:!1}},r.handleExited=function(e,t){var n=UM(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Kk({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=UI(t,["component","childFactory"]),o=this.state.contextValue,s=jM(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(WI.Provider,{value:o},s):e.createElement(WI.Provider,{value:o},e.createElement(n,i,s))},n}(e.Component);VM.propTypes={},VM.defaultProps={component:"div",childFactory:function(e){return e}};const WM=VM;const GM=function(t){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=t,[d,h]=e.useState(!1),f=$S(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),p={width:a,height:a,top:-a/2+s,left:-a/2+o},g=$S(r.child,d&&r.childLeaving,i&&r.childPulsate);return l||d||h(!0),e.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,Kr.jsx)("span",{className:f,style:p,children:(0,Kr.jsx)("span",{className:g})})};const HM=RP("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),XM=TC`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,qM=TC`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,KM=TC`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,YM=yP("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ZM=yP(GM,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${HM.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${XM};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  &.${HM.ripplePulsate} {
    animation-duration: ${e=>{let{theme:t}=e;return t.transitions.duration.shorter}}ms;
  }

  & .${HM.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${HM.childLeaving} {
    opacity: 0;
    animation-name: ${qM};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  & .${HM.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${KM};
    animation-duration: 2500ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,QM=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s,...a}=r,[l,c]=e.useState([]),u=e.useRef(0),d=e.useRef(null);e.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=e.useRef(!1),f=BI(),p=e.useRef(null),g=e.useRef(null),m=e.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;c((e=>[...e,(0,Kr.jsx)(ZM,{classes:{ripple:$S(o.ripple,HM.ripple),rippleVisible:$S(o.rippleVisible,HM.rippleVisible),ripplePulsate:$S(o.ripplePulsate,HM.ripplePulsate),child:$S(o.child,HM.child),childLeaving:$S(o.childLeaving,HM.childLeaving),childPulsate:$S(o.childPulsate,HM.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=s}),[o]),y=e.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===e?.type&&h.current)return void(h.current=!1);"touchstart"===e?.type&&(h.current=!0);const a=s?null:g.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}e?.touches?null===p.current&&(p.current=()=>{m({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},f.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):m({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,m,f]),v=e.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=e.useCallback(((e,t)=>{if(f.clear(),"touchend"===e?.type&&p.current)return p.current(),p.current=null,void f.start(0,(()=>{b(e,t)}));p.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[f]);return e.useImperativeHandle(n,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,Kr.jsx)(YM,{className:$S(HM.root,o.root,s),ref:g,...a,children:(0,Kr.jsx)(WM,{component:null,exit:!0,children:l})})}));function JM(e){return PP("MuiButtonBase",e)}const eO=RP("MuiButtonBase",["root","disabled","focusVisible"]),tO=yP("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${eO.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),nO=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,focusVisibleClassName:f,LinkComponent:p="a",onBlur:g,onClick:m,onContextMenu:y,onDragLeave:v,onFocus:b,onFocusVisible:_,onKeyDown:x,onKeyUp:w,onMouseDown:E,onMouseLeave:S,onMouseUp:T,onTouchEnd:A,onTouchMove:C,onTouchStart:k,tabIndex:P=0,TouchRippleProps:R,touchRippleRef:I,type:L,...M}=r,O=e.useRef(null),N=BM.use(),F=aR(N.ref,I),[D,B]=e.useState(!1);c&&D&&B(!1),e.useImperativeHandle(i,(()=>({focusVisible:()=>{B(!0),O.current.focus()}})),[]);const U=N.shouldMount&&!u&&!c;e.useEffect((()=>{D&&h&&!u&&N.pulsate()}),[u,h,D,N]);const z=rO(N,"start",E,d),$=rO(N,"stop",y,d),j=rO(N,"stop",v,d),V=rO(N,"stop",T,d),W=rO(N,"stop",(e=>{D&&e.preventDefault(),S&&S(e)}),d),G=rO(N,"start",k,d),H=rO(N,"stop",A,d),X=rO(N,"stop",C,d),q=rO(N,"stop",(e=>{FM(e.target)||B(!1),g&&g(e)}),!1),K=DM((e=>{O.current||(O.current=e.currentTarget),FM(e.target)&&(B(!0),_&&_(e)),b&&b(e)})),Y=()=>{const e=O.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},Z=DM((e=>{h&&!e.repeat&&D&&" "===e.key&&N.stop(e,(()=>{N.start(e)})),e.target===e.currentTarget&&Y()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&Y()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),Q=DM((e=>{h&&" "===e.key&&D&&!e.defaultPrevented&&N.stop(e,(()=>{N.pulsate(e)})),w&&w(e),m&&e.target===e.currentTarget&&Y()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let J=l;"button"===J&&(M.href||M.to)&&(J=p);const ee={};"button"===J?(ee.type=void 0===L?"button":L,ee.disabled=c):(M.href||M.to||(ee.role="button"),c&&(ee["aria-disabled"]=c));const te=aR(n,O),ne={...r,centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:P,focusVisible:D},re=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=jS({root:["root",t&&"disabled",n&&"focusVisible"]},JM,i);return n&&r&&(o.root+=` ${r}`),o})(ne);return(0,Kr.jsxs)(tO,{as:J,className:$S(re.root,a),ownerState:ne,onBlur:q,onClick:m,onContextMenu:$,onFocus:K,onKeyDown:Z,onKeyUp:Q,onMouseDown:z,onMouseLeave:W,onMouseUp:V,onDragLeave:j,onTouchEnd:H,onTouchMove:X,onTouchStart:G,ref:te,tabIndex:c?-1:P,type:L,...ee,...M,children:[s,U?(0,Kr.jsx)(QM,{ref:F,center:o,...R}):null]})}));function rO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return DM((i=>(n&&n(i),r||e[t](i),!0)))}const iO=nO;function oO(e){return PP("MuiCircularProgress",e)}RP("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const sO=44,aO=TC`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,lO=TC`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,cO="string"!==typeof aO?SC`
        animation: ${aO} 1.4s linear infinite;
      `:null,uO="string"!==typeof lO?SC`
        animation: ${lO} 1.4s ease-in-out infinite;
      `:null,dO=yP("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${SP(n.color)}`]]}})(bP((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:cO||{animation:`${aO} 1.4s linear infinite`}},...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),hO=yP("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),fO=yP("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${SP(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(bP((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:uO||{animation:`${lO} 1.4s ease-in-out infinite`}}]}}))),pO=e.forwardRef((function(e,t){const n=EP({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:s=40,style:a,thickness:l=3.6,value:c=0,variant:u="indeterminate",...d}=n,h={...n,color:i,disableShrink:o,size:s,thickness:l,value:c,variant:u},f=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return jS({root:["root",n,`color${SP(r)}`],svg:["svg"],circle:["circle",`circle${SP(n)}`,i&&"circleDisableShrink"]},oO,t)})(h),p={},g={},m={};if("determinate"===u){const e=2*Math.PI*((sO-l)/2);p.strokeDasharray=e.toFixed(3),m["aria-valuenow"]=Math.round(c),p.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,g.transform="rotate(-90deg)"}return(0,Kr.jsx)(dO,{className:$S(f.root,r),style:{width:s,height:s,...g,...a},ownerState:h,ref:t,role:"progressbar",...m,...d,children:(0,Kr.jsx)(hO,{className:f.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,Kr.jsx)(fO,{className:f.circle,style:p,ownerState:h,cx:sO,cy:sO,r:(sO-l)/2,fill:"none",strokeWidth:l})})})})),gO=pO;function mO(e){return PP("MuiButton",e)}const yO=RP("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const vO=e.createContext({});const bO=e.createContext(void 0),_O=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],xO=yP(iO,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${SP(n.color)}`],t[`size${SP(n.size)}`],t[`${n.variant}Size${SP(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(bP((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${yO.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${yO.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${yO.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${yO.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.5)`:GC(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:GC(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:GC(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:GC(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:GC(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${yO.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${yO.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${yO.loading}`]:{color:"transparent"}}}]}}))),wO=yP("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${SP(n.size)}`]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},..._O]}})),EO=yP("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${SP(n.size)}`]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},..._O]}})),SO=yP("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),TO=yP("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(e,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),AO=e.forwardRef((function(t,n){const r=e.useContext(vO),i=e.useContext(bO),o=EP({props:_P(r,t),name:"MuiButton"}),{children:s,color:a="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:f,focusVisibleClassName:p,fullWidth:g=!1,id:m,loading:y=null,loadingIndicator:v,loadingPosition:b="center",size:_="medium",startIcon:x,type:w,variant:E="text",...S}=o,T=NM(m),A=v??(0,Kr.jsx)(gO,{"aria-labelledby":T,color:"inherit",size:16}),C={...o,color:a,component:l,disabled:u,disableElevation:d,disableFocusRipple:h,fullWidth:g,loading:y,loadingIndicator:A,loadingPosition:b,size:_,type:w,variant:E},k=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,loading:s,loadingPosition:a,classes:l}=e,c=jS({root:["root",s&&"loading",o,`${o}${SP(t)}`,`size${SP(i)}`,`${o}Size${SP(i)}`,`color${SP(t)}`,n&&"disableElevation",r&&"fullWidth",s&&`loadingPosition${SP(a)}`],startIcon:["icon","startIcon",`iconSize${SP(i)}`],endIcon:["icon","endIcon",`iconSize${SP(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},mO,l);return{...l,...c}})(C),P=(x||y&&"start"===b)&&(0,Kr.jsx)(wO,{className:k.startIcon,ownerState:C,children:x||(0,Kr.jsx)(TO,{className:k.loadingIconPlaceholder,ownerState:C})}),R=(f||y&&"end"===b)&&(0,Kr.jsx)(EO,{className:k.endIcon,ownerState:C,children:f||(0,Kr.jsx)(TO,{className:k.loadingIconPlaceholder,ownerState:C})}),I=i||"",L="boolean"===typeof y?(0,Kr.jsx)("span",{className:k.loadingWrapper,style:{display:"contents"},children:y&&(0,Kr.jsx)(SO,{className:k.loadingIndicator,ownerState:C,children:A})}):null;return(0,Kr.jsxs)(xO,{ownerState:C,className:$S(r.className,k.root,c,I),component:l,disabled:u||y,focusRipple:!h,focusVisibleClassName:$S(k.focusVisible,p),ref:n,type:w,id:y?T:m,...S,classes:k,children:[P,"end"!==b&&L,s,"end"===b&&L,R]})})),CO=AO;const kO=RP("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const PO=RP("MuiListItemIcon",["root","alignItemsFlexStart"]);const RO=RP("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function IO(e){return PP("MuiMenuItem",e)}const LO=RP("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),MO=yP(iO,{shouldForwardProp:e=>gP(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(bP((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${LO.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:GC(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${LO.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:GC(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${LO.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:GC(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:GC(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${LO.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${LO.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${kO.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${kO.inset}`]:{marginLeft:52},[`& .${RO.root}`]:{marginTop:0,marginBottom:0},[`& .${RO.inset}`]:{paddingLeft:36},[`& .${PO.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${PO.root} svg`]:{fontSize:"1.25rem"}}}]}}))),OO=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h,...f}=r,p=e.useContext(_I),g=e.useMemo((()=>({dense:s||p.dense||!1,disableGutters:l})),[p.dense,s,l]),m=e.useRef(null);lR((()=>{i&&m.current&&m.current.focus()}),[i]);const y={...r,dense:g.dense,divider:a,disableGutters:l},v=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=e,a=jS({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},IO,s);return{...s,...a}})(r),b=aR(m,n);let _;return r.disabled||(_=void 0!==d?d:-1),(0,Kr.jsx)(_I.Provider,{value:g,children:(0,Kr.jsx)(MO,{ref:b,role:u,tabIndex:_,component:o,focusVisibleClassName:$S(v.focusVisible,c),className:$S(v.root,h),...f,ownerState:y,classes:v})})})),NO=OO,FO={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};const DO=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))};function BO(e,t,n,r,i){return 1===n?Math.min(e+t,i):Math.max(e-t,r)}function UO(e,t){return e-t}function zO(e,t){const{index:n}=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null)??{};return n}function $O(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function jO(e,t,n){return 100*(e-t)/(n-t)}function VO(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function WO(e){let{values:t,newValue:n,index:r}=e;const i=t.slice();return i[r]=n,i.sort(UO)}function GO(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;const i=XP(t.current);t.current?.contains(i.activeElement)&&Number(i?.activeElement?.getAttribute("data-index"))===n||t.current?.querySelector(`[type="range"][data-index="${n}"]`).focus(),r&&r(n)}function HO(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&DO(e,t)}const XO={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},qO=e=>e;let KO;function YO(){return void 0===KO&&(KO="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),KO}function ZO(t){const{"aria-labelledby":n,defaultValue:r,disabled:i=!1,disableSwap:o=!1,isRtl:s=!1,marks:a=!1,max:l=100,min:c=0,name:u,onChange:d,onChangeCommitted:h,orientation:f="horizontal",rootRef:p,scale:g=qO,step:m=1,shiftStep:y=10,tabIndex:v,value:b}=t,_=e.useRef(void 0),[x,w]=e.useState(-1),[E,S]=e.useState(-1),[T,A]=e.useState(!1),C=e.useRef(0),k=e.useRef(null),[P,R]=aM({controlled:b,default:r??c,name:"Slider"}),I=d&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:u}}),k.current=t,d(i,t,n)}),L=Array.isArray(P);let M=L?P.slice().sort(UO):[P];M=M.map((e=>null==e?c:BC(e,c,l)));const O=!0===a&&null!==m?[...Array(Math.floor((l-c)/m)+1)].map(((e,t)=>({value:c+m*t}))):a||[],N=O.map((e=>e.value)),[F,D]=e.useState(-1),B=e.useRef(null),U=HP(p,B),z=e=>t=>{const n=Number(t.currentTarget.getAttribute("data-index"));FM(t.target)&&D(n),S(n),e?.onFocus?.(t)},$=e=>t=>{FM(t.target)||D(-1),S(-1),e?.onBlur?.(t)},j=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=M[n],i=N.indexOf(r);let s=t;if(O&&null==m){const e=N[N.length-1];s=s>=e?e:s<=N[0]?N[0]:s<r?N[i-1]:N[i+1]}if(s=BC(s,c,l),L){o&&(s=BC(s,M[n-1]||-1/0,M[n+1]||1/0));const e=s;s=WO({values:M,newValue:s,index:n});let t=n;o||(t=s.indexOf(e)),GO({sliderRef:B,activeIndex:t})}R(s),D(n),I&&!HO(s,P)&&I(e,s,n),h&&h(e,k.current??s)},V=e=>t=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(t.key)){t.preventDefault();const e=Number(t.currentTarget.getAttribute("data-index")),n=M[e];let r=null;if(null!=m){const e=t.shiftKey?y:m;switch(t.key){case"ArrowUp":r=BO(n,e,1,c,l);break;case"ArrowRight":r=BO(n,e,s?-1:1,c,l);break;case"ArrowDown":r=BO(n,e,-1,c,l);break;case"ArrowLeft":r=BO(n,e,s?1:-1,c,l);break;case"PageUp":r=BO(n,y,1,c,l);break;case"PageDown":r=BO(n,y,-1,c,l);break;case"Home":r=c;break;case"End":r=l}}else if(O){const e=N[N.length-1],i=N.indexOf(n),o=[s?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];[s?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"].includes(t.key)?r=0===i?N[0]:N[i-1]:o.includes(t.key)&&(r=i===N.length-1?e:N[i+1])}null!=r&&j(t,r)}e?.onKeyDown?.(t)};KP((()=>{i&&B.current.contains(document.activeElement)&&document.activeElement?.blur()}),[i]),i&&-1!==x&&w(-1),i&&-1!==F&&D(-1);const W=e.useRef(void 0);let G=f;s&&"horizontal"===f&&(G+="-reverse");const H=e=>{let{finger:t,move:n=!1}=e;const{current:r}=B,{width:i,height:s,bottom:a,left:u}=r.getBoundingClientRect();let d,h;if(d=G.startsWith("vertical")?(a-t.y)/s:(t.x-u)/i,G.includes("-reverse")&&(d=1-d),h=function(e,t,n){return(n-t)*e+t}(d,c,l),m)h=VO(h,m,c);else{const e=zO(N,h);h=N[e]}h=BC(h,c,l);let f=0;if(L){f=n?W.current:zO(M,h),o&&(h=BC(h,M[f-1]||-1/0,M[f+1]||1/0));const e=h;h=WO({values:M,newValue:h,index:f}),o&&n||(f=h.indexOf(e),W.current=f)}return{newValue:h,activeIndex:f}},X=YP((e=>{const t=$O(e,_);if(!t)return;if(C.current+=1,"mousemove"===e.type&&0===e.buttons)return void q(e);const{newValue:n,activeIndex:r}=H({finger:t,move:!0});GO({sliderRef:B,activeIndex:r,setActive:w}),R(n),!T&&C.current>2&&A(!0),I&&!HO(n,P)&&I(e,n,r)})),q=YP((e=>{const t=$O(e,_);if(A(!1),!t)return;const{newValue:n}=H({finger:t,move:!0});w(-1),"touchend"===e.type&&S(-1),h&&h(e,k.current??n),_.current=void 0,Y()})),K=YP((e=>{if(i)return;YO()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(_.current=t.identifier);const n=$O(e,_);if(!1!==n){const{newValue:t,activeIndex:r}=H({finger:n});GO({sliderRef:B,activeIndex:r,setActive:w}),R(t),I&&!HO(t,P)&&I(e,t,r)}C.current=0;const r=XP(B.current);r.addEventListener("touchmove",X,{passive:!0}),r.addEventListener("touchend",q,{passive:!0})})),Y=e.useCallback((()=>{const e=XP(B.current);e.removeEventListener("mousemove",X),e.removeEventListener("mouseup",q),e.removeEventListener("touchmove",X),e.removeEventListener("touchend",q)}),[q,X]);e.useEffect((()=>{const{current:e}=B;return e.addEventListener("touchstart",K,{passive:YO()}),()=>{e.removeEventListener("touchstart",K),Y()}}),[Y,K]),e.useEffect((()=>{i&&Y()}),[i,Y]);const Z=jO(L?M[0]:c,c,l),Q=jO(M[M.length-1],c,l)-Z,J=e=>t=>{e.onMouseLeave?.(t),S(-1)};let ee;"vertical"===f&&(ee=s?"vertical-rl":"vertical-lr");return{active:x,axis:G,axisProps:XO,dragging:T,focusedThumbIndex:F,getHiddenInputProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=gI(e),o={onChange:(a=r||{},e=>{a.onChange?.(e),j(e,e.target.valueAsNumber)}),onFocus:z(r||{}),onBlur:$(r||{}),onKeyDown:V(r||{})};var a;const d={...r,...o};return{tabIndex:v,"aria-labelledby":n,"aria-orientation":f,"aria-valuemax":g(l),"aria-valuemin":g(c),name:u,type:"range",min:t.min,max:t.max,step:null===t.step&&t.marks?"any":t.step??void 0,disabled:i,...e,...d,style:{...FO,direction:s?"rtl":"ltr",width:"100%",height:"100%",writingMode:ee}}},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=gI(e),n={onMouseDown:(r=t||{},e=>{if(r.onMouseDown?.(e),i)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const t=$O(e,_);if(!1!==t){const{newValue:n,activeIndex:r}=H({finger:t});GO({sliderRef:B,activeIndex:r,setActive:w}),R(n),I&&!HO(n,P)&&I(e,n,r)}C.current=0;const n=XP(B.current);n.addEventListener("mousemove",X,{passive:!0}),n.addEventListener("mouseup",q)})};var r;const o={...t,...n};return{...e,ref:U,...o}},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=gI(e),n={onMouseOver:(r=t||{},e=>{r.onMouseOver?.(e);const t=Number(e.currentTarget.getAttribute("data-index"));S(t)}),onMouseLeave:J(t||{})};var r;return{...e,...t,...n}},marks:O,open:E,range:L,rootRef:U,trackLeap:Q,trackOffset:Z,values:M,getThumbStyle:e=>({pointerEvents:-1!==x&&x!==e?"none":void 0})}}const QO=e=>!e||!rR(e);function JO(e){return PP("MuiSlider",e)}const eN=RP("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);function tN(e){return e}const nN=yP("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${SP(n.color)}`],"medium"!==n.size&&t[`size${SP(n.size)}`],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})(bP((e=>{let{theme:t}=e;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${eN.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${eN.dragging}`]:{[`& .${eN.thumb}, & .${eN.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}))),rN=yP("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),iN=yP("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(bP((e=>{let{theme:t}=e;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${n}Track`],borderColor:t.vars.palette.Slider[`${n}Track`]}:{backgroundColor:KC(t.palette[n].main,.62),borderColor:KC(t.palette[n].main,.62),...t.applyStyles("dark",{backgroundColor:XC(t.palette[n].main,.5)}),...t.applyStyles("dark",{borderColor:XC(t.palette[n].main,.5)})}}}}))]}}))),oN=yP("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${SP(n.color)}`],"medium"!==n.size&&t[`thumbSize${SP(n.size)}`]]}})(bP((e=>{let{theme:t}=e;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${eN.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(TP()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&:hover, &.${eN.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${GC(t.palette[n].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${eN.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${GC(t.palette[n].main,.16)}`}}}}}))]}}))),sN=yP((function(t){const{children:n,className:r,value:i}=t,o=(e=>{const{open:t}=e;return{offset:$S(t&&eN.valueLabelOpen),circle:eN.valueLabelCircle,label:eN.valueLabelLabel}})(t);return n?e.cloneElement(n,{className:$S(n.props.className)},(0,Kr.jsxs)(e.Fragment,{children:[n.props.children,(0,Kr.jsx)("span",{className:$S(o.offset,r),"aria-hidden":!0,children:(0,Kr.jsx)("span",{className:o.circle,children:(0,Kr.jsx)("span",{className:o.label,children:i})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(bP((e=>{let{theme:t}=e;return{zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${eN.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${eN.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}}))),aN=yP("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>pP(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(bP((e=>{let{theme:t}=e;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}}))),lN=yP("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>pP(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})(bP((e=>{let{theme:t}=e;return{...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}}))),cN=e=>{let{children:t}=e;return t},uN=e.forwardRef((function(t,n){const r=EP({props:t,name:"MuiSlider"}),i=hI(),{"aria-label":o,"aria-valuetext":s,"aria-labelledby":a,component:l="span",components:c={},componentsProps:u={},color:d="primary",classes:h,className:f,disableSwap:p=!1,disabled:g=!1,getAriaLabel:m,getAriaValueText:y,marks:v=!1,max:b=100,min:_=0,name:x,onChange:w,onChangeCommitted:E,orientation:S="horizontal",shiftStep:T=10,size:A="medium",step:C=1,scale:k=tN,slotProps:P,slots:R,tabIndex:I,track:L="normal",value:M,valueLabelDisplay:O="off",valueLabelFormat:N=tN,...F}=r,D={...r,isRtl:i,max:b,min:_,classes:h,disabled:g,disableSwap:p,orientation:S,marks:v,color:d,size:A,step:C,shiftStep:T,scale:k,track:L,valueLabelDisplay:O,valueLabelFormat:N},{axisProps:B,getRootProps:U,getHiddenInputProps:z,getThumbProps:$,open:j,active:V,axis:W,focusedThumbIndex:G,range:H,dragging:X,marks:q,values:K,trackOffset:Y,trackLeap:Z,getThumbStyle:Q}=ZO({...D,rootRef:n});D.marked=q.length>0&&q.some((e=>e.label)),D.dragging=X,D.focusedThumbIndex=G;const J=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:s,color:a,size:l}=e;return jS({root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse",a&&`color${SP(a)}`,l&&`size${SP(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${SP(l)}`,a&&`thumbColor${SP(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},JO,s)})(D),ee=R?.root??c.Root??nN,te=R?.rail??c.Rail??rN,ne=R?.track??c.Track??iN,re=R?.thumb??c.Thumb??oN,ie=R?.valueLabel??c.ValueLabel??sN,oe=R?.mark??c.Mark??aN,se=R?.markLabel??c.MarkLabel??lN,ae=R?.input??c.Input??"input",le=P?.root??u.root,ce=P?.rail??u.rail,ue=P?.track??u.track,de=P?.thumb??u.thumb,he=P?.valueLabel??u.valueLabel,fe=P?.mark??u.mark,pe=P?.markLabel??u.markLabel,ge=P?.input??u.input,me=bI({elementType:ee,getSlotProps:U,externalSlotProps:le,externalForwardedProps:F,additionalProps:{...QO(ee)&&{as:l}},ownerState:{...D,...le?.ownerState},className:[J.root,f]}),ye=bI({elementType:te,externalSlotProps:ce,ownerState:D,className:J.rail}),ve=bI({elementType:ne,externalSlotProps:ue,additionalProps:{style:{...B[W].offset(Y),...B[W].leap(Z)}},ownerState:{...D,...ue?.ownerState},className:J.track}),be=bI({elementType:re,getSlotProps:$,externalSlotProps:de,ownerState:{...D,...de?.ownerState},className:J.thumb}),_e=bI({elementType:ie,externalSlotProps:he,ownerState:{...D,...he?.ownerState},className:J.valueLabel}),xe=bI({elementType:oe,externalSlotProps:fe,ownerState:D,className:J.mark}),we=bI({elementType:se,externalSlotProps:pe,ownerState:D,className:J.markLabel}),Ee=bI({elementType:ae,getSlotProps:z,externalSlotProps:ge,ownerState:D});return(0,Kr.jsxs)(ee,{...me,children:[(0,Kr.jsx)(te,{...ye}),(0,Kr.jsx)(ne,{...ve}),q.filter((e=>e.value>=_&&e.value<=b)).map(((t,n)=>{const r=jO(t.value,_,b),i=B[W].offset(r);let o;return o=!1===L?K.includes(t.value):"normal"===L&&(H?t.value>=K[0]&&t.value<=K[K.length-1]:t.value<=K[0])||"inverted"===L&&(H?t.value<=K[0]||t.value>=K[K.length-1]:t.value>=K[0]),(0,Kr.jsxs)(e.Fragment,{children:[(0,Kr.jsx)(oe,{"data-index":n,...xe,...!rR(oe)&&{markActive:o},style:{...i,...xe.style},className:$S(xe.className,o&&J.markActive)}),null!=t.label?(0,Kr.jsx)(se,{"aria-hidden":!0,"data-index":n,...we,...!rR(se)&&{markLabelActive:o},style:{...i,...we.style},className:$S(J.markLabel,we.className,o&&J.markLabelActive),children:t.label}):null]},n)})),K.map(((e,t)=>{const n=jO(e,_,b),r=B[W].offset(n),i="off"===O?cN:ie;return(0,Kr.jsx)(i,{...!rR(i)&&{valueLabelFormat:N,valueLabelDisplay:O,value:"function"===typeof N?N(k(e),t):N,index:t,open:j===t||V===t||"on"===O,disabled:g},..._e,children:(0,Kr.jsx)(re,{"data-index":t,...be,className:$S(J.thumb,be.className,V===t&&J.active,G===t&&J.focusVisible),style:{...r,...Q(t),...be.style},children:(0,Kr.jsx)(ae,{"data-index":t,"aria-label":m?m(t):o,"aria-valuenow":k(e),"aria-labelledby":a,"aria-valuetext":y?y(k(e),t):s,value:K[t],...Ee})})},t)}))]})})),dN=uN;const hN=new Float32Array(12);function fN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0;for(const r of e)for(let e=0;e<t;e++)hN[n++]=r[e]||0;return hN}class pN{device;model;sampler;currentIndex=0;samplerTextureMap=null;bindings=[];resources={};constructor(e,t){this.device=e,this.sampler=e.createSampler({addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",minFilter:"nearest",magFilter:"nearest",mipmapFilter:"nearest"}),this.model=new zv(this.device,{id:t.id||"texture-transform-model",fs:t.fs||tm({input:t.targetTextureVarying,inputChannels:t.targetTextureChannels,output:"transform_output"}),vertexCount:t.vertexCount,...t}),this._initialize(t),Object.seal(this)}destroy(){this.model.destroy();for(const e of this.bindings)e.framebuffer?.destroy()}delete(){this.destroy()}run(e){const{framebuffer:t}=this.bindings[this.currentIndex],n=this.device.beginRenderPass({framebuffer:t,...e});this.model.draw(n),n.end()}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}_initialize(e){this._updateBindings(e)}_updateBindings(e){this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e)}_updateBinding(e,t){let{sourceBuffers:n,sourceTextures:r,targetTexture:i}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,n),i){e.targetTexture=i;const{width:t,height:n}=i;e.framebuffer&&e.framebuffer.destroy(),e.framebuffer=this.device.createFramebuffer({id:"transform-framebuffer",width:t,height:n,colorAttachments:[i]}),e.framebuffer.resize({width:t,height:n})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const n in t)t[n].sampler=this.sampler}}const gN="uniform triangleUniforms {\n  float aggregationMode;\n  vec2 colorDomain;\n  float intensity;\n  float threshold;\n} triangle;\n",mN={name:"triangle",vs:gN,fs:gN,uniformTypes:{aggregationMode:"f32",colorDomain:"vec2<f32>",intensity:"f32",threshold:"f32"}};class yN extends Jb{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME heatp-map-layer-vertex-shader\nuniform sampler2D maxTexture;\nin vec3 positions;\nin vec2 texCoords;\nout vec2 vTexCoords;\nout float vIntensityMin;\nout float vIntensityMax;\nvoid main(void) {\ngl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));\nvTexCoords = texCoords;\nvec4 maxTexture = texture(maxTexture, vec2(0.5));\nfloat maxValue = triangle.aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;\nfloat minValue = maxValue * triangle.threshold;\nif (triangle.colorDomain[1] > 0.) {\nmaxValue = triangle.colorDomain[1];\nminValue = triangle.colorDomain[0];\n}\nvIntensityMax = triangle.intensity / maxValue;\nvIntensityMin = triangle.intensity / minValue;\n}\n",fs:"#version 300 es\n#define SHADER_NAME triangle-layer-fragment-shader\nprecision highp float;\nuniform sampler2D weightsTexture;\nuniform sampler2D colorTexture;\nin vec2 vTexCoords;\nin float vIntensityMin;\nin float vIntensityMax;\nout vec4 fragColor;\nvec4 getLinearColor(float value) {\nfloat factor = clamp(value * vIntensityMax, 0., 1.);\nvec4 color = texture(colorTexture, vec2(factor, 0.5));\ncolor.a *= min(value * vIntensityMin, 1.0);\nreturn color;\n}\nvoid main(void) {\nvec4 weights = texture(weightsTexture, vTexCoords);\nfloat weight = weights.r;\nif (triangle.aggregationMode > 0.5) {\nweight /= max(1.0, weights.a);\n}\nif (weight <= 0.) {\ndiscard;\n}\nvec4 linearColor = getLinearColor(weight);\nlinearColor.a *= layer.opacity;\nfragColor = linearColor;\n}\n",modules:[h_,mN]})}initializeState(e){let{device:t}=e;this.setState({model:this._getModel(t)})}_getModel(e){const{vertexCount:t,data:n}=this.props;return new zv(e,{...this.getShaders(),id:this.props.id,attributes:n.attributes,bufferLayout:[{name:"positions",format:"float32x3"},{name:"texCoords",format:"float32x2"}],topology:"triangle-strip",vertexCount:t})}draw(){const{model:e}=this.state,{aggregationMode:t,colorDomain:n,intensity:r,threshold:i,colorTexture:o,maxTexture:s,weightsTexture:a}=this.props,l={aggregationMode:t,colorDomain:n,intensity:r,threshold:i,colorTexture:o,maxTexture:s,weightsTexture:a};e.shaderInputs.setProps({triangle:l}),e.draw(this.context.renderPass)}}yN.layerName="TriangleLayer";const vN=yN;function bN(e,t){const n={};for(const r in e)t.includes(r)||(n[r]=e[r]);return n}class _N extends u_{initializeAggregationLayer(e){super.initializeState(this.context),this.setState({ignoreProps:bN(this.constructor._propTypes,e.data.props),dimensions:e})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){const e=this.getShaders({});e&&e.defines&&(e.defines.NON_INSTANCED_MODEL=1),this.updateShaders(e)}this._updateAttributes()}updateAttributes(e){this.setState({changedAttributes:e})}getAttributes(){return this.getAttributeManager().getAttributes()}getModuleSettings(){const{viewport:e,mousePosition:t,device:n}=this.context;return Object.assign(Object.create(this.props),{viewport:e,mousePosition:t,picking:{isActive:0},devicePixelRatio:n.canvasContext.cssToDeviceRatio()})}updateShaders(e){}isAggregationDirty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{props:n,oldProps:r,changeFlags:i}=e,{compareAll:o=!1,dimension:s}=t,{ignoreProps:a}=this.state,{props:l,accessors:c=[]}=s,{updateTriggersChanged:u}=i;if(i.dataChanged)return!0;if(u){if(u.all)return!0;for(const e of c)if(u[e])return!0}if(o)return!!i.extensionsChanged||bb({oldProps:r,newProps:n,ignoreProps:a,propTypes:this.constructor._propTypes});for(const d of l)if(n[d]!==r[d])return!0;return!1}isAttributeChanged(e){const{changedAttributes:t}=this.state;return e?t&&void 0!==t[e]:!function(e){let t=!0;for(const n in e){t=!1;break}return t}(t)}_getAttributeManager(){return new db(this.context.device,{id:this.props.id,stats:this.context.stats})}}_N.layerName="AggregationLayer";const xN=_N;function wN(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(Number.isFinite(e[0]))t=new r(e);else{t=new r(4*e.length);let n=0;for(let r=0;r<e.length;r++){const i=e[r];t[n++]=i[0],t[n++]=i[1],t[n++]=i[2],t[n++]=Number.isFinite(i[3])?i[3]:255}}if(n)for(let i=0;i<t.length;i++)t[i]/=255;return t}const EN="#version 300 es\nin vec3 positions;\nin vec3 positions64Low;\nin float weights;\nout vec4 weightsTexture;\nvoid main()\n{\nweightsTexture = vec4(weights * weight.weightsScale, 0., 0., 1.);\nfloat radiusTexels = project_pixel_size(weight.radiusPixels) * weight.textureWidth / (weight.commonBounds.z - weight.commonBounds.x);\ngl_PointSize = radiusTexels * 2.;\nvec3 commonPosition = project_position(positions, positions64Low);\ngl_Position.xy = (commonPosition.xy - weight.commonBounds.xy) / (weight.commonBounds.zw - weight.commonBounds.xy) ;\ngl_Position.xy = (gl_Position.xy * 2.) - (1.);\ngl_Position.w = 1.0;\n}\n",SN="#version 300 es\nin vec4 weightsTexture;\nout vec4 fragColor;\nfloat gaussianKDE(float u){\nreturn pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);\n}\nvoid main()\n{\nfloat dist = length(gl_PointCoord - vec2(0.5, 0.5));\nif (dist > 0.5) {\ndiscard;\n}\nfragColor = weightsTexture * gaussianKDE(2. * dist);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",TN={name:"weight",vs:"uniform weightUniforms {\n  vec4 commonBounds;\n  float radiusPixels;\n  float textureWidth;\n  float weightsScale;\n} weight;\n",uniformTypes:{commonBounds:"vec4<f32>",radiusPixels:"f32",textureWidth:"f32",weightsScale:"f32"}},AN={name:"maxWeight",vs:"uniform maxWeightUniforms {\n  float textureSize;\n} maxWeight;\n",uniformTypes:{textureSize:"f32"}},CN={format:"rgba8unorm",mipmaps:!1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},kN=[0,0],PN={SUM:0,MEAN:1},RN={getPosition:{type:"accessor",value:e=>e.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},IN=["float32-renderable-webgl","texture-blend-float-webgl"],LN={data:{props:["radiusPixels"]}};class MN extends xN{getShaders(e){let t=[h_];return e.modules&&(t=[...t,...e.modules]),super.getShaders({...e,modules:t})}initializeState(){super.initializeAggregationLayer(LN),this.setState({colorDomain:kN}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState(e){let{changeFlags:t}=e;return t.somethingChanged}updateState(e){super.updateState(e),this._updateHeatmapState(e)}_updateHeatmapState(e){const{props:t,oldProps:n}=e,r=this._getChangeFlags(e);(r.dataChanged||r.viewportChanged)&&(r.boundsChanged=this._updateBounds(r.dataChanged),this._updateTextureRenderingBounds()),r.dataChanged||r.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):r.viewportZoomChanged&&this._debouncedUpdateWeightmap(),t.colorRange!==n.colorRange&&this._updateColorTexture(e),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:e.context.viewport.zoom})}renderLayers(){const{weightsTexture:e,triPositionBuffer:t,triTexCoordBuffer:n,maxWeightsTexture:r,colorTexture:i,colorDomain:o}=this.state,{updateTriggers:s,intensity:a,threshold:l,aggregation:c}=this.props;return new(this.getSubLayerClass("triangle",vN))(this.getSubLayerProps({id:"triangle-layer",updateTriggers:s}),{coordinateSystem:Yc.DEFAULT,data:{attributes:{positions:t,texCoords:n}},vertexCount:4,maxTexture:r,colorTexture:i,aggregationMode:PN[c]||0,weightsTexture:e,intensity:a,threshold:l,colorDomain:o})}finalizeState(e){super.finalizeState(e);const{weightsTransform:t,weightsTexture:n,maxWeightTransform:r,maxWeightsTexture:i,triPositionBuffer:o,triTexCoordBuffer:s,colorTexture:a,updateTimer:l}=this.state;t?.destroy(),n?.destroy(),r?.destroy(),i?.destroy(),o?.destroy(),s?.destroy(),a?.destroy(),l&&clearTimeout(l)}_getAttributeManager(){return new db(this.context.device,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(e){const t={},{dimensions:n}=this.state;t.dataChanged=this.isAttributeChanged()?"attribute changed":this.isAggregationDirty(e,{compareAll:!0,dimension:n.data})&&"aggregation is dirty",t.viewportChanged=e.changeFlags.viewportChanged;const{zoom:r}=this.state;return e.context.viewport&&e.context.viewport.zoom===r||(t.viewportZoomChanged=!0),t}_createTextures(){const{textureSize:e,format:t}=this.state;this.setState({weightsTexture:this.context.device.createTexture({...CN,width:e,height:e,format:t}),maxWeightsTexture:this.context.device.createTexture({...CN,width:1,height:1,format:t})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:"float64",accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{device:e}=this.context,{weightsTextureSize:t}=this.props,n=Math.min(t,e.limits.maxTextureDimension2D),r=IN.every((t=>e.features.has(t))),i=r?"rgba32float":"rgba8unorm",o=r?1:1/255;this.setState({textureSize:n,format:i,weightsScale:o}),r||Po.warn(`HeatmapLayer: ${this.id} rendering to float texture not supported, falling back to low precision format`)()}_createWeightsTransform(e){let{weightsTransform:t}=this.state;const{weightsTexture:n}=this.state,r=this.getAttributeManager();t?.destroy(),t=new pN(this.context.device,{id:`${this.id}-weights-transform`,bufferLayout:r.getBufferLayouts(),vertexCount:1,targetTexture:n,parameters:{depthWriteEnabled:!1,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"},topology:"point-list",...e,modules:[...e.modules,TN]}),this.setState({weightsTransform:t})}_setupResources(){this._createTextures();const{device:e}=this.context,{textureSize:t,weightsTexture:n,maxWeightsTexture:r}=this.state,i=this.getShaders({vs:EN,fs:SN});this._createWeightsTransform(i);const o=this.getShaders({vs:"#version 300 es\nuniform sampler2D inTexture;\nout vec4 outTexture;\nvoid main()\n{\nint yIndex = gl_VertexID / int(maxWeight.textureSize);\nint xIndex = gl_VertexID - (yIndex * int(maxWeight.textureSize));\nvec2 uv = (0.5 + vec2(float(xIndex), float(yIndex))) / maxWeight.textureSize;\noutTexture = texture(inTexture, uv);\ngl_Position = vec4(0.0, 0.0, 0.0, 1.0);\ngl_PointSize = 1.0;\n}\n",fs:"#version 300 es\nin vec4 outTexture;\nout vec4 fragColor;\nvoid main() {\nfragColor = outTexture;\nfragColor.g = outTexture.r / max(1.0, outTexture.a);\n}\n",modules:[AN]}),s=new pN(e,{id:`${this.id}-max-weights-transform`,targetTexture:r,...o,vertexCount:t*t,topology:"point-list",parameters:{depthWriteEnabled:!1,blendColorOperation:"max",blendAlphaOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}}),a={inTexture:n,textureSize:t};s.model.shaderInputs.setProps({maxWeight:a}),this.setState({weightsTexture:n,maxWeightsTexture:r,maxWeightTransform:s,zoom:null,triPositionBuffer:e.createBuffer({byteLength:48}),triTexCoordBuffer:e.createBuffer({byteLength:48})})}updateShaders(e){this._createWeightsTransform({vs:EN,fs:SN,...e})}_updateMaxWeightValue(){const{maxWeightTransform:e}=this.state;e.run({parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]})}_updateBounds(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{viewport:t}=this.context,n=[t.unproject([0,0]),t.unproject([t.width,0]),t.unproject([0,t.height]),t.unproject([t.width,t.height])].map((e=>e.map(Math.fround))),r=function(e){const t=e.map((e=>e[0])),n=e.map((e=>e[1])),r=Math.min.apply(null,t),i=Math.max.apply(null,t);return[r,Math.min.apply(null,n),i,Math.max.apply(null,n)]}(n),i={visibleWorldBounds:r,viewportCorners:n};let o=!1;if(e||!this.state.worldBounds||(s=this.state.worldBounds,!((a=r)[0]>=s[0]&&a[2]<=s[2]&&a[1]>=s[1]&&a[3]<=s[3]))){const e=this._worldToCommonBounds(r),t=this._commonToWorldBounds(e);this.props.coordinateSystem===Yc.LNGLAT&&(t[1]=Math.max(t[1],-85.051129),t[3]=Math.min(t[3],85.051129),t[0]=Math.max(t[0],-360),t[2]=Math.min(t[2],360));const n=this._worldToCommonBounds(t);i.worldBounds=t,i.normalizedCommonBounds=n,o=!0}var s,a;return this.setState(i),o}_updateTextureRenderingBounds(){const{triPositionBuffer:e,triTexCoordBuffer:t,normalizedCommonBounds:n,viewportCorners:r}=this.state,{viewport:i}=this.context;e.write(fN(r,3));const o=r.map((e=>function(e,t){const[n,r,i,o]=t;return[(e[0]-n)/(i-n),(e[1]-r)/(o-r)]}(i.projectPosition(e),n)));t.write(fN(o,2))}_updateColorTexture(e){const{colorRange:t}=e.props;let{colorTexture:n}=this.state;const r=wN(t,!1,Uint8Array);n&&n?.width===t.length?n.setTexture2DData({data:r}):(n?.destroy(),n=this.context.device.createTexture({...CN,data:r,width:t.length,height:1})),this.setState({colorTexture:n})}_updateWeightmap(){const{radiusPixels:e,colorDomain:t,aggregation:n}=this.props,{worldBounds:r,textureSize:i,weightsScale:o,weightsTexture:s}=this.state,a=this.state.weightsTransform;this.state.isWeightMapDirty=!1;const l=this._worldToCommonBounds(r,{useLayerCoordinateSystem:!0});if(t&&"SUM"===n){const{viewport:e}=this.context,n=e.distanceScales.metersPerUnit[2]*(l[2]-l[0])/i;this.state.colorDomain=t.map((e=>e*n*o))}else this.state.colorDomain=t||kN;const c=this.getAttributeManager().getAttributes(),u=this.getModuleSettings();this._setModelAttributes(a.model,c),a.model.setVertexCount(this.getNumInstances());const d={radiusPixels:e,commonBounds:l,textureWidth:i,weightsScale:o,weightsTexture:s},{viewport:h,devicePixelRatio:f,coordinateSystem:p,coordinateOrigin:g}=u,{modelMatrix:m}=this.props;a.model.shaderInputs.setProps({project:{viewport:h,devicePixelRatio:f,modelMatrix:m,coordinateSystem:p,coordinateOrigin:g},weight:d}),a.run({parameters:{viewport:[0,0,i,i]},clearColor:[0,0,0,0]}),this._updateMaxWeightValue()}_debouncedUpdateWeightmap(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{updateTimer:t}=this.state;const{debounceTimeout:n}=this.props;e?(t=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(t),t=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:t})}_worldToCommonBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{useLayerCoordinateSystem:n=!1}=t,[r,i,o,s]=e,{viewport:a}=this.context,{textureSize:l}=this.state,{coordinateSystem:c}=this.props,u=n&&(c===Yc.LNGLAT_OFFSETS||c===Yc.METER_OFFSETS),d=u?a.projectPosition(this.props.coordinateOrigin):[0,0],h=2*l/a.scale;let f,p;return n&&!u?(f=this.projectPosition([r,i,0]),p=this.projectPosition([o,s,0])):(f=a.projectPosition([r,i,0]),p=a.projectPosition([o,s,0])),function(e,t,n){const[r,i,o,s]=e,a=o-r,l=s-i;let c=a,u=l;a/l<t/n?c=t/n*l:u=n/t*a,c<t&&(c=t,u=n);const d=(o+r)/2,h=(s+i)/2;return[d-c/2,h-u/2,d+c/2,h+u/2]}([f[0]-d[0],f[1]-d[1],p[0]-d[0],p[1]-d[1]],h,h)}_commonToWorldBounds(e){const[t,n,r,i]=e,{viewport:o}=this.context,s=o.unprojectPosition([t,n]),a=o.unprojectPosition([r,i]);return s.slice(0,2).concat(a.slice(0,2))}}MN.layerName="HeatmapLayer",MN.defaultProps=RN;const ON=MN,NN=new Uint32Array([0,2,1,0,3,2]),FN=new Float32Array([0,1,0,0,1,0,1,1]);function DN(e,t){if(!t)return function(e){const t=new Float64Array(12);for(let n=0;n<e.length;n++)t[3*n+0]=e[n][0],t[3*n+1]=e[n][1],t[3*n+2]=e[n][2]||0;return{vertexCount:6,positions:t,indices:NN,texCoords:FN}}(e);const n=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),r=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(n/t)+1,o=Math.ceil(r/t)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),c=new Float64Array(i*o*3);let u=0,d=0;for(let h=0;h<i;h++){const t=h/(i-1);for(let n=0;n<o;n++){const r=n/(o-1),i=BN(e,t,r);c[3*u+0]=i[0],c[3*u+1]=i[1],c[3*u+2]=i[2]||0,l[2*u+0]=t,l[2*u+1]=1-r,h>0&&n>0&&(a[d++]=u-o,a[d++]=u-o-1,a[d++]=u-1,a[d++]=u-o,a[d++]=u-1,a[d++]=u),u++}}return{vertexCount:s,positions:c,indices:a,texCoords:l}}function BN(e,t,n){return xa(xa(e[0],e[1],n),xa(e[3],e[2],n),t)}const UN="uniform bitmapUniforms {\n  vec4 bounds;\n  float coordinateConversion;\n  float desaturate;\n  vec3 tintColor;\n  vec4 transparentColor;\n} bitmap;\n",zN={name:"bitmap",vs:UN,fs:UN,uniformTypes:{bounds:"vec4<f32>",coordinateConversion:"f32",desaturate:"f32",tintColor:"vec3<f32>",transparentColor:"vec4<f32>"}},$N={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:Yc.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0,value:null}};class jN extends Jb{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nin vec2 texCoords;\nin vec3 positions;\nin vec3 positions64Low;\n\nout vec2 vTexCoord;\nout vec2 vTexPos;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (bitmap.coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project.commonOrigin.xy;\n  } else if (bitmap.coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nin vec2 vTexCoord;\nin vec2 vTexPos;\n\nout vec4 fragColor;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), bitmap.desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * bitmap.tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (bitmap.transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + bitmap.transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(bitmap.transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bitmap.bounds[0]) / (bitmap.bounds[2] - bitmap.bounds[0]),\n    (pos.y - bitmap.bounds[3]) / (bitmap.bounds[1] - bitmap.bounds[3])\n  );\n}\n\n\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (bitmap.coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (bitmap.coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture(bitmapTexture, uv);\n\n  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * layer.opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  if (bool(picking.isActive) && !bool(picking.isAttribute)) {\n    // Since instance information is not used, we can use picking color for pixel index\n    fragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n",modules:[h_,p_,zN]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const t=!0;e.add({indices:{size:1,isIndexed:!0,update:e=>e.value=this.state.mesh.indices,noAlloc:t},positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:e=>e.value=this.state.mesh.positions,noAlloc:t},texCoords:{size:2,update:e=>e.value=this.state.mesh.texCoords,noAlloc:t}})}updateState(e){let{props:t,oldProps:n,changeFlags:r}=e;const i=this.getAttributeManager();if(r.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),i.invalidateAll()),t.bounds!==n.bounds){const e=this.state.mesh,t=this._createMesh();this.state.model.setVertexCount(t.vertexCount);for(const n in t)e&&e[n]!==t[n]&&i.invalidate(n);this.setState({mesh:t,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:t}=this.props,n=e.info;if(!n.color||!t)return n.bitmap=null,n;const{width:r,height:i}=t;n.index=0;const o=function(e){const[t,n,r]=e;return[(t+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color);return n.bitmap={size:{width:r,height:i},uv:o,pixel:[Math.floor(o[0]*r),Math.floor(o[1]*i)]},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let t=e;return WN(e)&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),DN(t,this.context.viewport.resolution)}_getModel(){return new zv(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1})}draw(e){const{shaderModuleProps:t}=e,{model:n,coordinateConversion:r,bounds:i,disablePicking:o}=this.state,{image:s,desaturate:a,transparentColor:l,tintColor:c}=this.props;if((!t.picking.isActive||!o)&&s&&n){const e={bitmapTexture:s,bounds:i,coordinateConversion:r,desaturate:a,tintColor:c.slice(0,3).map((e=>e/255)),transparentColor:l.map((e=>e/255))};n.shaderInputs.setProps({bitmap:e}),n.draw(this.context.renderPass)}}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:t,DEFAULT:n}=Yc;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!WN(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?e:t;if(r=r===e?e:t,r===e&&i===t)return{coordinateConversion:-1,bounds:n};if(r===t&&i===e){const e=Dl([n[0],n[1]]),t=Dl([n[2],n[3]]);return{coordinateConversion:1,bounds:[e[0],e[1],t[0],t[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}jN.layerName="BitmapLayer",jN.defaultProps=$N;const VN=jN;function WN(e){return Number.isFinite(e[0])}function GN(e){const t=new Date(e);return isNaN(t.getTime())?null:t}function HN(e){return e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit"})}function XN(e,t,n,r,i){return[e+(n-e)*i,t+(r-t)*i]}function qN(e){return"string"!==typeof e?e:parseFloat(e.replace(/\*/g,""))}const KN={latitude:36.28,longitude:-89.42,zoom:5,minZoom:3,maxZoom:7,pitch:0,bearing:0},YN=[[0,0,255,50],[65,105,225,100],[0,191,255,150],[135,206,250,200]],ZN=[[255,69,0,50],[255,0,0,100],[178,34,34,150],[139,0,0,200]];function QN(){const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[o,s]=(0,e.useState)(0),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(null),[g,m]=(0,e.useState)(KN),[y,v]=(0,e.useState)(""),[b,_]=(0,e.useState)(null),x=(0,e.useMemo)((()=>{const e={};for(const n of t)e[n.duckId]||(e[n.duckId]=[]),e[n.duckId].push(n);return Object.keys(e).forEach((t=>{e[t].sort(((e,t)=>e.startTime-t.startTime))})),e}),[t]);(0,e.useEffect)((()=>{l(!0),fetch("/duck-data-web/GNN_prediction_OneWeek(Raw).csv").then((e=>{if(!e.ok)throw new Error(`Failed to fetch CSV data: ${e.status} ${e.statusText}`);return e.text()})).then((e=>{const t=e.trim().split("\n"),r=[];for(let n=1;n<t.length;n++){const e=t[n].trim();if(!e)continue;const i=e.split(",");if(i.length<7){console.warn("Skipping invalid row (not enough columns):",e);continue}const o=i[0],s=i[1],a=i[2],l=qN(i[3]),c=qN(i[4]),u=qN(i[5]),d=qN(i[6]),h=GN(s),f=GN(a);!(o&&h&&f)||isNaN(l)||isNaN(c)||isNaN(u)||isNaN(d)?console.warn("Skipping invalid row:",e):r.push({duckId:o,startTime:h,forecastTime:f,startLat:l,startLon:c,forecastLat:u,forecastLon:d})}r.sort(((e,t)=>e.startTime-t.startTime));let o=1/0,a=-1/0;for(const n of r){const e=n.startTime.getTime(),t=n.forecastTime.getTime();e<o&&(o=e),t<o&&(o=t),e>a&&(a=e),t>a&&(a=t)}const c=[];for(let n=o;n<=a;n+=36e5)c.push(n);n(r),i(c),s(0),l(!1)})).catch((e=>{console.error("Error fetching CSV:",e),u(`Failed to load data: ${e.message}`),l(!1)}))}),[]);const w=(0,e.useMemo)((()=>{const e=new Set;return r.forEach((t=>{const n=new Date(t),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();e.add(r)})),Array.from(e).sort(((e,t)=>e-t))}),[r]),E=(0,e.useMemo)((()=>b?r.filter((e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()===b})):r),[r,b]),S=(0,e.useMemo)((()=>!E.length||o<0||o>=E.length?null:new Date(E[o])),[E,o]);(0,e.useEffect)((()=>{let e;if(d&&E.length>0){const t=()=>{s((e=>{const t=e+1;return t>=E.length?0:t})),e=requestAnimationFrame(t)};e=requestAnimationFrame(t)}return()=>{e&&cancelAnimationFrame(e)}}),[d,E]),(0,e.useEffect)((()=>{o>=E.length&&s(0)}),[E,o]);const{duckStartPositions:T,duckForecastPositions:A}=(0,e.useMemo)((()=>{if(!S)return{duckStartPositions:[],duckForecastPositions:[]};const e=[],t=[];for(const n of Object.keys(x)){const r=x[n];if(!r.length)continue;let i=null;for(let e=0;e<r.length;e++){const t=r[e];if(t.startTime<=S&&S<=t.forecastTime){i=t;break}}if(i||(S<r[0].startTime?i=r[0]:S>r[r.length-1].forecastTime&&(i=r[r.length-1])),!i)continue;const{startTime:o,forecastTime:s,startLat:a,startLon:l,forecastLat:c,forecastLon:u}=i,d=s-o;if(d<=0)e.push({duckId:n,lat:a,lon:l,isSelected:n===f}),t.push({duckId:n,lat:c,lon:u,isSelected:n===f});else{const r=S-o,i=Math.max(0,Math.min(1,r/d)),[s,h]=XN(a,l,c,u,i);e.push({duckId:n,lat:a,lon:l,isSelected:n===f,currentLat:s,currentLon:h}),t.push({duckId:n,lat:c,lon:u,isSelected:n===f,currentLat:s,currentLon:h})}}return{duckStartPositions:e,duckForecastPositions:t}}),[S,x,f]),C=(0,e.useMemo)((()=>T.map((e=>({duckId:e.duckId,lat:e.currentLat||e.lat,lon:e.currentLon||e.lon,isSelected:e.isSelected})))),[T]),k=(0,e.useMemo)((()=>{const e=new US({id:"base-map",data:"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:0,maxZoom:19,tileSize:256,renderSubLayers:e=>{const{bbox:{west:t,south:n,east:r,north:i}}=e.tile;return new VN(e,{data:null,image:e.data,bounds:[t,n,r,i]})}}),t=new ON({id:"duck-forecast-heatmap",data:A,getPosition:e=>[e.lon,e.lat],getWeight:e=>1,radiusPixels:40,colorRange:ZN,intensity:1,threshold:.05,pickable:!0}),n=new ON({id:"duck-start-heatmap",data:T,getPosition:e=>[e.lon,e.lat],getWeight:e=>1,radiusPixels:40,colorRange:YN,intensity:1,threshold:.05,pickable:!0}),r=new O_({id:"duck-scatter",data:C,getPosition:e=>[e.lon,e.lat],getRadius:e=>e.isSelected?180:60,radiusMinPixels:e=>e.isSelected?5:2,radiusMaxPixels:e=>e.isSelected?15:10,getFillColor:e=>e.isSelected?[255,165,0,200]:[0,0,0,150],stroked:!0,getLineColor:e=>e.isSelected?[255,255,255,255]:[255,255,255,0],lineWidthMinPixels:1,pickable:!0,onClick:e=>{e.object&&p(e.object.duckId)}}),i=f&&new hx({id:"duck-labels",data:C.filter((e=>e.duckId===f)),getPosition:e=>[e.lon,e.lat],getText:e=>`Duck ID: ${e.duckId}`,getSize:12,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center",getPixelOffset:[0,-20],getColor:[255,255,255],background:!0,getBorderColor:[0,0,0],getBorderWidth:3,backgroundPadding:[5,3],getBackgroundColor:[0,0,0,200]});return[e,t,n,r,...i?[i]:[]]}),[T,A,C,f]);if(c)return(0,Kr.jsxs)("div",{style:{padding:20,textAlign:"center"},children:[(0,Kr.jsx)(DP,{variant:"h5",color:"error",children:"Error loading duck migration data"}),(0,Kr.jsx)(DP,{children:c})]});const P=S?HN(S):"Loading...";return(0,Kr.jsxs)("div",{style:{position:"relative",width:"100%",height:"600px"},children:[(0,Kr.jsx)(l_,{initialViewState:KN,controller:!0,layers:k,style:{width:"100%",height:"100%"},viewState:g,onViewStateChange:e=>{let{viewState:t}=e;return m(t)},getCursor:e=>{let{isDragging:t}=e;return t?"grabbing":"default"}}),(0,Kr.jsx)("div",{style:{position:"absolute",top:10,left:10,width:"250px",background:"rgba(255,255,255,0.9)",padding:"6px",borderRadius:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"},children:(0,Kr.jsxs)($P,{display:"flex",alignItems:"center",gap:1,children:[(0,Kr.jsx)(OM,{label:"City / Town",size:"small",value:y,onChange:e=>v(e.target.value),sx:{flex:1}}),(0,Kr.jsx)(CO,{variant:"contained",onClick:()=>{const e=y.trim();e&&fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json`).then((e=>e.json())).then((e=>{if(e&&e.length>0){const t=parseFloat(e[0].lat),n=parseFloat(e[0].lon);m((e=>({...e,latitude:t,longitude:n,zoom:12})))}else alert("Location not found!")})).catch((e=>{console.error("Geocode error:",e),alert("Error geocoding location")}))},size:"small",children:"Focus"})]})}),(0,Kr.jsxs)("div",{style:{position:"absolute",bottom:10,left:10,width:"240px",background:"rgba(255,255,255,0.85)",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:999},children:[(0,Kr.jsx)(DP,{variant:"subtitle2",gutterBottom:!0,children:P}),f&&(0,Kr.jsxs)(DP,{variant:"body2",color:"primary",gutterBottom:!0,children:["Tracking Duck ID: ",f]}),(0,Kr.jsxs)(nI,{size:"small",fullWidth:!0,sx:{mb:1},children:[(0,Kr.jsx)(ZR,{id:"day-select-label",children:"Day"}),(0,Kr.jsxs)(PM,{labelId:"day-select-label",label:"Day",value:b||"",onChange:e=>{const t=e.target.value;if("ALL_DAYS"===t)_(null),s(0),h(!1);else{const e=Number(t);_(e),s(0),h(!1)}},children:[(0,Kr.jsx)(NO,{value:"ALL_DAYS",children:"All Days"}),w.map((e=>{return(0,Kr.jsx)(NO,{value:e,children:(t=e,new Date(t).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))},e);var t}))]})]}),(0,Kr.jsxs)($P,{display:"flex",alignItems:"center",mb:1,children:[(0,Kr.jsx)($P,{sx:{width:10,height:10,backgroundColor:"blue",mr:1}}),(0,Kr.jsx)(DP,{variant:"caption",sx:{mr:2},children:"Start"}),(0,Kr.jsx)($P,{sx:{width:10,height:10,backgroundColor:"red",mr:1}}),(0,Kr.jsx)(DP,{variant:"caption",children:"Forecast"})]}),(0,Kr.jsxs)($P,{display:"flex",alignItems:"center",mb:1,children:[(0,Kr.jsx)(CO,{variant:"contained",color:d?"secondary":"primary",onClick:()=>h(!d),size:"small",sx:{mr:1},disabled:a||!E.length,children:d?"Pause":"Play"}),a&&(0,Kr.jsx)(DP,{variant:"body2",color:"textSecondary",children:"Loading..."})]}),(0,Kr.jsx)(dN,{size:"small",min:0,max:Math.max(0,E.length-1),value:o,onChange:(e,t)=>{s(t),d&&h(!1)},step:1,disabled:a||!E.length,valueLabelDisplay:"auto",valueLabelFormat:e=>{if(e<0||e>=E.length)return"";return HN(new Date(E[e]))},sx:{mb:1}}),(0,Kr.jsxs)(DP,{variant:"caption",color:"textSecondary",children:["Tracking ",Object.keys(x).length," ducks"]})]})]})}const JN=function(){const[t,n]=(0,e.useState)(new Date);(0,e.useEffect)((()=>{const e=setInterval((()=>{n(new Date)}),1e3);return()=>clearInterval(e)}),[]);const r=t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),i=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0});return(0,Kr.jsxs)("div",{className:"home-container",children:[(0,Kr.jsx)("section",{className:"nws-info-bar",children:(0,Kr.jsx)("div",{className:"nws-info-content",children:(0,Kr.jsxs)("p",{children:["Current Time: ",r," ",i]})})}),(0,Kr.jsxs)("div",{className:"home-header",children:[(0,Kr.jsx)("h1",{children:"Welcome to the Duck Migration Tracker"}),(0,Kr.jsx)("p",{children:"Explore real-time duck migration patterns and behavior."})]}),(0,Kr.jsx)("section",{className:"key-map-section",children:(0,Kr.jsxs)("div",{className:"key-map-content",children:[(0,Kr.jsx)("h2",{children:"Interactive Migration Map"}),(0,Kr.jsx)("p",{children:"Observe duck migration patterns across North America. Use the map below to explore!"}),(0,Kr.jsx)("div",{className:"map-frame",children:(0,Kr.jsx)(QN,{})})]})}),(0,Kr.jsx)("section",{className:"about-project-section",children:(0,Kr.jsxs)("div",{className:"about-project-content",children:[(0,Kr.jsx)("h2",{children:"About Our Project"}),(0,Kr.jsx)("p",{children:"Learn more about our mission to track and study duck migration. "})]})})]})};function eF(){return(0,Kr.jsxs)("div",{children:[(0,Kr.jsx)("h2",{children:"About Us"}),(0,Kr.jsx)("p",{children:"About Us page."})]})}function tF(){return(0,Kr.jsxs)("div",{children:[(0,Kr.jsx)("h2",{children:"Learn More"}),(0,Kr.jsx)("p",{children:"Learn more page"})]})}const nF=function(){return(0,Kr.jsx)(Ye,{children:(0,Kr.jsxs)("div",{className:"App",children:[" ",(0,Kr.jsx)(ri,{})," ",(0,Kr.jsxs)("main",{className:"content",children:[" ",(0,Kr.jsxs)(me,{children:[(0,Kr.jsx)(pe,{path:"/",element:(0,Kr.jsx)(JN,{})}),(0,Kr.jsx)(pe,{path:"/about",element:(0,Kr.jsx)(eF,{})}),(0,Kr.jsx)(pe,{path:"/learnmore",element:(0,Kr.jsx)(tF,{})})]})]}),(0,Kr.jsxs)("footer",{children:[" ",(0,Kr.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Duck Migration Tracker"]})]})]})})},rF=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};r.createRoot(document.getElementById("root")).render((0,Kr.jsx)(e.StrictMode,{children:(0,Kr.jsx)(nF,{})})),rF()})()})();